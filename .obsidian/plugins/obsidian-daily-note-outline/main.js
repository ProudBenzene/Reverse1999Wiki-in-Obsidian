/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings3() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join2(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    function ensureFolderExists2(path) {
      return __async(this, null, function* () {
        const dirs = path.replace(/\\/g, "/").split("/");
        dirs.pop();
        if (dirs.length) {
          const dir = join2(...dirs);
          if (!window.app.vault.getAbstractFileByPath(dir)) {
            yield window.app.vault.createFolder(dir);
          }
        }
      });
    }
    function getNotePath(directory, filename) {
      return __async(this, null, function* () {
        if (!filename.endsWith(".md")) {
          filename += ".md";
        }
        const path = obsidian.normalizePath(join2(directory, filename));
        yield ensureFolderExists2(path);
        return path;
      });
    }
    function getTemplateInfo(template) {
      return __async(this, null, function* () {
        const { metadataCache, vault } = window.app;
        const templatePath = obsidian.normalizePath(template);
        if (templatePath === "/") {
          return Promise.resolve(["", null]);
        }
        try {
          const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
          const contents = yield vault.cachedRead(templateFile);
          const IFoldInfo = window.app.foldManager.load(templateFile);
          return [contents, IFoldInfo];
        } catch (err) {
          console.error(`Failed to read the daily note template '${templatePath}'`, err);
          new obsidian.Notice("Failed to read the daily note template");
          return ["", null];
        }
      });
    }
    function getDateUID4(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile4(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath2(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings3,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(filename, format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""), false);
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    function createDailyNote3(date) {
      return __async(this, null, function* () {
        const app2 = window.app;
        const { vault } = app2;
        const moment = window.moment;
        const { template, format, folder } = getDailyNoteSettings3();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
          app2.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID4(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings3();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile4(note, "day");
          if (date) {
            const dateString = getDateUID4(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek2() {
      const { moment } = window;
      let weekStart = moment.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue2(dayOfWeekName) {
      return getDaysOfWeek2().indexOf(dayOfWeekName.toLowerCase());
    }
    function createWeeklyNote(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getWeeklyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
            const day = getDayOfWeekNumericalValue2(dayOfWeek);
            return date.weekday(day).format(momentFormat.trim());
          }));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getWeeklyNote(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID4(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes2() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile4(note, "week");
          if (date) {
            const dateString = getDateUID4(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    function createMonthlyNote(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getMonthlyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getMonthlyNote(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID4(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes2() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile4(note, "month");
          if (date) {
            const dateString = getDateUID4(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    function createQuarterlyNote2(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getQuarterlyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getQuarterlyNote(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID4(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes2() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile4(note, "quarter");
          if (date) {
            const dateString = getDateUID4(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    function createYearlyNote2(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getYearlyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getYearlyNote(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID4(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes2() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile4(note, "year");
          if (date) {
            const dateString = getDateUID4(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const dailyNotesPlugin = app2.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      if (app2.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings3,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote3(granularity, date) {
      const createFn = {
        day: createDailyNote3,
        month: createMonthlyNote,
        week: createWeeklyNote
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote3;
    exports.createMonthlyNote = createMonthlyNote;
    exports.createPeriodicNote = createPeriodicNote3;
    exports.createQuarterlyNote = createQuarterlyNote2;
    exports.createWeeklyNote = createWeeklyNote;
    exports.createYearlyNote = createYearlyNote2;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes2;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes2;
    exports.getAllWeeklyNotes = getAllWeeklyNotes2;
    exports.getAllYearlyNotes = getAllYearlyNotes2;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings3;
    exports.getDateFromFile = getDateFromFile4;
    exports.getDateFromPath = getDateFromPath2;
    exports.getDateUID = getDateUID4;
    exports.getMonthlyNote = getMonthlyNote;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// src/main.ts
__export(exports, {
  DAYS_PER_UNIT: () => DAYS_PER_UNIT,
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  FILEINFO_TO_DISPLAY: () => FILEINFO_TO_DISPLAY,
  FILEINFO_TO_DISPLAY_DAY: () => FILEINFO_TO_DISPLAY_DAY,
  GRANULARITY_LIST: () => GRANULARITY_LIST,
  GRANULARITY_TO_PERIODICITY: () => GRANULARITY_TO_PERIODICITY,
  default: () => DailyNoteOutlinePlugin3
});
var import_obsidian11 = __toModule(require("obsidian"));

// src/view.ts
var import_obsidian8 = __toModule(require("obsidian"));
var import_obsidian9 = __toModule(require("obsidian"));
var import_obsidian_daily_notes_interface6 = __toModule(require_main());

// src/drawUI.ts
var import_obsidian5 = __toModule(require("obsidian"));

// src/createAndOpenDailyNote.ts
var import_obsidian_daily_notes_interface = __toModule(require_main());
function createAndOpenDailyNote(granularity, date, allFiles) {
  return __async(this, null, function* () {
    const { workspace } = window.app;
    const createFile = () => __async(this, null, function* () {
      let newNote;
      switch (granularity) {
        case "quarter":
          newNote = yield (0, import_obsidian_daily_notes_interface.createQuarterlyNote)(date);
          break;
        case "year":
          newNote = yield (0, import_obsidian_daily_notes_interface.createYearlyNote)(date);
          break;
        default:
          newNote = yield (0, import_obsidian_daily_notes_interface.createPeriodicNote)(granularity, date);
      }
      yield workspace.getLeaf().openFile(newNote);
    });
    const dailynote = allFiles[(0, import_obsidian_daily_notes_interface.getDateUID)(date, granularity)];
    if (!dailynote) {
      yield createFile();
    } else {
      yield workspace.getLeaf().openFile(dailynote);
    }
  });
}

// src/modalExtract.ts
var import_obsidian = __toModule(require("obsidian"));
var ModalExtract = class extends import_obsidian.Modal {
  constructor(app2, plugin, onSubmit) {
    super(app2);
    this.plugin = plugin;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    this.inputedValue = this.plugin.settings.wordsToExtract;
    const { contentEl } = this;
    contentEl.createEl("br");
    new import_obsidian.Setting(contentEl).setName("Extract by word or phrase:").addText((text) => {
      text.setValue(this.plugin.settings.wordsToExtract).inputEl.select();
      text.onChange((value) => {
        this.inputedValue = value;
      });
    });
    new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Extract").setCta().onClick(() => __async(this, null, function* () {
      this.executeExtract();
    }))).addButton((btn) => btn.setButtonText("Cancel").onClick(() => {
      this.close();
    }));
    this.scope.register([], "Enter", (evt) => {
      this.executeExtract();
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  executeExtract() {
    return __async(this, null, function* () {
      this.close();
      this.plugin.settings.wordsToExtract = this.inputedValue;
      yield this.plugin.saveSettings();
      this.onSubmit(true);
    });
  }
};

// src/createAndOpenPeriodicNote.ts
var import_obsidian2 = __toModule(require("obsidian"));
var import_obsidian_daily_notes_interface2 = __toModule(require_main());
var DEFAULT_NOTE_FORMAT = {
  day: "YYYY-MM-DD",
  week: "gggg-[W]ww",
  month: "YYYY-MM",
  quarter: "YYYY-[Q]Q",
  year: "YYYY"
};
function createAndOpenPeriodicNote(granularity, date, calendarSet) {
  return __async(this, null, function* () {
    const { workspace } = window.app;
    let file = window.app.plugins.getPlugin("periodic-notes").cache.getPeriodicNote(calendarSet.id, granularity, date);
    if (!file) {
      const config = calendarSet[granularity];
      const format = calendarSet[granularity].format;
      const filename = date.format(format ? format : DEFAULT_NOTE_FORMAT[granularity]);
      const templateContents = yield getTemplateContents(window.app, config.templatePath);
      const renderedContents = applyTemplateTransformations(filename, granularity, date, format, templateContents);
      const destPath = yield getNoteCreationPath(window.app, filename, config);
      file = yield window.app.vault.create(destPath, renderedContents);
    }
    yield workspace.getLeaf().openFile(file);
  });
}
function getTemplateContents(app2, templatePath) {
  return __async(this, null, function* () {
    const { metadataCache, vault } = app2;
    const normalizedTemplatePath = (0, import_obsidian2.normalizePath)(templatePath != null ? templatePath : "");
    if (templatePath === "/") {
      return Promise.resolve("");
    }
    try {
      const templateFile = metadataCache.getFirstLinkpathDest(normalizedTemplatePath, "");
      return templateFile ? vault.cachedRead(templateFile) : "";
    } catch (err) {
      console.error(`Failed to read the daily note template '${normalizedTemplatePath}'`, err);
      new import_obsidian2.Notice("Failed to read the daily note template");
      return "";
    }
  });
}
function applyTemplateTransformations(filename, granularity, date, format, rawTemplateContents) {
  let templateContents = rawTemplateContents;
  templateContents = rawTemplateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename);
  if (granularity === "day") {
    templateContents = templateContents.replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const currentDate = date.clone().set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        currentDate.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return currentDate.format(momentFormat.substring(1).trim());
      }
      return currentDate.format(format);
    });
  }
  if (granularity === "week") {
    templateContents = templateContents.replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
      const day = getDayOfWeekNumericalValue(dayOfWeek);
      return date.weekday(day).format(momentFormat.trim());
    });
  }
  if (granularity === "month") {
    templateContents = templateContents.replace(/{{\s*(month)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const monthStart = date.clone().startOf("month").set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        monthStart.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return monthStart.format(momentFormat.substring(1).trim());
      }
      return monthStart.format(format);
    });
  }
  if (granularity === "quarter") {
    templateContents = templateContents.replace(/{{\s*(quarter)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const monthStart = date.clone().startOf("quarter").set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        monthStart.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return monthStart.format(momentFormat.substring(1).trim());
      }
      return monthStart.format(format);
    });
  }
  if (granularity === "year") {
    templateContents = templateContents.replace(/{{\s*(year)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const monthStart = date.clone().startOf("year").set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        monthStart.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return monthStart.format(momentFormat.substring(1).trim());
      }
      return monthStart.format(format);
    });
  }
  return templateContents;
}
function getNoteCreationPath(app2, filename, periodicConfig) {
  return __async(this, null, function* () {
    var _a;
    const directory = (_a = periodicConfig.folder) != null ? _a : "";
    const filenameWithExt = !filename.endsWith(".md") ? `${filename}.md` : filename;
    const path = (0, import_obsidian2.normalizePath)(join(directory, filenameWithExt));
    yield ensureFolderExists(app2, path);
    return path;
  });
}
function join(...partSegments) {
  let parts = [];
  for (let i = 0, l = partSegments.length; i < l; i++) {
    parts = parts.concat(partSegments[i].split("/"));
  }
  const newParts = [];
  for (let i = 0, l = parts.length; i < l; i++) {
    const part = parts[i];
    if (!part || part === ".")
      continue;
    else
      newParts.push(part);
  }
  if (parts[0] === "")
    newParts.unshift("");
  return newParts.join("/");
}
function ensureFolderExists(app2, path) {
  return __async(this, null, function* () {
    const dirs = path.replace(/\\/g, "/").split("/");
    dirs.pop();
    if (dirs.length) {
      const dir = join(...dirs);
      if (!app2.vault.getAbstractFileByPath(dir)) {
        yield app2.vault.createFolder(dir);
      }
    }
  });
}
function getDaysOfWeek() {
  const { moment } = window;
  let weekStart = moment.localeData()._week.dow;
  const daysOfWeek = [
    "sunday",
    "monday",
    "tuesday",
    "wednesday",
    "thursday",
    "friday",
    "saturday"
  ];
  while (weekStart) {
    const day = daysOfWeek.shift();
    if (day)
      daysOfWeek.push(day);
    weekStart--;
  }
  return daysOfWeek;
}
function getDayOfWeekNumericalValue(dayOfWeekName) {
  return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
}
function createDailyNoteForUnresolvedLink(app2, date) {
  return __async(this, null, function* () {
    if (date.isSameOrAfter(window.moment(), "day")) {
      yield (0, import_obsidian_daily_notes_interface2.createPeriodicNote)("day", date);
    } else {
      const { format, folder } = (0, import_obsidian_daily_notes_interface2.getDailyNoteSettings)();
      const filename = date.format(format);
      const filenameWithExt = !filename.endsWith(".md") ? `${filename}.md` : filename;
      const path = (0, import_obsidian2.normalizePath)(join(folder != null ? folder : "", filenameWithExt));
      yield ensureFolderExists(app2, path);
      try {
        yield this.app.vault.create(path, "");
      } catch (e) {
        console.error("Daily Note Outline: Could not create ", path, e.message);
      }
    }
  });
}
function createDailyNoteForUnresolvedLinkPNbeta(app2, date, calendarSet) {
  return __async(this, null, function* () {
    const isTodayOrFuture = Boolean(date.isSameOrAfter(window.moment(), "day"));
    const config = calendarSet.day;
    const format = calendarSet.day.format;
    const filename = date.format(format ? format : DEFAULT_NOTE_FORMAT.day);
    let templateContents = "";
    let renderedContents = "";
    if (isTodayOrFuture) {
      templateContents = yield getTemplateContents(app2, config.templatePath);
      renderedContents = applyTemplateTransformations(filename, "day", date, format, templateContents);
    }
    const destPath = yield getNoteCreationPath(app2, filename, config);
    try {
      yield this.app.vault.create(destPath, renderedContents);
    } catch (e) {
      console.error("Daily Note Outline: Could not create", destPath, e.message);
    }
  });
}

// src/modalJump.ts
var import_obsidian3 = __toModule(require("obsidian"));
var ModalJump = class extends import_obsidian3.Modal {
  constructor(app2, plugin, onSubmit) {
    super(app2);
    this.plugin = plugin;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    this.inputedValue = this.plugin.settings.onset;
    const { contentEl } = this;
    contentEl.createEl("br");
    new import_obsidian3.Setting(contentEl).setName("Enter date to jump(YYYY-MM-DD):").addText((text) => {
      text.setValue(this.plugin.settings.onset).inputEl.select();
      text.onChange((value) => {
        this.inputedValue = value;
      });
    });
    new import_obsidian3.Setting(contentEl).addButton((btn) => btn.setButtonText("Jump").setCta().onClick(() => __async(this, null, function* () {
      this.executeJump();
    }))).addButton((btn) => btn.setButtonText("Cancel").onClick(() => {
      this.close();
    }));
    this.scope.register([], "Enter", (evt) => {
      this.executeJump();
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  executeJump() {
    return __async(this, null, function* () {
      this.close();
      this.onSubmit(this.inputedValue);
    });
  }
};

// src/util.ts
var import_obsidian4 = __toModule(require("obsidian"));
var import_obsidian_daily_notes_interface3 = __toModule(require_main());
function cleanFileFlag(file, settings) {
  if (Object.keys(settings.fileFlag[file.path]).length == 0) {
    delete settings.fileFlag[file.path];
  }
}
function checkFlag(file, flag, settings) {
  var _a;
  return (_a = settings.fileFlag[file.path]) == null ? void 0 : _a[flag];
}
function addFlag(file, flag, settings) {
  if (!settings.fileFlag.hasOwnProperty(file.path)) {
    settings.fileFlag[file.path] = {};
  }
  settings.fileFlag[file.path][flag] = true;
}
function removeFlag(file, flag, settings) {
  delete settings.fileFlag[file.path][flag];
  cleanFileFlag(file, settings);
}
function getSubpathPosition(app2, file, subpath) {
  var _a, _b;
  const cache = app2.metadataCache.getFileCache(file);
  if (!cache) {
    return null;
  }
  const checkpath = subpath.replace(/[#^]/g, "");
  if ((_a = cache.headings) == null ? void 0 : _a.length) {
    const index = cache.headings.findIndex((element) => element.heading.replace(/[#^]/g, "") == checkpath);
    if (index >= 0) {
      return cache.headings[index].position;
    }
  }
  if ((_b = cache.sections) == null ? void 0 : _b.length) {
    const index = cache.sections.findIndex((element) => {
      var _a2;
      return ((_a2 = element.id) == null ? void 0 : _a2.replace(/[#^]/g, "")) == checkpath;
    });
    if (index >= 0) {
      return cache.sections[index].position;
    }
  }
  return null;
}
function checkListCallouts(checkString, callouts) {
  if (!callouts)
    return null;
  for (let i = 0; i < callouts.length; i++) {
    if (checkString.startsWith(callouts[i].char + " ")) {
      return i;
    }
  }
  return null;
}
function checkTimeList(checkString) {
  var _a;
  return (_a = checkString.match(/^[0-9]{2}:[0-9]{2}/)) == null ? void 0 : _a[0];
}
function shouldDisplayListItem(data, settings, calloutsIndex) {
  if (settings.hideCompletedTasks == true && data.task == "x") {
    return false;
  }
  if (settings.showElements.task == true && data.task !== void 0) {
    return true;
  }
  if (settings.showListCallouts == true && data.listCallout) {
    return true;
  }
  if (settings.showTimeList == true && data.time) {
    return true;
  }
  if (!settings.showElements.listItems || data.level == 2 || data.level == 1 && settings.allRootItems == false) {
    return false;
  }
  return true;
}
function searchFirstNote() {
  var _a, _b, _c;
  if (this.verPN != 2) {
    let targetDate = window.moment().startOf("day");
    for (const [key, value] of Object.entries(this.allDailyNotes)) {
      const tempDate = (0, import_obsidian_daily_notes_interface3.getDateFromFile)(value, GRANULARITY_LIST[this.activeGranularity]);
      if (tempDate.isBefore(targetDate)) {
        targetDate = tempDate;
      }
    }
    return targetDate;
  } else {
    let targetDate = window.moment().startOf("day");
    const cache = (_c = (_b = (_a = this.app.plugins.plugins["periodic-notes"]) == null ? void 0 : _a.cache) == null ? void 0 : _b.cachedFiles) == null ? void 0 : _c.get(this.calendarSets[this.activeSet].id);
    cache.forEach((value, key) => {
      var _a2, _b2, _c2;
      if (this.settings.exactMatchOnly && !((_a2 = value.matchData) == null ? void 0 : _a2.exact)) {
        return;
      }
      if (this.settings.markdownOnly && !value.filePath.endsWith(".md")) {
        return;
      }
      if (!value.filePath.startsWith((_b2 = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _b2.folder.concat("/")) && ((_c2 = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _c2.folder.folder)) {
        return;
      }
      if (value.granularity == GRANULARITY_LIST[this.activeGranularity] && value.date.isBefore(targetDate)) {
        targetDate = value.date;
      }
    });
    return targetDate;
  }
}
function checkUnresolvedLinks() {
  return __async(this, null, function* () {
    if (this.verPN === void 0) {
      return;
    }
    const unresolved = this.app.metadataCache.unresolvedLinks;
    const allunresolvedDNLinks = [];
    let createdDN = 0;
    let notice;
    for (const fileName in unresolved) {
      for (const unresolvedLink in unresolved[fileName]) {
        if (!notice && createdDN >= 5) {
          notice = new import_obsidian4.Notice(`Daily Note Outline: created ${createdDN} daily notes for unresolved links`, 0);
        }
        allunresolvedDNLinks.push(unresolvedLink);
        if (this.verPN != 2) {
          const linkedDate = (0, import_obsidian_daily_notes_interface3.getDateFromPath)(unresolvedLink, "day");
          if (!linkedDate) {
            continue;
          }
          yield createDailyNoteForUnresolvedLink(this.app, linkedDate);
          createdDN++;
          if (notice) {
            notice.setMessage(`Daily Note Outline: created ${createdDN} daily notes for unresolved links`);
          }
        } else {
          for (const calendarSet of this.calendarSets) {
            if (!calendarSet.day.enabled) {
              continue;
            }
            const format = calendarSet.day.format;
            const linkedDate = window.moment(unresolvedLink, format, true);
            if (linkedDate.isValid()) {
              yield createDailyNoteForUnresolvedLinkPNbeta(this.app, linkedDate, calendarSet);
              createdDN++;
            }
          }
        }
      }
    }
    if (notice) {
      new import_obsidian4.Notice("Daily Note Outline: created all daily notes for unresolved links");
      notice.hide();
    }
  });
}

// src/drawUI.ts
function drawUI() {
  const navHeader = createDiv("nav-header");
  const navButtonContainer = navHeader.createDiv("nav-buttons-container");
  const granularity = GRANULARITY_LIST[this.activeGranularity];
  uiPreviousPage.call(this, navButtonContainer, granularity);
  uiNextPage.call(this, navButtonContainer, granularity);
  uiReturnHome.call(this, navButtonContainer);
  uiSetting.call(this, navButtonContainer, granularity);
  uiCreateDailyNote.call(this, navButtonContainer, granularity);
  uiExtract.call(this, navButtonContainer);
  uiCollapse.call(this, navButtonContainer);
  const navDateRange = navHeader.createDiv("nav-date-range");
  let latest = this.searchRange.latest.clone();
  let earliest = this.searchRange.earliest.clone();
  earliest = latest.clone().subtract(this.settings.duration[granularity] - 1, granularity);
  if (latest.isSame(window.moment(), "day")) {
    latest = latest.clone().add(Math.ceil(this.settings.offset / DAYS_PER_UNIT[granularity]), granularity);
  }
  const dateRange = earliest.format("YYYY/MM/DD [-] ") + latest.format(earliest.isSame(latest, "year") ? "MM/DD" : "YYYY/MM/DD");
  navDateRange.createDiv("nav-date-range-content").setText(dateRange);
  navDateRange.addEventListener("click", (event) => __async(this, null, function* () {
    const onSubmit = (enteredDate) => {
      const targetDate = window.moment(enteredDate);
      if (targetDate.isValid()) {
        this.searchRange.latest = targetDate;
        this.searchRange.earliest = targetDate.clone().subtract(this.settings.duration.day - 1, "days");
        this.refreshView(false, true, true);
      } else {
        new import_obsidian5.Notice("entered date is invalid.");
      }
    };
    new ModalJump(this.app, this.plugin, onSubmit).open();
  }));
  navDateRange.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian5.Menu();
    menu.addItem((item) => item.setTitle(`Jump to ${this.settings.onset}`).onClick(() => {
      const targetDate = window.moment(this.settings.onset, "YYYY-MM-DD");
      if (targetDate.isValid()) {
        this.searchRange.latest = targetDate;
        this.searchRange.earliest = targetDate.clone().subtract(this.settings.duration.day - 1, "days");
      } else {
        new import_obsidian5.Notice(`${this.settings.onset} is an invalid date.`);
      }
      this.refreshView(false, true, true);
    }));
    menu.addSeparator();
    menu.addItem((item) => item.setTitle("Jump to 3 months ago").onClick(() => {
      this.searchRange.latest.subtract(3, "months");
      this.searchRange.earliest.subtract(3, "months");
      this.refreshView(false, true, true);
    }));
    menu.addItem((item) => item.setTitle("Jump to 6 months ago").onClick(() => {
      this.searchRange.latest.subtract(6, "months");
      this.searchRange.earliest.subtract(6, "months");
      this.refreshView(false, true, true);
    }));
    menu.addItem((item) => item.setTitle("Jump to 1 year ago").onClick(() => {
      this.searchRange.latest.subtract(12, "months");
      this.searchRange.earliest.subtract(12, "months");
      this.refreshView(false, true, true);
    }));
    menu.addItem((item) => item.setTitle("Jump to 2 years ago").onClick(() => {
      this.searchRange.latest.subtract(24, "months");
      this.searchRange.earliest.subtract(24, "months");
      this.refreshView(false, true, true);
    }));
    if (window.moment().subtract(3, "months").isSameOrAfter(this.searchRange.latest)) {
      menu.addSeparator();
      menu.addItem((item) => item.setTitle("Jump to 3 months later").onClick(() => {
        this.searchRange.latest.add(3, "months");
        this.searchRange.earliest.add(3, "months");
        this.refreshView(false, true, true);
      }));
    }
    if (window.moment().subtract(6, "months").isSameOrAfter(this.searchRange.latest)) {
      menu.addItem((item) => item.setTitle("Jump to 6 months later").onClick(() => {
        this.searchRange.latest.add(6, "months");
        this.searchRange.earliest.add(6, "months");
        this.refreshView(false, true, true);
      }));
    }
    if (window.moment().subtract(12, "months").isSameOrAfter(this.searchRange.latest)) {
      menu.addItem((item) => item.setTitle("Jump to 1 year later").onClick(() => {
        this.searchRange.latest.add(12, "months");
        this.searchRange.earliest.add(12, "months");
        this.refreshView(false, true, true);
      }));
    }
    if (window.moment().subtract(24, "months").isSameOrAfter(this.searchRange.latest)) {
      menu.addItem((item) => item.setTitle("Jump to 2 years later").onClick(() => {
        this.searchRange.latest.add(24, "months");
        this.searchRange.earliest.add(24, "months");
        this.refreshView(false, true, true);
      }));
    }
    menu.addSeparator();
    menu.addItem((item) => item.setTitle("Jump to the first note").onClick(() => {
      const targetDate = searchFirstNote.call(this);
      this.searchRange.latest = targetDate;
      this.searchRange.earliest = targetDate.clone().subtract(this.settings.duration.day - 1, "days");
      this.refreshView(false, true, true);
    }));
    menu.showAtMouseEvent(event);
  });
  if (this.settings.periodicNotesEnabled) {
    const navGranularity = navHeader.createDiv("nav-date-range");
    navGranularity.createDiv("nav-date-range-content").setText(GRANULARITY_LIST[this.activeGranularity]);
    navGranularity.addEventListener("click", (evet) => {
      var _a, _b, _c;
      if (this.settings.showDebugInfo) {
        console.log("DNO:clicked to change granularity. verPN, calendarSets:", this.activeGranularity, this.verPN, this.calendarSets);
      }
      const initialGranularity = this.activeGranularity;
      do {
        this.activeGranularity = (this.activeGranularity + 1) % GRANULARITY_LIST.length;
      } while ((this.verPN == 2 && !((_a = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _a.enabled) || this.verPN == 1 && !((_c = (_b = this.app.plugins.getPlugin("periodic-notes").settings) == null ? void 0 : _b[GRANULARITY_TO_PERIODICITY[GRANULARITY_LIST[this.activeGranularity]]]) == null ? void 0 : _c.enabled)) && this.activeGranularity != initialGranularity);
      this.app.workspace.requestSaveLayout();
      this.refreshView(true, true, true);
    });
    navGranularity.addEventListener("contextmenu", (event) => {
      var _a, _b, _c;
      const menu = new import_obsidian5.Menu();
      for (let i = 0; i < GRANULARITY_LIST.length; i++) {
        if (this.verPN == 2 && ((_a = this.calendarSets[this.activeSet][GRANULARITY_LIST[i]]) == null ? void 0 : _a.enabled) || this.verPN == 1 && ((_c = (_b = this.app.plugins.getPlugin("periodic-notes").settings) == null ? void 0 : _b[GRANULARITY_TO_PERIODICITY[GRANULARITY_LIST[i]]]) == null ? void 0 : _c.enabled)) {
          const icon = i == this.activeGranularity ? "check" : "";
          menu.addItem((item) => item.setTitle(GRANULARITY_LIST[i]).setIcon(icon).onClick(() => {
            this.activeGranularity = i;
            this.app.workspace.requestSaveLayout();
            this.refreshView(true, true, true);
          }));
        }
      }
      menu.showAtMouseEvent(event);
    });
  }
  if (this.settings.calendarSetsEnabled) {
    const navCalendarSet = navHeader.createDiv("nav-date-range");
    navCalendarSet.createDiv("nav-date-range-content").setText(this.calendarSets[this.activeSet].id);
    navCalendarSet.addEventListener("click", (evet) => {
      this.activeSet = (this.activeSet + 1) % this.calendarSets.length;
      this.app.workspace.requestSaveLayout();
      this.refreshView(false, true, true);
    });
    navCalendarSet.addEventListener("contextmenu", (event) => {
      const menu = new import_obsidian5.Menu();
      for (let i = 0; i < this.calendarSets.length; i++) {
        const icon = i == this.activeSet ? "check" : "";
        menu.addItem((item) => item.setTitle(this.calendarSets[i].id).setIcon(icon).onClick(() => {
          this.activeSet = i;
          this.app.workspace.requestSaveLayout();
          this.refreshView(false, true, true);
        }));
      }
      menu.showAtMouseEvent(event);
    });
  }
  this.contentEl.empty();
  this.contentEl.appendChild(navHeader);
}
function uiPreviousPage(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "previous notes";
  (0, import_obsidian5.setIcon)(navActionButton, "arrow-left");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.searchRange.latest = this.searchRange.latest.subtract(this.settings.duration[granularity], granularity);
    this.searchRange.earliest = this.searchRange.earliest.subtract(this.settings.duration[granularity], granularity);
    this.refreshView(false, true, true);
  }));
}
function uiNextPage(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "next notes";
  (0, import_obsidian5.setIcon)(navActionButton, "arrow-right");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.searchRange.latest = this.searchRange.latest.add(this.settings.duration[granularity], granularity);
    this.searchRange.earliest = this.searchRange.earliest.add(this.settings.duration[granularity], granularity);
    this.refreshView(false, true, true);
  }));
}
function uiReturnHome(parentEl) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "home";
  (0, import_obsidian5.setIcon)(navActionButton, "home");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.resetSearchRange();
    this.refreshView(false, true, true);
  }));
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian5.Menu();
    menu.addItem((item) => item.setTitle("refresh view").setIcon("refresh-cw").onClick(() => __async(this, null, function* () {
      this.refreshView(true, true, true);
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiSetting(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "open settings";
  (0, import_obsidian5.setIcon)(navActionButton, "settings");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.app.setting.open();
    this.app.setting.openTabById(this.plugin.manifest.id);
  }));
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian5.Menu();
    for (const element in this.settings.showElements) {
      const icon = this.settings.showElements[element] == true ? "check" : "";
      menu.addItem((item) => item.setTitle(`show ${element}`).setIcon(icon).onClick(() => __async(this, null, function* () {
        this.settings.showElements[element] = !this.settings.showElements[element];
        yield this.plugin.saveSettings();
        this.refreshView(false, false, false);
      })));
    }
    const iconBacklink = this.settings.showBacklinks == true ? "check" : "";
    menu.addItem((item) => item.setTitle(`show backlink files`).setIcon(iconBacklink).onClick(() => __async(this, null, function* () {
      this.settings.showBacklinks = !this.settings.showBacklinks;
      yield this.plugin.saveSettings();
      this.refreshView(false, false, false);
    })));
    menu.addSeparator();
    if (granularity == "day") {
      for (let index in FILEINFO_TO_DISPLAY_DAY) {
        const icon = index == this.settings.displayFileInfoDaily ? "check" : "";
        menu.addItem((item) => item.setTitle(FILEINFO_TO_DISPLAY_DAY[index]).setIcon(icon).onClick(() => __async(this, null, function* () {
          this.settings.displayFileInfoDaily = index;
          yield this.plugin.saveSettings();
          this.refreshView(false, false, false);
        })));
      }
    } else {
      for (let index in FILEINFO_TO_DISPLAY) {
        const icon = index == this.settings.displayFileInfoPeriodic ? "check" : "";
        menu.addItem((item) => item.setTitle(FILEINFO_TO_DISPLAY[index]).setIcon(icon).onClick(() => __async(this, null, function* () {
          this.settings.displayFileInfoPeriodic = index;
          yield this.plugin.saveSettings();
          this.refreshView(false, false, false);
        })));
      }
    }
    menu.addSeparator();
    const iconTooltip = this.settings.tooltipPreview ? "check" : "";
    menu.addItem((item) => item.setTitle("show tooltip preview").setIcon(iconTooltip).onClick(() => __async(this, null, function* () {
      this.settings.tooltipPreview = !this.settings.tooltipPreview;
      yield this.plugin.saveSettings();
      this.refreshView(false, false, false);
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiCreateDailyNote(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  let labelForToday = "create/open ";
  let labelForNext = "create/open ";
  if (granularity == "day") {
    labelForToday = labelForToday + "today's ";
    labelForNext = labelForNext + "tomorrow's ";
  } else {
    labelForToday = labelForToday + "present ";
    labelForNext = labelForNext + "next ";
  }
  labelForToday = labelForToday + GRANULARITY_TO_PERIODICITY[granularity] + " note";
  labelForNext = labelForNext + GRANULARITY_TO_PERIODICITY[granularity] + " note";
  if (this.verPN == 2) {
    labelForToday = labelForToday + " for " + this.calendarSets[this.activeSet].id;
    labelForNext = labelForNext + " for " + this.calendarSets[this.activeSet].id;
  }
  navActionButton.ariaLabel = labelForToday;
  (0, import_obsidian5.setIcon)(navActionButton, "calendar-plus");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    event.preventDefault;
    const date = window.moment();
    if (this.verPN == 2) {
      createAndOpenPeriodicNote(granularity, date, this.calendarSets[this.activeSet]);
    } else {
      createAndOpenDailyNote(granularity, date, this.allDailyNotes);
    }
  }));
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian5.Menu();
    menu.addItem((item) => item.setTitle(labelForNext).setIcon("calendar-plus").onClick(() => __async(this, null, function* () {
      const date = window.moment().add(1, granularity);
      if (this.verPN == 2) {
        createAndOpenPeriodicNote(granularity, date, this.calendarSets[this.activeSet]);
      } else {
        createAndOpenDailyNote(granularity, date, this.allDailyNotes);
      }
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiExtract(parentEl) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  if (!this.extractMode) {
    navActionButton.ariaLabel = "extract";
    (0, import_obsidian5.setIcon)(navActionButton, "search");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      event.preventDefault;
      const onSubmit = (enableExtract) => {
        if (enableExtract) {
          this.extractMode = true;
          this.extractType = "normal";
          this.refreshView(false, false, false);
        }
      };
      new ModalExtract(this.app, this.plugin, onSubmit).open();
    }));
  } else {
    navActionButton.ariaLabel = "unextract";
    (0, import_obsidian5.setIcon)(navActionButton, "x-circle");
    navActionButton.classList.add("is-active");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      this.extractMode = false;
      this.extractType = "normal";
      this.refreshView(false, false, false);
    }));
  }
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian5.Menu();
    menu.addItem((item) => item.setTitle("extract tasks").setIcon("check-square").onClick(() => __async(this, null, function* () {
      this.extractMode = true;
      this.extractType = "task";
      this.refreshView(false, false, false);
    })));
    menu.addItem((item) => item.setTitle("extract list callouts").setIcon("lightbulb").onClick(() => __async(this, null, function* () {
      this.extractMode = true;
      this.extractType = "listCallout";
      this.refreshView(false, false, false);
    })));
    menu.addItem((item) => item.setTitle("extract time lists").setIcon("clock").onClick(() => __async(this, null, function* () {
      this.extractMode = true;
      this.extractType = "time";
      this.refreshView(false, false, false);
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiCollapse(parentEl) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  if (this.collapseAll) {
    navActionButton.classList.add("is-active");
  }
  if (!this.collapseAll) {
    navActionButton.ariaLabel = "collapse all";
    (0, import_obsidian5.setIcon)(navActionButton, "chevrons-down-up");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      this.collapseAll = true;
      this.refreshView(false, false, false);
    }));
  } else {
    navActionButton.ariaLabel = "expand";
    (0, import_obsidian5.setIcon)(navActionButton, "chevrons-down-up");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      this.collapseAll = false;
      this.refreshView(false, false, false);
    }));
  }
}

// src/getTargetFiles.ts
var import_obsidian6 = __toModule(require("obsidian"));
var import_obsidian_daily_notes_interface4 = __toModule(require_main());
function getTargetFiles(allFiles, granularity) {
  let files = [];
  let checkDate = this.searchRange.latest.clone();
  let checkDateEarliest = this.searchRange.earliest.clone();
  if (checkDate.isSame(window.moment(), "day")) {
    checkDate.add(Math.ceil(this.settings.offset / DAYS_PER_UNIT[granularity]), granularity);
  }
  checkDateEarliest = this.searchRange.latest.clone().subtract(this.settings.duration[granularity] - 1, granularity);
  while (checkDate.isSameOrAfter(checkDateEarliest, granularity)) {
    if (allFiles[(0, import_obsidian_daily_notes_interface4.getDateUID)(checkDate, granularity)]) {
      files.push(allFiles[(0, import_obsidian_daily_notes_interface4.getDateUID)(checkDate, granularity)]);
    }
    checkDate.subtract(1, granularity);
  }
  return files;
}
function getTargetPeriodicNotes(calendarSet, granularity) {
  var _a;
  let files = [];
  let checkDate = this.searchRange.latest.clone();
  let checkDateEarliest = this.searchRange.earliest.clone();
  if (checkDate.isSame(window.moment(), "day")) {
    checkDate.add(Math.ceil(this.settings.offset / DAYS_PER_UNIT[granularity]), granularity);
  }
  checkDateEarliest = this.searchRange.latest.clone().subtract(this.settings.duration[granularity] - 1, granularity);
  if (this.settings.showDebugInfo) {
    console.log("DNO:searching caches of Periodic Notes... calendar set:", calendarSet);
  }
  while (checkDate.isSameOrAfter(checkDateEarliest, granularity)) {
    const caches = this.app.plugins.getPlugin("periodic-notes").cache.getPeriodicNotes(calendarSet.id, granularity, checkDate);
    for (const file of caches) {
      if (this.settings.exactMatchOnly && !((_a = file == null ? void 0 : file.matchData) == null ? void 0 : _a.exact)) {
        continue;
      }
      if (this.settings.markdownOnly && !(file == null ? void 0 : file.filePath.endsWith(".md"))) {
        continue;
      }
      if (!file.filePath.startsWith(calendarSet[granularity].folder.concat("/")) && calendarSet[granularity].folder) {
        continue;
      }
      const fileobj = this.app.vault.getAbstractFileByPath(file.filePath);
      if (fileobj instanceof import_obsidian6.TFile) {
        files.push(fileobj);
      }
    }
    checkDate.subtract(1, granularity);
  }
  return files;
}
function getBacklinkFiles(app2, file) {
  let files = [];
  let backlinks = app2.metadataCache.getBacklinksForFile(file).data;
  for (const key in backlinks) {
    const fileobj = app2.vault.getAbstractFileByPath(key);
    if (fileobj instanceof import_obsidian6.TFile) {
      files.push(fileobj);
    }
  }
  return files;
}
function getBacklinkFilesDataview(app2, file) {
  var _a, _b, _c, _d, _e;
  let files = [];
  if (!app2.plugins.plugins["dataview"]) {
    return getBacklinkFiles(app2, file);
  }
  let backlinks = (_e = (_d = (_c = (_b = (_a = app2.plugins.plugins) == null ? void 0 : _a.dataview) == null ? void 0 : _b.api) == null ? void 0 : _c.pages(`"${file.path}"`)) == null ? void 0 : _d.values[0]) == null ? void 0 : _e.file.inlinks.values;
  if (!backlinks) {
    return getBacklinkFiles(app2, file);
  }
  for (let i = 0; i < backlinks.length; i++) {
    const fileobj = app2.vault.getAbstractFileByPath(backlinks[i].path);
    if (fileobj instanceof import_obsidian6.TFile) {
      files.push(fileobj);
    }
  }
  return files;
}

// src/getOutline.ts
var import_obsidian_daily_notes_interface5 = __toModule(require_main());
function getFileInfo(files) {
  return __async(this, null, function* () {
    let fileInfo = [];
    for (let i = 0; i < files.length; i++) {
      const content = yield this.app.vault.cachedRead(files[i]);
      const lines = content.split("\n");
      const backlinkFiles = this.settings.showBacklinks ? getBacklinkFilesDataview(this.app, files[i]) : void 0;
      let info = {
        date: (0, import_obsidian_daily_notes_interface5.getDateFromFile)(files[i], GRANULARITY_LIST[this.activeGranularity]),
        lines,
        numOfLines: lines.length,
        isFolded: false,
        backlinks: backlinkFiles,
        frontmatterLinks: void 0
      };
      if (this.verPN == 2) {
        info.date = this.app.plugins.getPlugin("periodic-notes").cache.cachedFiles.get(this.calendarSets[this.activeSet].id).get(files[i].path).date;
      }
      fileInfo.push(info);
    }
    return fileInfo;
  });
}
function getOutline(files, info) {
  return __async(this, null, function* () {
    var _a, _b;
    let data = [];
    for (let i = 0; i < files.length; i++) {
      const cache = this.app.metadataCache.getFileCache(files[i]);
      info[i].frontmatterLinks = cache == null ? void 0 : cache.frontmatterLinks;
      data[i] = [];
      if (!cache) {
        continue;
      }
      if (cache.hasOwnProperty("headings")) {
        for (let j = 0; j < cache.headings.length; j++) {
          const element = {
            typeOfElement: "heading",
            position: cache.headings[j].position,
            displayText: cache.headings[j].heading,
            level: cache.headings[j].level
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("links")) {
        for (let j = 0; j < cache.links.length; j++) {
          const element = {
            typeOfElement: "link",
            position: cache.links[j].position,
            displayText: cache.links[j].displayText == "" ? cache.links[j].original.substring(1, cache.links[j].original.indexOf("]")) : cache.links[j].displayText,
            link: cache.links[j].link
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("embeds")) {
        for (let j = 0; j < cache.embeds.length; j++) {
          const element = {
            typeOfElement: "link",
            position: cache.embeds[j].position,
            displayText: cache.embeds[j].displayText == "" ? cache.embeds[j].original.substring(1, cache.embeds[j].original.indexOf("]")) : cache.embeds[j].displayText,
            link: cache.embeds[j].link
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("listItems")) {
        for (let j = 0; j < cache.listItems.length; j++) {
          let displayText = this.fileInfo[i].lines[cache.listItems[j].position.start.line].replace(/^(\s|\t)*-\s(\[.\]\s)*/, "");
          let listLevel = 0;
          if (cache.listItems[j].parent > 0) {
            listLevel = 2;
          } else if (j > 0) {
            if (!(Math.abs(cache.listItems[j].parent) == cache.listItems[j].position.start.line) && cache.listItems[j].position.start.line - cache.listItems[j - 1].position.start.line == 1) {
              listLevel = 1;
            }
          }
          const listCallout = checkListCallouts(displayText, (_b = (_a = this.app.plugins.plugins) == null ? void 0 : _a["obsidian-list-callouts"]) == null ? void 0 : _b.settings);
          const time = checkTimeList(displayText);
          const element = {
            typeOfElement: "listItems",
            position: cache.listItems[j].position,
            displayText: this.fileInfo[i].lines[cache.listItems[j].position.start.line].replace(/^(\s|\t)*-\s(\[.\]\s)*/, ""),
            level: listLevel,
            task: cache.listItems[j].task,
            listCallout,
            time
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("tags")) {
        for (let j = 0; j < cache.tags.length; j++) {
          const element = {
            typeOfElement: "tag",
            position: cache.tags[j].position,
            displayText: cache.tags[j].tag.substring(1)
          };
          data[i].push(element);
        }
      }
      data[i].sort((a, b) => {
        return a.position.start.offset - b.position.start.offset;
      });
    }
    return data;
  });
}

// src/constructDOM.ts
var import_obsidian7 = __toModule(require("obsidian"));
function drawOutline(files, info, data) {
  var _a, _b, _c, _d, _e, _f, _g, _h;
  const containerEl = createDiv("nav-files-container node-insert-event");
  const rootEl = containerEl.createDiv("tree-item nav-folder mod-root");
  const rootChildrenEl = rootEl.createDiv("tree-item-children nav-folder-children");
  if (files.length == 0) {
    rootChildrenEl.createEl("h4", {
      text: "Daily/periodic note loading error(try clicking on the Home icon)"
    });
  }
  let includeMode = this.settings.includeOnly != "none" && (Boolean(this.settings.wordsToInclude.length) || this.settings.includeBeginning);
  let maxLevel = this.settings.headingLevel.indexOf(true);
  for (let i = 0; i < files.length; i++) {
    let latestHeadingLevel = 0;
    const dailyNoteEl = rootChildrenEl.createDiv("tree-item nav-folder");
    const dailyNoteTitleEl = dailyNoteEl.createDiv("tree-item-self is-clickable mod-collapsible nav-folder-title");
    const dailyNoteChildrenEl = dailyNoteEl.createDiv("tree-item-children nav-folder-children");
    const changeColor = this.settings.noteTitleBackgroundColor;
    if (changeColor != "none") {
      const customColor = this.settings.customNoteTitleBackgroundColor;
      const customColorHover = this.settings.customNoteTitleBackgroundColorHover;
      const theme = Boolean(document.getElementsByTagName("body")[0].classList.contains("theme-light")) ? "light" : "dark";
      dailyNoteTitleEl.style.backgroundColor = customColor[changeColor][theme];
      dailyNoteTitleEl.addEventListener("mouseover", function() {
        this.style.backgroundColor = customColorHover[changeColor][theme];
      });
      dailyNoteTitleEl.addEventListener("mouseout", function() {
        this.style.backgroundColor = customColor[changeColor][theme];
      });
    }
    const noteCollapseIcon = dailyNoteTitleEl.createDiv("tree-item-icon collapse-icon nav-folder-collapse-indicator");
    (0, import_obsidian7.setIcon)(noteCollapseIcon, "right-triangle");
    noteCollapseIcon.addEventListener("click", (event) => __async(this, null, function* () {
      event.stopPropagation();
      if (info[i].isFolded) {
        if (!this.collapseAll) {
          if (checkFlag(files[i], "fold", this.settings)) {
            removeFlag(files[i], "fold", this.settings);
            yield this.plugin.saveSettings();
          }
        }
        dailyNoteEl.classList.remove("is-collapsed");
        noteCollapseIcon.classList.remove("is-collapsed");
        info[i].isFolded = false;
        dailyNoteChildrenEl.style.display = "block";
      } else {
        if (!this.collapseAll) {
          addFlag(files[i], "fold", this.settings);
        }
        yield this.plugin.saveSettings();
        dailyNoteEl.classList.add("is-collapsed");
        noteCollapseIcon.classList.add("is-collapsed");
        info[i].isFolded = true;
        dailyNoteChildrenEl.style.display = "none";
      }
    }));
    let name = files[i].basename;
    if (this.settings.attachWeeklyNotesName && GRANULARITY_LIST[this.activeGranularity] == "week") {
      name = name + " (" + this.fileInfo[i].date.clone().startOf("week").format("MM/DD [-] ") + this.fileInfo[i].date.clone().endOf("week").format("MM/DD") + ")";
    }
    dailyNoteTitleEl.createDiv("tree-item-inner nav-folder-title-content").setText(name);
    const infoToDisplay = this.activeGranularity == 0 ? this.settings.displayFileInfoDaily : this.settings.displayFileInfoPeriodic;
    switch (infoToDisplay) {
      case "lines":
        dailyNoteTitleEl.dataset.subinfo = info[i].numOfLines.toString();
        break;
      case "days":
        let basedate = this.settings.setBaseDateAsHome == false ? window.moment() : window.moment(this.settings.onset);
        dailyNoteTitleEl.dataset.subinfo = Math.abs(info[i].date.diff(basedate.startOf(GRANULARITY_LIST[this.activeGranularity]), GRANULARITY_LIST[this.activeGranularity])).toString();
        break;
      case "dow":
        dailyNoteTitleEl.dataset.subinfo = info[i].date.format("dddd");
        break;
      case "dowshort":
        dailyNoteTitleEl.dataset.subinfo = info[i].date.format("ddd");
        break;
      case "weeknumber":
        dailyNoteTitleEl.dataset.subinfo = info[i].date.format("[w]ww");
        break;
      case "tag":
        let firsttagIndex = data[i].findIndex((element, index) => data[i][index].typeOfElement == "tag");
        if (firsttagIndex >= 0) {
          dailyNoteTitleEl.dataset.subinfo = data[i][firsttagIndex].displayText;
        }
        break;
      case "none":
        break;
      default:
        break;
    }
    dailyNoteTitleEl.addEventListener("click", (event) => __async(this, null, function* () {
      yield this.app.workspace.getLeaf().openFile(files[i]);
    }), false);
    dailyNoteTitleEl.addEventListener("mouseover", (event) => {
      this.app.workspace.trigger("hover-link", {
        event,
        source: DailyNoteOutlineViewType,
        hoverParent: rootEl,
        targetEl: dailyNoteTitleEl,
        linktext: files[i].path
      });
    });
    dailyNoteTitleEl.addEventListener("contextmenu", (event) => {
      const menu = new import_obsidian7.Menu();
      menu.addItem((item) => item.setTitle("Open in new tab").setIcon("file-plus").onClick(() => {
        event.preventDefault();
        this.app.workspace.getLeaf("tab").openFile(files[i]);
      }));
      menu.addItem((item) => item.setTitle("Open to the right").setIcon("separator-vertical").onClick(() => {
        event.preventDefault();
        this.app.workspace.getLeaf("split").openFile(files[i]);
      }));
      menu.addItem((item) => item.setTitle("Open in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
        yield this.app.workspace.openPopoutLeaf({ size: { width: this.settings.popoutSize.width, height: this.settings.popoutSize.height } }).openFile(files[i]);
        if (this.settings.popoutAlwaysOnTop) {
          setPopoutAlwaysOnTop();
        }
      })));
      menu.showAtMouseEvent(event);
    });
    let isIncluded = this.settings.includeBeginning;
    let includeModeHeadingLevel;
    let isExcluded = false;
    let excludeType;
    let excludeModeHeadingLevel;
    let primeType = this.settings.includeOnly == "none" ? this.settings.primeElement : this.settings.includeOnly;
    let isExtracted = false;
    if (this.settings.showPropertyLinks && info[i].frontmatterLinks) {
      for (let j = 0; j < info[i].frontmatterLinks.length; j++) {
        const linkTarget = this.app.metadataCache.getFirstLinkpathDest((0, import_obsidian7.parseLinktext)(info[i].frontmatterLinks[j].link).path, files[i].path);
        if (!(linkTarget instanceof import_obsidian7.TFile)) {
          continue;
        }
        const linkSubpath = (0, import_obsidian7.parseLinktext)(info[i].frontmatterLinks[j].link).subpath;
        if (this.extractMode == true) {
          if (this.extractType == "noraml" && info[i].frontmatterLinks[j].displayText.toLowerCase().includes(this.settings.wordsToExtract.toLowerCase())) {
            isExtracted = true;
          } else {
            continue;
          }
        }
        const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
        const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
        (0, import_obsidian7.setIcon)(outlineTitle, "link");
        outlineTitle.style.paddingLeft = "0.5em";
        outlineTitle.createDiv("tree-item-inner nav-file-title-content").setText(info[i].frontmatterLinks[j].displayText);
        outlineTitle.addEventListener("click", (event) => __async(this, null, function* () {
          yield this.app.workspace.getLeaf().openFile(files[i]);
        }), false);
        outlineTitle.addEventListener("mouseover", (event) => {
          var _a2;
          if (linkTarget) {
            let posInfo = {};
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              if ((_a2 = subpathPosition == null ? void 0 : subpathPosition.start) == null ? void 0 : _a2.line) {
                posInfo = { scroll: subpathPosition.start.line };
              }
            }
            this.app.workspace.trigger("hover-link", {
              event,
              source: DailyNoteOutlineViewType,
              hoverParent: rootEl,
              targetEl: outlineTitle,
              linktext: linkTarget.path,
              state: posInfo
            });
          }
        });
        outlineTitle.addEventListener("contextmenu", (event) => {
          const menu = new import_obsidian7.Menu();
          menu.addItem((item) => item.setTitle("Extract").setIcon("search").onClick(() => __async(this, null, function* () {
            this.plugin.settings.wordsToExtract = info[i].frontmatterLinks[j].displayText;
            yield this.plugin.saveSettings();
            this.extractMode = true;
            this.extractType = "normal";
            this.refreshView(false, false);
          })));
          menu.addSeparator();
          menu.addItem((item) => item.setTitle("Open linked file").setIcon("links-going-out").onClick(() => __async(this, null, function* () {
            var _a2;
            yield this.app.workspace.getLeaf().openFile(linkTarget);
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
            }
          })));
          menu.addSeparator();
          menu.addItem((item) => item.setTitle("Open linked file in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
            var _a2;
            yield this.app.workspace.getLeaf("tab").openFile(linkTarget);
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
            }
          })));
          menu.addItem((item) => item.setTitle("Open linked file to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
            var _a2;
            yield this.app.workspace.getLeaf("split").openFile(linkTarget);
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
            }
          })));
          menu.addItem((item) => item.setTitle("Open linked file in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
            var _a2;
            yield this.app.workspace.openPopoutLeaf({ size: { width: this.settings.popoutSize.width, height: this.settings.popoutSize.height } }).openFile(linkTarget);
            if (linkSubpath) {
              const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
              scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
            }
            if (this.settings.popoutAlwaysOnTop) {
              setPopoutAlwaysOnTop();
            }
          })));
          menu.addSeparator();
          menu.addItem((item) => item.setTitle("Open in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
            yield this.app.workspace.getLeaf("tab").openFile(files[i]);
          })));
          menu.addItem((item) => item.setTitle("Open to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
            yield this.app.workspace.getLeaf("split").openFile(files[i]);
          })));
          menu.addItem((item) => item.setTitle("Open in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
            yield this.app.workspace.getLeaf("window").openFile(files[i]);
          })));
          menu.showAtMouseEvent(event);
        });
      }
    }
    if (data[i].length > 0) {
      elementloop:
        for (let j = 0; j < data[i].length; j++) {
          const element = data[i][j].typeOfElement;
          let displayText = data[i][j].displayText;
          const linkTarget = element !== "link" ? null : this.app.metadataCache.getFirstLinkpathDest((0, import_obsidian7.parseLinktext)((_a = data[i][j]) == null ? void 0 : _a.link).path, files[i].path);
          const linkSubpath = !linkTarget ? void 0 : (0, import_obsidian7.parseLinktext)((_b = data[i][j]) == null ? void 0 : _b.link).subpath;
          if (includeMode && this.settings.includeOnly == element) {
            if (isIncluded == true && element == "heading" && data[i][j].level > includeModeHeadingLevel) {
            } else {
              isIncluded = false;
              for (const value of this.settings.wordsToInclude) {
                if (value && displayText.includes(value)) {
                  isIncluded = true;
                  if (element == "heading") {
                    includeModeHeadingLevel = data[i][j].level;
                  }
                }
              }
            }
          }
          if (!isIncluded) {
            continue;
          }
          if (!isExcluded || isExcluded && (excludeType == element || primeType == element)) {
            if (element == "heading" && data[i][j].level > excludeModeHeadingLevel) {
            } else {
              isExcluded = false;
              for (const value of this.settings.wordsToExclude[element]) {
                if (value && displayText.includes(value)) {
                  isExcluded = true;
                  excludeType = element;
                  if (element == "heading") {
                    excludeModeHeadingLevel = data[i][j].level;
                  }
                }
              }
            }
          }
          if (isExcluded) {
            continue;
          }
          if (!data[i][j].task && this.settings.showElements[element] == false) {
            continue;
          } else if (data[i][j].task && !this.settings.showElements.task) {
            continue;
          }
          for (const value of this.settings.wordsToIgnore[element]) {
            if (value && displayText.includes(value)) {
              continue elementloop;
            }
          }
          if (this.extractMode == true) {
            if (this.extractType == "normal" && displayText.toLowerCase().includes(this.settings.wordsToExtract.toLowerCase())) {
              isExtracted = true;
            } else if (this.extractType == "task" && data[i][j].task !== void 0) {
              isExtracted = true;
            } else if (this.extractType == "listCallout" && typeof data[i][j].listCallout == "number") {
              isExtracted = true;
            } else if (this.extractType == "time" && data[i][j].time) {
              isExtracted = true;
            } else {
              continue;
            }
          }
          if (element == "heading") {
            latestHeadingLevel = data[i][j].level;
            if (!this.settings.headingLevel[data[i][j].level - 1]) {
              continue;
            }
          }
          if (element == "link") {
          }
          if (element == "tag") {
          }
          let calloutsIndex = void 0;
          if (element == "listItems") {
            if (shouldDisplayListItem(data[i][j], this.settings, calloutsIndex) == false) {
              continue;
            }
          }
          const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
          const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
          switch (this.settings.icon[element]) {
            case "none":
              break;
            case "headingwithnumber":
              (0, import_obsidian7.setIcon)(outlineTitle, `heading-${data[i][j].level}`);
              break;
            case "custom":
              (0, import_obsidian7.setIcon)(outlineTitle, this.settings.customIcon[element]);
              break;
            default:
              (0, import_obsidian7.setIcon)(outlineTitle, this.settings.icon[element]);
              break;
          }
          if (element == "listItems") {
            if (data[i][j].task !== void 0) {
              if (data[i][j].task == "x") {
                (0, import_obsidian7.setIcon)(outlineTitle, this.settings.icon.taskDone == "custom" ? this.settings.customIcon.taskDone : this.settings.icon.taskDone);
              } else {
                (0, import_obsidian7.setIcon)(outlineTitle, this.settings.icon.task == "custom" ? this.settings.customIcon.task : this.settings.icon.task);
              }
              const customStatus = Object.keys(this.settings.taskIcon).find((customStatus2) => this.settings.taskIcon[customStatus2].symbol === data[i][j].task);
              if (customStatus) {
                (0, import_obsidian7.setIcon)(outlineTitle, this.settings.taskIcon[customStatus].icon);
              }
            }
            let calloutsIndex2 = (_c = data[i][j]) == null ? void 0 : _c.listCallout;
            if (typeof calloutsIndex2 == "number") {
              outlineTitle.style.backgroundColor = `RGBA(${this.app.plugins.plugins["obsidian-list-callouts"].settings[calloutsIndex2].color},0.15)`;
              if (this.app.plugins.plugins["obsidian-list-callouts"].settings[calloutsIndex2].hasOwnProperty("icon") && data[i][j].task === void 0) {
                (0, import_obsidian7.setIcon)(outlineTitle, this.app.plugins.plugins["obsidian-list-callouts"].settings[calloutsIndex2].icon);
                displayText = displayText.replace(/^\S+\s/, "");
              }
            }
            if ((_d = data[i][j]) == null ? void 0 : _d.time) {
              if (data[i][j].task === void 0) {
                (0, import_obsidian7.setIcon)(outlineTitle, this.settings.icon.time == "custom" ? this.settings.customIcon.time : this.settings.icon.time);
              }
            }
          }
          let prefix = this.settings.prefix[element];
          if (element == "heading") {
            switch (this.settings.repeatHeadingPrefix) {
              case "level":
                prefix = prefix.repeat(data[i][j].level);
                break;
              case "levelminus1":
                prefix = prefix.repeat(data[i][j].level - 1);
                break;
            }
          }
          if (element == "listItems" && data[i][j].time) {
            prefix = this.settings.prefix.time;
          }
          let indent = 0.5;
          if (element == "heading" && this.settings.indent.heading == true) {
            indent = indent + (data[i][j].level - (maxLevel + 1)) * 1.5;
          }
          if (element != "heading" && this.settings.indentFollowHeading) {
            const additionalIndent = (latestHeadingLevel - (maxLevel + 1) + (this.settings.indentFollowHeading == 2 ? 1 : 0)) * 1.5;
            indent = indent + (additionalIndent > 0 ? additionalIndent : 0);
          }
          if (element == "link" && data[i][j].position.start.line == ((_e = data[i][j - 1]) == null ? void 0 : _e.position.start.line)) {
            indent = indent + 1.5;
          }
          outlineTitle.style.paddingLeft = `${indent}em`;
          if (element == "listItems" && data[i][j].task !== void 0) {
            prefix = data[i][j].task == "x" ? this.settings.prefix.taskDone : this.settings.prefix.task;
            if (this.settings.addCheckboxText) {
              prefix = prefix + "[" + data[i][j].task + "] ";
            }
          }
          displayText = this.stripMarkdownSymbol(displayText);
          const outlineTitleContent = outlineTitle.createDiv("tree-item-inner nav-file-title-content");
          outlineTitleContent.setText(prefix + displayText);
          if (this.settings.wrapLine) {
            outlineTitleContent.classList.add("wrap-line");
          }
          if (this.settings.inlinePreview) {
            let previewText = "";
            if ((element == "link" || element == "tag") && data[i][j].position.end.col < info[i].lines[data[i][j].position.start.line].length) {
              previewText = info[i].lines[data[i][j].position.start.line].slice(data[i][j].position.end.col);
            } else {
              previewText = data[i][j].position.start.line < info[i].numOfLines - 1 ? info[i].lines[data[i][j].position.start.line + 1] : "";
            }
            outlineTitle.createDiv("nav-file-title-preview").setText(previewText);
          }
          if (this.settings.tooltipPreview) {
            let previewText2 = "";
            let endLine = info[i].numOfLines - 1;
            let k = j + 1;
            endpreviewloop:
              while (k < data[i].length) {
                if (this.settings.showElements[data[i][k].typeOfElement]) {
                  if (data[i][k].typeOfElement == "listItems" && (data[i][k].level >= 2 || this.settings.allRootItems == false && data[i][k].level == 1 && (this.settings.allTasks == false || data[i][k].task === void 0) || this.settings.taskOnly && data[i][k].task === void 0 || this.settings.hideCompletedTasks && data[i][k].task == "x")) {
                    k++;
                    continue;
                  } else if (data[i][k].typeOfElement == "heading" && this.settings.headingLevel[data[i][k].level - 1] == false) {
                    k++;
                    continue;
                  } else {
                    for (const value of this.settings.wordsToIgnore[data[i][k].typeOfElement]) {
                      if (value && data[i][k].displayText.includes(value)) {
                        k++;
                        continue endpreviewloop;
                      }
                    }
                    endLine = data[i][k].position.start.line - 1;
                    break;
                  }
                }
                k++;
              }
            for (let l = data[i][j].position.start.line; l <= endLine; l++) {
              previewText2 = previewText2 + info[i].lines[l] + "\n";
            }
            previewText2 = previewText2.replace(/\n$|\n(?=\n)/g, "");
            (0, import_obsidian7.setTooltip)(outlineTitle, previewText2, { classes: ["DNO-preview"] });
            outlineTitle.dataset.tooltipPosition = this.settings.tooltipPreviewDirection;
            outlineTitle.setAttribute("data-tooltip-delay", "10");
          }
          outlineTitle.addEventListener("click", (event) => __async(this, null, function* () {
            yield this.app.workspace.getLeaf().openFile(files[i]);
            scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col, this.app);
          }), false);
          outlineTitle.addEventListener("mouseover", (event) => {
            this.app.workspace.trigger("hover-link", {
              event,
              source: DailyNoteOutlineViewType,
              hoverParent: rootEl,
              targetEl: outlineTitle,
              linktext: files[i].path,
              state: { scroll: data[i][j].position.start.line }
            });
          });
          outlineTitle.addEventListener("contextmenu", (event) => {
            const menu = new import_obsidian7.Menu();
            menu.addItem((item) => item.setTitle("Extract").setIcon("search").onClick(() => __async(this, null, function* () {
              this.plugin.settings.wordsToExtract = data[i][j].displayText;
              yield this.plugin.saveSettings();
              this.extractMode = true;
              this.extractType = "normal";
              this.refreshView(false, false, false);
            })));
            menu.addSeparator();
            if (element == "link") {
              menu.addItem((item) => item.setTitle("Open linked file").setIcon("links-going-out").onClick(() => __async(this, null, function* () {
                var _a2;
                yield this.app.workspace.getLeaf().openFile(linkTarget);
                if (linkSubpath) {
                  const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
                  scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
                }
              })));
              menu.addSeparator();
              menu.addItem((item) => item.setTitle("Open linked file in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
                var _a2;
                yield this.app.workspace.getLeaf("tab").openFile(linkTarget);
                if (linkSubpath) {
                  const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
                  scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
                }
              })));
              menu.addItem((item) => item.setTitle("Open linked file to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
                var _a2;
                if (linkTarget != this.activeFile) {
                  this.holdUpdateOnce = true;
                }
                yield this.app.workspace.getLeaf("split").openFile(linkTarget);
                if (linkSubpath) {
                  const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
                  scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
                }
              })));
              menu.addItem((item) => item.setTitle("Open linked file in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
                var _a2;
                if (linkTarget != this.activeFile) {
                  this.holdUpdateOnce = true;
                }
                yield this.app.workspace.openPopoutLeaf({ size: { width: this.settings.popoutSize.width, height: this.settings.popoutSize.height } }).openFile(linkTarget);
                if (linkSubpath) {
                  const subpathPosition = getSubpathPosition(this.app, linkTarget, linkSubpath);
                  scrollToElement((_a2 = subpathPosition.start) == null ? void 0 : _a2.line, 0, this.app);
                }
                if (this.settings.popoutAlwaysOnTop) {
                  setPopoutAlwaysOnTop();
                }
              })));
              menu.addSeparator();
            }
            menu.addItem((item) => item.setTitle("Open in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
              yield this.app.workspace.getLeaf("tab").openFile(files[i]);
              this.scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col);
            })));
            menu.addItem((item) => item.setTitle("Open to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
              yield this.app.workspace.getLeaf("split").openFile(files[i]);
              this.scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col);
            })));
            menu.addItem((item) => item.setTitle("Open in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
              yield this.app.workspace.getLeaf("window").openFile(files[i]);
              this.scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col);
            })));
            menu.showAtMouseEvent(event);
          });
        }
    } else {
      if (this.extractMode == false) {
        for (let j = 0; j < info[i].lines.length; j++) {
          if (info[i].lines[j] == "") {
            continue;
          } else {
            const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
            const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
            outlineTitle.createDiv("tree-item-inner nav-file-title-content").setText(info[i].lines[j]);
            outlineTitle.addEventListener("click", (event) => __async(this, null, function* () {
              event.preventDefault();
              yield this.app.workspace.getLeaf().openFile(files[i]);
            }), false);
            let previewText2 = info[i].lines.join("\n");
            (0, import_obsidian7.setTooltip)(outlineTitle, previewText2, { classes: ["DNO-preview"] });
            outlineTitle.dataset.tooltipPosition = this.settings.tooltipPreviewDirection;
            outlineTitle.setAttribute("data-tooltip-delay", "10");
            break;
          }
        }
      }
    }
    if (!this.settings.getBacklinks || !this.settings.showBacklinks) {
      continue;
    }
    for (let j = 0; j < ((_f = info[i].backlinks) == null ? void 0 : _f.length); j++) {
      if (this.extractMode == true) {
        if (this.extractType == "normal" && info[i].backlinks[j].basename.toLowerCase().includes(this.settings.wordsToExtract.toLowerCase())) {
          isExtracted = true;
        } else {
          continue;
        }
      }
      const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
      const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
      switch (this.settings.icon.backlink) {
        case "none":
          break;
        case "custom":
          (0, import_obsidian7.setIcon)(outlineTitle, this.settings.customIcon.backlink);
          break;
        default:
          (0, import_obsidian7.setIcon)(outlineTitle, this.settings.icon.backlink);
          break;
      }
      outlineTitle.style.paddingLeft = "0.5em";
      outlineTitle.createDiv("tree-item-inner nav-file-title-content").setText(info[i].backlinks[j].basename);
      outlineTitle.addEventListener("click", (event) => __async(this, null, function* () {
        yield this.app.workspace.getLeaf().openFile(info[i].backlinks[j]);
        const view = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
      }), false);
      outlineTitle.addEventListener("mouseover", (event) => {
        this.app.workspace.trigger("hover-link", {
          event,
          source: DailyNoteOutlineViewType,
          hoverParent: rootEl,
          targetEl: outlineTitle,
          linktext: info[i].backlinks[j].path
        });
      });
      outlineTitle.addEventListener("contextmenu", (event) => {
        const menu = new import_obsidian7.Menu();
        menu.addItem((item) => item.setTitle("Open backlink file in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
          yield this.app.workspace.getLeaf("tab").openFile(info[i].backlinks[j]);
        })));
        menu.addItem((item) => item.setTitle("Open linked file to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
          yield this.app.workspace.getLeaf("split").openFile(info[i].backlinks[j]);
        })));
        menu.addItem((item) => item.setTitle("Open linked file in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
          yield this.app.workspace.openPopoutLeaf({ size: { width: this.settings.popoutSize.width, height: this.settings.popoutSize.height } }).openFile(info[i].backlinks[j]);
          if (this.settings.popoutAlwaysOnTop) {
            setPopoutAlwaysOnTop();
          }
        })));
        menu.showAtMouseEvent(event);
      });
    }
    if (this.collapseAll || ((_h = (_g = this.settings.fileFlag) == null ? void 0 : _g[files[i].path]) == null ? void 0 : _h.fold)) {
      dailyNoteEl.classList.add("is-collpased");
      noteCollapseIcon.classList.add("is-collapsed");
      info[i].isFolded = true;
      dailyNoteChildrenEl.style.display = "none";
    } else {
      info[i].isFolded = false;
    }
    if (this.extractMode == true && isExtracted == false) {
      dailyNoteEl.remove();
    }
  }
  this.contentEl.appendChild(containerEl);
}
function scrollToElement(line, col, app2) {
  const view = app2.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
  if (view) {
    view.setEphemeralState({ line });
  }
}
function setPopoutAlwaysOnTop() {
  const { remote } = require("electron");
  const activeWindow = remote.BrowserWindow.getFocusedWindow();
  activeWindow.setAlwaysOnTop(true);
}

// src/view.ts
var DailyNoteOutlineViewType = "daily-note-outline";
var DailyNoteOutlineView = class extends import_obsidian9.ItemView {
  constructor(leaf, plugin, settings) {
    super(leaf);
    this.searchRange = {
      latest: window.moment(),
      earliest: window.moment()
    };
    this.extractMode = false;
    this.extractType = "noraml";
    this.collapseAll = false;
    this.activeSet = 0;
    this.activeGranularity = 0;
    this.plugin = plugin;
    this.settings = settings;
  }
  getViewType() {
    return DailyNoteOutlineViewType;
  }
  getDisplayText() {
    return "Daily Note Outline";
  }
  getIcon() {
    return "calendar-clock";
  }
  onOpen() {
    return __async(this, null, function* () {
      this.initView();
      const debouncedAutoRefresh = (0, import_obsidian8.debounce)(this.autoRefresh, 2e3, true);
      this.flagRedraw = false;
      this.flagRegetAll = false;
      this.registerEvent(this.app.metadataCache.on("changed", (file, data, cache) => {
        var _a;
        if ((_a = this.targetFiles) == null ? void 0 : _a.includes(file)) {
          this.flagRedraw = true;
          debouncedAutoRefresh.call(this);
        }
      }));
      this.registerEvent(this.app.vault.on("create", (file) => {
        this.flagRegetAll = true;
        debouncedAutoRefresh.call(this);
      }));
      this.registerEvent(this.app.vault.on("delete", (file) => {
        this.flagRegetAll = true;
        debouncedAutoRefresh.call(this);
      }));
    });
  }
  onClose() {
    return __async(this, null, function* () {
    });
  }
  setState(state, result) {
    var __superGet = (key) => super[key];
    return __async(this, null, function* () {
      if (state.activeSet) {
        this.activeSet = state.activeSet;
      }
      if (state.activeGranularity) {
        this.activeGranularity = state.activeGranularity;
      }
      return __superGet("setState").call(this, state, result);
    });
  }
  getState() {
    return {
      activeSet: this.activeSet,
      activeGranularity: this.activeGranularity
    };
  }
  initView() {
    return __async(this, null, function* () {
      yield this.bootDelay();
      this.collapseAll = this.settings.collapseAllAtStartup;
      this.verPN = yield this.checkPeriodicNotes();
      if (this.settings.checkUnresolvedLinksAtStartup) {
        yield checkUnresolvedLinks.call(this);
      }
      this.resetSearchRange();
      this.refreshView(true, true, true);
    });
  }
  bootDelay() {
    return __async(this, null, function* () {
      return new Promise((resolve) => {
        setTimeout(resolve, this.settings.bootDelayTime);
      });
    });
  }
  autoRefresh() {
    return __async(this, null, function* () {
      if (!(this.flagRedraw || this.flagRegetAll)) {
        return;
      }
      this.refreshView(this.flagRegetAll, this.flagRegetAll, true);
      this.flagRegetAll = false;
      this.flagRedraw = false;
    });
  }
  refreshView(flagRegetAll, flagGetTarget, flagGetOutline) {
    return __async(this, null, function* () {
      var _a;
      const startTime = performance.now();
      if (this.settings.showDebugInfo) {
        console.log("DNO:start refreshing view. CalendarSets:", this.calendarSets);
      }
      this.verPN = yield this.checkPeriodicNotes();
      if (this.verPN != 2) {
        if (flagRegetAll) {
          this.allDailyNotes = this.getAllNotes();
        }
        if (flagGetTarget) {
          this.targetFiles = getTargetFiles.call(this, this.allDailyNotes, GRANULARITY_LIST[this.activeGranularity]);
        }
        if (flagGetOutline) {
          this.fileInfo = yield getFileInfo.call(this, this.targetFiles);
          this.outlineData = yield getOutline.call(this, this.targetFiles, this.fileInfo);
        }
        drawUI.call(this);
        drawOutline.call(this, this.targetFiles, this.fileInfo, this.outlineData);
      } else {
        if (!this.calendarSets[this.activeSet]) {
          this.activeSet = 0;
        }
        if (!((_a = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _a.enabled)) {
          if (this.settings.showDebugInfo) {
            console.log("DNO: Calender set is not enabled. this.activeGranularity is set to 0. Calendarsets, this.activeSet, this.activeGranularity:", this.calendarSets, this.activeSet, this.activeGranularity);
          }
          this.activeGranularity = 0;
        }
        if (flagGetTarget) {
          this.targetFiles = getTargetPeriodicNotes.call(this, this.calendarSets[this.activeSet], GRANULARITY_LIST[this.activeGranularity]);
        }
        if (flagGetOutline) {
          this.fileInfo = yield getFileInfo.call(this, this.targetFiles);
          this.outlineData = yield getOutline.call(this, this.targetFiles, this.fileInfo);
        }
        drawUI.call(this);
        drawOutline.call(this, this.targetFiles, this.fileInfo, this.outlineData);
      }
      const endTime = performance.now();
      if (this.settings.showDebugInfo) {
        console.log("DNO: time required to refresh view: ", endTime - startTime);
      }
    });
  }
  stripMarkdownSymbol(text) {
    return text.replace(/(\[\[)|(\]\])/g, "");
  }
  resetSearchRange() {
    if (this.settings.setBaseDateAsHome == true) {
      const onsetDate = window.moment(this.settings.onset, "YYYY-MM-DD");
      if (onsetDate.isValid()) {
        this.searchRange.latest = onsetDate;
        this.searchRange.earliest = onsetDate.clone().subtract(this.settings.duration.day - 1, "days");
      } else {
        new import_obsidian8.Notice("onset date is invalid");
        this.searchRange.latest = window.moment().startOf("day");
        this.searchRange.earliest = window.moment().startOf("day").subtract(this.settings.duration.day - 1, "days");
      }
    } else {
      this.searchRange.latest = window.moment().startOf("day");
      this.searchRange.earliest = window.moment().startOf("day").subtract(this.settings.duration.day - 1, "days");
    }
  }
  checkPeriodicNotes() {
    return __async(this, null, function* () {
      var _a, _b, _c, _d, _e, _f;
      if (this.settings.showDebugInfo) {
        console.log("DNO:checking the version of Periodic Notes plugin");
      }
      if (app.plugins.plugins["periodic-notes"]) {
        if (Number(app.plugins.plugins["periodic-notes"].manifest.version.split(".")[0]) >= 1) {
          this.calendarSets = (_a = this.app.plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.calendarSetManager.getCalendarSets();
          if (this.settings.showDebugInfo) {
            console.log("DNO: return of this.app.PN.calendarSetManager.getCalendarSets(): ", (_b = this.app.plugins.getPlugin("periodic-notes")) == null ? void 0 : _b.calendarSetManager.getCalendarSets());
            console.log("DNO: return of window.app.PN.calendarSetManager.getCalendarSets(): ", (_c = window.app.plugins.getPlugin("periodic-notes")) == null ? void 0 : _c.calendarSetManager.getCalendarSets());
          }
          if (!this.calendarSets.length) {
            new import_obsidian8.Notice("failed to import calendar sets to Daily Note Outline");
          }
          const initialGranularity = this.activeGranularity;
          while (!((_d = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _d.enabled)) {
            this.activeGranularity = (this.activeGranularity + 1) % GRANULARITY_LIST.length;
            if (this.activeGranularity == initialGranularity) {
              break;
            }
          }
          this.app.workspace.requestSaveLayout();
          if (this.settings.showDebugInfo) {
            console.log("DNO: obtained verPN: ", this.verPN, " calendarSets: ", this.calendarSets);
          }
          return 2;
        } else {
          this.settings.calendarSetsEnabled = false;
          this.activeSet = 0;
          yield this.plugin.saveSettings();
          const initialGranularity = this.activeGranularity;
          while (!((_f = (_e = this.app.plugins.getPlugin("periodic-notes").settings) == null ? void 0 : _e[GRANULARITY_TO_PERIODICITY[GRANULARITY_LIST[this.activeGranularity]]]) == null ? void 0 : _f.enabled)) {
            this.activeGranularity = (this.activeGranularity + 1) % GRANULARITY_LIST.length;
            if (this.activeGranularity == initialGranularity) {
              break;
            }
          }
          this.app.workspace.requestSaveLayout();
          return 1;
        }
      } else {
        this.settings.periodicNotesEnabled = false;
        this.settings.calendarSetsEnabled = false;
        this.activeGranularity = 0;
        this.activeSet = 0;
        yield this.plugin.saveSettings();
        return 0;
      }
    });
  }
  getAllNotes() {
    switch (this.activeGranularity) {
      case 0:
        return (0, import_obsidian_daily_notes_interface6.getAllDailyNotes)();
      case 1:
        return (0, import_obsidian_daily_notes_interface6.getAllWeeklyNotes)();
      case 2:
        return (0, import_obsidian_daily_notes_interface6.getAllMonthlyNotes)();
      case 3:
        return (0, import_obsidian_daily_notes_interface6.getAllQuarterlyNotes)();
      case 4:
        return (0, import_obsidian_daily_notes_interface6.getAllYearlyNotes)();
    }
  }
};

// src/setting.ts
var import_obsidian10 = __toModule(require("obsidian"));
var DailyNoteOutlineSettingTab = class extends import_obsidian10.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    var _a, _b;
    let { containerEl } = this;
    containerEl.empty();
    if (!((_a = app.internalPlugins.plugins["daily-notes"]) == null ? void 0 : _a.enabled) && !app.plugins.plugins["periodic-notes"]) {
      this.containerEl.createDiv("settings-banner", (banner) => {
        banner.createEl("h3", {
          text: "Neither Daily Note plugin nor Periodic Notes community plugin is enabled"
        });
      });
    }
    new import_obsidian10.Setting(containerEl).setName("Search duration").setDesc("number of days to search per page (default = 28)").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.duration.day)).setValue(String(this.plugin.settings.duration.day));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let parsed = parseInt(e.target.value, 10);
        if (parsed <= 0 || parsed >= 366) {
          parsed = DEFAULT_SETTINGS.duration.day;
        }
        this.plugin.settings.duration.day = parsed;
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      });
    });
    new import_obsidian10.Setting(containerEl).setName("Include future daily notes").setClass("setting-indent").setDesc("in backward search, include n days of future daily notes (default = 5)").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.offset)).setValue(String(this.plugin.settings.offset));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let inputedValue = Number(e.target.value);
        if (inputedValue < 0) {
          inputedValue = 0;
        } else if (inputedValue >= 366) {
          inputedValue = 366;
        }
        this.plugin.settings.offset = inputedValue;
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      });
    });
    new import_obsidian10.Setting(containerEl).setName("Base date").setDesc("You can set one base date to use for jumping back(YYYY-MM-DD)").addText((text) => {
      text.setPlaceholder(DEFAULT_SETTINGS.onset).setValue(this.plugin.settings.onset).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.onset = value;
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Set Base date as Home").setClass("setting-indent").setDesc("If enabled, daily notes created on base date are displayed in the view at startup or when Home icon is clicked.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.setBaseDateAsHome).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.setBaseDateAsHome = value;
        this.display();
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Show headings").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.heading).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.heading = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Show links").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.link).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.link = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Show tags").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.tag).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.tag = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Show list items").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.listItems).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.listItems = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.showElements.listItems) {
      new import_obsidian10.Setting(containerEl).setName("Show all root list items").setDesc("if disabled, only top item of the list is displayed").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.allRootItems).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.allRootItems = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      new import_obsidian10.Setting(containerEl).setName("Show all list callouts").setDesc("shows all list items marked with List Callouts plugin").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showListCallouts).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.showListCallouts = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      new import_obsidian10.Setting(containerEl).setName("Show all time lists").setDesc("shows all list items start with time(- HH:mm )").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showTimeList).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.showTimeList = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    new import_obsidian10.Setting(containerEl).setName("Show tasks").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.task).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.task = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.showElements.task) {
      new import_obsidian10.Setting(containerEl).setName("Hide completed tasks").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.hideCompletedTasks).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.hideCompletedTasks = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    new import_obsidian10.Setting(containerEl).setName("Show links in properties").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showPropertyLinks).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showPropertyLinks = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, true, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Show backlink files").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showBacklinks).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showBacklinks = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, true, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Collapse all at startup").setDesc("enable collapse all function at startup").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.collapseAllAtStartup).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.collapseAllAtStartup = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, false);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Display file information for daily notes").setDesc("choose type of file information to display with the file name for daily notes").addDropdown((dropdown) => {
      dropdown.addOption("none", "none").addOption("lines", "lines of the note").addOption("days", "days from base date").addOption("dow", "day of the week").addOption("dowshort", "day of the week(short)").addOption("weeknumber", "week number").addOption("tag", "first tag").setValue(this.plugin.settings.displayFileInfoDaily).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.displayFileInfoDaily = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.periodicNotesEnabled) {
      new import_obsidian10.Setting(containerEl).setName("Display file information for periodic notes").setDesc("choose type of file information to display for periodic notes other than daily notes").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("lines", "lines of the note").addOption("days", "distance from base date").addOption("tag", "first tag").setValue(this.plugin.settings.displayFileInfoPeriodic).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.displayFileInfoPeriodic = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    new import_obsidian10.Setting(containerEl).setName("Position of the plugin view").setDesc("Specify default position where this plugin's view appears").addDropdown((dropdown) => {
      dropdown.addOption("right", "right side pane").addOption("left", "left side pane").addOption("tab", "new tab in main pane").addOption("split", "splitted pane").addOption("popout", "popout window").setValue(this.plugin.settings.viewPosition).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.viewPosition = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    this.containerEl.createEl("h4", {
      text: "Periodic Notes",
      cls: "setting-category"
    });
    if (!app.plugins.plugins["periodic-notes"]) {
      this.containerEl.createEl("p", {
        text: "Periodic Notes community plugin is not enabled",
        cls: "setting-item-description"
      });
    } else {
      const verCheck = Number((_b = app.plugins.plugins["periodic-notes"]) == null ? void 0 : _b.manifest.version.split(".")[0]);
      if (verCheck >= 1) {
        new import_obsidian10.Setting(containerEl).setName("calendar sets").setDesc("enable calendar sets feature. You have to activate and configure the beta version of the Periodic Notes Plugin first.").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.calendarSetsEnabled).onChange((value) => __async(this, null, function* () {
            this.plugin.settings.calendarSetsEnabled = value;
            this.display();
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(true, true, true);
          }));
        });
      }
      new import_obsidian10.Setting(containerEl).setName("periodic notes").setDesc("enable weekly/monthly/quarterly/yearly notes. You have to activate and configure the Periodic Notes Plugin first.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.periodicNotesEnabled).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.periodicNotesEnabled = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.resetSearchRange();
          this.plugin.view.refreshView(true, true, true);
        }));
      });
      if (this.plugin.settings.periodicNotesEnabled) {
        this.containerEl.createEl("p", {
          text: "Search duration for periodic notes",
          cls: "setting-category"
        });
        new import_obsidian10.Setting(containerEl).setName("weekly notes").setClass("setting-indent").setDesc("number of weeks to search per page (default = 12)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.week)).setValue(String(this.plugin.settings.duration.week));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.week;
            }
            this.plugin.settings.duration.week = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
        new import_obsidian10.Setting(containerEl).setName("monthly notes").setClass("setting-indent").setDesc("number of months to search per page (default = 12)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.month)).setValue(String(this.plugin.settings.duration.month));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.month;
            }
            this.plugin.settings.duration.month = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
        new import_obsidian10.Setting(containerEl).setName("quarterly notes").setClass("setting-indent").setDesc("number of quarters to search per page (default = 8)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.quarter)).setValue(String(this.plugin.settings.duration.quarter));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.quarter;
            }
            this.plugin.settings.duration.quarter = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
        new import_obsidian10.Setting(containerEl).setName("yearly notes").setClass("setting-indent").setDesc("number of years to search per page (default = 12)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.year)).setValue(String(this.plugin.settings.duration.year));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.year;
            }
            this.plugin.settings.duration.year = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
      }
      new import_obsidian10.Setting(containerEl).setName("attach date range to weekly notes").setDesc("display date range next to weekly notes' name").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.attachWeeklyNotesName).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.attachWeeklyNotesName = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    this.containerEl.createEl("h4", {
      text: "Headings",
      cls: "setting-category"
    });
    if (this.plugin.settings.showElements.heading) {
      this.containerEl.createEl("p", {
        text: "Heading level to display",
        cls: "setting-item-description"
      });
      this.plugin.settings.headingLevel.forEach((value, index, arry) => {
        new import_obsidian10.Setting(containerEl).setName(`Level${index + 1}`).setClass("setting-indent").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.headingLevel[index]).onChange((value2) => __async(this, null, function* () {
            this.plugin.settings.headingLevel[index] = value2;
            this.display();
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          }));
        });
      });
    } else {
      this.containerEl.createEl("p", {
        text: "To display this section, activate 'Show headings' in Basics section.",
        cls: "setting-item-description"
      });
    }
    this.containerEl.createEl("h4", {
      text: "Preview"
    });
    new import_obsidian10.Setting(containerEl).setName("Inline preview").setDesc("Show a few subsequent words next to the outline element name").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.inlinePreview).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.inlinePreview = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Tooltip preview").setDesc("Show subsequent sentences as a tooltip when hover").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.tooltipPreview).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.tooltipPreview = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.tooltipPreview) {
      new import_obsidian10.Setting(containerEl).setName("Tooltip preview direction").setClass("setting-indent").setDesc("specify the direction to display tooltip preview").addDropdown((dropdown) => {
        dropdown.addOption("left", "left").addOption("right", "right").addOption("bottom", "bottom").addOption("top", "top").setValue(this.plugin.settings.tooltipPreviewDirection).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.tooltipPreviewDirection = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    this.containerEl.createEl("h4", {
      text: "Popout window",
      cls: "setting-category"
    });
    this.containerEl.createEl("p", {
      text: "Popout window size",
      cls: "setting-category"
    });
    new import_obsidian10.Setting(containerEl).setName("Width").setDesc("default & min = 600").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.popoutSize.width)).setValue(String(this.plugin.settings.popoutSize.width));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let parsed = parseInt(e.target.value, 10);
        if (parsed <= 600) {
          parsed = DEFAULT_SETTINGS.popoutSize.width;
        }
        this.plugin.settings.popoutSize.width = parsed;
        yield this.plugin.saveSettings();
      });
    });
    new import_obsidian10.Setting(containerEl).setName("Height").setDesc("default = 800 min = 600").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.popoutSize.height)).setValue(String(this.plugin.settings.popoutSize.height));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let parsed = parseInt(e.target.value, 10);
        if (parsed <= 600) {
          parsed = DEFAULT_SETTINGS.popoutSize.height;
        }
        this.plugin.settings.popoutSize.height = parsed;
        yield this.plugin.saveSettings();
      });
    });
    new import_obsidian10.Setting(containerEl).setName("Set popout window always on top").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.popoutAlwaysOnTop).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.popoutAlwaysOnTop = value;
        this.display();
        yield this.plugin.saveSettings();
      }));
    });
    this.containerEl.createEl("h4", {
      text: "Simple filter",
      cls: "setting-category"
    });
    if (this.plugin.settings.showElements.heading) {
      new import_obsidian10.Setting(containerEl).setName("Headings to ignore").setDesc("Headings which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.heading.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.heading = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.link) {
      new import_obsidian10.Setting(containerEl).setName("Links to ignore").setDesc("Links which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.link.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.link = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.tag) {
      new import_obsidian10.Setting(containerEl).setName("Tags to ignore").setDesc("tags which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.tag.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.tag = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.listItems) {
      new import_obsidian10.Setting(containerEl).setName("List items to ignore").setDesc("List items which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.listItems.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.listItems = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Include",
      cls: "setting-category"
    });
    this.containerEl.createEl("p", {
      text: "If you specify one outline element type and words to include, only elements which belong to the included elements are displayed.",
      cls: "setting-item-description"
    });
    this.containerEl.createEl("p", {
      text: "**NOTE**: If Include filter is set incorrectly, a number of outlines may not be displayed. In such a case, try setting 'Element type for include' to 'no Include filter'.",
      cls: "setting-item-description"
    });
    new import_obsidian10.Setting(containerEl).setName("Element type for include").addDropdown((dropdown) => {
      dropdown.addOption("none", "no Include filter").addOption("heading", "heading").addOption("link", "link").addOption("tag", "tag").addOption("listItems", "listItems").setValue(this.plugin.settings.includeOnly).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.includeOnly = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.includeOnly != "none") {
      new import_obsidian10.Setting(containerEl).setName("Words to include").setClass("setting-indent").setDesc("Only elements specified in 'Element type for include' which include listed words will be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToInclude.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToInclude = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian10.Setting(containerEl).setName("Include the beginning part").setClass("setting-indent").setDesc("Specify whether to include the beginning parts of each daily note with no element to include ").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.includeBeginning).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.includeBeginning = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    this.containerEl.createEl("h4", {
      text: "Exclude",
      cls: "setting-category"
    });
    this.containerEl.createEl("p", {
      text: "Specified outline elements and elements belonging to that element will not be displayed.",
      cls: "setting-item-description"
    });
    new import_obsidian10.Setting(containerEl).setName("Exclusion ends at").setDesc("Excluding elements specified below ends at the selected type of elements. If you specified 'Element type for include' above, this value is ignored and excludeing elements ends at that type of elements.").addDropdown((dropdown) => {
      dropdown.addOption("none", "none").addOption("heading", "heading").addOption("link", "link").addOption("tag", "tag").addOption("listItems", "listItems").setValue(this.plugin.settings.primeElement).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.primeElement = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.showElements.heading) {
      new import_obsidian10.Setting(containerEl).setName("Headings to exclude").setDesc("Headings which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.heading.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.heading = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.link) {
      new import_obsidian10.Setting(containerEl).setName("Links to exclude").setDesc("Links which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.link.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.link = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.tag) {
      new import_obsidian10.Setting(containerEl).setName("Tags to exclude").setDesc("tags which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.tag.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.tag = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.listItems) {
      new import_obsidian10.Setting(containerEl).setName("List items to exclude").setDesc("List items which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.listItems.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.listItems = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Appearance",
      cls: "setting-category"
    });
    new import_obsidian10.Setting(containerEl).setName("Wrap outline element text").setDesc("If enabled, long element names are displayed wrapped on multiple lines").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.wrapLine).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.wrapLine = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Indentation of outline elements (other than  headings)").setDesc("Whether other elements should be indented to preceding headings").addDropdown((dropdown) => {
      dropdown.addOption("0", "none").addOption("1", "follow preceding heading").addOption("2", "preceding heading + 1").setValue(String(this.plugin.settings.indentFollowHeading)).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.indentFollowHeading = Number(value);
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Note title background color").setDesc("No change: use the current CSS theme setting values. Accent: highlight file names. Custom: Specify any color code. Please update the view when you toggled Obsidian's base theme(light/dark). (default = no change)").addDropdown((dropdown) => {
      dropdown.addOption("none", "no change").addOption("accent", "accent").addOption("custom", "custom").setValue(this.plugin.settings.noteTitleBackgroundColor).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.noteTitleBackgroundColor = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.noteTitleBackgroundColor == "custom") {
      new import_obsidian10.Setting(containerEl).setName("Custom note title background color (light)").setClass("setting-indent").setDesc("Specify background color (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColor.custom.light);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColor.custom.light = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian10.Setting(containerEl).setName("Custom note title background color (light, on hover)").setClass("setting-indent").setDesc("Specify background color on hover (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColorHover.custom.light);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColorHover.custom.light = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian10.Setting(containerEl).setName("Custom note title background color (dark)").setClass("setting-indent").setDesc("Specify background color (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColor.custom.dark);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColor.custom.dark = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian10.Setting(containerEl).setName("Custom note title background color (dark, on hover)").setClass("setting-indent").setDesc("Specify background color on hover (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColorHover.custom.dark);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColorHover.custom.dark = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.heading) {
      this.containerEl.createEl("p", {
        text: "Headings",
        cls: "setting-category"
      });
      new import_obsidian10.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("hash", "hash").addOption("chevron-right", "chevron-right").addOption("custom", "custom").setValue(this.plugin.settings.icon.heading).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.heading = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.heading == "custom") {
        new import_obsidian10.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.heading).setValue(this.plugin.settings.customIcon.heading);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.heading = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian10.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.heading).setValue(this.plugin.settings.prefix.heading);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.heading = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      if (this.plugin.settings.prefix.heading != "") {
        new import_obsidian10.Setting(containerEl).setName("Repeat heading prefix").setClass("setting-indent-2").addDropdown((dropdown) => {
          dropdown.addOption("none", "none").addOption("level", "as many times as its level").addOption("levelminus1", "level - 1").setValue(this.plugin.settings.repeatHeadingPrefix).onChange((value) => __async(this, null, function* () {
            this.plugin.settings.repeatHeadingPrefix = value;
            this.display();
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          }));
        });
      }
      new import_obsidian10.Setting(containerEl).setName("Add indent").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.indent.heading).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.indent.heading = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    if (this.plugin.settings.showElements.link) {
      this.containerEl.createEl("p", {
        text: "Links",
        cls: "setting-category"
      });
      new import_obsidian10.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("link", "link").addOption("link-2", "link-2").addOption("custom", "custom").setValue(this.plugin.settings.icon.link).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.link = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.link == "custom") {
        new import_obsidian10.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.link).setValue(this.plugin.settings.customIcon.link);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.link = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian10.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.link).setValue(this.plugin.settings.prefix.link);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.link = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.tag) {
      this.containerEl.createEl("p", {
        text: "Tags",
        cls: "setting-category"
      });
      new import_obsidian10.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("tag", "tag").addOption("hash", "hash").addOption("custom", "custom").setValue(this.plugin.settings.icon.tag).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.tag = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.tag == "custom") {
        new import_obsidian10.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.tag).setValue(this.plugin.settings.customIcon.tag);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.tag = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian10.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.tag).setValue(this.plugin.settings.prefix.tag);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.tag = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.link) {
      this.containerEl.createEl("p", {
        text: "List items",
        cls: "setting-category"
      });
      new import_obsidian10.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("list", "list").addOption("chevron-right", "chevron-right").addOption("minus", "minus").addOption("circle-dot", "circle-dot").addOption("asterisk", "asterisk").addOption("custom", "custom").setValue(this.plugin.settings.icon.listItems).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.listItems = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.listItems == "custom") {
        new import_obsidian10.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.listItems).setValue(this.plugin.settings.customIcon.listItems);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.listItems = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian10.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.listItems).setValue(this.plugin.settings.prefix.listItems);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.listItems = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      this.containerEl.createEl("p", {
        text: "Time lists",
        cls: "setting-category"
      });
      new import_obsidian10.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("clock", "clock").addOption("message-square", "message-square").addOption("message-circle", "message-circle").addOption("twitter", "twitter").addOption("custom", "custom").setValue(this.plugin.settings.icon.time).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.time = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.time == "custom") {
        new import_obsidian10.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.time).setValue(this.plugin.settings.customIcon.time);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.time = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian10.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.time).setValue(this.plugin.settings.prefix.time);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.time = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      this.containerEl.createEl("p", {
        text: "Tasks",
        cls: "setting-category"
      });
      new import_obsidian10.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("square", "square").addOption("circle", "circle").addOption("list-checks", "list-checks").addOption("custom", "custom").setValue(this.plugin.settings.icon.task).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.task = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.task == "custom") {
        new import_obsidian10.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.task).setValue(this.plugin.settings.customIcon.task);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.task = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian10.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.task).setValue(this.plugin.settings.prefix.task);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.task = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian10.Setting(containerEl).setName("Add checkbox text to prefix").setDesc("add [ ] or [x]").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.addCheckboxText).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.addCheckboxText = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      this.containerEl.createEl("p", {
        text: "Completed tasks",
        cls: "setting-category"
      });
      new import_obsidian10.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("check-square", "check-square").addOption("check-circle", "check-circle").addOption("check", "check").addOption("custom", "custom").setValue(this.plugin.settings.icon.taskDone).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.taskDone = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.taskDone == "custom") {
        new import_obsidian10.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.taskDone).setValue(this.plugin.settings.customIcon.taskDone);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.taskDone = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian10.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.taskDone).setValue(this.plugin.settings.prefix.taskDone);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.taskDone = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showBacklinks) {
      this.containerEl.createEl("p", {
        text: "Backlinks",
        cls: "setting-category"
      });
      new import_obsidian10.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("links-coming-in", "links-coming-in").addOption("file", "file").addOption("corner-up-left", "corner-up-left").addOption("clock", "clock").addOption("custom", "custom").setValue(this.plugin.settings.icon.backlink).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.backlink = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.backlink == "custom") {
        new import_obsidian10.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.backlink).setValue(this.plugin.settings.customIcon.backlink);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.backlink = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian10.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.backlink).setValue(this.plugin.settings.prefix.backlink);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.backlink = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Others",
      cls: "setting-category"
    });
    new import_obsidian10.Setting(containerEl).setName("Show only .md files").setDesc("Turn on if non-md files are displayed in the view").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.markdownOnly).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.markdownOnly = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian10.Setting(containerEl).setName("Show only exactly matched files").setDesc("Turn on if you do not want to see files that do not exactly match the format").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.exactMatchOnly).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.exactMatchOnly = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.showBacklinks) {
      new import_obsidian10.Setting(containerEl).setName("Create daily notes corresponding to unresolved links at startup").setDesc("To detect backlinks to daily notes, at startup, the plugin searches for links to dates and creates the corresponding daily note if one has not been created.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.checkUnresolvedLinksAtStartup).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.checkUnresolvedLinksAtStartup = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(true, true, true);
        }));
      });
    }
    new import_obsidian10.Setting(containerEl).setName("Startup delay time(ms)").setDesc("Wait for the specified time at startup. If daily notes fail to load at startup, increasing this may resolve the issue. (default = 300)").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.bootDelayTime)).setValue(String(this.plugin.settings.bootDelayTime));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let parsed = parseInt(e.target.value, 10);
        if (parsed <= 0 || parsed >= 2e5) {
          parsed = DEFAULT_SETTINGS.bootDelayTime;
        }
        this.plugin.settings.bootDelayTime = parsed;
        yield this.plugin.saveSettings();
      });
    });
    this.containerEl.createEl("h4", {
      text: "Debug",
      cls: "setting-category"
    });
    new import_obsidian10.Setting(containerEl).setName("show debug information").setDesc("display debug information in the console").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showDebugInfo).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showDebugInfo = value;
        this.display();
        yield this.plugin.saveSettings();
      }));
    });
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  offset: 7,
  onset: "2020-03-30",
  duration: {
    day: 28,
    week: 12,
    month: 12,
    quarter: 8,
    year: 3
  },
  showElements: {
    heading: true,
    link: true,
    tag: true,
    listItems: true,
    task: true
  },
  headingLevel: [true, true, true, false, false, false],
  allRootItems: false,
  allTasks: true,
  taskOnly: false,
  hideCompletedTasks: false,
  displayFileInfo: "lines",
  displayFileInfoDaily: "lines",
  displayFileInfoPeriodic: "lines",
  viewPosition: "right",
  markdownOnly: true,
  exactMatchOnly: false,
  wordsToIgnore: {
    heading: [],
    link: [],
    tag: [],
    listItems: []
  },
  inlinePreview: true,
  tooltipPreview: true,
  tooltipPreviewDirection: "left",
  includeOnly: "none",
  wordsToInclude: [],
  includeBeginning: true,
  primeElement: "none",
  wordsToExclude: {
    heading: [],
    link: [],
    tag: [],
    listItems: []
  },
  wordsToExtract: "",
  icon: {
    heading: "none",
    link: "link",
    tag: "tag",
    listItems: "list",
    note: "file",
    task: "square",
    taskDone: "check-square",
    backlink: "links-coming-in",
    time: "clock"
  },
  customIcon: {
    heading: "hash",
    link: "link",
    tag: "tag",
    listItems: "list",
    note: "file",
    task: "square",
    taskDone: "check-square",
    backlink: "links-coming-in",
    time: "clock"
  },
  indent: {
    heading: true,
    link: true,
    listItems: true
  },
  indentFollowHeading: 0,
  prefix: {
    heading: "",
    link: "",
    tag: "",
    listItems: "",
    task: "",
    taskDone: "",
    backlink: "",
    time: ""
  },
  repeatHeadingPrefix: "none",
  addCheckboxText: false,
  periodicNotesEnabled: true,
  calendarSetsEnabled: true,
  attachWeeklyNotesName: true,
  showDebugInfo: false,
  noteTitleBackgroundColor: "none",
  customNoteTitleBackgroundColor: {
    accent: {
      light: "#E3E3E3",
      dark: "#363636"
    },
    custom: {
      light: "#BEBEBE",
      dark: "#4E4E4E"
    }
  },
  customNoteTitleBackgroundColorHover: {
    accent: {
      light: "#D3D3D3",
      dark: "#464646"
    },
    custom: {
      light: "#AEAEAE",
      dark: "#5E5E5E"
    }
  },
  fileFlag: {},
  taskIcon: {
    incomplete: { symbol: "/", icon: "columns" },
    canceled: { symbol: "-", icon: "minus-square" },
    fowarded: { symbol: ">", icon: "send" },
    scheduling: { symbol: "<", icon: "calendar" },
    question: { symbol: "?", icon: "help-circle" },
    important: { symbol: "!", icon: "alert-triangle" },
    star: { symbol: "*", icon: "star" },
    quote: { symbol: '"', icon: "quote" },
    location: { symbol: "l", icon: "map-pin" },
    bookmark: { symbol: "b", icon: "bookmark" },
    information: { symbol: "i", icon: "info" },
    savings: { symbol: "S", icon: "dollar-sign" },
    idea: { symbol: "I", icon: "siren" },
    pros: { symbol: "p", icon: "thumbs-up" },
    cons: { symbol: "c", icon: "thumbs-down" },
    fire: { symbol: "f", icon: "flame" },
    key: { symbol: "k", icon: "key" },
    win: { symbol: "w", icon: "cake" },
    up: { symbol: "u", icon: "trending-up" },
    down: { symbol: "d", icon: "trending-down" }
  },
  collapseAllAtStartup: false,
  showBacklinks: false,
  showPropertyLinks: true,
  popoutSize: {
    width: 600,
    height: 800
  },
  popoutAlwaysOnTop: false,
  showListCallouts: true,
  showTimeList: true,
  setBaseDateAsHome: false,
  checkUnresolvedLinksAtStartup: false,
  wrapLine: true,
  bootDelayTime: 300
};
var DAYS_PER_UNIT = {
  day: 1,
  week: 7,
  month: 30,
  quarter: 90,
  year: 365
};
var GRANULARITY_LIST = ["day", "week", "month", "quarter", "year"];
var GRANULARITY_TO_PERIODICITY = {
  day: "daily",
  week: "weekly",
  month: "monthly",
  quarter: "quarterly",
  year: "yearly"
};
var FILEINFO_TO_DISPLAY = {
  none: "none",
  lines: "num of lines",
  days: "distance",
  tag: "first tag"
};
var FILEINFO_TO_DISPLAY_DAY = {
  none: "none",
  lines: "num of lines",
  days: "distance",
  tag: "first tag",
  dow: "day of week",
  dowshort: "day of week(short)",
  weeknumber: "week number"
};
var DailyNoteOutlinePlugin3 = class extends import_obsidian11.Plugin {
  constructor() {
    super(...arguments);
    this.checkView = (activateView) => __async(this, null, function* () {
      let [leaf] = this.app.workspace.getLeavesOfType(DailyNoteOutlineViewType);
      if (!leaf) {
        switch (this.settings.viewPosition) {
          case "right":
            leaf = this.app.workspace.getRightLeaf(false);
            break;
          case "left":
            leaf = this.app.workspace.getLeftLeaf(false);
            break;
          case "tab":
            leaf = this.app.workspace.getLeaf("tab");
            break;
          case "split":
            leaf = this.app.workspace.getLeaf("split");
            break;
          case "popout":
            leaf = this.app.workspace.getLeaf("window");
            break;
        }
        yield leaf.setViewState({ type: DailyNoteOutlineViewType });
      }
      if (activateView) {
        this.app.workspace.revealLeaf(leaf);
      }
    });
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.registerView(DailyNoteOutlineViewType, (leaf) => this.view = new DailyNoteOutlineView(leaf, this, this.settings));
      this.addCommand({
        id: "daily-note-outline-open",
        name: "Open Outline",
        callback: () => __async(this, null, function* () {
          this.checkView(true);
        })
      });
      this.addCommand({
        id: "create-dailynote-for-unresolved-links",
        name: "Create daily notes for unresolved links",
        callback: () => __async(this, null, function* () {
          checkUnresolvedLinks.call(this.view);
        })
      });
      this.app.workspace.onLayoutReady(() => __async(this, null, function* () {
        this.checkView(false);
      }));
      this.addSettingTab(new DailyNoteOutlineSettingTab(this.app, this));
    });
  }
  onunload() {
    this.app.workspace.detachLeavesOfType(DailyNoteOutlineViewType);
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
      if (typeof this.settings.duration === "number") {
        this.settings.duration = DEFAULT_SETTINGS.duration;
      }
      if (!this.settings.icon.hasOwnProperty("backlink")) {
        this.settings.icon.backlink = DEFAULT_SETTINGS.icon.backlink;
        this.settings.customIcon.backlink = DEFAULT_SETTINGS.customIcon.backlink;
        this.settings.prefix.backlink = DEFAULT_SETTINGS.prefix.backlink;
      }
      if (!this.settings.icon.hasOwnProperty("time")) {
        this.settings.icon.time = DEFAULT_SETTINGS.icon.time;
        this.settings.customIcon.time = DEFAULT_SETTINGS.customIcon.time;
        this.settings.prefix.time = DEFAULT_SETTINGS.prefix.time;
      }
      if (!this.settings.showElements.hasOwnProperty("task")) {
        this.settings.showElements.task = DEFAULT_SETTINGS.showElements.task;
      }
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZS9kaXN0L21haW4uanMiLCAic3JjL21haW4udHMiLCAic3JjL3ZpZXcudHMiLCAic3JjL2RyYXdVSS50cyIsICJzcmMvY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZS50cyIsICJzcmMvbW9kYWxFeHRyYWN0LnRzIiwgInNyYy9jcmVhdGVBbmRPcGVuUGVyaW9kaWNOb3RlLnRzIiwgInNyYy9tb2RhbEp1bXAudHMiLCAic3JjL3V0aWwudHMiLCAic3JjL2dldFRhcmdldEZpbGVzLnRzIiwgInNyYy9nZXRPdXRsaW5lLnRzIiwgInNyYy9jb25zdHJ1Y3RET00udHMiLCAic3JjL3NldHRpbmcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIG9ic2lkaWFuID0gcmVxdWlyZSgnb2JzaWRpYW4nKTtcblxuY29uc3QgREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTS1ERFwiO1xuY29uc3QgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQgPSBcImdnZ2ctW1ddd3dcIjtcbmNvbnN0IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTVwiO1xuY29uc3QgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQgPSBcIllZWVktW1FdUVwiO1xuY29uc3QgREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQgPSBcIllZWVlcIjtcblxuZnVuY3Rpb24gc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKHBlcmlvZGljaXR5KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gd2luZG93LmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LltwZXJpb2RpY2l0eV0/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgZGFpbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldERhaWx5Tm90ZVNldHRpbmdzKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHsgaW50ZXJuYWxQbHVnaW5zLCBwbHVnaW5zIH0gPSB3aW5kb3cuYXBwO1xuICAgICAgICBpZiAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwiZGFpbHlcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZm9ybWF0LCBmb2xkZXIsIHRlbXBsYXRlIH0gPSBwbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8uZGFpbHkgfHwge307XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBmb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgZm9sZGVyLCBmb3JtYXQsIHRlbXBsYXRlIH0gPSBpbnRlcm5hbFBsdWdpbnMuZ2V0UGx1Z2luQnlJZChcImRhaWx5LW5vdGVzXCIpPy5pbnN0YW5jZT8ub3B0aW9ucyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IGZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBkYWlseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGB3ZWVrbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFdlZWtseU5vdGVTZXR0aW5ncygpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgICAgICBjb25zdCBjYWxlbmRhclNldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKT8ub3B0aW9ucztcbiAgICAgICAgY29uc3QgcGVyaW9kaWNOb3Rlc1NldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LndlZWtseTtcbiAgICAgICAgaWYgKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIndlZWtseVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBwZXJpb2RpY05vdGVzU2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBjYWxlbmRhclNldHRpbmdzIHx8IHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9ybWF0IHx8IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy53ZWVrbHlOb3RlVGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSB3ZWVrbHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIm1vbnRobHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5tb250aGx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBtb250aGx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcInF1YXJ0ZXJseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LnF1YXJ0ZXJseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBxdWFydGVybHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFllYXJseU5vdGVTZXR0aW5ncygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwieWVhcmx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ueWVhcmx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIHllYXJseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cblxuLy8gQ3JlZGl0OiBAY3JlYXRpb25peC9wYXRoLmpzXG5mdW5jdGlvbiBqb2luKC4uLnBhcnRTZWdtZW50cykge1xuICAgIC8vIFNwbGl0IHRoZSBpbnB1dHMgaW50byBhIGxpc3Qgb2YgcGF0aCBjb21tYW5kcy5cbiAgICBsZXQgcGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBhcnRTZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcGFydHMgPSBwYXJ0cy5jb25jYXQocGFydFNlZ21lbnRzW2ldLnNwbGl0KFwiL1wiKSk7XG4gICAgfVxuICAgIC8vIEludGVycHJldCB0aGUgcGF0aCBjb21tYW5kcyB0byBnZXQgdGhlIG5ldyByZXNvbHZlZCBwYXRoLlxuICAgIGNvbnN0IG5ld1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlc1xuICAgICAgICAvLyBBbHNvIHJlbW92ZSBcIi5cIiBzZWdtZW50c1xuICAgICAgICBpZiAoIXBhcnQgfHwgcGFydCA9PT0gXCIuXCIpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgLy8gUHVzaCBuZXcgcGF0aCBzZWdtZW50cy5cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbmV3UGFydHMucHVzaChwYXJ0KTtcbiAgICB9XG4gICAgLy8gUHJlc2VydmUgdGhlIGluaXRpYWwgc2xhc2ggaWYgdGhlcmUgd2FzIG9uZS5cbiAgICBpZiAocGFydHNbMF0gPT09IFwiXCIpXG4gICAgICAgIG5ld1BhcnRzLnVuc2hpZnQoXCJcIik7XG4gICAgLy8gVHVybiBiYWNrIGludG8gYSBzaW5nbGUgc3RyaW5nIHBhdGguXG4gICAgcmV0dXJuIG5ld1BhcnRzLmpvaW4oXCIvXCIpO1xufVxuZnVuY3Rpb24gYmFzZW5hbWUoZnVsbFBhdGgpIHtcbiAgICBsZXQgYmFzZSA9IGZ1bGxQYXRoLnN1YnN0cmluZyhmdWxsUGF0aC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICBpZiAoYmFzZS5sYXN0SW5kZXhPZihcIi5cIikgIT0gLTEpXG4gICAgICAgIGJhc2UgPSBiYXNlLnN1YnN0cmluZygwLCBiYXNlLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgcmV0dXJuIGJhc2U7XG59XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXJFeGlzdHMocGF0aCkge1xuICAgIGNvbnN0IGRpcnMgPSBwYXRoLnJlcGxhY2UoL1xcXFwvZywgXCIvXCIpLnNwbGl0KFwiL1wiKTtcbiAgICBkaXJzLnBvcCgpOyAvLyByZW1vdmUgYmFzZW5hbWVcbiAgICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGlyID0gam9pbiguLi5kaXJzKTtcbiAgICAgICAgaWYgKCF3aW5kb3cuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkaXIpKSB7XG4gICAgICAgICAgICBhd2FpdCB3aW5kb3cuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihkaXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Tm90ZVBhdGgoZGlyZWN0b3J5LCBmaWxlbmFtZSkge1xuICAgIGlmICghZmlsZW5hbWUuZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgZmlsZW5hbWUgKz0gXCIubWRcIjtcbiAgICB9XG4gICAgY29uc3QgcGF0aCA9IG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoam9pbihkaXJlY3RvcnksIGZpbGVuYW1lKSk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKHBhdGgpO1xuICAgIHJldHVybiBwYXRoO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKSB7XG4gICAgY29uc3QgeyBtZXRhZGF0YUNhY2hlLCB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBvYnNpZGlhbi5ub3JtYWxpemVQYXRoKHRlbXBsYXRlKTtcbiAgICBpZiAodGVtcGxhdGVQYXRoID09PSBcIi9cIikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtcIlwiLCBudWxsXSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IG1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodGVtcGxhdGVQYXRoLCBcIlwiKTtcbiAgICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCB2YXVsdC5jYWNoZWRSZWFkKHRlbXBsYXRlRmlsZSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IElGb2xkSW5mbyA9IHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIubG9hZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICByZXR1cm4gW2NvbnRlbnRzLCBJRm9sZEluZm9dO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlICcke3RlbXBsYXRlUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIkZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlXCIpO1xuICAgICAgICByZXR1cm4gW1wiXCIsIG51bGxdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBkYXRlVUlEIGlzIGEgd2F5IG9mIHdlZWtseSBpZGVudGlmeWluZyBkYWlseS93ZWVrbHkvbW9udGhseSBub3Rlcy5cbiAqIFRoZXkgYXJlIHByZWZpeGVkIHdpdGggdGhlIGdyYW51bGFyaXR5IHRvIGF2b2lkIGFtYmlndWl0eS5cbiAqL1xuZnVuY3Rpb24gZ2V0RGF0ZVVJRChkYXRlLCBncmFudWxhcml0eSA9IFwiZGF5XCIpIHtcbiAgICBjb25zdCB0cyA9IGRhdGUuY2xvbmUoKS5zdGFydE9mKGdyYW51bGFyaXR5KS5mb3JtYXQoKTtcbiAgICByZXR1cm4gYCR7Z3JhbnVsYXJpdHl9LSR7dHN9YDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXQucmVwbGFjZSgvXFxbW15cXF1dKlxcXS9nLCBcIlwiKTsgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgd2l0aGluIGJyYWNrZXRzXG59XG4vKipcbiAqIFhYWDogV2hlbiBwYXJzaW5nIGRhdGVzIHRoYXQgY29udGFpbiBib3RoIHdlZWsgbnVtYmVycyBhbmQgbW9udGhzLFxuICogTW9tZW50IGNob3NlcyB0byBpZ25vcmUgdGhlIHdlZWsgbnVtYmVycy4gRm9yIHRoZSB3ZWVrIGRhdGVVSUQsIHdlXG4gKiB3YW50IHRoZSBvcHBvc2l0ZSBiZWhhdmlvci4gU3RyaXAgdGhlIE1NTSBmcm9tIHRoZSBmb3JtYXQgdG8gcGF0Y2guXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpIHtcbiAgICBpZiAoZ3JhbnVsYXJpdHkgPT09IFwid2Vla1wiKSB7XG4gICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgcmV0dXJuICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkgJiZcbiAgICAgICAgICAgICgvTXsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSB8fCAvRHsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSkpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbUZpbGUoZmlsZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlLmJhc2VuYW1lLCBncmFudWxhcml0eSk7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbVBhdGgocGF0aCwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShiYXNlbmFtZShwYXRoKSwgZ3JhbnVsYXJpdHkpO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlbmFtZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICBjb25zdCBnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgZGF5OiBnZXREYWlseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgd2VlazogZ2V0V2Vla2x5Tm90ZVNldHRpbmdzLFxuICAgICAgICBtb250aDogZ2V0TW9udGhseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgcXVhcnRlcjogZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB5ZWFyOiBnZXRZZWFybHlOb3RlU2V0dGluZ3MsXG4gICAgfTtcbiAgICBjb25zdCBmb3JtYXQgPSBnZXRTZXR0aW5nc1tncmFudWxhcml0eV0oKS5mb3JtYXQuc3BsaXQoXCIvXCIpLnBvcCgpO1xuICAgIGNvbnN0IG5vdGVEYXRlID0gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgZm9ybWF0LCB0cnVlKTtcbiAgICBpZiAoIW5vdGVEYXRlLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpKSB7XG4gICAgICAgIGlmIChncmFudWxhcml0eSA9PT0gXCJ3ZWVrXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgICAgIGlmICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgXG4gICAgICAgICAgICAgICAgLy8gSWYgZm9ybWF0IGNvbnRhaW5zIHdlZWssIHJlbW92ZSBkYXkgJiBtb250aCBmb3JtYXR0aW5nXG4gICAgICAgICAgICAgICAgZm9ybWF0LnJlcGxhY2UoL017MSw0fS9nLCBcIlwiKS5yZXBsYWNlKC9EezEsNH0vZywgXCJcIiksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm90ZURhdGU7XG59XG5cbmNsYXNzIERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURhaWx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgYXBwID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSBhcHA7XG4gICAgY29uc3QgbW9tZW50ID0gd2luZG93Lm1vbWVudDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCBtb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp5ZXN0ZXJkYXlcXHMqfX0vZ2ksIGRhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCBcImRheVwiKS5mb3JtYXQoZm9ybWF0KSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0b21vcnJvd1xccyp9fS9naSwgZGF0ZS5jbG9uZSgpLmFkZCgxLCBcImRcIikuZm9ybWF0KGZvcm1hdCkpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RGFpbHlOb3RlKGRhdGUsIGRhaWx5Tm90ZXMpIHtcbiAgICByZXR1cm4gZGFpbHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwiZGF5XCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsRGFpbHlOb3RlcygpIHtcbiAgICAvKipcbiAgICAgKiBGaW5kIGFsbCBkYWlseSBub3RlcyBpbiB0aGUgZGFpbHkgbm90ZSBmb2xkZXJcbiAgICAgKi9cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXREYWlseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IGRhaWx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIWRhaWx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBkYWlseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIGNvbnN0IGRhaWx5Tm90ZXMgPSB7fTtcbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4oZGFpbHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcImRheVwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJkYXlcIik7XG4gICAgICAgICAgICAgICAgZGFpbHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGFpbHlOb3Rlcztcbn1cblxuY2xhc3MgV2Vla2x5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG5mdW5jdGlvbiBnZXREYXlzT2ZXZWVrKCkge1xuICAgIGNvbnN0IHsgbW9tZW50IH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBsZXQgd2Vla1N0YXJ0ID0gbW9tZW50LmxvY2FsZURhdGEoKS5fd2Vlay5kb3c7XG4gICAgY29uc3QgZGF5c09mV2VlayA9IFtcbiAgICAgICAgXCJzdW5kYXlcIixcbiAgICAgICAgXCJtb25kYXlcIixcbiAgICAgICAgXCJ0dWVzZGF5XCIsXG4gICAgICAgIFwid2VkbmVzZGF5XCIsXG4gICAgICAgIFwidGh1cnNkYXlcIixcbiAgICAgICAgXCJmcmlkYXlcIixcbiAgICAgICAgXCJzYXR1cmRheVwiLFxuICAgIF07XG4gICAgd2hpbGUgKHdlZWtTdGFydCkge1xuICAgICAgICBkYXlzT2ZXZWVrLnB1c2goZGF5c09mV2Vlay5zaGlmdCgpKTtcbiAgICAgICAgd2Vla1N0YXJ0LS07XG4gICAgfVxuICAgIHJldHVybiBkYXlzT2ZXZWVrO1xufVxuZnVuY3Rpb24gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrTmFtZSkge1xuICAgIHJldHVybiBnZXREYXlzT2ZXZWVrKCkuaW5kZXhPZihkYXlPZldlZWtOYW1lLnRvTG93ZXJDYXNlKCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlV2Vla2x5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpXFxzKjooLio/KX19L2dpLCAoXywgZGF5T2ZXZWVrLCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vlayk7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS53ZWVrZGF5KGRheSkuZm9ybWF0KG1vbWVudEZvcm1hdC50cmltKCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRXZWVrbHlOb3RlKGRhdGUsIHdlZWtseU5vdGVzKSB7XG4gICAgcmV0dXJuIHdlZWtseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsV2Vla2x5Tm90ZXMoKSB7XG4gICAgY29uc3Qgd2Vla2x5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHdlZWtseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB3ZWVrbHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghd2Vla2x5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFdlZWtseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgd2Vla2x5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHdlZWtseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwid2Vla1wiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpO1xuICAgICAgICAgICAgICAgIHdlZWtseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB3ZWVrbHlOb3Rlcztcbn1cblxuY2xhc3MgTW9udGhseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVNb250aGx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlKGRhdGUsIG1vbnRobHlOb3Rlcykge1xuICAgIHJldHVybiBtb250aGx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsTW9udGhseU5vdGVzKCkge1xuICAgIGNvbnN0IG1vbnRobHlOb3RlcyA9IHt9O1xuICAgIGlmICghYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRobHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IG1vbnRobHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghbW9udGhseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBNb250aGx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBtb250aGx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKG1vbnRobHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgICAgIG1vbnRobHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbW9udGhseU5vdGVzO1xufVxuXG5jbGFzcyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUXVhcnRlcmx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0UXVhcnRlcmx5Tm90ZShkYXRlLCBxdWFydGVybHkpIHtcbiAgICByZXR1cm4gcXVhcnRlcmx5W2dldERhdGVVSUQoZGF0ZSwgXCJxdWFydGVyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsUXVhcnRlcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgcXVhcnRlcmx5ID0ge307XG4gICAgaWYgKCFhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiBxdWFydGVybHk7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IHF1YXJ0ZXJseUZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghcXVhcnRlcmx5Rm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHF1YXJ0ZXJseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihxdWFydGVybHlGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJxdWFydGVyXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcInF1YXJ0ZXJcIik7XG4gICAgICAgICAgICAgICAgcXVhcnRlcmx5W2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBxdWFydGVybHk7XG59XG5cbmNsYXNzIFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVZZWFybHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRZZWFybHlOb3RlKGRhdGUsIHllYXJseU5vdGVzKSB7XG4gICAgcmV0dXJuIHllYXJseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsWWVhcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgeWVhcmx5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHllYXJseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB5ZWFybHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICgheWVhcmx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgeWVhcmx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHllYXJseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwieWVhclwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpO1xuICAgICAgICAgICAgICAgIHllYXJseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB5ZWFybHlOb3Rlcztcbn1cblxuZnVuY3Rpb24gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgZGFpbHlOb3Rlc1BsdWdpbiA9IGFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1tcImRhaWx5LW5vdGVzXCJdO1xuICAgIGlmIChkYWlseU5vdGVzUGx1Z2luICYmIGRhaWx5Tm90ZXNQbHVnaW4uZW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8uZGFpbHk/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFhYWDogXCJXZWVrbHkgTm90ZXNcIiBsaXZlIGluIGVpdGhlciB0aGUgQ2FsZW5kYXIgcGx1Z2luIG9yIHRoZSBwZXJpb2RpYy1ub3RlcyBwbHVnaW4uXG4gKiBDaGVjayBib3RoIHVudGlsIHRoZSB3ZWVrbHkgbm90ZXMgZmVhdHVyZSBpcyByZW1vdmVkIGZyb20gdGhlIENhbGVuZGFyIHBsdWdpbi5cbiAqL1xuZnVuY3Rpb24gYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ud2Vla2x5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ubW9udGhseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ucXVhcnRlcmx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy55ZWFybHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBnZXRQZXJpb2RpY05vdGVTZXR0aW5ncyhncmFudWxhcml0eSkge1xuICAgIGNvbnN0IGdldFNldHRpbmdzID0ge1xuICAgICAgICBkYXk6IGdldERhaWx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB3ZWVrOiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIG1vbnRoOiBnZXRNb250aGx5Tm90ZVNldHRpbmdzLFxuICAgICAgICBxdWFydGVyOiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHllYXI6IGdldFllYXJseU5vdGVTZXR0aW5ncyxcbiAgICB9W2dyYW51bGFyaXR5XTtcbiAgICByZXR1cm4gZ2V0U2V0dGluZ3MoKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBlcmlvZGljTm90ZShncmFudWxhcml0eSwgZGF0ZSkge1xuICAgIGNvbnN0IGNyZWF0ZUZuID0ge1xuICAgICAgICBkYXk6IGNyZWF0ZURhaWx5Tm90ZSxcbiAgICAgICAgbW9udGg6IGNyZWF0ZU1vbnRobHlOb3RlLFxuICAgICAgICB3ZWVrOiBjcmVhdGVXZWVrbHlOb3RlLFxuICAgIH07XG4gICAgcmV0dXJuIGNyZWF0ZUZuW2dyYW51bGFyaXR5XShkYXRlKTtcbn1cblxuZXhwb3J0cy5ERUZBVUxUX0RBSUxZX05PVEVfRk9STUFUID0gREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUID0gREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5hcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5jcmVhdGVEYWlseU5vdGUgPSBjcmVhdGVEYWlseU5vdGU7XG5leHBvcnRzLmNyZWF0ZU1vbnRobHlOb3RlID0gY3JlYXRlTW9udGhseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVBlcmlvZGljTm90ZSA9IGNyZWF0ZVBlcmlvZGljTm90ZTtcbmV4cG9ydHMuY3JlYXRlUXVhcnRlcmx5Tm90ZSA9IGNyZWF0ZVF1YXJ0ZXJseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVdlZWtseU5vdGUgPSBjcmVhdGVXZWVrbHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVZZWFybHlOb3RlID0gY3JlYXRlWWVhcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0QWxsRGFpbHlOb3RlcyA9IGdldEFsbERhaWx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbE1vbnRobHlOb3RlcyA9IGdldEFsbE1vbnRobHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsUXVhcnRlcmx5Tm90ZXMgPSBnZXRBbGxRdWFydGVybHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsV2Vla2x5Tm90ZXMgPSBnZXRBbGxXZWVrbHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsWWVhcmx5Tm90ZXMgPSBnZXRBbGxZZWFybHlOb3RlcztcbmV4cG9ydHMuZ2V0RGFpbHlOb3RlID0gZ2V0RGFpbHlOb3RlO1xuZXhwb3J0cy5nZXREYWlseU5vdGVTZXR0aW5ncyA9IGdldERhaWx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXREYXRlRnJvbUZpbGUgPSBnZXREYXRlRnJvbUZpbGU7XG5leHBvcnRzLmdldERhdGVGcm9tUGF0aCA9IGdldERhdGVGcm9tUGF0aDtcbmV4cG9ydHMuZ2V0RGF0ZVVJRCA9IGdldERhdGVVSUQ7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlID0gZ2V0TW9udGhseU5vdGU7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlU2V0dGluZ3MgPSBnZXRNb250aGx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRQZXJpb2RpY05vdGVTZXR0aW5ncyA9IGdldFBlcmlvZGljTm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRRdWFydGVybHlOb3RlID0gZ2V0UXVhcnRlcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRUZW1wbGF0ZUluZm8gPSBnZXRUZW1wbGF0ZUluZm87XG5leHBvcnRzLmdldFdlZWtseU5vdGUgPSBnZXRXZWVrbHlOb3RlO1xuZXhwb3J0cy5nZXRXZWVrbHlOb3RlU2V0dGluZ3MgPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFllYXJseU5vdGUgPSBnZXRZZWFybHlOb3RlO1xuZXhwb3J0cy5nZXRZZWFybHlOb3RlU2V0dGluZ3MgPSBnZXRZZWFybHlOb3RlU2V0dGluZ3M7XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBQb3MsIFRGaWxlLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLy8gRGFpbHkgTm90ZSBJbnRlcmZhY2VcclxuaW1wb3J0IHsgZ2V0QWxsRGFpbHlOb3RlcywgZ2V0RGFpbHlOb3RlLCBnZXREYXRlRnJvbUZpbGUsIElHcmFudWxhcml0eSB9IGZyb20gXCJvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2VcIjtcclxuLy8gbW9tZW50LmpzXHJcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xyXG5cclxuaW1wb3J0IHsgRGFpbHlOb3RlT3V0bGluZVZpZXcsIERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZSB9IGZyb20gJ3NyYy92aWV3J1xyXG5pbXBvcnQgeyBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ1RhYiB9IGZyb20gJ3NyYy9zZXR0aW5nJ1xyXG5pbXBvcnQgeyB0aW1lIH0gZnJvbSAnY29uc29sZSc7XHJcbmltcG9ydCB7IGNoZWNrVW5yZXNvbHZlZExpbmtzIH0gZnJvbSAnLi91dGlsJztcclxuXHJcblxyXG5cclxuLy8gXHU4QTJEXHU1QjlBXHU5ODA1XHU3NkVFIFxyXG5leHBvcnQgaW50ZXJmYWNlIERhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyB7XHJcblx0Ly9pbml0aWFsU2VhcmNoVHlwZTogc3RyaW5nOyAvL2ZvcndhcmQgb3IgYmFja3dhcmQgXHU3Mjc5XHU1QjlBXHU2NUU1XHUzMDRCXHUzMDg5XHU1MjREXHU2NUI5XHU2M0EyXHU3RDIyb3JcdTVGNTNcdTY1RTVcdTMwNEJcdTMwODlcdTVGOENcdTY1QjlcdTYzQTJcdTdEMjJcclxuXHRvZmZzZXQ6IG51bWJlcjtcdFx0Ly8gXHU2NzJBXHU2NzY1XHUzMDZFXHU2NUU1XHU0RUQ4XHUzMDgyXHU1NDJCXHUzMDgwXHU1ODM0XHU1NDA4XHU0RjU1XHU2NUU1XHU1MjA2XHU1NDJCXHUzMDgxXHUzMDhCXHUzMDRCIG51bWJlciBvZiBmdXR1cmUgZGF5cyB0byBzaG93IFxyXG5cdG9uc2V0OiBzdHJpbmc7XHRcdC8vIFx1NzI3OVx1NUI5QVx1NjVFNVx1MzA0Qlx1MzA4OWZvcndhcmRcdTMwNkJcdTYzQTJcdTdEMjJcdTMwNTlcdTMwOEJcdTU4MzRcdTU0MDhcdTMwNkVcdThENzdcdTcwQjlcdTY1RTUgb25zZXQgZGF0ZVxyXG5cdGR1cmF0aW9uOntcclxuXHRcdGRheTpudW1iZXI7XHJcblx0XHR3ZWVrOm51bWJlcjtcclxuXHRcdG1vbnRoOm51bWJlcjtcclxuXHRcdHF1YXJ0ZXI6bnVtYmVyO1xyXG5cdFx0eWVhcjpudW1iZXI7XHJcblx0fSAvLyBcdTYzQTJcdTdEMjJcdTY1RTVcdTY1NzAgbnVtYmVyIG9mIGRheXMgdG8gc2VhcmNoIHBlciBwYWdlXHJcblx0c2hvd0VsZW1lbnRzOntcclxuXHRcdGhlYWRpbmc6IGJvb2xlYW47XHJcblx0XHRsaW5rOiBib29sZWFuO1xyXG5cdFx0dGFnOiBib29sZWFuO1xyXG5cdFx0bGlzdEl0ZW1zOiBib29sZWFuO1xyXG5cdFx0dGFzazogYm9vbGVhbixcclxuXHR9O1xyXG5cdGhlYWRpbmdMZXZlbDogYm9vbGVhbltdO1xyXG5cdGFsbFJvb3RJdGVtczogYm9vbGVhbjtcclxuXHRhbGxUYXNrczogYm9vbGVhbjtcclxuXHR0YXNrT25seTogYm9vbGVhbjtcclxuXHRoaWRlQ29tcGxldGVkVGFza3M6IGJvb2xlYW47XHJcblx0ZGlzcGxheUZpbGVJbmZvOiBzdHJpbmc7IC8vIG5vbmUgfHwgbGluZXMgfHwgZGF5cyAgIGxlZ2FjeVxyXG5cdGRpc3BsYXlGaWxlSW5mb0RhaWx5OiBzdHJpbmc7IC8vIG5vbmUsbGluZXMsZGF5cyxkb3coZGF5IG9mIHRoZSB3ZWVrKSxkb3dzaG9ydCx3ZWVrbnVtYmVyLHRhZ1xyXG5cdGRpc3BsYXlGaWxlSW5mb1BlcmlvZGljOiBzdHJpbmc7IC8vIG5vbmUsbGluZXMsZGF5cyx0YWdcclxuXHJcblx0dmlld1Bvc2l0aW9uOiBzdHJpbmc7XHQvL3JpZ2h0IHx8IGxlZnQgfHwgdGFiIHx8IHNwbGl0IHx8IHBvcG91dCBcclxuXHJcblx0bWFya2Rvd25Pbmx5OiBib29sZWFuO1xyXG5cdGV4YWN0TWF0Y2hPbmx5OiBib29sZWFuO1xyXG5cclxuXHR3b3Jkc1RvSWdub3JlOntcdC8vZmlsdGVyXHJcblx0XHRoZWFkaW5nOiBzdHJpbmdbXTtcclxuXHRcdGxpbms6IHN0cmluZ1tdO1xyXG5cdFx0dGFnOiBzdHJpbmdbXTtcclxuXHRcdGxpc3RJdGVtczogc3RyaW5nW11cclxuXHR9O1xyXG5cclxuXHRpbmxpbmVQcmV2aWV3OiBib29sZWFuO1xyXG5cdHRvb2x0aXBQcmV2aWV3OiBib29sZWFuO1xyXG5cdHRvb2x0aXBQcmV2aWV3RGlyZWN0aW9uOiBzdHJpbmc7IC8vIGxlZnQgfHwgcmlnaHRcclxuXHJcblxyXG5cdGluY2x1ZGVPbmx5OiBzdHJpbmc7XHQvLyBub25lIHx8IGhlYWRpbmcsIGxpbmssIHRhZywgbGlzdEl0ZW1zXHJcblx0d29yZHNUb0luY2x1ZGU6IHN0cmluZ1tdO1xyXG5cdGluY2x1ZGVCZWdpbm5pbmc6IGJvb2xlYW47XHJcblxyXG5cdHByaW1lRWxlbWVudDogc3RyaW5nOyAvLyBub25lIHx8IGhlYWRpbmcsIGxpbmssIHRhZywgbGlzdEl0ZW1zXHJcblx0d29yZHNUb0V4Y2x1ZGU6e1xyXG5cdFx0aGVhZGluZzogc3RyaW5nW107XHJcblx0XHRsaW5rOiBzdHJpbmdbXTtcclxuXHRcdHRhZzogc3RyaW5nW107XHJcblx0XHRsaXN0SXRlbXM6IHN0cmluZ1tdXHJcblx0fTtcclxuXHR3b3Jkc1RvRXh0cmFjdDogc3RyaW5nO1xyXG5cclxuXHRpY29uOntcdC8vaWNvbiBmb3IgZWFjaCB0eXBlIG9mIGVsZW1lbnRcclxuXHRcdGhlYWRpbmc6IHN0cmluZztcclxuXHRcdGxpbms6IHN0cmluZztcclxuXHRcdHRhZzogc3RyaW5nO1xyXG5cdFx0bGlzdEl0ZW1zOiBzdHJpbmc7XHJcblx0XHRub3RlOiBzdHJpbmc7XHJcblx0XHR0YXNrOiBzdHJpbmc7XHJcblx0XHR0YXNrRG9uZTogc3RyaW5nO1xyXG5cdFx0YmFja2xpbms6IHN0cmluZztcclxuXHRcdHRpbWU6IHN0cmluZztcclxuXHR9O1xyXG5cclxuXHRjdXN0b21JY29uOntcclxuXHRcdGhlYWRpbmc6IHN0cmluZztcclxuXHRcdGxpbms6IHN0cmluZztcclxuXHRcdHRhZzogc3RyaW5nO1xyXG5cdFx0bGlzdEl0ZW1zOiBzdHJpbmc7XHJcblx0XHRub3RlOiBzdHJpbmc7XHJcblx0XHR0YXNrOiBzdHJpbmc7XHJcblx0XHR0YXNrRG9uZTogc3RyaW5nO1xyXG5cdFx0YmFja2xpbms6IHN0cmluZztcclxuXHRcdHRpbWU6IHN0cmluZztcclxuXHR9O1xyXG5cclxuXHRpbmRlbnQ6e1xyXG5cdFx0aGVhZGluZzogYm9vbGVhbjtcclxuXHRcdGxpbms6IGJvb2xlYW47XHJcblx0XHRsaXN0SXRlbXM6IGJvb2xlYW47XHJcblx0fTtcclxuXHRpbmRlbnRGb2xsb3dIZWFkaW5nOiBudW1iZXI7IC8vIDAgZG9uJ3QgZm9sbG93IDE6c2FtZSBsZXZlbCAyOiBsZXZlbCsxXHJcblxyXG5cdHByZWZpeDp7XHJcblx0XHRoZWFkaW5nOiBzdHJpbmc7XHJcblx0XHRsaW5rOiBzdHJpbmc7XHJcblx0XHR0YWc6IHN0cmluZztcclxuXHRcdGxpc3RJdGVtczogc3RyaW5nO1xyXG5cdFx0dGFzazogc3RyaW5nO1xyXG5cdFx0dGFza0RvbmU6IHN0cmluZztcclxuXHRcdGJhY2tsaW5rOiBzdHJpbmc7XHJcblx0XHR0aW1lOiBzdHJpbmc7XHJcblx0fTtcclxuXHRyZXBlYXRIZWFkaW5nUHJlZml4OiBzdHJpbmc7IC8vIG5vbmUsIGxldmVsLCBsZXZlbC0xXHJcblx0YWRkQ2hlY2tib3hUZXh0OiBib29sZWFuO1xyXG5cclxuXHRwZXJpb2RpY05vdGVzRW5hYmxlZDogYm9vbGVhbjtcclxuXHRjYWxlbmRhclNldHNFbmFibGVkOiBib29sZWFuO1xyXG5cdGF0dGFjaFdlZWtseU5vdGVzTmFtZTogYm9vbGVhbjtcclxuXHJcblx0c2hvd0RlYnVnSW5mbzogYm9vbGVhbjtcclxuXHJcblx0bm90ZVRpdGxlQmFja2dyb3VuZENvbG9yOiBzdHJpbmc7IC8vIG5vbmUsIGFjY2VudCwgY3VzdG9tXHJcblx0Y3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9yOiB7XHJcblx0XHRhY2NlbnQ6IHtcclxuXHRcdFx0bGlnaHQ6IHN0cmluZztcclxuXHRcdFx0ZGFyazogc3RyaW5nO1xyXG5cdFx0fTtcclxuXHRcdGN1c3RvbToge1xyXG5cdFx0XHRsaWdodDogc3RyaW5nO1xyXG5cdFx0XHRkYXJrOiBzdHJpbmc7XHJcblx0XHR9O1xyXG5cdH07XHJcblx0Y3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9ySG92ZXI6IHtcclxuXHRcdGFjY2VudDoge1xyXG5cdFx0XHRsaWdodDogc3RyaW5nO1xyXG5cdFx0XHRkYXJrOiBzdHJpbmc7XHJcblx0XHR9O1xyXG5cdFx0Y3VzdG9tOiB7XHJcblx0XHRcdGxpZ2h0OiBzdHJpbmc7XHJcblx0XHRcdGRhcms6IHN0cmluZztcclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0Ly8gXHU1NDA0XHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDZFXHU2MEM1XHU1ODMxXHJcblx0ZmlsZUZsYWc6IHtcclxuXHRcdFtwYXRoOiBzdHJpbmddOiB7XHJcblx0XHRcdCdmb2xkJz86IGJvb2xlYW47XHJcblx0XHR9O1xyXG5cdH07XHJcblxyXG5cdC8vIHRhc2tcdTMwNkVjdXN0b20gc3RhdHVzXHJcblx0dGFza0ljb246IHtcclxuXHRcdFtzdGF0dXM6IHN0cmluZ106IHtcclxuXHRcdFx0c3ltYm9sOiBzdHJpbmc7XHJcblx0XHRcdGljb246IHN0cmluZztcclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0Y29sbGFwc2VBbGxBdFN0YXJ0dXA6IGJvb2xlYW47XHJcblxyXG5cdC8vIGdldEJhY2tsaW5rczogYm9vbGVhbjtcclxuXHRzaG93QmFja2xpbmtzOiBib29sZWFuO1xyXG5cclxuXHRzaG93UHJvcGVydHlMaW5rczogYm9vbGVhbjtcclxuXHJcblx0cG9wb3V0U2l6ZToge1xyXG5cdFx0d2lkdGg6IG51bWJlcjtcclxuXHRcdGhlaWdodDogbnVtYmVyO1xyXG5cdH1cclxuXHRwb3BvdXRBbHdheXNPblRvcDogYm9vbGVhbjtcclxuXHJcblx0c2hvd0xpc3RDYWxsb3V0czogYm9vbGVhbjtcclxuXHRzaG93VGltZUxpc3Q6IGJvb2xlYW47XHJcblxyXG5cdHNldEJhc2VEYXRlQXNIb21lOiBib29sZWFuO1xyXG5cclxuXHRjaGVja1VucmVzb2x2ZWRMaW5rc0F0U3RhcnR1cDogYm9vbGVhbjtcclxuXHJcblx0d3JhcExpbmU6IGJvb2xlYW47XHJcblx0Ym9vdERlbGF5VGltZTogbnVtYmVyO1xyXG59XHJcblxyXG4vLyBcdThBMkRcdTVCOUFcdTk4MDVcdTc2RUVcdTMwQzdcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzhcclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IERhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyA9IHtcclxuXHQvL2luaXRpYWxTZWFyY2hUeXBlOiAnYmFja3dhcmQnLFxyXG5cdG9mZnNldDogNyxcclxuXHRvbnNldDogJzIwMjAtMDMtMzAnLFxyXG5cdGR1cmF0aW9uOiB7XHJcblx0XHRkYXk6MjgsXHJcblx0XHR3ZWVrOjEyLFxyXG5cdFx0bW9udGg6MTIsXHJcblx0XHRxdWFydGVyOjgsXHJcblx0XHR5ZWFyOjNcclxuXHR9LFxyXG5cdHNob3dFbGVtZW50czoge1xyXG5cdFx0aGVhZGluZzogdHJ1ZSxcclxuXHRcdGxpbms6IHRydWUsXHJcblx0XHR0YWc6IHRydWUsXHJcblx0XHRsaXN0SXRlbXM6IHRydWUsXHJcblx0XHR0YXNrOiB0cnVlLFxyXG5cdH0sXHJcblx0XHJcblx0aGVhZGluZ0xldmVsOiBbdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZV0sXHJcblx0YWxsUm9vdEl0ZW1zOiBmYWxzZSxcclxuXHRhbGxUYXNrczogdHJ1ZSxcclxuXHR0YXNrT25seTogZmFsc2UsXHJcblx0aGlkZUNvbXBsZXRlZFRhc2tzOiBmYWxzZSxcclxuXHRkaXNwbGF5RmlsZUluZm86ICdsaW5lcycsXHJcblx0ZGlzcGxheUZpbGVJbmZvRGFpbHk6ICdsaW5lcycsIC8vIG5vbmUsbGluZXMsZGF5cyxkb3coZGF5IG9mIHRoZSB3ZWVrKSxkb3dzaG9ydCx3ZWVrbnVtYmVyLHRhZ1xyXG5cdGRpc3BsYXlGaWxlSW5mb1BlcmlvZGljOiAnbGluZXMnLCAvLyBub25lLGxpbmVzLGRheXMsdGFnXHJcblx0dmlld1Bvc2l0aW9uOiAncmlnaHQnLFxyXG5cclxuXHRtYXJrZG93bk9ubHk6IHRydWUsXHJcblx0ZXhhY3RNYXRjaE9ubHk6IGZhbHNlLFxyXG5cclxuXHR3b3Jkc1RvSWdub3JlOntcclxuXHRcdGhlYWRpbmc6IFtdLFxyXG5cdFx0bGluazogW10sXHJcblx0XHR0YWc6IFtdLFxyXG5cdFx0bGlzdEl0ZW1zOiBbXVxyXG5cdH0sXHJcblxyXG5cdGlubGluZVByZXZpZXc6IHRydWUsXHJcblx0dG9vbHRpcFByZXZpZXc6IHRydWUsXHJcblx0dG9vbHRpcFByZXZpZXdEaXJlY3Rpb246ICdsZWZ0JyxcclxuXHJcblx0XHJcblx0aW5jbHVkZU9ubHk6ICdub25lJyxcclxuXHR3b3Jkc1RvSW5jbHVkZTogW10sXHJcblx0aW5jbHVkZUJlZ2lubmluZzogdHJ1ZSxcclxuXHJcblx0cHJpbWVFbGVtZW50OiAnbm9uZScsXHJcblx0d29yZHNUb0V4Y2x1ZGU6e1xyXG5cdFx0aGVhZGluZzogW10sXHJcblx0XHRsaW5rOiBbXSxcclxuXHRcdHRhZzogW10sXHJcblx0XHRsaXN0SXRlbXM6IFtdXHJcblx0fSxcclxuXHR3b3Jkc1RvRXh0cmFjdDogJycsXHJcblxyXG5cdGljb246e1x0XHJcblx0XHRoZWFkaW5nOiAnbm9uZScsXHJcblx0XHRsaW5rOiAnbGluaycsXHJcblx0XHR0YWc6ICd0YWcnLFxyXG5cdFx0bGlzdEl0ZW1zOiAnbGlzdCcsXHJcblx0XHRub3RlOiAnZmlsZScsXHJcblx0XHR0YXNrOiAnc3F1YXJlJyxcclxuXHRcdHRhc2tEb25lOiAnY2hlY2stc3F1YXJlJyxcclxuXHRcdGJhY2tsaW5rOiAnbGlua3MtY29taW5nLWluJyxcclxuXHRcdHRpbWU6ICdjbG9jaydcclxuXHR9LFxyXG5cdGN1c3RvbUljb246e1xyXG5cdFx0aGVhZGluZzogJ2hhc2gnLFxyXG5cdFx0bGluazogJ2xpbmsnLFxyXG5cdFx0dGFnOiAndGFnJyxcclxuXHRcdGxpc3RJdGVtczogJ2xpc3QnLFxyXG5cdFx0bm90ZTonZmlsZScsXHJcblx0XHR0YXNrOidzcXVhcmUnLFxyXG5cdFx0dGFza0RvbmU6J2NoZWNrLXNxdWFyZScsXHJcblx0XHRiYWNrbGluazonbGlua3MtY29taW5nLWluJyxcclxuXHRcdHRpbWU6ICdjbG9jaydcclxuXHR9LFxyXG5cclxuXHRpbmRlbnQ6e1xyXG5cdFx0aGVhZGluZzogdHJ1ZSxcclxuXHRcdGxpbms6IHRydWUsXHJcblx0XHRsaXN0SXRlbXM6IHRydWUsXHJcblx0fSxcclxuXHRpbmRlbnRGb2xsb3dIZWFkaW5nOiAwLFxyXG5cdHByZWZpeDp7XHJcblx0XHRoZWFkaW5nOiAnJyxcclxuXHRcdGxpbms6ICcnLFxyXG5cdFx0dGFnOiAnJyxcclxuXHRcdGxpc3RJdGVtczogJycsXHJcblx0XHR0YXNrOiAnJyxcclxuXHRcdHRhc2tEb25lOiAnJyxcclxuXHRcdGJhY2tsaW5rOicnLFxyXG5cdFx0dGltZTogJydcclxuXHR9LFxyXG5cdHJlcGVhdEhlYWRpbmdQcmVmaXg6J25vbmUnLFxyXG5cdGFkZENoZWNrYm94VGV4dDogZmFsc2UsXHJcblxyXG5cdC8vIGRhaWx5Tm90ZUNvcmU6IHRydWUsXHJcblx0cGVyaW9kaWNOb3Rlc0VuYWJsZWQ6IHRydWUsXHJcblx0Y2FsZW5kYXJTZXRzRW5hYmxlZDogdHJ1ZSxcclxuXHRhdHRhY2hXZWVrbHlOb3Rlc05hbWU6IHRydWUsXHJcblxyXG5cdHNob3dEZWJ1Z0luZm86IGZhbHNlLFxyXG5cclxuXHRub3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3I6ICdub25lJywgLy8gbm9uZSwgYWNjZW50LCBjdXN0b21cclxuXHRjdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3I6IHtcclxuXHRcdGFjY2VudDoge1xyXG5cdFx0XHRsaWdodDogJyNFM0UzRTMnLFxyXG5cdFx0XHRkYXJrOiAnIzM2MzYzNicsXHJcblx0XHR9LFxyXG5cdFx0Y3VzdG9tOiB7XHJcblx0XHRcdGxpZ2h0OiAnI0JFQkVCRScsXHJcblx0XHRcdGRhcms6ICcjNEU0RTRFJyxcclxuXHRcdH0sXHJcblx0fSxcclxuXHRjdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlcjoge1xyXG5cdFx0YWNjZW50OiB7XHJcblx0XHRcdGxpZ2h0OiAnI0QzRDNEMycsXHJcblx0XHRcdGRhcms6ICcjNDY0NjQ2JyxcclxuXHRcdH0sXHJcblx0XHRjdXN0b206IHtcclxuXHRcdFx0bGlnaHQ6ICcjQUVBRUFFJyxcclxuXHRcdFx0ZGFyazogJyM1RTVFNUUnLFxyXG5cdFx0fSxcclxuXHR9LFxyXG5cdFxyXG5cdGZpbGVGbGFnOiB7fSxcclxuXHJcblx0Ly8gdGFza1x1MzA2RWN1c3RvbSBzdGF0dXNcclxuXHR0YXNrSWNvbjoge1xyXG5cdFx0Ly8gdG9kbzoge3N5bWJvbDonICcsIGljb246J3NxdWFyZSd9LFxyXG5cdFx0aW5jb21wbGV0ZToge3N5bWJvbDonLycsIGljb246J2NvbHVtbnMnfSxcclxuXHRcdC8vIGRvbmU6IHtzeW1ib2w6J3gnLCBpY29uOidjaGVjay1zcXVhcmUnfSxcclxuXHRcdGNhbmNlbGVkOiB7c3ltYm9sOictJywgaWNvbjonbWludXMtc3F1YXJlJ30sXHJcblx0XHRmb3dhcmRlZDoge3N5bWJvbDonPicsIGljb246J3NlbmQnfSxcclxuXHRcdHNjaGVkdWxpbmc6IHtzeW1ib2w6JzwnLCBpY29uOidjYWxlbmRhcid9LFxyXG5cdFx0cXVlc3Rpb246IHtzeW1ib2w6Jz8nLCBpY29uOidoZWxwLWNpcmNsZSd9LFxyXG5cdFx0aW1wb3J0YW50OiB7c3ltYm9sOichJywgaWNvbjonYWxlcnQtdHJpYW5nbGUnfSxcclxuXHRcdHN0YXI6IHtzeW1ib2w6JyonLCBpY29uOidzdGFyJ30sXHJcblx0XHRxdW90ZToge3N5bWJvbDonXCInLCBpY29uOidxdW90ZSd9LFxyXG5cdFx0bG9jYXRpb246IHtzeW1ib2w6J2wnLCBpY29uOidtYXAtcGluJ30sXHJcblx0XHRib29rbWFyazoge3N5bWJvbDonYicsIGljb246J2Jvb2ttYXJrJ30sXHJcblx0XHRpbmZvcm1hdGlvbjoge3N5bWJvbDonaScsIGljb246J2luZm8nfSxcclxuXHRcdHNhdmluZ3M6IHtzeW1ib2w6J1MnLCBpY29uOidkb2xsYXItc2lnbid9LFxyXG5cdFx0aWRlYToge3N5bWJvbDonSScsIGljb246J3NpcmVuJ30sXHJcblx0XHRwcm9zOiB7c3ltYm9sOidwJywgaWNvbjondGh1bWJzLXVwJ30sXHJcblx0XHRjb25zOiB7c3ltYm9sOidjJywgaWNvbjondGh1bWJzLWRvd24nfSxcclxuXHRcdGZpcmU6IHtzeW1ib2w6J2YnLCBpY29uOidmbGFtZSd9LFxyXG5cdFx0a2V5OiB7c3ltYm9sOidrJywgaWNvbjona2V5J30sXHJcblx0XHR3aW46IHtzeW1ib2w6J3cnLCBpY29uOidjYWtlJ30sXHJcblx0XHR1cDoge3N5bWJvbDondScsIGljb246J3RyZW5kaW5nLXVwJ30sXHJcblx0XHRkb3duOiB7c3ltYm9sOidkJywgaWNvbjondHJlbmRpbmctZG93bid9LFxyXG5cdH0sXHJcblxyXG5cdGNvbGxhcHNlQWxsQXRTdGFydHVwOiBmYWxzZSxcclxuXHJcblx0Ly8gZ2V0QmFja2xpbmtzOiB0cnVlLFxyXG5cdHNob3dCYWNrbGlua3M6IGZhbHNlLFxyXG5cclxuXHRzaG93UHJvcGVydHlMaW5rczogdHJ1ZSxcclxuXHJcblx0cG9wb3V0U2l6ZToge1xyXG5cdFx0d2lkdGg6IDYwMCxcclxuXHRcdGhlaWdodDogODAwXHJcblx0fSxcclxuXHRwb3BvdXRBbHdheXNPblRvcDogZmFsc2UsXHJcblxyXG5cdHNob3dMaXN0Q2FsbG91dHM6IHRydWUsXHJcblx0c2hvd1RpbWVMaXN0OiB0cnVlLFxyXG5cclxuXHRzZXRCYXNlRGF0ZUFzSG9tZTogZmFsc2UsXHJcblxyXG5cdGNoZWNrVW5yZXNvbHZlZExpbmtzQXRTdGFydHVwOiBmYWxzZSxcclxuXHJcblx0d3JhcExpbmU6IHRydWUsXHJcblxyXG5cdGJvb3REZWxheVRpbWU6IDMwMCxcclxufVxyXG5cclxuLy8gZXhwb3J0IGludGVyZmFjZSBGaWxlU3RhdHVzIHtcclxuLy8gXHRpc0ZvbGRlZDogYm9vbGVhbjtcclxuLy8gfVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGaWxlSW5mbyB7XHJcblx0Ly8gZmlsZTpURmlsZTtcclxuXHRkYXRlOiBtb21lbnQ7XHJcblx0Ly9jb250ZW50OiBzdHJpbmc7XHJcblx0bGluZXM6IHN0cmluZ1tdO1xyXG5cdG51bU9mTGluZXM6IG51bWJlcjtcclxuXHRpc0ZvbGRlZDogYm9vbGVhbjtcclxuXHRiYWNrbGlua3M/OiBURmlsZVtdO1xyXG5cdGZyb250bWF0dGVyTGlua3M/OiB7XHJcblx0XHRkaXNwbGF5VGV4dD86IHN0cmluZztcclxuXHRcdGtleTogc3RyaW5nO1xyXG5cdFx0bGluazogc3RyaW5nO1xyXG5cdFx0b3JpZ2luYWw6IHN0cmluZztcclxuXHR9W107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGF0ZUluZm8ge1xyXG5cdGRhdGU6IG1vbWVudDtcclxuXHRkYWlseU5vdGU6IGJvb2xlYW47XHJcblx0dW5yZXNvbHZlZExpbmtzOiBURmlsZVtdO1xyXG5cdC8vIGNyZWF0ZWRGaWxlczogVEZpbGVbXTtcclxuXHQvLyBtb2RpZmllZEZpbGVzOiBURmlsZVtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE91dGxpbmVEYXRhIHtcdFxyXG5cclxuXHR0eXBlT2ZFbGVtZW50OidoZWFkaW5nJ3wnbGluayd8J3RhZyd8J2xpc3RJdGVtcyd8J3Rhc2snO1xyXG5cdHBvc2l0aW9uOlBvcztcclxuXHRsaW5rPzpzdHJpbmc7XHJcblx0ZGlzcGxheVRleHQ/OiBzdHJpbmc7XHJcblx0Ly8gbGV2ZWwgXHVGRjFBbGlzdEl0ZW1zXHUzMDZCXHUzMDY0XHUzMDQ0XHUzMDY2XHUzMDZGMFx1RkYxQVx1MzBDOFx1MzBDM1x1MzBEN1x1MzAwMTFcdUZGMUFcdTMwRUJcdTMwRkNcdTMwQzhcdTMwMDEyXHVGRjFBXHUzMDVEXHUzMDhDXHU0RUU1XHU0RTBCXHJcblx0bGV2ZWw/Om51bWJlcjtcclxuXHR0YXNrPzogc3RyaW5nfHVuZGVmaW5lZDtcclxuXHRsaXN0Q2FsbG91dD86IG51bWJlcnxudWxsO1xyXG5cdHRpbWU/OiBzdHJpbmd8bnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERBWVNfUEVSX1VOSVQgPXtcclxuXHRkYXk6IDEsXHJcblx0d2VlazogNyxcclxuXHRtb250aDogMzAsXHJcblx0cXVhcnRlcjogOTAsXHJcblx0eWVhcjozNjVcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEdSQU5VTEFSSVRZX0xJU1Q6IElHcmFudWxhcml0eVtdID0gWydkYXknLCd3ZWVrJywnbW9udGgnLCdxdWFydGVyJywneWVhciddXHJcblxyXG5leHBvcnQgY29uc3QgR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFkgPSB7XHJcblx0ZGF5OiAnZGFpbHknLFxyXG5cdHdlZWs6ICd3ZWVrbHknLFxyXG5cdG1vbnRoOiAnbW9udGhseScsXHJcblx0cXVhcnRlcjogJ3F1YXJ0ZXJseScsXHJcblx0eWVhcjogJ3llYXJseSdcclxufSBcclxuXHJcbmV4cG9ydCBjb25zdCBGSUxFSU5GT19UT19ESVNQTEFZID0ge1xyXG5cdG5vbmU6ICdub25lJyxcclxuXHRsaW5lczogJ251bSBvZiBsaW5lcycsXHJcblx0ZGF5czogJ2Rpc3RhbmNlJyxcclxuXHR0YWc6ICdmaXJzdCB0YWcnXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBGSUxFSU5GT19UT19ESVNQTEFZX0RBWSA9IHtcclxuXHRub25lOiAnbm9uZScsXHJcblx0bGluZXM6ICdudW0gb2YgbGluZXMnLFxyXG5cdGRheXM6ICdkaXN0YW5jZScsXHJcblx0dGFnOiAnZmlyc3QgdGFnJyxcclxuXHRkb3c6ICdkYXkgb2Ygd2VlaycsXHJcblx0ZG93c2hvcnQ6ICdkYXkgb2Ygd2VlayhzaG9ydCknLFxyXG5cdHdlZWtudW1iZXI6ICd3ZWVrIG51bWJlcidcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGFpbHlOb3RlT3V0bGluZVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblxyXG5cdHNldHRpbmdzOiBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3M7XHJcblx0dmlldzogRGFpbHlOb3RlT3V0bGluZVZpZXc7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdFxyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdC8vcmVnaXN0ZXIgY3VzdG9tZSB2aWV3IGFjY29yZGluZyB0byBEZXZsb3BlciBEb2NzXHJcblx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcclxuXHRcdFx0RGFpbHlOb3RlT3V0bGluZVZpZXdUeXBlLFxyXG5cdFx0XHQobGVhZikgPT4gKHRoaXMudmlldyA9IG5ldyBEYWlseU5vdGVPdXRsaW5lVmlldyhsZWFmLCB0aGlzLCB0aGlzLnNldHRpbmdzKSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Ly9cdTMwQjNcdTMwREVcdTMwRjNcdTMwQzlcdThGRkRcdTUyQTBcclxuXHRcdC8vIE9wZW4gT3V0bGluZTogXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU4ODY4XHU3OTNBXHU3NTI4XHUzMDZFXHUzMEFCXHUzMEI5XHUzMEJGXHUzMEUwXHUzMEQzXHUzMEU1XHUzMEZDXHUzMDkyXHU5NThCXHUzMDRGXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ2RhaWx5LW5vdGUtb3V0bGluZS1vcGVuJyxcclxuXHRcdFx0bmFtZTogJ09wZW4gT3V0bGluZScsXHJcblxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCk9PiB7XHJcblx0XHRcdFx0dGhpcy5jaGVja1ZpZXcodHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnY3JlYXRlLWRhaWx5bm90ZS1mb3ItdW5yZXNvbHZlZC1saW5rcycsXHJcblx0XHRcdG5hbWU6ICdDcmVhdGUgZGFpbHkgbm90ZXMgZm9yIHVucmVzb2x2ZWQgbGlua3MnLFxyXG5cdFx0XHRjYWxsYmFjazogYXN5bmMoKT0+e1xyXG5cdFx0XHRcdGNoZWNrVW5yZXNvbHZlZExpbmtzLmNhbGwodGhpcy52aWV3KTtcclxuXHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblxyXG5cdFx0XHJcblx0XHQvLyAvLyBnZXQgVG9kYXkncyBOb3RlOiBEYWlseU5vdGVJbnRlcmZhY2VcdTMwNkV0ZXN0XHUzMDZFXHUzMDVGXHUzMDgxXHUzMDZFXHU5NThCXHU3NjdBXHU3NTI4XHUzMEIzXHUzMERFXHUzMEYzXHUzMEM5XHUzMDAyXHJcblx0XHQvLyAvLyBcdTUxNjhEYWlseU5vdGVcdTMwOTJcdTUzRDZcdTVGOTdcdTMwNTdcdTMwNUZcdTMwNkVcdTMwNjFcdTMwMDFcdTY3MkNcdTY1RTVcdTUyMDZcdTMwOTJcdTUzRDZcdTVGOTdcdTMwNTdcdTMwNjZcdTMwMDFjb25zb2xlXHUzMDZCXHU4ODY4XHU3OTNBXHUzMDU5XHUzMDhCXHUzMDAyXHJcblx0XHRcclxuXHRcdC8vIHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHQvLyBcdGlkOiAnZGFpbHktbm90ZS1vdXRsaW5lLWdldFRvZGF5c05vdGUnLFxyXG5cdFx0Ly8gXHRuYW1lOiBcIkdldCBUb2RheSdzIE5vdGVcIixcclxuXHRcdC8vIFx0Y2FsbGJhY2s6IGFzeW5jICgpPT57XHJcblx0XHQvLyBcdFx0Ly8gXHU1MTY4XHUzMDY2XHUzMDZFXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0XHQvLyBcdFx0Y29uc3QgYWxsRGFpbHlOb3RlcyA9IGdldEFsbERhaWx5Tm90ZXMoKTtcclxuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyhhbGxEYWlseU5vdGVzKTtcclxuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyh0eXBlb2YgYWxsRGFpbHlOb3Rlcyk7XHJcblx0XHQvLyBcdFx0Y29uc29sZS5sb2coJ21vbWVudFx1MzA1RFx1MzA2RVx1MzA3RVx1MzA3RScsbW9tZW50KCkpO1xyXG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKGBEYWlseU5vdGVJbnRlcmZhY2VcdTMwNkVcdTMwQURcdTMwRkNcdTMwNkVcdTVGNjJcdTVGMEZcdTMwNkJcdTMwMDJkYXktJHt3aW5kb3cubW9tZW50KCkuc3RhcnRPZignZGF5JykuZm9ybWF0KCl9YCk7XHJcblxyXG5cdFx0Ly8gXHRcdC8vXHU2NzJDXHU2NUU1XHUzMDZFXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0XHQvLyBcdFx0Y29uc3QgdG9kYXlzTm90ZSA9IGdldERhaWx5Tm90ZShtb21lbnQoKSwgYWxsRGFpbHlOb3Rlcyk7XHJcblx0XHQvLyBcdFx0aWYgKHRvZGF5c05vdGUpe1xyXG5cdFx0Ly8gXHRcdFx0Y29uc29sZS5sb2codG9kYXlzTm90ZSlcclxuXHRcdC8vIFx0XHRcdC8vIFx1NjVFNVx1NEVEOFx1MzA2RVx1NTNENlx1NUY5N1xyXG5cdFx0Ly8gXHRcdFx0Y29uc3Qgbm90ZURhdGUgPSBnZXREYXRlRnJvbUZpbGUodG9kYXlzTm90ZSxcImRheVwiKTtcclxuXHRcdC8vIFx0XHRcdGNvbnNvbGUubG9nKGBcdTY1RTVcdTRFRDhcdTMwNkYgJHtub3RlRGF0ZX1cdTMwNjdcdTMwNTlgKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0Ly8gXHRcdFx0Y29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0b2RheXNOb3RlKTtcclxuXHRcdC8vIFx0XHRcdGNvbnNvbGUubG9nKCdjYWNoZTonLCBjYWNoZSk7XHJcblxyXG5cdFx0Ly8gXHRcdFx0Y29uc3Qgbm90ZSA9IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQodG9kYXlzTm90ZSk7XHJcblx0XHQvLyBcdFx0XHRjb25zb2xlLmxvZyhub3RlKTtcclxuXHJcblx0XHQvLyBcdFx0fSBlbHNlIHtcclxuXHRcdC8vIFx0XHRcdGNvbnNvbGUubG9nKCdcdTRFQ0FcdTY1RTVcdTMwNkVcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNENcdTMwN0ZcdTMwNDJcdTMwNUZcdTMwOEFcdTMwN0VcdTMwNUJcdTMwOTMnKTtcclxuXHRcdC8vIFx0XHR9XHJcblx0XHQvLyBcdH1cclxuXHRcdC8vIH0pO1xyXG5cdFxyXG5cdC8vICB2aWV3XHUzMDZFXHU2NkY0XHU2NUIwKFx1MzBBMlx1MzBDM1x1MzBEN1x1MzBDN1x1MzBGQ1x1MzBDOFx1NjY0Mlx1NzUyOClcclxuXHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeShhc3luYygpPT57XHJcblx0XHR0aGlzLmNoZWNrVmlldyhmYWxzZSk7XHJcblx0fSlcclxuXHJcblx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IERhaWx5Tm90ZU91dGxpbmVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHQvLyBEZXZlbG9wZXIgRG9jc1x1MzA2Qlx1NUY5M1x1MzA2M1x1MzA2Nlx1MzBBQlx1MzBCOVx1MzBCRlx1MzBFMFx1MzBEM1x1MzBFNVx1MzBGQ1x1MzA5Mlx1MzBDN1x1MzBCRlx1MzBDM1x1MzBDMVxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0XHQvLyB2MC42LjBcdTRFRTVcdTUyNERcdTMwNkVcdThBMkRcdTVCOUFcdTMwQzdcdTMwRkNcdTMwQkZcdTMwNkJcdTVCRkVcdTMwNTdcdTMwNjZcdTRFOTJcdTYzREJcdTYwMjdcdTMwOTJcdTdEQURcdTYzMDFcdTMwNTlcdTMwOEJcdTMwNUZcdTMwODFcdTMwNkVcdTVCRkVcdTVGRENcclxuXHRcdC8vIDAuNlx1RkYwRTBcdTRFRTVcdTUyNERcdTMwNkZkdXJhdGlvblx1MzA2RiBudW1iZXJcdTU3OEJcdTMwNjBcdTMwNjNcdTMwNUZcdTMwNENcdTMwMDEgZGF5fnllYXJcdTMwNkVcdTMwRDdcdTMwRURcdTMwRDFcdTMwQzZcdTMwQTNcdTMwOTJcdTYzMDFcdTMwNjRcdTMwQUFcdTMwRDZcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwNkJcdTU5MDlcdTY2RjRcdTMwNTdcdTMwNUZcdTMwMDJcclxuXHRcdGlmICh0eXBlb2YgdGhpcy5zZXR0aW5ncy5kdXJhdGlvbiA9PT0gXCJudW1iZXJcIil7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuZHVyYXRpb24gPSBERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uO1xyXG5cdFx0fVxyXG5cdFx0Ly8gdjEuNC4xXHUyMTkydjEuNVx1MzA2N3NldHRpbmdzLmljb24oY3VzdG9tSWNvbikuYmFja2xpbmsvdGltZSAvIHNob3dFbGVtZW50cy50YXNrXHUzMDkyXHU4RkZEXHU1MkEwXHUzMDU3XHUzMDVGXHUzMDUzXHUzMDY4XHUzMDc4XHUzMDZFXHU1QkZFXHU1RkRDXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuaWNvbi5oYXNPd25Qcm9wZXJ0eSgnYmFja2xpbmsnKSl7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuaWNvbi5iYWNrbGluayA9IERFRkFVTFRfU0VUVElOR1MuaWNvbi5iYWNrbGluaztcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5jdXN0b21JY29uLmJhY2tsaW5rID0gREVGQVVMVF9TRVRUSU5HUy5jdXN0b21JY29uLmJhY2tsaW5rO1xyXG5cdFx0XHR0aGlzLnNldHRpbmdzLnByZWZpeC5iYWNrbGluayA9IERFRkFVTFRfU0VUVElOR1MucHJlZml4LmJhY2tsaW5rO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmljb24uaGFzT3duUHJvcGVydHkoJ3RpbWUnKSl7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuaWNvbi50aW1lID0gREVGQVVMVF9TRVRUSU5HUy5pY29uLnRpbWU7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuY3VzdG9tSWNvbi50aW1lID0gREVGQVVMVF9TRVRUSU5HUy5jdXN0b21JY29uLnRpbWU7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MucHJlZml4LnRpbWUgPSBERUZBVUxUX1NFVFRJTkdTLnByZWZpeC50aW1lO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50cy5oYXNPd25Qcm9wZXJ0eSgndGFzaycpKXtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHMudGFzayA9IERFRkFVTFRfU0VUVElOR1Muc2hvd0VsZW1lbnRzLnRhc2s7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0Y2hlY2tWaWV3ID0gYXN5bmMoYWN0aXZhdGVWaWV3OiBib29sZWFuKTpQcm9taXNlPHZvaWQ+ID0+IHtcclxuXHJcblx0XHRsZXQgW2xlYWZdID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUpO1xyXG5cdFx0aWYgKCFsZWFmKSB7XHJcblx0XHRcdHN3aXRjaCAodGhpcy5zZXR0aW5ncy52aWV3UG9zaXRpb24pIHtcclxuXHRcdFx0XHRjYXNlICdyaWdodCc6XHJcblx0XHRcdFx0XHRsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdsZWZ0JzpcclxuXHRcdFx0XHRcdGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVmdExlYWYoZmFsc2UpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAndGFiJzpcclxuXHRcdFx0XHRcdGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdzcGxpdCc6XHJcblx0XHRcdFx0XHRsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jyk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdwb3BvdXQnOlxyXG5cdFx0XHRcdFx0bGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd3aW5kb3cnKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogRGFpbHlOb3RlT3V0bGluZVZpZXdUeXBlfSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChhY3RpdmF0ZVZpZXcpIHtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XHJcblx0XHR9XHJcblx0fVxyXG59IiwgImltcG9ydCB7IE1hcmtkb3duVmlldywgTm90aWNlLCBzZXRJY29uLCBkZWJvdW5jZSwgRGVib3VuY2VyLCBNZW51LCBWaWV3U3RhdGVSZXN1bHQsIFZpZXd9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZX0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHsgZ2V0QWxsRGFpbHlOb3RlcywgZ2V0RGF0ZUZyb21GaWxlLCBjcmVhdGVEYWlseU5vdGUsIGdldERhdGVVSUQsIFxyXG5cdGdldEFsbFdlZWtseU5vdGVzLCBnZXRBbGxNb250aGx5Tm90ZXMsIGdldEFsbFF1YXJ0ZXJseU5vdGVzLCBnZXRBbGxZZWFybHlOb3RlcywgSUdyYW51bGFyaXR5IH0gZnJvbSBcIm9ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZVwiO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIlxyXG5cclxuaW1wb3J0IERhaWx5Tm90ZU91dGxpbmVQbHVnaW4sIHsgRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzLCBPdXRsaW5lRGF0YSwgRmlsZUluZm8sIERBWVNfUEVSX1VOSVQsR1JBTlVMQVJJVFlfTElTVCwgR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFksIEZJTEVJTkZPX1RPX0RJU1BMQVksIEZJTEVJTkZPX1RPX0RJU1BMQVlfREFZLCBEYXRlSW5mb30gZnJvbSAnc3JjL21haW4nO1xyXG5cclxuLy8gUGVyaW9kaWMgTm90ZXNcclxuaW1wb3J0IHt0eXBlIENhbGVuZGFyU2V0LH0gZnJvbSAnc3JjL3BlcmlvZGljTm90ZXNUeXBlcyc7XHJcblxyXG5pbXBvcnQgeyBkcmF3VUkgfSBmcm9tICdzcmMvZHJhd1VJJztcclxuaW1wb3J0IHsgZ2V0VGFyZ2V0RmlsZXMsIGdldFRhcmdldFBlcmlvZGljTm90ZXMgfSBmcm9tICcuL2dldFRhcmdldEZpbGVzJztcclxuaW1wb3J0IHsgZ2V0RmlsZUluZm8sIGdldE91dGxpbmUgfSBmcm9tICcuL2dldE91dGxpbmUnO1xyXG5pbXBvcnQgeyBkcmF3T3V0bGluZSB9IGZyb20gJy4vY29uc3RydWN0RE9NJztcclxuXHJcbmltcG9ydCB7IGdldEFQSSB9IGZyb20gXCJvYnNpZGlhbi1kYXRhdmlld1wiO1xyXG5pbXBvcnQgeyBjaGVja1VucmVzb2x2ZWRMaW5rcyB9IGZyb20gJy4vdXRpbCc7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUgPSAnZGFpbHktbm90ZS1vdXRsaW5lJztcclxuXHJcbi8vIFN0YXRlXHUzMDY3XHU3M0ZFXHU1NzI4XHU4ODY4XHU3OTNBXHU0RTJEXHUzMDZFXHU3QzkyXHU1RUE2XHUzMDAxXHUzMEFCXHUzMEVDXHUzMEYzXHUzMEMwXHUzMEZDXHUzMEJCXHUzMEMzXHUzMEM4XHUzMDkyXHU0RkREXHU2MzAxXHJcbmludGVyZmFjZSBJRGFpbHlOb3RlT3V0bGluZVN0YXRlIHtcclxuXHRhY3RpdmVTZXQ6IG51bWJlcjtcclxuXHRhY3RpdmVHcmFudWxhcml0eTogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGFpbHlOb3RlT3V0bGluZVZpZXcgZXh0ZW5kcyBJdGVtVmlldyBpbXBsZW1lbnRzIElEYWlseU5vdGVPdXRsaW5lU3RhdGUge1xyXG5cdFxyXG5cdHBsdWdpbjogRGFpbHlOb3RlT3V0bGluZVBsdWdpbjtcclxuXHRzZXR0aW5nczpEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3M7XHJcblxyXG5cdGFsbERhaWx5Tm90ZXM6IFJlY29yZDxzdHJpbmcsVEZpbGU+O1xyXG5cdFxyXG5cdHRhcmdldEZpbGVzOiBURmlsZVtdO1xyXG5cdC8vIGZpbGVTdGF0dXM6IEZpbGVTdGF0dXNbXTtcclxuXHRmaWxlSW5mbzogRmlsZUluZm9bXTtcclxuXHJcblx0ZGF0ZUluZm86IERhdGVJbmZvW107XHJcblx0XHJcblx0c2VhcmNoUmFuZ2U6IHtcclxuXHRcdGxhdGVzdDogbW9tZW50LFxyXG5cdFx0ZWFybGllc3Q6IG1vbWVudFxyXG5cdH0gPSB7XHJcblx0XHRsYXRlc3Q6IHdpbmRvdy5tb21lbnQoKSxcclxuXHRcdGVhcmxpZXN0OiB3aW5kb3cubW9tZW50KClcclxuXHR9O1xyXG5cdG91dGxpbmVEYXRhOiBPdXRsaW5lRGF0YVtdW107XHJcblxyXG5cdGZsYWdSZWRyYXc6IGJvb2xlYW47XHJcblx0ZmxhZ1JlZ2V0QWxsOiBib29sZWFuO1xyXG5cclxuXHRleHRyYWN0TW9kZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdGV4dHJhY3RUeXBlOiAnbm9yYW1sJ3wndGFzayd8J2xpc3RDYWxsb3V0J3wndGltZScgPSAnbm9yYW1sJztcclxuXHJcblx0Ly9cdTUxNjhcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwNkVcdTYyOThcdTMwOEFcdTMwNUZcdTMwNUZcdTMwN0ZcclxuXHRjb2xsYXBzZUFsbDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHQvLyBQZXJpb2RpYyBOb3Rlc1xyXG5cdHZlclBOOiBudW1iZXI7ICAvLyBQZXJpb2RpYyBOb3RlcyBwbHVnaW5cdTMwNkVcdTMwRDBcdTMwRkNcdTMwQjhcdTMwRTdcdTMwRjMgIDBcdUZGMUFvZmYgIDFcdUZGMUE8MS4wLjAgIDI6Pj0xLjAuMCBcclxuXHRjYWxlbmRhclNldHM6IENhbGVuZGFyU2V0W107XHJcblx0YWN0aXZlU2V0OiBudW1iZXIgPSAwOyBcclxuXHRhY3RpdmVHcmFudWxhcml0eTogbnVtYmVyID0gMDsgLy8gZGF5IHwgd2VlayB8IG1vbnRoIHwgcXVhcnRlciB8IHllYXIgR1JBTlVMQVJJVFlfTElTVFx1MzA2RVx1NkRGQlx1MzA0OFx1NUI1N1x1MzA2OFx1MzA1N1x1MzA2NlxyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdGxlYWY6IFdvcmtzcGFjZUxlYWYsXHJcblx0XHRwbHVnaW46IERhaWx5Tm90ZU91dGxpbmVQbHVnaW4sXHJcblx0XHRzZXR0aW5nczogRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzLFxyXG5cdCkge1xyXG5cdFx0c3VwZXIobGVhZik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHR9XHJcblxyXG5cdGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gRGFpbHlOb3RlT3V0bGluZVZpZXdUeXBlO1xyXG5cdH1cclxuXHJcblx0Z2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiAnRGFpbHkgTm90ZSBPdXRsaW5lJztcclxuXHR9XHJcblxyXG5cdGdldEljb24oKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiAnY2FsZW5kYXItY2xvY2snO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25PcGVuKCl7XHJcblxyXG5cdFx0dGhpcy5pbml0VmlldygpO1xyXG5cdFx0Ly8gIFx1NTIxRFx1NTZERVx1MzA2RVx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1NjNBMlx1N0QyMlx1NTFFNlx1NzQwNlx1MzA2RmluaXRWaWV3KClcdTMwNkJcdTc5RkJcdTUyRDVcdTMwNTdcdTMwMDFcdTVCOUZcdTg4NENcdTUyNERcdTMwNkJcdTMwOEZcdTMwNUFcdTMwNEJcdTMwNkJcdTMwQTZcdTMwQThcdTMwQTRcdTMwQzgoYm9vdERlbGF5KVx1MzA5Mlx1NTE2NVx1MzA4Q1x1MzA1Rlx1MzAwMlxyXG5cdFx0Ly8gIFx1MzA1RFx1MzA0Nlx1MzA1N1x1MzA2QVx1MzA0NFx1MzA2OFx1OEQ3N1x1NTJENVx1NjY0Mlx1MzA2Qlx1NTE2OFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA2RVx1MzBDN1x1MzBGQ1x1MzBCRlx1NTNENlx1NUY5N1x1MzA2Qlx1NTkzMVx1NjU1N1x1MzA1OVx1MzA4Qlx1MzA4OFx1MzA0Nlx1MzA2MFx1MzA2M1x1MzA1Rlx1MzA1Rlx1MzA4MVx1MzAwMlxyXG5cclxuXHRcdC8vXHU4MUVBXHU1MkQ1XHU2NkY0XHU2NUIwXHUzMDZFXHUzMDVGXHUzMDgxXHUzMDZFXHUzMEM3XHUzMEZDXHUzMEJGXHU1OTA5XHU2NkY0XHUzMDAxXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU4RkZEXHU1MkEwL1x1NTI0QVx1OTY2NFx1MzA2RVx1NzZFM1x1ODk5NiBvYnNlcnZlIGZpbGUgY2hhbmdlL2NyZWF0ZS9kZWxldGVcclxuXHRcdGNvbnN0IGRlYm91bmNlZEF1dG9SZWZyZXNoOkRlYm91bmNlcjxbXSxudWxsPiA9IGRlYm91bmNlKHRoaXMuYXV0b1JlZnJlc2gsMjAwMCx0cnVlKTtcclxuXHRcdHRoaXMuZmxhZ1JlZHJhdyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5mbGFnUmVnZXRBbGwgPSBmYWxzZTsgXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbignY2hhbmdlZCcsIChmaWxlLGRhdGEsY2FjaGUpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMudGFyZ2V0RmlsZXM/LmluY2x1ZGVzKGZpbGUpKXtcclxuXHRcdFx0XHR0aGlzLmZsYWdSZWRyYXcgPSB0cnVlO1xyXG5cdFx0XHRcdGRlYm91bmNlZEF1dG9SZWZyZXNoLmNhbGwodGhpcyk7XHJcblx0XHRcdH1cclxuXHRcdH0pKTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oJ2NyZWF0ZScsKGZpbGUpPT57XHJcblx0XHRcdHRoaXMuZmxhZ1JlZ2V0QWxsID0gdHJ1ZTtcclxuXHRcdFx0ZGVib3VuY2VkQXV0b1JlZnJlc2guY2FsbCh0aGlzKTtcclxuXHRcdH0pKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbignZGVsZXRlJywoZmlsZSk9PntcclxuXHRcdFx0dGhpcy5mbGFnUmVnZXRBbGwgPSB0cnVlO1xyXG5cdFx0XHRkZWJvdW5jZWRBdXRvUmVmcmVzaC5jYWxsKHRoaXMpO1xyXG5cdFx0fSkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25DbG9zZSgpe1xyXG5cdFx0Ly8gTm90aGluIHRvIGNsZWFuIHVwXHJcblx0fVxyXG5cclxuXHQvLyBodHRwczovL2xpYW1jYS5pbi9PYnNpZGlhbi9BUEkrRkFRL3ZpZXdzL3BlcnNpc3RpbmcreW91cit2aWV3K3N0YXRlXHJcblx0YXN5bmMgc2V0U3RhdGUoc3RhdGU6IElEYWlseU5vdGVPdXRsaW5lU3RhdGUsIHJlc3VsdDpWaWV3U3RhdGVSZXN1bHQpOlByb21pc2U8dm9pZD57XHJcblx0XHRpZiAoc3RhdGUuYWN0aXZlU2V0KXtcclxuXHRcdFx0dGhpcy5hY3RpdmVTZXQgPSBzdGF0ZS5hY3RpdmVTZXQ7XHJcblx0XHR9XHJcblx0XHRpZiAoc3RhdGUuYWN0aXZlR3JhbnVsYXJpdHkpe1xyXG5cdFx0XHR0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID0gc3RhdGUuYWN0aXZlR3JhbnVsYXJpdHk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gc3VwZXIuc2V0U3RhdGUoc3RhdGUsIHJlc3VsdCk7XHJcblx0fVxyXG5cclxuXHRnZXRTdGF0ZSgpOiBJRGFpbHlOb3RlT3V0bGluZVN0YXRlIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGFjdGl2ZVNldDogdGhpcy5hY3RpdmVTZXQsXHJcblx0XHRcdGFjdGl2ZUdyYW51bGFyaXR5OiB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5LFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgaW5pdFZpZXcoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmJvb3REZWxheSgpOyAvL1x1NUMxMVx1MzA1N1x1NUY4NVx1MzA1Rlx1MzA2QVx1MzA0NFx1MzA2OFx1OEQ3N1x1NTJENVx1NzZGNFx1NUY4Q1x1MzA2RkRhaWx5IE5vdGVcdTMwNkVcdTUzRDZcdTVGOTdcdTMwNkJcdTU5MzFcdTY1NTdcdTMwNTlcdTMwOEJcdTMwODhcdTMwNDZcdTMwNjBcclxuXHRcdHRoaXMuY29sbGFwc2VBbGwgPSB0aGlzLnNldHRpbmdzLmNvbGxhcHNlQWxsQXRTdGFydHVwO1xyXG5cdFx0XHJcblx0XHR0aGlzLnZlclBOID0gYXdhaXQgdGhpcy5jaGVja1BlcmlvZGljTm90ZXMoKTtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmNoZWNrVW5yZXNvbHZlZExpbmtzQXRTdGFydHVwKXtcclxuXHRcdFx0YXdhaXQgY2hlY2tVbnJlc29sdmVkTGlua3MuY2FsbCh0aGlzKTtcclxuXHRcdH1cclxuXHRcdHRoaXMucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG5cdFx0XHJcblx0XHR0aGlzLnJlZnJlc2hWaWV3KHRydWUsIHRydWUsIHRydWUpO1xyXG5cdFxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBib290RGVsYXkoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7IHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5zZXR0aW5ncy5ib290RGVsYXlUaW1lKTt9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgYXV0b1JlZnJlc2goKXtcclxuXHRcdGlmICghKHRoaXMuZmxhZ1JlZHJhdyB8fCB0aGlzLmZsYWdSZWdldEFsbCkpe1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoVmlldyh0aGlzLmZsYWdSZWdldEFsbCwgdGhpcy5mbGFnUmVnZXRBbGwsIHRydWUpO1xyXG5cdFx0dGhpcy5mbGFnUmVnZXRBbGwgPSBmYWxzZTtcclxuXHRcdHRoaXMuZmxhZ1JlZHJhdyA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly8gXHUzMEVBXHUzMEQ1XHUzMEVDXHUzMEMzXHUzMEI3XHUzMEU1XHUzMEJCXHUzMEYzXHUzMEJGXHUzMEZDXHJcblx0Ly8gcmVnZXRBbGxcdTMwNEN0cnVlOiBcdTUxNjhcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTUzRDZcdTVGOTdcdTMwNTdcdTc2RjRcdTMwNTlcclxuXHQvLyBnZXRUYXJnZXRcdTMwNEN0cnVlOiBcdTczRkVcdTU3MjhcdTMwNkVcdTYzQTJcdTdEMjJcdTdCQzRcdTU2RjJcdTMwNkJcdTU0MkJcdTMwN0VcdTMwOENcdTMwOEJcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTcyNzlcdTVCOUFcclxuXHQvLyBnZXRPdXRsaW5lXHUzMDRDdHJ1ZTogXHU1QkZFXHU4QzYxXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU3RkE0XHUzMDZFXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU2MEM1XHU1ODMxXHUzMDAxXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU2MEM1XHU1ODMxXHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0Ly8gXHUzMDVEXHUzMDZFXHU1RjhDVUlcdTkwRThcdTUyMDZcdTMwNjhcdTMwQTJcdTMwQTZcdTMwQzhcdTMwRTlcdTMwQTRcdTMwRjNcdTkwRThcdTUyMDZcdTMwOTJcdTYzQ0ZcdTc1M0JcclxuXHRhc3luYyByZWZyZXNoVmlldyhmbGFnUmVnZXRBbGw6IGJvb2xlYW4sIGZsYWdHZXRUYXJnZXQ6Ym9vbGVhbiwgZmxhZ0dldE91dGxpbmU6Ym9vbGVhbil7XHJcblx0XHRjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pe1xyXG5cdFx0XHRjb25zb2xlLmxvZygnRE5POnN0YXJ0IHJlZnJlc2hpbmcgdmlldy4gQ2FsZW5kYXJTZXRzOicsdGhpcy5jYWxlbmRhclNldHMpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy52ZXJQTiA9IGF3YWl0IHRoaXMuY2hlY2tQZXJpb2RpY05vdGVzKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMudmVyUE4gIT0gMil7XHJcblx0XHRcdC8vIGNvcmUgZGFpbHkgbm90ZS8gcGVyaW9kaWMgbm90ZXMgcGx1Z2luIHYwLnggXHUzMDZFXHU1ODM0XHU1NDA4XHJcblx0XHRcdGlmIChmbGFnUmVnZXRBbGwpe1xyXG5cdFx0XHRcdHRoaXMuYWxsRGFpbHlOb3RlcyA9IHRoaXMuZ2V0QWxsTm90ZXMoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGZsYWdHZXRUYXJnZXQpe1xyXG5cdFx0XHRcdHRoaXMudGFyZ2V0RmlsZXMgPSBnZXRUYXJnZXRGaWxlcy5jYWxsKHRoaXMsIHRoaXMuYWxsRGFpbHlOb3RlcywgR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoZmxhZ0dldE91dGxpbmUpe1xyXG5cdFx0XHRcdHRoaXMuZmlsZUluZm8gPSBhd2FpdCBnZXRGaWxlSW5mby5jYWxsKHRoaXMsIHRoaXMudGFyZ2V0RmlsZXMpO1xyXG5cdFx0XHRcdHRoaXMub3V0bGluZURhdGEgPSBhd2FpdCBnZXRPdXRsaW5lLmNhbGwodGhpcywgdGhpcy50YXJnZXRGaWxlcyx0aGlzLmZpbGVJbmZvKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRkcmF3VUkuY2FsbCh0aGlzKTtcclxuXHRcdFx0ZHJhd091dGxpbmUuY2FsbCh0aGlzLCB0aGlzLnRhcmdldEZpbGVzLCB0aGlzLmZpbGVJbmZvLCB0aGlzLm91dGxpbmVEYXRhKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIHBlcmlvZGljIG5vdGVzIHBsdWdpbiB2MS54XHU1QkZFXHU1RkRDXHJcblx0XHRcdGlmICghdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdKXtcclxuXHRcdFx0XHR0aGlzLmFjdGl2ZVNldCA9IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCF0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF1bR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XV0/LmVuYWJsZWQpe1xyXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pe1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ0ROTzogQ2FsZW5kZXIgc2V0IGlzIG5vdCBlbmFibGVkLiB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5IGlzIHNldCB0byAwLiBDYWxlbmRhcnNldHMsIHRoaXMuYWN0aXZlU2V0LCB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5OicsdGhpcy5jYWxlbmRhclNldHMsIHRoaXMuYWN0aXZlU2V0LCB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy5hY3RpdmVHcmFudWxhcml0eSA9IDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGF3YWl0IHRoaXMudGVzdEJhY2tsaW5rcygpO1xyXG5cclxuXHRcdFx0aWYgKGZsYWdHZXRUYXJnZXQpe1xyXG5cdFx0XHRcdHRoaXMudGFyZ2V0RmlsZXMgPSBnZXRUYXJnZXRQZXJpb2RpY05vdGVzLmNhbGwodGhpcywgdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdLCBHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKVxyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChmbGFnR2V0T3V0bGluZSl7XHJcblx0XHRcdFx0dGhpcy5maWxlSW5mbyA9IGF3YWl0IGdldEZpbGVJbmZvLmNhbGwodGhpcywgdGhpcy50YXJnZXRGaWxlcyk7XHJcblx0XHRcdFx0dGhpcy5vdXRsaW5lRGF0YSA9IGF3YWl0IGdldE91dGxpbmUuY2FsbCh0aGlzLCB0aGlzLnRhcmdldEZpbGVzLHRoaXMuZmlsZUluZm8pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkcmF3VUkuY2FsbCh0aGlzKTtcclxuXHRcdFx0ZHJhd091dGxpbmUuY2FsbCh0aGlzLCB0aGlzLnRhcmdldEZpbGVzLCB0aGlzLmZpbGVJbmZvLCB0aGlzLm91dGxpbmVEYXRhKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93RGVidWdJbmZvKXtcclxuXHRcdFx0Y29uc29sZS5sb2cgKCdETk86IHRpbWUgcmVxdWlyZWQgdG8gcmVmcmVzaCB2aWV3OiAnLCBlbmRUaW1lIC0gc3RhcnRUaW1lKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFx1RkYzQiBcdUZGM0RcdTMwNkVcdTk2NjRcdTUzQkJcclxuXHRwcml2YXRlIHN0cmlwTWFya2Rvd25TeW1ib2wodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiAodGV4dC5yZXBsYWNlKC8oXFxbXFxbKXwoXFxdXFxdKS9nLCcnKSk7XHJcblx0fVxyXG5cclxuXHQvLyBcdTYzQTJcdTdEMjJcdTdCQzRcdTU2RjJcdTMwOTJcdThBMkRcdTVCOUFcdTMwNkJcdTU0MDhcdTMwOEZcdTMwNUJcdTMwNjZcdTUyMURcdTY3MUZcdTUzMTZcclxuXHRwdWJsaWMgcmVzZXRTZWFyY2hSYW5nZSgpOnZvaWQge1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2V0QmFzZURhdGVBc0hvbWUgPT0gdHJ1ZSl7XHJcblx0XHRcdGNvbnN0IG9uc2V0RGF0ZSA9IHdpbmRvdy5tb21lbnQodGhpcy5zZXR0aW5ncy5vbnNldCxcIllZWVktTU0tRERcIik7XHJcblx0XHRcdGlmIChvbnNldERhdGUuaXNWYWxpZCgpKXtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCA9IG9uc2V0RGF0ZTtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0ID0gb25zZXREYXRlLmNsb25lKCkuc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbi5kYXkgLTEsJ2RheXMnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBvbnNldERhdGVcdTMwNENcdTRFMERcdTZCNjNcdTMwNkFcdTMwODlcdTVGNTNcdTY1RTVcdThENzdcdTcwQjlcdTMwNkViYWNrd2FyZCBzZWFyY2hcdTMwOTJcdTg4NENcdTMwNDZcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdvbnNldCBkYXRlIGlzIGludmFsaWQnKTtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKTtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0ID0gd2luZG93Lm1vbWVudCgpLnN0YXJ0T2YoJ2RheScpLnN1YnRyYWN0KHRoaXMuc2V0dGluZ3MuZHVyYXRpb24uZGF5IC0gMSwnZGF5cycpXHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gd2luZG93Lm1vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0ID0gd2luZG93Lm1vbWVudCgpLnN0YXJ0T2YoJ2RheScpLnN1YnRyYWN0KHRoaXMuc2V0dGluZ3MuZHVyYXRpb24uZGF5IC0gMSAsJ2RheXMnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFBlcmlvZGljIE5vdGVzXHUzMDZFXHU3MkI2XHU2MTRCXHUzMDkyXHUzMEMxXHUzMEE3XHUzMEMzXHUzMEFGICByZXR1cm4gMDpcdTMwQUFcdTMwRDUgMTp2MC54LnggMjp2MS4wLjAtXHJcblx0cHJpdmF0ZSBhc3luYyBjaGVja1BlcmlvZGljTm90ZXMoKTogUHJvbWlzZTxudW1iZXI+IHtcclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93RGVidWdJbmZvKXtcclxuXHRcdFx0Y29uc29sZS5sb2coJ0ROTzpjaGVja2luZyB0aGUgdmVyc2lvbiBvZiBQZXJpb2RpYyBOb3RlcyBwbHVnaW4nKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoYXBwLnBsdWdpbnMucGx1Z2luc1sncGVyaW9kaWMtbm90ZXMnXSl7XHJcblx0XHRcdGlmIChOdW1iZXIoYXBwLnBsdWdpbnMucGx1Z2luc1sncGVyaW9kaWMtbm90ZXMnXS5tYW5pZmVzdC52ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSkgPj0xKXtcclxuXHRcdFx0XHQvLyB2ZXIgMS4wLjBcdTRFRTVcdTRFMEFcclxuXHRcdFx0XHR0aGlzLmNhbGVuZGFyU2V0cyA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKTtcclxuXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0RlYnVnSW5mbyl7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnRE5POiByZXR1cm4gb2YgdGhpcy5hcHAuUE4uY2FsZW5kYXJTZXRNYW5hZ2VyLmdldENhbGVuZGFyU2V0cygpOiAnLHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKSk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnRE5POiByZXR1cm4gb2Ygd2luZG93LmFwcC5QTi5jYWxlbmRhclNldE1hbmFnZXIuZ2V0Q2FsZW5kYXJTZXRzKCk6ICcsd2luZG93LmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5jYWxlbmRhclNldE1hbmFnZXIuZ2V0Q2FsZW5kYXJTZXRzKCkpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCF0aGlzLmNhbGVuZGFyU2V0cy5sZW5ndGgpe1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnZmFpbGVkIHRvIGltcG9ydCBjYWxlbmRhciBzZXRzIHRvIERhaWx5IE5vdGUgT3V0bGluZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCBpbml0aWFsR3JhbnVsYXJpdHkgPSB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5O1xyXG5cdFx0XHRcdHdoaWxlICghdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdW0dSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV1dPy5lbmFibGVkKXtcclxuXHRcdFx0XHRcdHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgPSAodGhpcy5hY3RpdmVHcmFudWxhcml0eSArIDEpICUgR1JBTlVMQVJJVFlfTElTVC5sZW5ndGg7XHJcblx0XHRcdFx0XHRpZih0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID09IGluaXRpYWxHcmFudWxhcml0eSl7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmVxdWVzdFNhdmVMYXlvdXQoKTtcclxuXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0RlYnVnSW5mbyl7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnRE5POiBvYnRhaW5lZCB2ZXJQTjogJywgdGhpcy52ZXJQTiAsJyBjYWxlbmRhclNldHM6ICcsIHRoaXMuY2FsZW5kYXJTZXRzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIDI7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gdmVyIDAueC54XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5jYWxlbmRhclNldHNFbmFibGVkID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5hY3RpdmVTZXQgPSAwO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBpbml0aWFsR3JhbnVsYXJpdHkgPSB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5O1xyXG5cdFx0XHRcdHdoaWxlICghdGhpcy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKS5zZXR0aW5ncz8uW0dSQU5VTEFSSVRZX1RPX1BFUklPRElDSVRZW0dSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV1dXT8uZW5hYmxlZCl7XHJcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID0gKHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgKyAxKSAlIEdSQU5VTEFSSVRZX0xJU1QubGVuZ3RoO1xyXG5cdFx0XHRcdFx0aWYodGhpcy5hY3RpdmVHcmFudWxhcml0eSA9PSBpbml0aWFsR3JhbnVsYXJpdHkpe1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnJlcXVlc3RTYXZlTGF5b3V0KCk7XHJcblx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIFBlcmlvZGljIE5vdGVzXHUzMDRDXHUzMEFBXHUzMEQ1XHUzMDRCXHUzMEE0XHUzMEYzXHUzMEI5XHUzMEM4XHUzMEZDXHUzMEVCXHUzMDU1XHUzMDhDXHUzMDY2XHUzMDQ0XHUzMDZBXHUzMDQ0XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MucGVyaW9kaWNOb3Rlc0VuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5jYWxlbmRhclNldHNFbmFibGVkID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgPSAwO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZVNldCA9IDA7XHJcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRyZXR1cm4gMDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIGdyYW51bGFyaXR5XHUzMDZCXHU1RjkzXHUzMDYzXHUzMDY2XHU1MTY4XHUzMDY2XHUzMDZFZGFpbHkvd2Vla2x5L21vbnRobHkvcXVhcnRlcmx5L3llYXJseVx1MzBDRVx1MzBGQ1x1MzBDOFx1MzA5Mlx1NTNENlx1NUY5N1xyXG5cdGdldEFsbE5vdGVzKCk6UmVjb3JkPHN0cmluZyxURmlsZT4ge1xyXG5cdFx0c3dpdGNoICh0aGlzLmFjdGl2ZUdyYW51bGFyaXR5KXtcclxuXHRcdFx0Y2FzZSAwOlxyXG5cdFx0XHRcdHJldHVybiBnZXRBbGxEYWlseU5vdGVzKCk7XHJcblx0XHRcdGNhc2UgMTpcclxuXHRcdFx0XHRyZXR1cm4gZ2V0QWxsV2Vla2x5Tm90ZXMoKTtcclxuXHRcdFx0Y2FzZSAyOlxyXG5cdFx0XHRcdHJldHVybiBnZXRBbGxNb250aGx5Tm90ZXMoKTtcclxuXHRcdFx0Y2FzZSAzOlxyXG5cdFx0XHRcdHJldHVybiBnZXRBbGxRdWFydGVybHlOb3RlcygpO1xyXG5cdFx0XHRjYXNlIDQ6XHJcblx0XHRcdFx0cmV0dXJuIGdldEFsbFllYXJseU5vdGVzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBcdTMwRDBcdTMwQzNcdTMwQUZcdTMwRUFcdTMwRjNcdTMwQUZcdTMwMDFkYXRhdmlld1x1MzA2RVx1MzBDNlx1MzBCOVx1MzBDOFx1NzUyOFxyXG5cdC8vIGFzeW5jIHRlc3RCYWNrbGlua3MoKTpQcm9taXNlPHZvaWQ+e1xyXG5cclxuXHQvLyBcdGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cdC8vIFx0Ly8gXHU2NzJBXHU4OUUzXHU2QzdBXHUzMEVBXHUzMEYzXHUzMEFGXHJcblx0Ly8gXHRsZXQgdW5yZXNvbHZlZExpbmtzID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS51bnJlc29sdmVkTGlua3M7XHJcblx0Ly8gXHRjb25zb2xlLmxvZygnXHU2NzJBXHU4OUUzXHU2QzdBXHUzMEVBXHUzMEYzXHUzMEFGJyx1bnJlc29sdmVkTGlua3MpO1xyXG5cdC8vIFx0Ly8gXHU3Mjc5XHU1QjlBXHUzMDZFXHU2NzJBXHU4OUUzXHU2QzdBXHUzMEVBXHUzMEYzXHUzMEFGXHUzMDkyXHU1NDJCXHUzMDgwXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU2MkJEXHU1MUZBXHJcblx0Ly8gXHRjb25zdCByZXN1bHQgPSBPYmplY3QuZW50cmllcyh1bnJlc29sdmVkTGlua3MpLmZpbHRlcigodmFsdWVBcnJheSk9PiB2YWx1ZUFycmF5WzFdLmhhc093blByb3BlcnR5KFwiMjAyMy0xMi0yMl9GcmlkYXlcIikpO1xyXG5cclxuXHQvLyBcdGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHQvLyBcdGNvbnNvbGUubG9nKCdcdTY3MkFcdTg5RTNcdTZDN0FcdTMwRUFcdTMwRjNcdTMwQUZcdTYzQTJcdTdEMjJcdTYyNDBcdTg5ODFcdTY2NDJcdTk1OTMnLCBlbmRUaW1lIC0gc3RhcnRUaW1lKTtcclxuXHJcblx0Ly8gXHRjb25zdCBzVGltZTIgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHQvLyBcdC8vZGF0YXZpZXdBUEkgXHU1M0Q2XHU1Rjk3XHJcblx0Ly8gXHRjb25zdCBkYXRhdmlld0FQST0gZ2V0QVBJKCk7XHJcblx0Ly8gXHRjb25zdCB0ZXN0VmFsdWUgPSBhd2FpdCBkYXRhdmlld0FQSS5wYWdlcygnLVwiRGFpbHlcIicpO1xyXG5cdC8vIFx0Y29uc29sZS5sb2coJ0RhaWx5XHUzMDkyXHU5NjY0XHUzMDRGXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCJyx0ZXN0VmFsdWUpO1xyXG5cdC8vIFx0Y29uc3QgZVRpbWUyID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblx0Ly8gXHRjb25zb2xlLmxvZygnZGF0YXZpZXcgcGFnZXNcdTUzRDZcdTVGOTdcdTYyNDBcdTg5ODFcdTY2NDJcdTk1OTMnLCBlVGltZTItc1RpbWUyKTtcclxuXHJcblx0Ly8gXHRjb25zdCBzVGltZTMgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHQvLyBcdC8vIFx1NzI3OVx1NUI5QVx1MzA2RW1kYXlcdTMwOTJcdTYzMDFcdTMwNjRcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwNkVcdTY5MUNcdTdEMjJcclxuXHQvLyBcdC8vbGV0IHRlc3RWYWx1ZTIgPSBbXTtcclxuXHQvLyBcdC8vIGZvciAobGV0IGkgPSAwOyBpPCA1NjsgaSsrKXtcclxuXHQvLyBcdC8vIFx0Y29uc3QgZHZxdWVyeTpzdHJpbmcgPSAnTElTVCBXSEVSRSBmaWxlLm1kYXkgPSBkYXRlKHRvZGF5KSAtIGR1cignICsgaSArICcgZCknO1xyXG5cdC8vIFx0Ly8gXHRjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhdmlld0FQSS5xdWVyeShkdnF1ZXJ5KTtcclxuXHQvLyBcdC8vIFx0dGVzdFZhbHVlMi5wdXNoKHJlc3VsdC52YWx1ZS52YWx1ZXMpO1xyXG5cdC8vIFx0Ly8gfVxyXG5cdC8vIFx0Ly9jb25zb2xlLmxvZygnXHUzMEM3XHUzMEZDXHUzMEJGXHUzMEQzXHUzMEU1XHUzMEZDMicsdGVzdFZhbHVlMik7XHJcblx0Ly8gXHRjb25zdCBlVGltZTMgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHQvLyBcdGNvbnNvbGUubG9nKCdcdTY3MUZcdTk1OTNcdTdCQzRcdTU2RjJcdTYzMDdcdTVCOUFtZGF5JywgZVRpbWUzLXNUaW1lMyk7XHJcblx0Ly8gfVxyXG59XHJcbiIsICJcclxuaW1wb3J0IHsgc2V0SWNvbiwgVEZpbGUsIE1lbnUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgR1JBTlVMQVJJVFlfTElTVCwgR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFksIEZJTEVJTkZPX1RPX0RJU1BMQVksIEZJTEVJTkZPX1RPX0RJU1BMQVlfREFZLERBWVNfUEVSX1VOSVQsICB9IGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IGNyZWF0ZUFuZE9wZW5EYWlseU5vdGUgfSBmcm9tICdzcmMvY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZSc7XHJcbmltcG9ydCB7IE1vZGFsRXh0cmFjdCB9IGZyb20gJ3NyYy9tb2RhbEV4dHJhY3QnO1xyXG5pbXBvcnQge3R5cGUgQ2FsZW5kYXJTZXQsfSBmcm9tICdzcmMvcGVyaW9kaWNOb3Rlc1R5cGVzJztcclxuaW1wb3J0IHsgY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZSB9IGZyb20gJy4vY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZSc7XHJcbmltcG9ydCB7IElHcmFudWxhcml0eSB9IGZyb20gJ29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZSc7XHJcbmltcG9ydCB7IE1vZGFsSnVtcCB9IGZyb20gJy4vbW9kYWxKdW1wJztcclxuaW1wb3J0IHsgc2VhcmNoRmlyc3ROb3RlIH0gZnJvbSAnLi91dGlsJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3VUkoKTogdm9pZCB7XHJcbiAgICBcclxuICAgIGNvbnN0IG5hdkhlYWRlcjogSFRNTEVsZW1lbnQgPSBjcmVhdGVEaXYoXCJuYXYtaGVhZGVyXCIpO1xyXG4gICAgY29uc3QgbmF2QnV0dG9uQ29udGFpbmVyOiBIVE1MRWxlbWVudCA9IG5hdkhlYWRlci5jcmVhdGVEaXYoXCJuYXYtYnV0dG9ucy1jb250YWluZXJcIik7XHJcblxyXG4gICAgLy8gcGVyaW9kaWMgbm90ZXNcclxuICAgIGNvbnN0IGdyYW51bGFyaXR5ID0gR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XTtcclxuICAgIFxyXG4gICAgLy8gXHUzMEEyXHUzMEE0XHUzMEIzXHUzMEYzXHU2M0NGXHU3NTNCXHJcbiAgICB1aVByZXZpb3VzUGFnZS5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lciwgZ3JhbnVsYXJpdHkpO1xyXG4gICAgdWlOZXh0UGFnZS5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lciwgZ3JhbnVsYXJpdHkpO1xyXG4gICAgdWlSZXR1cm5Ib21lLmNhbGwodGhpcywgbmF2QnV0dG9uQ29udGFpbmVyKTtcclxuICAgIC8vIHVpVXBkYXRlLmNhbGwodGhpcywgbmF2QnV0dG9uQ29udGFpbmVyKTtcclxuICAgIHVpU2V0dGluZy5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lciwgZ3JhbnVsYXJpdHkpO1xyXG4gICAgdWlDcmVhdGVEYWlseU5vdGUuY2FsbCh0aGlzLCBuYXZCdXR0b25Db250YWluZXIsIGdyYW51bGFyaXR5KTtcclxuICAgIHVpRXh0cmFjdC5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICB1aUNvbGxhcHNlLmNhbGwodGhpcywgbmF2QnV0dG9uQ29udGFpbmVyKTtcclxuXHJcblxyXG4gICAgLy8gXHU2NUU1XHU0RUQ4XHUzMDZFXHU3QkM0XHU1NkYyXHUzMDZFXHU2M0NGXHU3NTNCXHJcbiAgICBjb25zdCBuYXZEYXRlUmFuZ2U6IEhUTUxFbGVtZW50ID0gbmF2SGVhZGVyLmNyZWF0ZURpdihcIm5hdi1kYXRlLXJhbmdlXCIpO1xyXG4gICAgbGV0IGxhdGVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0LmNsb25lKCk7XHJcbiAgICBsZXQgZWFybGllc3QgPSB0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0LmNsb25lKCk7XHJcblxyXG4gICAgLy8gZm9yd2FyZCBzZWFyY2ggXHU1RUMzXHU2QjYyXHUzMDZCXHU0RjM0XHUzMDQ0XHU1OTA5XHU2NkY0XHJcbiAgICBlYXJsaWVzdCA9IGxhdGVzdC5jbG9uZSgpLnN1YnRyYWN0KHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldIC0gMSAsZ3JhbnVsYXJpdHkpO1xyXG4gICAgaWYgKGxhdGVzdC5pc1NhbWUod2luZG93Lm1vbWVudCgpLFwiZGF5XCIpKXtcclxuICAgICAgICBsYXRlc3QgPSBsYXRlc3QuY2xvbmUoKS5hZGQoTWF0aC5jZWlsKHRoaXMuc2V0dGluZ3Mub2Zmc2V0L0RBWVNfUEVSX1VOSVRbZ3JhbnVsYXJpdHldKSxncmFudWxhcml0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0ZVJhbmdlOiBzdHJpbmcgPSBlYXJsaWVzdC5mb3JtYXQoXCJZWVlZL01NL0REIFstXSBcIikgKyBcclxuICAgICAgICBsYXRlc3QuZm9ybWF0KCBlYXJsaWVzdC5pc1NhbWUobGF0ZXN0LCd5ZWFyJykgPyAgXCJNTS9ERFwiOiBcIllZWVkvTU0vRERcIik7XHJcbiAgICBuYXZEYXRlUmFuZ2UuY3JlYXRlRGl2KFwibmF2LWRhdGUtcmFuZ2UtY29udGVudFwiKS5zZXRUZXh0KGRhdGVSYW5nZSk7XHJcblxyXG4gICAgLy9cdTY1RTVcdTRFRDhcdTdCQzRcdTU2RjJcdTMwQUZcdTMwRUFcdTMwQzNcdTMwQUZcdTY2NDJcdTMwNkVcdTUyRDVcdTRGNUNcclxuICAgIG5hdkRhdGVSYW5nZS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIGNvbnN0IG9uU3VibWl0ID0gKGVudGVyZWREYXRlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERhdGUgPSB3aW5kb3cubW9tZW50KGVudGVyZWREYXRlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXREYXRlLmlzVmFsaWQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QgPSB0YXJnZXREYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QgPSB0YXJnZXREYXRlLmNsb25lKCkuc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbi5kYXkgLTEsJ2RheXMnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcImVudGVyZWQgZGF0ZSBpcyBpbnZhbGlkLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZXcgTW9kYWxKdW1wKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgb25TdWJtaXQpLm9wZW4oKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuICAgIG5hdkRhdGVSYW5nZS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+e1xyXG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShgSnVtcCB0byAke3RoaXMuc2V0dGluZ3Mub25zZXR9YClcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREYXRlID0gd2luZG93Lm1vbWVudCh0aGlzLnNldHRpbmdzLm9uc2V0LFwiWVlZWS1NTS1ERFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldERhdGUuaXNWYWxpZCgpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gdGFyZ2V0RGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QgPSB0YXJnZXREYXRlLmNsb25lKCkuc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbi5kYXkgLTEsJ2RheXMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYCR7dGhpcy5zZXR0aW5ncy5vbnNldH0gaXMgYW4gaW52YWxpZCBkYXRlLmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJKdW1wIHRvIDMgbW9udGhzIGFnb1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdC5zdWJ0cmFjdCgzLCdtb250aHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdC5zdWJ0cmFjdCgzLCdtb250aHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJKdW1wIHRvIDYgbW9udGhzIGFnb1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdC5zdWJ0cmFjdCg2LCdtb250aHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdC5zdWJ0cmFjdCg2LCdtb250aHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJKdW1wIHRvIDEgeWVhciBhZ29cIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3Quc3VidHJhY3QoMTIsJ21vbnRocycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0LnN1YnRyYWN0KDEyLCdtb250aHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJKdW1wIHRvIDIgeWVhcnMgYWdvXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0LnN1YnRyYWN0KDI0LCdtb250aHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdC5zdWJ0cmFjdCgyNCwnbW9udGhzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAod2luZG93Lm1vbWVudCgpLnN1YnRyYWN0KDMsJ21vbnRocycpLmlzU2FtZU9yQWZ0ZXIodGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QpKXtcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcbiAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiSnVtcCB0byAzIG1vbnRocyBsYXRlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdC5hZGQoMywnbW9udGhzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QuYWRkKDMsJ21vbnRocycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5tb21lbnQoKS5zdWJ0cmFjdCg2LCdtb250aHMnKS5pc1NhbWVPckFmdGVyKHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0KSl7XHJcbiAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiSnVtcCB0byA2IG1vbnRocyBsYXRlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdC5hZGQoNiwnbW9udGhzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QuYWRkKDYsJ21vbnRocycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5tb21lbnQoKS5zdWJ0cmFjdCgxMiwnbW9udGhzJykuaXNTYW1lT3JBZnRlcih0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCkpe1xyXG4gICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkp1bXAgdG8gMSB5ZWFyIGxhdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0LmFkZCgxMiwnbW9udGhzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QuYWRkKDEyLCdtb250aHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubW9tZW50KCkuc3VidHJhY3QoMjQsJ21vbnRocycpLmlzU2FtZU9yQWZ0ZXIodGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QpKXtcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJKdW1wIHRvIDIgeWVhcnMgbGF0ZXJcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuYWRkKDI0LCdtb250aHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdC5hZGQoMjQsJ21vbnRocycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcclxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkp1bXAgdG8gdGhlIGZpcnN0IG5vdGVcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RGF0ZSA9IHNlYXJjaEZpcnN0Tm90ZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCA9IHRhcmdldERhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QgPSB0YXJnZXREYXRlLmNsb25lKCkuc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbi5kYXkgLTEsJ2RheXMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gUGVyaW9kaWMgTm90ZXMgXHU3QzkyXHU1RUE2XHU2M0NGXHU3NTNCICYgXHU3QzkyXHU1RUE2XHU1MjA3XHUzMDhBXHU2NkZGXHUzMDQ4XHU1MUU2XHU3NDA2XHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5wZXJpb2RpY05vdGVzRW5hYmxlZCl7XHJcbiAgICAgICAgY29uc3QgbmF2R3JhbnVsYXJpdHk6IEhUTUxFbGVtZW50ID0gbmF2SGVhZGVyLmNyZWF0ZURpdihcIm5hdi1kYXRlLXJhbmdlXCIpO1xyXG4gICAgICAgIG5hdkdyYW51bGFyaXR5LmNyZWF0ZURpdihcIm5hdi1kYXRlLXJhbmdlLWNvbnRlbnRcIikuc2V0VGV4dChHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKTtcclxuXHJcbiAgICAgICAgbmF2R3JhbnVsYXJpdHkuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAoZXZldDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdETk86Y2xpY2tlZCB0byBjaGFuZ2UgZ3JhbnVsYXJpdHkuIHZlclBOLCBjYWxlbmRhclNldHM6Jyx0aGlzLmFjdGl2ZUdyYW51bGFyaXR5LCB0aGlzLnZlclBOLCB0aGlzLmNhbGVuZGFyU2V0cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsR3JhbnVsYXJpdHkgPSB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5O1xyXG4gICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgPSAodGhpcy5hY3RpdmVHcmFudWxhcml0eSArIDEpICUgR1JBTlVMQVJJVFlfTElTVC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9IHdoaWxlICgoXHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudmVyUE4gPT0gMiAmJiAhdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdW0dSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV1dPy5lbmFibGVkKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnZlclBOID09IDEgJiYgIXRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuc2V0dGluZ3M/LltHUkFOVUxBUklUWV9UT19QRVJJT0RJQ0lUWVtHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldXV0/LmVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgKSAmJiB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ICE9IGluaXRpYWxHcmFudWxhcml0eSlcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXF1ZXN0U2F2ZUxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyh0cnVlLCB0cnVlLCB0cnVlKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIC8vIFx1MzBCM1x1MzBGM1x1MzBDNlx1MzBBRFx1MzBCOVx1MzBDOFx1MzBFMVx1MzBDQlx1MzBFNVx1MzBGQ1xyXG4gICAgICAgIG5hdkdyYW51bGFyaXR5LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wIDsgaTxHUkFOVUxBUklUWV9MSVNULmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnZlclBOID09MiAmJiB0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF1bR1JBTlVMQVJJVFlfTElTVFtpXV0/LmVuYWJsZWQpfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudmVyUE4gPT0xICYmIHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuc2V0dGluZ3M/LltHUkFOVUxBUklUWV9UT19QRVJJT0RJQ0lUWVtHUkFOVUxBUklUWV9MSVNUW2ldXV0/LmVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSAoIGkgPT0gdGhpcy5hY3RpdmVHcmFudWxhcml0eSk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoR1JBTlVMQVJJVFlfTElTVFtpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCAoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVHcmFudWxhcml0eSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXF1ZXN0U2F2ZUxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KHRydWUsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICB9XHJcbiAgICAvLyBQZXJpb2RpYyBOb3RlcyBcdTMwQUJcdTMwRUNcdTMwRjNcdTMwQzBcdTMwRkNcdTMwQkJcdTMwQzNcdTMwQzhcdTYzQ0ZcdTc1M0IgJiBcdTMwQkJcdTMwQzNcdTMwQzhcdTUyMDdcdTMwOEFcdTY2RkZcdTMwNDhcdTUxRTZcdTc0MDZcclxuICAgIGlmICh0aGlzLnNldHRpbmdzLmNhbGVuZGFyU2V0c0VuYWJsZWQpe1xyXG4gICAgICAgIGNvbnN0IG5hdkNhbGVuZGFyU2V0OiBIVE1MRWxlbWVudCA9IG5hdkhlYWRlci5jcmVhdGVEaXYoXCJuYXYtZGF0ZS1yYW5nZVwiKTtcclxuICAgICAgICBuYXZDYWxlbmRhclNldC5jcmVhdGVEaXYoXCJuYXYtZGF0ZS1yYW5nZS1jb250ZW50XCIpLnNldFRleHQodGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdLmlkKTtcclxuICAgIFxyXG4gICAgICAgIG5hdkNhbGVuZGFyU2V0LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgKGV2ZXQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVNldCA9ICh0aGlzLmFjdGl2ZVNldCArIDEpICUgdGhpcy5jYWxlbmRhclNldHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJlcXVlc3RTYXZlTGF5b3V0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIC8vIFx1MzBCM1x1MzBGM1x1MzBDNlx1MzBBRFx1MzBCOVx1MzBDOFx1MzBFMVx1MzBDQlx1MzBFNVx1MzBGQ1xyXG4gICAgICAgIG5hdkNhbGVuZGFyU2V0LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wIDsgaTx0aGlzLmNhbGVuZGFyU2V0cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9ICggaSA9PSB0aGlzLmFjdGl2ZVNldCk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUodGhpcy5jYWxlbmRhclNldHNbaV0uaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soICgpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU2V0ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmVxdWVzdFNhdmVMYXlvdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NjNDRlx1NzUzQlxyXG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKG5hdkhlYWRlcik7XHJcbn1cclxuXHJcblxyXG4vL1x1OTA0RVx1NTNCQlx1MzA2Qlx1NzlGQlx1NTJENVxyXG5mdW5jdGlvbiB1aVByZXZpb3VzUGFnZSAocGFyZW50RWw6IEhUTUxFbGVtZW50LCBncmFudWxhcml0eTogSUdyYW51bGFyaXR5KTp2b2lke1xyXG5cclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b246IEhUTUxFbGVtZW50ID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJwcmV2aW91cyBub3Rlc1wiO1xyXG4gICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJhcnJvdy1sZWZ0XCIpO1xyXG5cclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3Quc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0sIGdyYW51bGFyaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3Quc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0sZ3JhbnVsYXJpdHkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59XHJcblxyXG4vL1x1NjcyQVx1Njc2NVx1MzA2Qlx1NzlGQlx1NTJENVxyXG5mdW5jdGlvbiB1aU5leHRQYWdlIChwYXJlbnRFbDogSFRNTEVsZW1lbnQsIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHkpOnZvaWR7XHJcbiAgICBsZXQgbmF2QWN0aW9uQnV0dG9uID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJuZXh0IG5vdGVzXCI7XHJcbiAgICBzZXRJY29uKG5hdkFjdGlvbkJ1dHRvbixcImFycm93LXJpZ2h0XCIpO1xyXG5cclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuYWRkKHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldLGdyYW51bGFyaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QuYWRkKHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldLGdyYW51bGFyaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufVxyXG5cclxuLy8gXHUzMERCXHUzMEZDXHUzMEUwXHUzMDZCXHU2MjNCXHUzMDhCXHJcbmZ1bmN0aW9uIHVpUmV0dXJuSG9tZSAocGFyZW50RWw6IEhUTUxFbGVtZW50KTp2b2lkIHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hcmlhTGFiZWwgPSBcImhvbWVcIjtcclxuICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwiaG9tZVwiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjb250ZXh0bWVudVwiLFxyXG4gICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcInJlZnJlc2ggdmlld1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwicmVmcmVzaC1jd1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyh0cnVlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcbi8vXHU2NkY0XHU2NUIwXHJcbmZ1bmN0aW9uIHVpVXBkYXRlIChwYXJlbnRFbDogSFRNTEVsZW1lbnQpOnZvaWQge1xyXG4gICAgbGV0IG5hdkFjdGlvbkJ1dHRvbiA9IHBhcmVudEVsLmNyZWF0ZURpdihcImNsaWNrYWJsZS1pY29uIG5hdi1hY3Rpb24tYnV0dG9uXCIpO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFyaWFMYWJlbCA9IFwicmVmcmVzaFwiO1xyXG4gICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJyZWZyZXNoLWN3XCIpO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgIGFzeW5jIChldmVudDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyh0cnVlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59XHJcblxyXG4vL1x1OEEyRFx1NUI5QVxyXG5mdW5jdGlvbiB1aVNldHRpbmcocGFyZW50RWw6IEhUTUxFbGVtZW50LCBncmFudWxhcml0eTogSUdyYW51bGFyaXR5KTp2b2lke1xyXG4gICAgbGV0IG5hdkFjdGlvbkJ1dHRvbiA9IHBhcmVudEVsLmNyZWF0ZURpdihcImNsaWNrYWJsZS1pY29uIG5hdi1hY3Rpb24tYnV0dG9uXCIpO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFyaWFMYWJlbCA9IFwib3BlbiBzZXR0aW5nc1wiO1xyXG4gICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJzZXR0aW5nc1wiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLnNldHRpbmcub3BlbigpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5zZXR0aW5nLm9wZW5UYWJCeUlkKHRoaXMucGx1Z2luLm1hbmlmZXN0LmlkKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjb250ZXh0bWVudVwiLFxyXG4gICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IGluIHRoaXMuc2V0dGluZ3Muc2hvd0VsZW1lbnRzKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSAoIHRoaXMuc2V0dGluZ3Muc2hvd0VsZW1lbnRzW2VsZW1lbnRdID09IHRydWUpPyBcImNoZWNrXCI6XCJcIjtcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKGBzaG93ICR7ZWxlbWVudH1gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50c1tlbGVtZW50XSA9ICF0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50c1tlbGVtZW50XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50cy5saXN0SXRlbXMpe1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgaWNvbiA9ICh0aGlzLnNldHRpbmdzLnRhc2tPbmx5KT8gXCJjaGVja1wiOiBcIlwiO1xyXG4gICAgICAgICAgICAvLyAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAuc2V0VGl0bGUoXCJ0YXNrcyBvbmx5XCIpXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIC5zZXRJY29uKGljb24pXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PntcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudGFza09ubHkgPSAhdGhpcy5zZXR0aW5ncy50YXNrT25seTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vICAgICApO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpY29uQmFja2xpbmsgPSAodGhpcy5zZXR0aW5ncy5zaG93QmFja2xpbmtzID09IHRydWUpPyBcImNoZWNrXCI6XCJcIjtcclxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZShgc2hvdyBiYWNrbGluayBmaWxlc2ApXHJcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uQmFja2xpbmspXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zaG93QmFja2xpbmtzID0gIXRoaXMuc2V0dGluZ3Muc2hvd0JhY2tsaW5rcztcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG4gICAgICAgICAgICBpZiAoZ3JhbnVsYXJpdHkgPT0nZGF5Jyl7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCBpbiBGSUxFSU5GT19UT19ESVNQTEFZX0RBWSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9ICggaW5kZXggPT0gdGhpcy5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9EYWlseSk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoRklMRUlORk9fVE9fRElTUExBWV9EQVlbaW5kZXhdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oaWNvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCBhc3luYygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZGlzcGxheUZpbGVJbmZvRGFpbHkgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCBpbiBGSUxFSU5GT19UT19ESVNQTEFZKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gKCBpbmRleCA9PSB0aGlzLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb1BlcmlvZGljKT8gXCJjaGVja1wiOlwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShGSUxFSU5GT19UT19ESVNQTEFZW2luZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKGljb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayggYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb1BlcmlvZGljID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpY29uVG9vbHRpcCA9ICh0aGlzLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3KT8gXCJjaGVja1wiOlwiXCI7XHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcInNob3cgdG9vbHRpcCBwcmV2aWV3XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oaWNvblRvb2x0aXApXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3ID0gIXRoaXMuc2V0dGluZ3MudG9vbHRpcFByZXZpZXc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcbi8vIFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1NEY1Q1x1NjIxMFxyXG5mdW5jdGlvbiB1aUNyZWF0ZURhaWx5Tm90ZShwYXJlbnRFbDpIVE1MRWxlbWVudCwgZ3JhbnVsYXJpdHk6IElHcmFudWxhcml0eSk6dm9pZHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuXHJcbiAgICAvLyBwZXJpb2RpYyBub3RlXHUzMDZFXHUzMEFBXHUzMEYzXHUzMEFBXHUzMEQ1XHUzMDg0XHU3QzkyXHU1RUE2XHUzMDZCXHU1RjkzXHUzMDYzXHUzMDY2XHUzMEU5XHUzMEQ5XHUzMEVCXHUzMDkyXHU0RjVDXHU2MjEwXHJcbiAgICBsZXQgbGFiZWxGb3JUb2RheTogc3RyaW5nID0gJ2NyZWF0ZS9vcGVuICc7XHJcbiAgICBsZXQgbGFiZWxGb3JOZXh0OiBzdHJpbmcgPSAnY3JlYXRlL29wZW4gJztcclxuICAgIGlmIChncmFudWxhcml0eSA9PSAnZGF5Jyl7XHJcbiAgICAgICAgbGFiZWxGb3JUb2RheSA9IGxhYmVsRm9yVG9kYXkgKyBcInRvZGF5J3MgXCI7XHJcbiAgICAgICAgbGFiZWxGb3JOZXh0ID0gbGFiZWxGb3JOZXh0ICsgXCJ0b21vcnJvdydzIFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBsYWJlbEZvclRvZGF5ID0gbGFiZWxGb3JUb2RheSArIFwicHJlc2VudCBcIjtcclxuICAgICAgICBsYWJlbEZvck5leHQgPSBsYWJlbEZvck5leHQgKyBcIm5leHQgXCI7XHJcbiAgICB9XHJcbiAgICBsYWJlbEZvclRvZGF5ID0gbGFiZWxGb3JUb2RheSArIEdSQU5VTEFSSVRZX1RPX1BFUklPRElDSVRZW2dyYW51bGFyaXR5XSArICcgbm90ZSc7XHJcbiAgICBsYWJlbEZvck5leHQgPSBsYWJlbEZvck5leHQgKyBHUkFOVUxBUklUWV9UT19QRVJJT0RJQ0lUWVtncmFudWxhcml0eV0gKyAnIG5vdGUnO1xyXG5cclxuICAgIGlmICh0aGlzLnZlclBOID09IDIpe1xyXG4gICAgICAgIGxhYmVsRm9yVG9kYXkgPSBsYWJlbEZvclRvZGF5ICsgJyBmb3IgJyArIHRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XS5pZDtcclxuICAgICAgICBsYWJlbEZvck5leHQgPSBsYWJlbEZvck5leHQgKyAnIGZvciAnICsgdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hcmlhTGFiZWwgPSBsYWJlbEZvclRvZGF5O1xyXG4gICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJjYWxlbmRhci1wbHVzXCIpO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgIGFzeW5jIChldmVudDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSB3aW5kb3cubW9tZW50KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy52ZXJQTiA9PSAyKXtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUFuZE9wZW5QZXJpb2RpY05vdGUoIGdyYW51bGFyaXR5LCBkYXRlLCB0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZShncmFudWxhcml0eSwgZGF0ZSwgdGhpcy5hbGxEYWlseU5vdGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICk7XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICBcImNvbnRleHRtZW51XCIsXHJcbiAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKGxhYmVsRm9yTmV4dClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNhbGVuZGFyLXBsdXNcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHdpbmRvdy5tb21lbnQoKS5hZGQoMSxncmFudWxhcml0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlclBOID09IDIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZShncmFudWxhcml0eSwgZGF0ZSwgdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVBbmRPcGVuRGFpbHlOb3RlKGdyYW51bGFyaXR5LCBkYXRlLCB0aGlzLmFsbERhaWx5Tm90ZXMpOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufVxyXG5cclxuLy9cdTYyQkRcdTUxRkFcclxuZnVuY3Rpb24gdWlFeHRyYWN0KHBhcmVudEVsOiBIVE1MRWxlbWVudCk6dm9pZHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuICAgIGlmICghdGhpcy5leHRyYWN0TW9kZSl7XHJcbiAgICAgICAgLy9cdTYyQkRcdTUxRkFcdTMwOTJcdTMwQUFcdTMwRjNcdTMwNkJcclxuICAgICAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJleHRyYWN0XCI7XHJcbiAgICAgICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJzZWFyY2hcIik7XHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgIGFzeW5jIChldmVudDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgLy9cdTUxNjVcdTUyOUJcdTMwRTJcdTMwRkNcdTMwQzBcdTMwRUJcdTMwOTJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG9uU3VibWl0ID0gKGVuYWJsZUV4dHJhY3Q6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlbmFibGVFeHRyYWN0KXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RNb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RUeXBlID0gJ25vcm1hbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBNb2RhbEV4dHJhY3QodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBvblN1Ym1pdCkub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvL1x1NjJCRFx1NTFGQVx1MzA5Mlx1MzBBQVx1MzBENVx1MzA2QlxyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hcmlhTGFiZWwgPSBcInVuZXh0cmFjdFwiO1xyXG4gICAgICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwieC1jaXJjbGVcIik7XHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdE1vZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5leHRyYWN0VHlwZSA9ICdub3JtYWwnO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICBcImNvbnRleHRtZW51XCIsXHJcbiAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiZXh0cmFjdCB0YXNrc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiY2hlY2stc3F1YXJlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdE1vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RUeXBlID0gJ3Rhc2snO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJleHRyYWN0IGxpc3QgY2FsbG91dHNcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImxpZ2h0YnVsYlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RNb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0VHlwZSA9ICdsaXN0Q2FsbG91dCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsZmFsc2UpOyBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiZXh0cmFjdCB0aW1lIGxpc3RzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJjbG9ja1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RNb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0VHlwZSA9ICd0aW1lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7IFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuXHJcbn1cclxuXHJcbi8vXHU1MTY4XHU0RjUzXHUzMEQ1XHUzMEE5XHUzMEZDXHUzMEVCXHUzMEM5XHJcblxyXG5mdW5jdGlvbiB1aUNvbGxhcHNlIChwYXJlbnRFbDpIVE1MRWxlbWVudCk6dm9pZHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuICAgIGlmICh0aGlzLmNvbGxhcHNlQWxsKXtcclxuICAgICAgICBuYXZBY3Rpb25CdXR0b24uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuY29sbGFwc2VBbGwpe1xyXG4gICAgICAgIC8vXHU1MTY4XHU0RjUzXHUzMEQ1XHUzMEE5XHUzMEZDXHUzMEVCXHUzMEM5XHUzMDkyXHUzMEFBXHUzMEYzXHUzMDZCXHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmFyaWFMYWJlbCA9IFwiY29sbGFwc2UgYWxsXCI7XHJcbiAgICAgICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJjaGV2cm9ucy1kb3duLXVwXCIpO1xyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9cdTUxNjhcdTRGNTNcdTMwRDVcdTMwQTlcdTMwRkNcdTMwRUJcdTMwQzlcdTMwOTJcdTMwQUFcdTMwRDVcdTMwNkJcclxuICAgICAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJleHBhbmRcIjtcclxuICAgICAgICBzZXRJY29uKG5hdkFjdGlvbkJ1dHRvbixcImNoZXZyb25zLWRvd24tdXBcIik7XHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgIGFzeW5jIChldmVudDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IG1vbWVudCAgZnJvbSBcIm1vbWVudFwiO1xyXG5pbXBvcnQgeyBURmlsZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgY3JlYXRlRGFpbHlOb3RlLCBnZXREYWlseU5vdGUsIGNyZWF0ZVBlcmlvZGljTm90ZSwgSUdyYW51bGFyaXR5LCBnZXREYXRlVUlELCBjcmVhdGVRdWFydGVybHlOb3RlLCBjcmVhdGVZZWFybHlOb3RlLCBnZXREYWlseU5vdGVTZXR0aW5nc30gZnJvbSBcIm9ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZVwiO1xyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBbmRPcGVuRGFpbHlOb3RlKCBncmFudWxhcml0eTogSUdyYW51bGFyaXR5LCBkYXRlOiBtb21lbnQsIGFsbEZpbGVzOiBSZWNvcmQ8c3RyaW5nLFRGaWxlPik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGNvbnN0IHsgd29ya3NwYWNlIH0gPSB3aW5kb3cuYXBwO1xyXG5cclxuXHRjb25zdCBjcmVhdGVGaWxlID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0Ly8gY3JlYXRlUGVyaW9kaWNOb3RlXHUzMDZGcXVhcnRlci95ZWFyXHUzMDZCXHUzMDZGXHU1QkZFXHU1RkRDXHUzMDU3XHUzMDY2XHUzMDQ0XHUzMDZBXHUzMDQ0XHUzMDg4XHUzMDQ2XHUzMDZBXHUzMDZFXHUzMDY3XHU1MjA2XHU1QzkwXHUzMDAyXHJcblx0XHRsZXQgbmV3Tm90ZTpURmlsZTtcclxuXHRcdHN3aXRjaCAoZ3JhbnVsYXJpdHkpe1xyXG5cdFx0XHRjYXNlICdxdWFydGVyJzpcclxuXHRcdFx0XHRuZXdOb3RlID0gYXdhaXQgY3JlYXRlUXVhcnRlcmx5Tm90ZShkYXRlKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAneWVhcic6XHJcblx0XHRcdFx0bmV3Tm90ZSA9IGF3YWl0IGNyZWF0ZVllYXJseU5vdGUoZGF0ZSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0bmV3Tm90ZSA9IGF3YWl0IGNyZWF0ZVBlcmlvZGljTm90ZShncmFudWxhcml0eSwgZGF0ZSk7XHJcblx0XHR9XHJcblx0XHRcdFx0YXdhaXQgd29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShuZXdOb3RlKTtcclxuXHJcblx0fTtcclxuXHRjb25zdCBkYWlseW5vdGUgPSBhbGxGaWxlc1tnZXREYXRlVUlEKGRhdGUsIGdyYW51bGFyaXR5KV07XHJcblx0aWYgKCFkYWlseW5vdGUpe1xyXG5cdFx0YXdhaXQgY3JlYXRlRmlsZSgpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRhd2FpdCB3b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGRhaWx5bm90ZSk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuIiwgIlxyXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTY29wZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IERhaWx5Tm90ZU91dGxpbmVQbHVnaW4gZnJvbSAnc3JjL21haW4nO1xyXG5leHBvcnQgY2xhc3MgTW9kYWxFeHRyYWN0IGV4dGVuZHMgTW9kYWwge1xyXG5cdHBsdWdpbjogRGFpbHlOb3RlT3V0bGluZVBsdWdpbjtcclxuXHRzY29wZTogU2NvcGU7XHJcblxyXG5cdGlucHV0ZWRWYWx1ZTogc3RyaW5nO1xyXG5cdGVuYWJsZUV4dHJhY3QgOiBib29sZWFuO1xyXG5cdG9uU3VibWl0OiAoZW5hYmxlRXh0cmFjdDogYm9vbGVhbikgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRGFpbHlOb3RlT3V0bGluZVBsdWdpbiwgb25TdWJtaXQ6IChlbmFibGVFeHRyYWN0OiBib29sZWFuKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHR0aGlzLmlucHV0ZWRWYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0O1xyXG5cclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiYnJcIik7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkV4dHJhY3QgYnkgd29yZCBvciBwaHJhc2U6XCIpXHJcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PntcclxuXHRcdFx0XHR0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0KS5pbnB1dEVsLnNlbGVjdCgpO1xyXG5cdFx0XHRcdHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmlucHV0ZWRWYWx1ZSA9IHZhbHVlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxyXG5cdFx0XHRcdGJ0blxyXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJFeHRyYWN0XCIpXHJcblx0XHRcdFx0XHQuc2V0Q3RhKClcclxuXHRcdFx0XHRcdC5vbkNsaWNrKFxyXG5cdFx0XHRcdFx0XHRhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZXhlY3V0ZUV4dHJhY3QoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0KSlcclxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxyXG5cdFx0XHRcdGJ0blxyXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcclxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0Ly8gRW50ZXJcdTMwNjdcdTMwNkVcdTUxNjVcdTUyOUJcclxuXHRcdHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sICdFbnRlcicsIFxyXG5cdFx0XHQoZXZ0OiBLZXlib2FyZEV2ZW50KT0+e1xyXG5cdFx0XHRcdHRoaXMuZXhlY3V0ZUV4dHJhY3QoKTtcclxuXHRcdFx0fVxyXG5cdFx0IFx0KTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGV4ZWN1dGVFeHRyYWN0KCk6UHJvbWlzZTx2b2lkPntcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0ID0gdGhpcy5pbnB1dGVkVmFsdWU7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMub25TdWJtaXQodHJ1ZSk7XHJcblx0fVxyXG59XHJcbiIsICIvKlxyXG5Db2RlcyBpbiB0aGlzIGZpbGUgaXMgYmFzZWQgb24gUGVyaW9kaWMgTm90ZXMgYnkgTGlhbSBDYWluIGh0dHBzOi8vZ2l0aHViLmNvbS9saWFtY2Fpbi9vYnNpZGlhbi1wZXJpb2RpYy1ub3Rlc1xyXG5cclxuVGhlIG9yaWdpbmFsIHdvcmsgaXMgTUlULWxpY2Vuc2VkLlxyXG5cclxuTUlUIExpY2Vuc2VcclxuXHJcbkNvcHlyaWdodCAoYykgMjAyMSBMaWFtIENhaW5cclxuXHJcblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxyXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXHJcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXHJcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcclxuY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXHJcblNPRlRXQVJFLlxyXG4qL1xyXG5cclxuXHJcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBub3JtYWxpemVQYXRoLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IGNyZWF0ZVBlcmlvZGljTm90ZSwgZ2V0RGFpbHlOb3RlU2V0dGluZ3MsIElHcmFudWxhcml0eSB9IGZyb20gXCJvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2VcIjtcclxuXHJcbmltcG9ydCB7IENhbGVuZGFyU2V0IH0gZnJvbSBcIi4vcGVyaW9kaWNOb3Rlc1R5cGVzXCI7XHJcblxyXG5pbXBvcnQgeyBHcmFudWxhcml0eSwgUGVyaW9kaWNDb25maWcgfSBmcm9tIFwiLi9wZXJpb2RpY05vdGVzVHlwZXNcIjtcclxuXHJcbmNvbnN0IERFRkFVTFRfTk9URV9GT1JNQVQgPSB7XHJcblx0ZGF5OiBcIllZWVktTU0tRERcIixcclxuXHR3ZWVrOiBcImdnZ2ctW1ddd3dcIixcclxuXHRtb250aDogXCJZWVlZLU1NXCIsXHJcblx0cXVhcnRlcjogXCJZWVlZLVtRXVFcIixcclxuXHR5ZWFyOiBcIllZWVlcIlxyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFuZE9wZW5QZXJpb2RpY05vdGUoIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHksIGRhdGU6IG1vbWVudCwgY2FsZW5kYXJTZXQ6IENhbGVuZGFyU2V0KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0Y29uc3QgeyB3b3Jrc3BhY2UgfSA9IHdpbmRvdy5hcHA7XHJcblxyXG5cclxuXHRsZXQgZmlsZSA9IHdpbmRvdy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKS5jYWNoZS5nZXRQZXJpb2RpY05vdGUoXHJcblx0XHRjYWxlbmRhclNldC5pZCwgZ3JhbnVsYXJpdHksIGRhdGUgXHJcblx0KTtcclxuXHRpZiAoIWZpbGUpIHtcclxuXHRcdC8vICBmaWxlXHUzMDkyXHU0RjVDXHU2MjEwXHJcblx0XHRjb25zdCBjb25maWcgPSBjYWxlbmRhclNldFtncmFudWxhcml0eV07XHJcblx0XHRjb25zdCBmb3JtYXQgPSBjYWxlbmRhclNldFtncmFudWxhcml0eV0uZm9ybWF0O1xyXG5cclxuXHRcdGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0ID8gZm9ybWF0IDogREVGQVVMVF9OT1RFX0ZPUk1BVFtncmFudWxhcml0eV0pO1xyXG5cdFx0Y29uc3QgdGVtcGxhdGVDb250ZW50cyA9IGF3YWl0IGdldFRlbXBsYXRlQ29udGVudHMod2luZG93LmFwcCwgY29uZmlnLnRlbXBsYXRlUGF0aCk7XHJcblx0XHRjb25zdCByZW5kZXJlZENvbnRlbnRzID0gYXBwbHlUZW1wbGF0ZVRyYW5zZm9ybWF0aW9ucyhcclxuXHRcdFx0ZmlsZW5hbWUsXHJcblx0XHRcdGdyYW51bGFyaXR5IGFzIEdyYW51bGFyaXR5LFxyXG5cdFx0XHRkYXRlLFxyXG5cdFx0XHRmb3JtYXQsXHJcblx0XHRcdHRlbXBsYXRlQ29udGVudHNcclxuXHRcdCk7XHJcbiAgICBjb25zdCBkZXN0UGF0aCA9IGF3YWl0IGdldE5vdGVDcmVhdGlvblBhdGgod2luZG93LmFwcCwgZmlsZW5hbWUsIGNvbmZpZyk7XHJcbiAgICBmaWxlID0gYXdhaXQgd2luZG93LmFwcC52YXVsdC5jcmVhdGUoZGVzdFBhdGgsIHJlbmRlcmVkQ29udGVudHMpO1xyXG5cdH1cclxuXHJcblx0YXdhaXQgd29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShmaWxlKTtcclxufVxyXG5cclxuXHJcbi8vIFBlcmlvZGljIE5vdGVzIHV0aWwudHNcdTMwNEJcdTMwODlcclxuYXN5bmMgZnVuY3Rpb24gZ2V0VGVtcGxhdGVDb250ZW50cyhcclxuXHRhcHA6IEFwcCxcclxuXHR0ZW1wbGF0ZVBhdGg6IHN0cmluZyB8IHVuZGVmaW5lZFxyXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0Y29uc3QgeyBtZXRhZGF0YUNhY2hlLCB2YXVsdCB9ID0gYXBwO1xyXG5cdGNvbnN0IG5vcm1hbGl6ZWRUZW1wbGF0ZVBhdGggPSBub3JtYWxpemVQYXRoKHRlbXBsYXRlUGF0aCA/PyBcIlwiKTtcclxuXHRpZiAodGVtcGxhdGVQYXRoID09PSBcIi9cIikge1xyXG5cdCAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShcIlwiKTtcclxuXHR9XHJcbiAgXHJcblx0dHJ5IHtcclxuXHQgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IG1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3Qobm9ybWFsaXplZFRlbXBsYXRlUGF0aCwgXCJcIik7XHJcblx0ICByZXR1cm4gdGVtcGxhdGVGaWxlID8gdmF1bHQuY2FjaGVkUmVhZCh0ZW1wbGF0ZUZpbGUpIDogXCJcIjtcclxuXHR9IGNhdGNoIChlcnIpIHtcclxuXHQgIGNvbnNvbGUuZXJyb3IoXHJcblx0XHRgRmFpbGVkIHRvIHJlYWQgdGhlIGRhaWx5IG5vdGUgdGVtcGxhdGUgJyR7bm9ybWFsaXplZFRlbXBsYXRlUGF0aH0nYCxcclxuXHRcdGVyclxyXG5cdCAgKTtcclxuXHQgIG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gcmVhZCB0aGUgZGFpbHkgbm90ZSB0ZW1wbGF0ZVwiKTtcclxuXHQgIHJldHVybiBcIlwiO1xyXG5cdH1cclxuICB9XHJcblxyXG5mdW5jdGlvbiBhcHBseVRlbXBsYXRlVHJhbnNmb3JtYXRpb25zKFxyXG5cdGZpbGVuYW1lOiBzdHJpbmcsXHJcblx0Z3JhbnVsYXJpdHk6IEdyYW51bGFyaXR5LFxyXG5cdGRhdGU6IG1vbWVudCxcclxuXHRmb3JtYXQ6IHN0cmluZyxcclxuXHRyYXdUZW1wbGF0ZUNvbnRlbnRzOiBzdHJpbmdcclxuKTogc3RyaW5nIHtcclxuXHRsZXQgdGVtcGxhdGVDb250ZW50cyA9IHJhd1RlbXBsYXRlQ29udGVudHM7XHJcblxyXG5cdHRlbXBsYXRlQ29udGVudHMgPSByYXdUZW1wbGF0ZUNvbnRlbnRzXHJcblx0XHQucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXHJcblx0XHQucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxyXG5cdFx0LnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSk7XHJcblxyXG5cdGlmIChncmFudWxhcml0eSA9PT0gXCJkYXlcIikge1xyXG5cdFx0dGVtcGxhdGVDb250ZW50cyA9IHRlbXBsYXRlQ29udGVudHNcclxuXHRcdC5yZXBsYWNlKC97e1xccyp5ZXN0ZXJkYXlcXHMqfX0vZ2ksIGRhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCBcImRheVwiKS5mb3JtYXQoZm9ybWF0KSlcclxuXHRcdC5yZXBsYWNlKC97e1xccyp0b21vcnJvd1xccyp9fS9naSwgZGF0ZS5jbG9uZSgpLmFkZCgxLCBcImRcIikuZm9ybWF0KGZvcm1hdCkpXHJcblx0XHQucmVwbGFjZShcclxuXHRcdFx0L3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksXHJcblx0XHRcdChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcclxuXHRcdFx0Y29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xyXG5cdFx0XHRjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xyXG5cdFx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRcdG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcclxuXHRcdFx0XHRzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRpZiAoY2FsYykge1xyXG5cdFx0XHRcdGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChtb21lbnRGb3JtYXQpIHtcclxuXHRcdFx0XHRyZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRpZiAoZ3JhbnVsYXJpdHkgPT09IFwid2Vla1wiKSB7XHJcblx0XHR0ZW1wbGF0ZUNvbnRlbnRzID0gdGVtcGxhdGVDb250ZW50cy5yZXBsYWNlKFxyXG5cdFx0L3t7XFxzKihzdW5kYXl8bW9uZGF5fHR1ZXNkYXl8d2VkbmVzZGF5fHRodXJzZGF5fGZyaWRheXxzYXR1cmRheSlcXHMqOiguKj8pfX0vZ2ksXHJcblx0XHQoXywgZGF5T2ZXZWVrLCBtb21lbnRGb3JtYXQpID0+IHtcclxuXHRcdFx0Y29uc3QgZGF5ID0gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrKTtcclxuXHRcdFx0cmV0dXJuIGRhdGUud2Vla2RheShkYXkpLmZvcm1hdChtb21lbnRGb3JtYXQudHJpbSgpKTtcclxuXHRcdH1cclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRpZiAoZ3JhbnVsYXJpdHkgPT09IFwibW9udGhcIikge1xyXG5cdFx0dGVtcGxhdGVDb250ZW50cyA9IHRlbXBsYXRlQ29udGVudHMucmVwbGFjZShcclxuXHRcdC97e1xccyoobW9udGgpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksXHJcblx0XHQoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XHJcblx0XHRcdGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcclxuXHRcdFx0Y29uc3QgbW9udGhTdGFydCA9IGRhdGVcclxuXHRcdFx0LmNsb25lKClcclxuXHRcdFx0LnN0YXJ0T2YoXCJtb250aFwiKVxyXG5cdFx0XHQuc2V0KHtcclxuXHRcdFx0XHRob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcclxuXHRcdFx0XHRtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXHJcblx0XHRcdFx0c2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0aWYgKGNhbGMpIHtcclxuXHRcdFx0bW9udGhTdGFydC5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAobW9tZW50Rm9ybWF0KSB7XHJcblx0XHRcdHJldHVybiBtb250aFN0YXJ0LmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIG1vbnRoU3RhcnQuZm9ybWF0KGZvcm1hdCk7XHJcblx0XHR9XHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0aWYgKGdyYW51bGFyaXR5ID09PSBcInF1YXJ0ZXJcIikge1xyXG5cdFx0dGVtcGxhdGVDb250ZW50cyA9IHRlbXBsYXRlQ29udGVudHMucmVwbGFjZShcclxuXHRcdC97e1xccyoocXVhcnRlcilcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSxcclxuXHRcdChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcclxuXHRcdFx0Y29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xyXG5cdFx0XHRjb25zdCBtb250aFN0YXJ0ID0gZGF0ZVxyXG5cdFx0XHQuY2xvbmUoKVxyXG5cdFx0XHQuc3RhcnRPZihcInF1YXJ0ZXJcIilcclxuXHRcdFx0LnNldCh7XHJcblx0XHRcdFx0aG91cjogbm93LmdldChcImhvdXJcIiksXHJcblx0XHRcdFx0bWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxyXG5cdFx0XHRcdHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcclxuXHRcdFx0fSk7XHJcblx0XHRcdGlmIChjYWxjKSB7XHJcblx0XHRcdG1vbnRoU3RhcnQuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKG1vbWVudEZvcm1hdCkge1xyXG5cdFx0XHRyZXR1cm4gbW9udGhTdGFydC5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBtb250aFN0YXJ0LmZvcm1hdChmb3JtYXQpO1xyXG5cdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGlmIChncmFudWxhcml0eSA9PT0gXCJ5ZWFyXCIpIHtcclxuXHRcdHRlbXBsYXRlQ29udGVudHMgPSB0ZW1wbGF0ZUNvbnRlbnRzLnJlcGxhY2UoXHJcblx0XHQve3tcXHMqKHllYXIpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksXHJcblx0XHQoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XHJcblx0XHRcdGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcclxuXHRcdFx0Y29uc3QgbW9udGhTdGFydCA9IGRhdGVcclxuXHRcdFx0LmNsb25lKClcclxuXHRcdFx0LnN0YXJ0T2YoXCJ5ZWFyXCIpXHJcblx0XHRcdC5zZXQoe1xyXG5cdFx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRcdG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcclxuXHRcdFx0XHRzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRpZiAoY2FsYykge1xyXG5cdFx0XHRtb250aFN0YXJ0LmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChtb21lbnRGb3JtYXQpIHtcclxuXHRcdFx0cmV0dXJuIG1vbnRoU3RhcnQuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gbW9udGhTdGFydC5mb3JtYXQoZm9ybWF0KTtcclxuXHRcdH1cclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdGVtcGxhdGVDb250ZW50cztcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldE5vdGVDcmVhdGlvblBhdGgoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZW5hbWU6IHN0cmluZyxcclxuXHRwZXJpb2RpY0NvbmZpZzogUGVyaW9kaWNDb25maWdcclxuXHQpOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdGNvbnN0IGRpcmVjdG9yeSA9IHBlcmlvZGljQ29uZmlnLmZvbGRlciA/PyBcIlwiO1xyXG5cdGNvbnN0IGZpbGVuYW1lV2l0aEV4dCA9ICFmaWxlbmFtZS5lbmRzV2l0aChcIi5tZFwiKSA/IGAke2ZpbGVuYW1lfS5tZGAgOiBmaWxlbmFtZTtcclxuXHJcblx0Y29uc3QgcGF0aCA9IG5vcm1hbGl6ZVBhdGgoam9pbihkaXJlY3RvcnksIGZpbGVuYW1lV2l0aEV4dCkpO1xyXG5cdGF3YWl0IGVuc3VyZUZvbGRlckV4aXN0cyhhcHAsIHBhdGgpO1xyXG5cdHJldHVybiBwYXRoO1xyXG5cdH1cclxuXHJcbi8vIENyZWRpdDogQGNyZWF0aW9uaXgvcGF0aC5qc1xyXG5mdW5jdGlvbiBqb2luKC4uLnBhcnRTZWdtZW50czogc3RyaW5nW10pOiBzdHJpbmcge1xyXG5cdC8vIFNwbGl0IHRoZSBpbnB1dHMgaW50byBhIGxpc3Qgb2YgcGF0aCBjb21tYW5kcy5cclxuXHRsZXQgcGFydHM6IHN0cmluZ1tdID0gW107XHJcblx0Zm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0U2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblx0XHRwYXJ0cyA9IHBhcnRzLmNvbmNhdChwYXJ0U2VnbWVudHNbaV0uc3BsaXQoXCIvXCIpKTtcclxuXHR9XHJcblx0Ly8gSW50ZXJwcmV0IHRoZSBwYXRoIGNvbW1hbmRzIHRvIGdldCB0aGUgbmV3IHJlc29sdmVkIHBhdGguXHJcblx0Y29uc3QgbmV3UGFydHMgPSBbXTtcclxuXHRmb3IgKGxldCBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG5cdFx0Y29uc3QgcGFydCA9IHBhcnRzW2ldO1xyXG5cdFx0Ly8gUmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXNcclxuXHRcdC8vIEFsc28gcmVtb3ZlIFwiLlwiIHNlZ21lbnRzXHJcblx0XHRpZiAoIXBhcnQgfHwgcGFydCA9PT0gXCIuXCIpIGNvbnRpbnVlO1xyXG5cdFx0Ly8gUHVzaCBuZXcgcGF0aCBzZWdtZW50cy5cclxuXHRcdGVsc2UgbmV3UGFydHMucHVzaChwYXJ0KTtcclxuXHR9XHJcblx0Ly8gUHJlc2VydmUgdGhlIGluaXRpYWwgc2xhc2ggaWYgdGhlcmUgd2FzIG9uZS5cclxuXHRpZiAocGFydHNbMF0gPT09IFwiXCIpIG5ld1BhcnRzLnVuc2hpZnQoXCJcIik7XHJcblx0Ly8gVHVybiBiYWNrIGludG8gYSBzaW5nbGUgc3RyaW5nIHBhdGguXHJcblx0cmV0dXJuIG5ld1BhcnRzLmpvaW4oXCIvXCIpO1xyXG59XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyRXhpc3RzKGFwcDogQXBwLCBwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRjb25zdCBkaXJzID0gcGF0aC5yZXBsYWNlKC9cXFxcL2csIFwiL1wiKS5zcGxpdChcIi9cIik7XHJcblx0ZGlycy5wb3AoKTsgLy8gcmVtb3ZlIGJhc2VuYW1lXHJcblxyXG5cdGlmIChkaXJzLmxlbmd0aCkge1xyXG5cdFx0Y29uc3QgZGlyID0gam9pbiguLi5kaXJzKTtcclxuXHRcdGlmICghYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkaXIpKSB7XHJcblx0XHRhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGRpcik7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0RGF5c09mV2VlaygpOiBzdHJpbmdbXSB7XHJcblx0Y29uc3QgeyBtb21lbnQgfSA9IHdpbmRvdztcclxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5cdGxldCB3ZWVrU3RhcnQgPSAobW9tZW50LmxvY2FsZURhdGEoKSBhcyBhbnkpLl93ZWVrLmRvdztcclxuXHRjb25zdCBkYXlzT2ZXZWVrID0gW1xyXG5cdFx0XCJzdW5kYXlcIixcclxuXHRcdFwibW9uZGF5XCIsXHJcblx0XHRcInR1ZXNkYXlcIixcclxuXHRcdFwid2VkbmVzZGF5XCIsXHJcblx0XHRcInRodXJzZGF5XCIsXHJcblx0XHRcImZyaWRheVwiLFxyXG5cdFx0XCJzYXR1cmRheVwiLFxyXG5cdF07XHJcblxyXG5cdHdoaWxlICh3ZWVrU3RhcnQpIHtcclxuXHRcdGNvbnN0IGRheSA9IGRheXNPZldlZWsuc2hpZnQoKTtcclxuXHRcdGlmIChkYXkpIGRheXNPZldlZWsucHVzaChkYXkpO1xyXG5cdFx0d2Vla1N0YXJ0LS07XHJcblx0fVxyXG5cdHJldHVybiBkYXlzT2ZXZWVrO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXREYXlPZldlZWtOdW1lcmljYWxWYWx1ZShkYXlPZldlZWtOYW1lOiBzdHJpbmcpOiBudW1iZXIge1xyXG5cdHJldHVybiBnZXREYXlzT2ZXZWVrKCkuaW5kZXhPZihkYXlPZldlZWtOYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG59XHJcblxyXG5cclxuLy8gVGhlIGZvbGxvd2luZyBjb2RlIGlzIGJhc2VkIG9uIERhaWx5IE5vdGUgSW50ZXJmYWNlIE5vdGVzIGJ5IExpYW0gQ2FpblxyXG4vLyBcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwN0VcdTMwNUZcdTMwNkZQZXJpb2RpYyBub3RlcyB2MC54XHUzMDZCXHUzMDRBXHUzMDQ0XHUzMDY2XHUzMDAxXHU2MzA3XHU1QjlBXHUzMDU3XHUzMDVGXHU2NUU1XHU0RUQ4XHUzMDZFXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU0RjVDXHU2MjEwXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVEYWlseU5vdGVGb3JVbnJlc29sdmVkTGluayhhcHA6IEFwcCwgZGF0ZTogbW9tZW50KXtcclxuXHRpZiAoZGF0ZS5pc1NhbWVPckFmdGVyKHdpbmRvdy5tb21lbnQoKSwnZGF5Jykpe1xyXG5cdFx0Ly8gXHU2NUU1XHU0RUQ4XHUzMDRDXHU2NzJDXHU2NUU1XHUzMDRCXHU2NzJBXHU2NzY1XHUzMDY3XHUzMDQyXHUzMDhDXHUzMDcwRGFpbHlOb3RlSW50ZXJmYWNlXHUzMDRCXHUzMDg5XHU2NjZFXHU5MDFBXHUzMDZCXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU0RjVDXHU2MjEwXHJcblx0XHRhd2FpdCBjcmVhdGVQZXJpb2RpY05vdGUoJ2RheScsIGRhdGUpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBcdTY1RTVcdTRFRDhcdTMwNENcdTkwNEVcdTUzQkJcdTMwNjdcdTMwNDJcdTMwOENcdTMwNzBcdTMwQzZcdTMwRjNcdTMwRDdcdTMwRUNcdTMwRkNcdTMwQzhcdTMwOTJcdTkwNjlcdTc1MjhcdTMwNUJcdTMwNUFcdTMwNkJcdTdBN0FcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTMwNjRcdTMwNEZcdTMwOEJcclxuXHRcdGNvbnN0IHtmb3JtYXQsIGZvbGRlcn0gPSBnZXREYWlseU5vdGVTZXR0aW5ncygpO1xyXG5cdFx0Y29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xyXG5cdFx0Y29uc3QgZmlsZW5hbWVXaXRoRXh0ID0gIWZpbGVuYW1lLmVuZHNXaXRoKFwiLm1kXCIpID8gYCR7ZmlsZW5hbWV9Lm1kYCA6IGZpbGVuYW1lO1xyXG5cdFxyXG5cdFx0Y29uc3QgcGF0aCA9IG5vcm1hbGl6ZVBhdGgoam9pbihmb2xkZXIgPz8gXCJcIiwgZmlsZW5hbWVXaXRoRXh0KSk7XHJcblx0XHRhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMoYXBwLCBwYXRoKTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUocGF0aCxcIlwiKTtcclxuXHRcdH0gY2F0Y2goZSl7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0RhaWx5IE5vdGUgT3V0bGluZTogQ291bGQgbm90IGNyZWF0ZSAnLHBhdGgsIGUubWVzc2FnZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG5cclxuLy8gUGVyaW9kaWMgbm90ZXMgdjEueFx1MzA2Qlx1MzA0QVx1MzA0NFx1MzA2Nlx1MzAwMVx1NjMwN1x1NUI5QVx1MzA1N1x1MzA1Rlx1NjVFNVx1NEVEOFx1MzA2RVx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA5Mlx1NEY1Q1x1NjIxMFxyXG4vLyBcdUZGMEFcdTZDRThcdTYxMEZcdTcwQjlcdUZGMEFcdUZGMUFcdTMwNTNcdTMwNkVcdTk1QTJcdTY1NzBcdTMwNkZcdTkwNEVcdTUzQkJcdTMwNkVcdTY1RTVcdTRFRDhcdTMwNkJcdTVCRkVcdTMwNTdcdTMwNjZcdTMwNkZcdTMwQzZcdTMwRjNcdTMwRDdcdTMwRUNcdTMwRkNcdTMwQzhcdTMwOTJcdTkwNjlcdTc1MjhcdTMwNUJcdTMwNUFcdTMwMDFcdTdBN0FcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTRGNUNcdTMwOERcdTMwNDZcdTMwNjhcdTMwNTlcdTMwOEJcdTMwNENcdTMwMDFcclxuLy8gUGVyaW9kaWMgbm90ZXMgMS4wLjAtYmV0YTNcdTMwNjdcdTMwNkZcdTMwMDFcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNkVcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTU0MERcdTMwRDVcdTMwQTlcdTMwRkNcdTMwREVcdTMwQzNcdTMwQzhcdTMwNkJcdTU0MDhcdTgxRjRcdTMwNTlcdTMwOEJcdTY1QjBcdTg5OEZcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNENcdTRGNUNcdTYyMTBcdTMwNTVcdTMwOENcdTMwNUZcdTMwNkVcdTMwOTJcdTY5MUNcdTUxRkFcdTMwNTdcdTMwNUZcdTU4MzRcdTU0MDhcdTMwMDFcclxuLy8gUGVyaW9kaWMgbm90ZXNcdTUwNzRcdTMwNjdcdTMwQzZcdTMwRjNcdTMwRDdcdTMwRUNcdTMwRkNcdTMwQzhcdTMwOTJcdTVGMzdcdTUyMzZcdTkwNjlcdTc1MjhcdTMwNTlcdTMwOEJcdTUxRTZcdTc0MDZcdTMwNENcdTMwNkFcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwOEJcdTMwMDJcdTMwNURcdTMwNkVcdTMwNUZcdTMwODFcdTMwMDFcdTMwQzZcdTMwRjNcdTMwRDdcdTMwRUNcdTMwRkNcdTMwQzhcdTMwNENcdTYzMDdcdTVCOUFcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwOEJcdTMwNjhcdTdBN0FcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNkJcdTMwNkFcdTMwODlcdTMwNkFcdTMwNDRcdTMwMDJcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURhaWx5Tm90ZUZvclVucmVzb2x2ZWRMaW5rUE5iZXRhKGFwcDogQXBwLCBkYXRlOiBtb21lbnQsIGNhbGVuZGFyU2V0OiBDYWxlbmRhclNldCl7XHJcblxyXG5cdGNvbnN0IGlzVG9kYXlPckZ1dHVyZSA9IEJvb2xlYW4oZGF0ZS5pc1NhbWVPckFmdGVyKHdpbmRvdy5tb21lbnQoKSwnZGF5JykpO1xyXG5cdGNvbnN0IGNvbmZpZyA9IGNhbGVuZGFyU2V0LmRheTtcclxuXHRjb25zdCBmb3JtYXQgPSBjYWxlbmRhclNldC5kYXkuZm9ybWF0O1xyXG5cclxuXHRjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCA/IGZvcm1hdCA6IERFRkFVTFRfTk9URV9GT1JNQVQuZGF5KTtcclxuXHJcblx0bGV0IHRlbXBsYXRlQ29udGVudHMgPSBcIlwiO1xyXG5cdGxldCByZW5kZXJlZENvbnRlbnRzID0gXCJcIjtcclxuXHRpZiAoaXNUb2RheU9yRnV0dXJlKXtcclxuXHRcdHRlbXBsYXRlQ29udGVudHMgPSBhd2FpdCBnZXRUZW1wbGF0ZUNvbnRlbnRzKGFwcCwgY29uZmlnLnRlbXBsYXRlUGF0aCk7XHJcblx0XHRyZW5kZXJlZENvbnRlbnRzID0gYXBwbHlUZW1wbGF0ZVRyYW5zZm9ybWF0aW9ucyhcclxuXHRcdFx0ZmlsZW5hbWUsXHJcblx0XHRcdCdkYXknLFxyXG5cdFx0XHRkYXRlLFxyXG5cdFx0XHRmb3JtYXQsXHJcblx0XHRcdHRlbXBsYXRlQ29udGVudHNcclxuXHRcdFx0KTtcclxuXHR9XHJcblx0Y29uc3QgZGVzdFBhdGggPSBhd2FpdCBnZXROb3RlQ3JlYXRpb25QYXRoKGFwcCwgZmlsZW5hbWUsIGNvbmZpZyk7XHJcblx0dHJ5IHtcclxuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShkZXN0UGF0aCwgcmVuZGVyZWRDb250ZW50cyk7XHJcblx0fSBjYXRjaChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKCdEYWlseSBOb3RlIE91dGxpbmU6IENvdWxkIG5vdCBjcmVhdGUnLCBkZXN0UGF0aCwgZS5tZXNzYWdlKTtcclxuXHR9XHJcbn1cclxuIiwgIlxyXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTY29wZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IERhaWx5Tm90ZU91dGxpbmVQbHVnaW4gZnJvbSAnc3JjL21haW4nO1xyXG5leHBvcnQgY2xhc3MgTW9kYWxKdW1wIGV4dGVuZHMgTW9kYWwge1xyXG5cdHBsdWdpbjogRGFpbHlOb3RlT3V0bGluZVBsdWdpbjtcclxuXHRzY29wZTogU2NvcGU7XHJcblxyXG5cdGlucHV0ZWRWYWx1ZTogc3RyaW5nO1xyXG5cdGVuYWJsZUV4dHJhY3QgOiBib29sZWFuO1xyXG5cdG9uU3VibWl0OiAoZW50ZXJlZERhdGU6IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRGFpbHlOb3RlT3V0bGluZVBsdWdpbiwgb25TdWJtaXQ6IChlbnRlcmVkRGF0ZTogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHR0aGlzLmlucHV0ZWRWYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm9uc2V0O1xyXG5cclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiYnJcIik7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkVudGVyIGRhdGUgdG8ganVtcChZWVlZLU1NLUREKTpcIilcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+e1xyXG5cdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub25zZXQpLmlucHV0RWwuc2VsZWN0KCk7XHJcblx0XHRcdFx0dGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuaW5wdXRlZFZhbHVlID0gdmFsdWVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkp1bXBcIilcclxuXHRcdFx0XHRcdC5zZXRDdGEoKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soXHJcblx0XHRcdFx0XHRcdGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5leGVjdXRlSnVtcCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQpKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHQvLyBFbnRlclx1MzA2N1x1MzA2RVx1NTE2NVx1NTI5QlxyXG5cdFx0dGhpcy5zY29wZS5yZWdpc3RlcihbXSwgJ0VudGVyJyxcclxuXHRcdFx0KGV2dDogS2V5Ym9hcmRFdmVudCk9PntcclxuXHRcdFx0XHR0aGlzLmV4ZWN1dGVKdW1wKCk7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0bGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBleGVjdXRlSnVtcCgpOlByb21pc2U8dm9pZD57XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR0aGlzLm9uU3VibWl0KHRoaXMuaW5wdXRlZFZhbHVlKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBQb3MsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGdldERhdGVGcm9tRmlsZSwgZ2V0RGF0ZUZyb21QYXRoIH0gZnJvbSBcIm9ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZVwiO1xyXG5pbXBvcnQgeyBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3MsIEdSQU5VTEFSSVRZX0xJU1QgfSBmcm9tIFwiLi9tYWluXCI7XHJcblxyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuaW1wb3J0IHsgY3JlYXRlRGFpbHlOb3RlRm9yVW5yZXNvbHZlZExpbmssIGNyZWF0ZURhaWx5Tm90ZUZvclVucmVzb2x2ZWRMaW5rUE5iZXRhIH0gZnJvbSBcIi4vY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZVwiO1xyXG5cclxuLy8gZGF0YS5qc29uXHUzMDZFZmlsZUZsYWdcdTMwOTJcdTYzODNcdTk2NjRcdUZGMUFcdTUwMjRcdTMwNENcdTdBN0FcdTkxNERcdTUyMTdcdTMwNkVcdTMwRDdcdTMwRURcdTMwRDFcdTMwQzZcdTMwQTNcdTMwOTJcdTUyNEFcdTk2NjRcclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuRmlsZUZsYWcoZmlsZTpURmlsZSwgc2V0dGluZ3M6RGFpbHlOb3RlT3V0bGluZVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICBpZiAoT2JqZWN0LmtleXMoc2V0dGluZ3MuZmlsZUZsYWdbZmlsZS5wYXRoXSkubGVuZ3RoID09IDApe1xyXG4gICAgICAgIGRlbGV0ZSBzZXR0aW5ncy5maWxlRmxhZ1tmaWxlLnBhdGhdO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBkYXRhLmpzb25cdTMwNkVmaWxlRmxhZ1x1MzA2Qlx1MzA2NFx1MzA0NFx1MzA2Nlx1MzAwMWZpbGUucGF0aFx1MzA2RVx1MzBEN1x1MzBFRFx1MzBEMVx1MzBDNlx1MzBBM1x1MzA2QmZsYWdcdTMwNjdcdTYzMDdcdTVCOUFcdTMwNTdcdTMwNUZcdTMwRDVcdTMwRTlcdTMwQjBcdTMwNENcdTVCNThcdTU3MjhcdTMwNTlcdTMwOEJcdTMwNEJcdTMwQzFcdTMwQTdcdTMwQzNcdTMwQUZcclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRmxhZyhmaWxlOlRGaWxlLCBmbGFnOiAnZm9sZCcsIHNldHRpbmdzOiBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3MpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBzZXR0aW5ncy5maWxlRmxhZ1tmaWxlLnBhdGhdPy5bZmxhZ107XHJcbn1cclxuXHJcbi8vIGZpbGVGbGFnXHUzMDZCXHU2MzA3XHU1QjlBXHUzMDU3XHUzMDVGXHUzMEQ1XHUzMEU5XHUzMEIwXHUzMDkyXHU4RkZEXHU1MkEwXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRGbGFnKGZpbGU6VEZpbGUsIGZsYWc6ICdmb2xkJywgc2V0dGluZ3M6IERhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgaWYoIXNldHRpbmdzLmZpbGVGbGFnLmhhc093blByb3BlcnR5KGZpbGUucGF0aCkpe1xyXG4gICAgICAgIHNldHRpbmdzLmZpbGVGbGFnW2ZpbGUucGF0aF0gPSB7fTtcclxuICAgIH1cclxuICAgIHNldHRpbmdzLmZpbGVGbGFnW2ZpbGUucGF0aF1bZmxhZ10gPSB0cnVlO1xyXG59XHJcblxyXG4vL2ZpbGVGbGFnXHUzMDRCXHUzMDg5XHU2MzA3XHU1QjlBXHUzMDU3XHUzMDVGXHUzMEQ1XHUzMEU5XHUzMEIwXHUzMDkyXHU5NjY0XHU1M0JCXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGbGFnKGZpbGU6VEZpbGUsIGZsYWc6ICdmb2xkJywgc2V0dGluZ3M6IERhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgZGVsZXRlIHNldHRpbmdzLmZpbGVGbGFnW2ZpbGUucGF0aF1bZmxhZ107XHJcbiAgICBjbGVhbkZpbGVGbGFnKGZpbGUsIHNldHRpbmdzKTtcclxufVxyXG5cclxuLy9maWxlRmxhZ1x1MzA2RVx1NjMwN1x1NUI5QVx1MzA1N1x1MzA1Rlx1MzBENVx1MzBFOVx1MzBCMFx1MzA5Mlx1MzBDOFx1MzBCMFx1MzBFQlxyXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlRmxhZyhmaWxlOlRGaWxlLCBmbGFnOiAnZm9sZCcsIHNldHRpbmdzOiBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3MpOiB2b2lkIHtcclxuICAgIGlmIChjaGVja0ZsYWcoZmlsZSwgZmxhZywgc2V0dGluZ3MpID09IHRydWUpe1xyXG4gICAgICAgIHJlbW92ZUZsYWcoZmlsZSwgZmxhZywgc2V0dGluZ3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhZGRGbGFnKGZpbGUsIGZsYWcsIHNldHRpbmdzKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gc3VicGF0aFx1MzA5Mlx1NTQyQlx1MzA4MFx1MzBFQVx1MzBGM1x1MzBBRlx1MzA2RVx1MzBFQVx1MzBGM1x1MzBBRlx1NTE0OFx1MzA2RXBvc2l0aW9uXHUzMDkyXHU1M0Q2XHU1Rjk3XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdWJwYXRoUG9zaXRpb24gKGFwcDpBcHAsIGZpbGU6VEZpbGUsIHN1YnBhdGg6c3RyaW5nKTpQb3N8bnVsbHtcclxuICAgIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG4gICAgaWYgKCFjYWNoZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY2hlY2twYXRoID0gc3VicGF0aC5yZXBsYWNlKC9bI15dL2csJycpO1xyXG4gICAgaWYgKGNhY2hlLmhlYWRpbmdzPy5sZW5ndGgpe1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gY2FjaGUuaGVhZGluZ3MuZmluZEluZGV4KChlbGVtZW50KSA9PiBlbGVtZW50LmhlYWRpbmcucmVwbGFjZSgvWyNeXS9nLCcnKSA9PSBjaGVja3BhdGgpO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKXtcclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLmhlYWRpbmdzW2luZGV4XS5wb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoY2FjaGUuc2VjdGlvbnM/Lmxlbmd0aCl7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSBjYWNoZS5zZWN0aW9ucy5maW5kSW5kZXgoKGVsZW1lbnQpID0+IGVsZW1lbnQuaWQ/LnJlcGxhY2UoL1sjXl0vZywnJykgPT0gY2hlY2twYXRoKTtcclxuICAgICAgICBpZiAoaW5kZXggPj0gMCl7XHJcbiAgICAgICAgICAgIHJldHVybiBjYWNoZS5zZWN0aW9uc1tpbmRleF0ucG9zaXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8vIGxpc3QgY2FsbG91dFx1MzA2RVx1MzBDMVx1MzBBN1x1MzBDM1x1MzBBRlxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tMaXN0Q2FsbG91dHMgKGNoZWNrU3RyaW5nOiBzdHJpbmcsIGNhbGxvdXRzKXtcclxuICAgIGlmICghY2FsbG91dHMpIHJldHVybiBudWxsO1xyXG4gICAgZm9yIChsZXQgaT0wOyBpPGNhbGxvdXRzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZiAoY2hlY2tTdHJpbmcuc3RhcnRzV2l0aChjYWxsb3V0c1tpXS5jaGFyK1wiIFwiKSl7XHJcbiAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vLyBcdTY2NDJcdTk1OTNcdTRFRDhcdTMwNERcdTMwRUFcdTMwQjlcdTMwQzhcdTMwNkVcdTMwQzFcdTMwQTdcdTMwQzNcdTMwQUZcclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrVGltZUxpc3QgKGNoZWNrU3RyaW5nOiBzdHJpbmcpe1xyXG4gICAgcmV0dXJuIGNoZWNrU3RyaW5nLm1hdGNoKC9eWzAtOV17Mn06WzAtOV17Mn0vKT8uWzBdO1xyXG59XHJcbi8vIGxpc3QgaXRlbVx1MzA5Mlx1NjNDRlx1NzUzQlx1MzA1OVx1MzA4Qlx1MzA0Qlx1NTIyNFx1NUI5QVxyXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkRGlzcGxheUxpc3RJdGVtIChkYXRhLCBzZXR0aW5ncywgY2FsbG91dHNJbmRleCk6Ym9vbGVhbiB7XHJcbiAgICAvLyBcdTVCOENcdTRFODZcdTMwQkZcdTMwQjlcdTMwQUZcdTk3NUVcdTg4NjhcdTc5M0FcdThBMkRcdTVCOUFcdTMwNjdcdTMwNDJcdTMwOENcdTMwNzBcdTVCOENcdTRFODZcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkZcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuICAgIGlmIChzZXR0aW5ncy5oaWRlQ29tcGxldGVkVGFza3MgPT0gdHJ1ZSAmJiBkYXRhLnRhc2sgPT0neCcpe1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIFx1MzBCRlx1MzBCOVx1MzBBRlx1ODg2OFx1NzkzQVx1OEEyRFx1NUI5QVx1MzA2N1x1MzA0Mlx1MzA4Q1x1MzA3MFx1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1ODg2OFx1NzkzQSAoXHU0RUU1XHU5NjREXHUzMDZFXHU1MjI0XHU1QjlBXHUzMDZGXHU5NzVFXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHUzMDdGXHUzMDRDXHU1QkZFXHU4QzYxXHUzMDY4XHUzMDZBXHUzMDhCKVxyXG4gICAgaWYgKHNldHRpbmdzLnNob3dFbGVtZW50cy50YXNrID09IHRydWUgJiYgZGF0YS50YXNrICE9PSB2b2lkIDApe1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gXHUzMEVBXHUzMEI5XHUzMEM4XHUzMEIzXHUzMEZDXHUzMEVCXHUzMEEyXHUzMEE2XHUzMEM4XHU4ODY4XHU3OTNBb25cdTMwNjdcdThBNzJcdTVGNTNcdTMwNTlcdTMwOEJcdTMwNkFcdTMwODlcdTg4NjhcdTc5M0FcclxuICAgIGlmIChzZXR0aW5ncy5zaG93TGlzdENhbGxvdXRzID09IHRydWUgJiYgZGF0YS5saXN0Q2FsbG91dCl7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyBcdTMwQkZcdTMwQTRcdTMwRTBcdTMwRUFcdTMwQjlcdTMwQzhcdTg4NjhcdTc5M0Fvblx1MzA2N1x1OEE3Mlx1NUY1M1x1MzA1OVx1MzA4Qlx1MzA2QVx1MzA4OVx1ODg2OFx1NzkzQVxyXG4gICAgaWYgKHNldHRpbmdzLnNob3dUaW1lTGlzdCA9PSB0cnVlICYmIGRhdGEudGltZSl7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyBcdTMwRUFcdTMwQjlcdTMwQzhcdTk3NUVcdTg4NjhcdTc5M0FcdTMwNkVcdTU4MzRcdTU0MDhcdTMwMDFcdTMwN0VcdTMwNUZcdTMwNkZcdTMwRUNcdTMwRDlcdTMwRUJcdTMwNkJcdTVGRENcdTMwNThcdTMwNjZcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuICAgIGlmICggIXNldHRpbmdzLnNob3dFbGVtZW50cy5saXN0SXRlbXMgfHwgKGRhdGEubGV2ZWwgPT0gMikgfHwgKGRhdGEubGV2ZWwgPT0xICYmIHNldHRpbmdzLmFsbFJvb3RJdGVtcyA9PSBmYWxzZSkpe1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy8gXHU2NzAwXHU1MjFEXHUzMDZFXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU2M0EyXHU3RDIyXHJcbmV4cG9ydCBmdW5jdGlvbiBzZWFyY2hGaXJzdE5vdGUoKTptb21lbnR7XHJcbiAgICBpZiAodGhpcy52ZXJQTiAhPSAyKXtcclxuICAgICAgICAvLyBjb3JlIGRhaWx5IG5vdGUvIHBlcmlvZGljIG5vdGVzIHBsdWdpbiB2MC54IFx1MzA2RVx1NTgzNFx1NTQwOFxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB0YXJnZXREYXRlID0gd2luZG93Lm1vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWxsRGFpbHlOb3Rlcykpe1xyXG4gICAgICAgICAgICBjb25zdCB0ZW1wRGF0ZSA9IGdldERhdGVGcm9tRmlsZSh2YWx1ZSBhcyBURmlsZSwgR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XSk7XHJcbiAgICAgICAgICAgIGlmICh0ZW1wRGF0ZS5pc0JlZm9yZSh0YXJnZXREYXRlKSl7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXREYXRlID0gdGVtcERhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldERhdGU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHBlcmlvZGljIG5vdGVzIHBsdWdpbiB2MS54XHUzMDZFXHU1ODM0XHU1NDA4XHJcbiAgICAgICAgbGV0IHRhcmdldERhdGUgPSB3aW5kb3cubW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XHJcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbJ3BlcmlvZGljLW5vdGVzJ10/LmNhY2hlPy5jYWNoZWRGaWxlcz8uZ2V0KHRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XS5pZCk7XHJcblxyXG4gICAgICAgIGNhY2hlLmZvckVhY2goKHZhbHVlLCBrZXkpPT57XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5zZXR0aW5ncy5leGFjdE1hdGNoT25seSAmJiAhdmFsdWUubWF0Y2hEYXRhPy5leGFjdCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL1x1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzBEMVx1MzBCOVx1MzA0Qy5tZFx1MzA2N1x1N0Q0Mlx1MzA4Rlx1MzA4OVx1MzA2QVx1MzA1MVx1MzA4Q1x1MzA3MFx1RkYwOFx1MzBERVx1MzBGQ1x1MzBBRlx1MzBDMFx1MzBBNlx1MzBGM1x1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA2N1x1MzA2QVx1MzA1MVx1MzA4Q1x1MzA3MFx1RkYwOVx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5tYXJrZG93bk9ubHkgJiYgIXZhbHVlLmZpbGVQYXRoLmVuZHNXaXRoKFwiLm1kXCIpKXtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMEQxXHUzMEI5XHUzMDZCUE5cdTMwNkVcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwRDFcdTMwQjlcdTMwNENcdTU0MkJcdTMwN0VcdTMwOENcdTMwNjZcdTMwNDRcdTMwNkFcdTMwNDQgJiYgUE5cdTMwNkVcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwRDFcdTMwQjlcdTMwNENcdTYzMDdcdTVCOUFcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwOEIgXHUzMDZFXHUzMDY4XHUzMDREXHUzMDZGXHU1MUU2XHU3NDA2XHUzMDkyXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcblx0XHRcdC8vIFx1RkYwQVx1NzNGRVx1NzJCNlx1MzA2RVBOXHUzMEQ5XHUzMEZDXHUzMEJGXHUzMDY3XHUzMDZGXHUzMDAxXHUzMEFCXHUzMEVDXHUzMEYzXHUzMEMwXHUzMEZDXHUzMEJCXHUzMEMzXHUzMEM4XHUzMDZFXHU2MzA3XHU1QjlBXHUzMDZCXHUzMDRCXHUzMDRCXHUzMDhGXHUzMDg5XHUzMDVBXHU1MTY4XHUzMEJCXHUzMEMzXHUzMEM4XHUzMDZCXHU1NDJCXHUzMDdFXHUzMDhDXHUzMDhCUE5cdTMwNENcdThGRDRcdTMwNTVcdTMwOENcdTMwOEJcdTMwODhcdTMwNDZcdTMwNjdcdTMwNDJcdTMwOEJcdTMwNUZcdTMwODFcdTMwMDFcdTU0MDRcdTMwQkJcdTMwQzNcdTMwQzhcdTMwNkVcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwRDFcdTMwQjlcdTMwNjdcdTMwRDVcdTMwQTNcdTMwRUJcdTMwQkZcdTMwRUFcdTMwRjNcdTMwQjBcdTMwNTlcdTMwOEJcclxuXHRcdFx0Ly8gXHUzMDVGXHUzMDYwXHUzMDU3XHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMEQxXHUzMEI5XHUzMDRDXHU2MzA3XHU1QjlBXHUzMDU1XHUzMDhDXHUzMDY2XHUzMDQ0XHUzMDZBXHUzMDQ0XHUzMDY4XHUzMDREXHUzMDZGXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcblx0XHRcdGlmICghdmFsdWUuZmlsZVBhdGguc3RhcnRzV2l0aCh0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF1bR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XV0/LmZvbGRlci5jb25jYXQoXCIvXCIpKSAmJiB0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF1bR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XV0/LmZvbGRlci5mb2xkZXIpe1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG4gICAgICAgICAgICBpZiAodmFsdWUuZ3JhbnVsYXJpdHkgPT0gR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XSAmJiB2YWx1ZS5kYXRlLmlzQmVmb3JlKHRhcmdldERhdGUpKXtcclxuICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSB2YWx1ZS5kYXRlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiB0YXJnZXREYXRlO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLy8gXHU1QjlGXHU0RjUzXHUzMDZFXHUzMDZBXHUzMDQ0XHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDc4XHUzMDZFXHUzMEVBXHUzMEYzXHUzMEFGXHUzMDkyXHU2OTFDXHU1MUZBXHUzMDU3XHUzMDY2XHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU0RjVDXHU2MjEwXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1VucmVzb2x2ZWRMaW5rcygpe1xyXG4gICAgaWYgKHRoaXMudmVyUE4gPT09IHZvaWQgMCl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdW5yZXNvbHZlZCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUudW5yZXNvbHZlZExpbmtzO1xyXG4gICAgY29uc3QgYWxsdW5yZXNvbHZlZEROTGlua3M6IHN0cmluZ1tdID0gW107XHJcbiAgICBsZXQgY3JlYXRlZEROID0gMDtcclxuICAgIGxldCBub3RpY2U6IE5vdGljZTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGZpbGVOYW1lIGluIHVucmVzb2x2ZWQpe1xyXG4gICAgICAgIGZvciAoY29uc3QgdW5yZXNvbHZlZExpbmsgaW4gdW5yZXNvbHZlZFtmaWxlTmFtZV0pe1xyXG4gICAgICAgICAgICBpZiAoIW5vdGljZSAmJiBjcmVhdGVkRE4+PTUpe1xyXG4gICAgICAgICAgICAgICAgbm90aWNlID0gbmV3IE5vdGljZShgRGFpbHkgTm90ZSBPdXRsaW5lOiBjcmVhdGVkICR7Y3JlYXRlZEROfSBkYWlseSBub3RlcyBmb3IgdW5yZXNvbHZlZCBsaW5rc2AsMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhbGx1bnJlc29sdmVkRE5MaW5rcy5wdXNoKHVucmVzb2x2ZWRMaW5rKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHRoaXMudmVyUE4gIT0gMil7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwN0VcdTMwNUZcdTMwNkZQZXJpb2RpYyBOb3RlcyB2MC54XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWREYXRlID0gZ2V0RGF0ZUZyb21QYXRoKHVucmVzb2x2ZWRMaW5rLCdkYXknKTtcclxuICAgICAgICAgICAgICAgIGlmICghbGlua2VkRGF0ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTRGNUNcdTYyMTBcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZURhaWx5Tm90ZUZvclVucmVzb2x2ZWRMaW5rKHRoaXMuYXBwLCBsaW5rZWREYXRlKTtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRETisrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vdGljZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90aWNlLnNldE1lc3NhZ2UoYERhaWx5IE5vdGUgT3V0bGluZTogY3JlYXRlZCAke2NyZWF0ZWRETn0gZGFpbHkgbm90ZXMgZm9yIHVucmVzb2x2ZWQgbGlua3NgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFBlcmlvZGljIE5vdGVzIHYxLnhcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsZW5kYXJTZXQgb2YgdGhpcy5jYWxlbmRhclNldHMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FsZW5kYXJTZXQuZGF5LmVuYWJsZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gY2FsZW5kYXJTZXQuZGF5LmZvcm1hdDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWREYXRlID0gd2luZG93Lm1vbWVudCh1bnJlc29sdmVkTGluaywgZm9ybWF0LCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5rZWREYXRlLmlzVmFsaWQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZURhaWx5Tm90ZUZvclVucmVzb2x2ZWRMaW5rUE5iZXRhKHRoaXMuYXBwLCBsaW5rZWREYXRlLCBjYWxlbmRhclNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRETisrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChub3RpY2UpIHtcclxuICAgICAgICBuZXcgTm90aWNlKCdEYWlseSBOb3RlIE91dGxpbmU6IGNyZWF0ZWQgYWxsIGRhaWx5IG5vdGVzIGZvciB1bnJlc29sdmVkIGxpbmtzJyk7XHJcbiAgICAgICAgbm90aWNlLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsICJcdC8vIFx1NTNENlx1NUY5N1x1MzA1N1x1MzA1Rlx1NTE2OFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA0Qlx1MzA4OVx1NjNBMlx1N0QyMlx1N0JDNFx1NTZGMlx1MzA2RVx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA5Mlx1NTIwN1x1MzA4QVx1NTFGQVx1MzA1OSAgXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IElHcmFudWxhcml0eSwgZ2V0RGF0ZVVJRCB9IGZyb20gXCJvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgREFZU19QRVJfVU5JVCwgRGF0ZUluZm8gfSBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IENhbGVuZGFyU2V0IH0gZnJvbSBcIi4vcGVyaW9kaWNOb3Rlc1R5cGVzXCI7XHJcblxyXG5cdC8vICh2ZXIwLngueFx1MzA2RXBlcmlvZGljIG5vdGVzXHUzMDZCXHUzMDgyXHU1QkZFXHU1RkRDXHUzMDAyKVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFyZ2V0RmlsZXMoYWxsRmlsZXM6UmVjb3JkPHN0cmluZyxURmlsZT4sIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHkpOiBURmlsZVtde1xyXG5cclxuXHRsZXQgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHRsZXQgY2hlY2tEYXRlID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuY2xvbmUoKTtcclxuXHRsZXQgY2hlY2tEYXRlRWFybGllc3QgPSB0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0LmNsb25lKCk7XHJcblxyXG5cdGlmKGNoZWNrRGF0ZS5pc1NhbWUod2luZG93Lm1vbWVudCgpLCdkYXknKSl7XHJcblx0XHRjaGVja0RhdGUuYWRkKE1hdGguY2VpbCh0aGlzLnNldHRpbmdzLm9mZnNldC9EQVlTX1BFUl9VTklUW2dyYW51bGFyaXR5XSksZ3JhbnVsYXJpdHkpO1xyXG5cdH1cclxuXHRjaGVja0RhdGVFYXJsaWVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0LmNsb25lKCkuc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0gLSAxLGdyYW51bGFyaXR5KTtcclxuXHRcclxuXHR3aGlsZSAoY2hlY2tEYXRlLmlzU2FtZU9yQWZ0ZXIoY2hlY2tEYXRlRWFybGllc3QsZ3JhbnVsYXJpdHkpKXtcclxuXHRcdGlmIChhbGxGaWxlc1tnZXREYXRlVUlEKGNoZWNrRGF0ZSwgZ3JhbnVsYXJpdHkpXSl7XHJcblx0XHRcdGZpbGVzLnB1c2goYWxsRmlsZXNbZ2V0RGF0ZVVJRChjaGVja0RhdGUsIGdyYW51bGFyaXR5KV0pO1xyXG5cdFx0fVxyXG5cdFx0Y2hlY2tEYXRlLnN1YnRyYWN0KDEsZ3JhbnVsYXJpdHkpO1xyXG5cdH1cclxuXHRyZXR1cm4gZmlsZXM7XHJcbn1cclxuXHJcbi8vIFx1NjNBMlx1N0QyMlx1N0JDNFx1NTZGMlx1MzA2RVBlcmlvZGljIE5vdGVzXHUzMDkyXHU1M0Q2XHU1Rjk3XHUzMDU5XHUzMDhCIFx1RkYwOHBlaXJvZGljIG5vdGVzIDEueC54XHU3NTI4XHVGRjA5XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUYXJnZXRQZXJpb2RpY05vdGVzKGNhbGVuZGFyU2V0OiBDYWxlbmRhclNldCwgZ3JhbnVsYXJpdHk6IElHcmFudWxhcml0eSk6IFRGaWxlW117XHJcblx0bGV0IGZpbGVzOiBURmlsZVtdID0gW107XHJcblxyXG5cdC8vIGRheVx1NTdGQVx1NkU5Nlx1MzA2RVx1NjNBMlx1N0QyMlx1N0JDNFx1NTZGMlx1MzA2N1x1MzA0Mlx1MzA4QnNlYXJjaFJhbmdlXHUzMDkyXHU1MTQzXHUzMDZCXHUzMDAxXHU3QzkyXHU1RUE2XHUzMDZCXHU1RkRDXHUzMDU4XHUzMDY2XHU2M0EyXHU3RDIyXHU3QkM0XHU1NkYyXHUzMDkyXHU2MkUxXHU1RjM1XHUzMDU3XHUzMDVGXHUzMDgyXHUzMDZFXHUzMDkyY2hlY2tEYXRlLGNoZWNrRGF0ZUVhcmxpZXN0XHUzMDZCXHU0RUUzXHU1MTY1XHJcblx0bGV0IGNoZWNrRGF0ZSA9IHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0LmNsb25lKCk7XHJcblx0bGV0IGNoZWNrRGF0ZUVhcmxpZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdC5jbG9uZSgpO1xyXG5cclxuXHRpZihjaGVja0RhdGUuaXNTYW1lKHdpbmRvdy5tb21lbnQoKSwnZGF5Jykpe1xyXG5cdFx0Y2hlY2tEYXRlLmFkZChNYXRoLmNlaWwodGhpcy5zZXR0aW5ncy5vZmZzZXQvREFZU19QRVJfVU5JVFtncmFudWxhcml0eV0pLGdyYW51bGFyaXR5KTtcclxuXHR9XHJcblx0Y2hlY2tEYXRlRWFybGllc3QgPSB0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdC5jbG9uZSgpLnN1YnRyYWN0KHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldIC0gMSxncmFudWxhcml0eSk7XHJcblxyXG5cdGlmICh0aGlzLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pe1xyXG5cdFx0Y29uc29sZS5sb2coJ0ROTzpzZWFyY2hpbmcgY2FjaGVzIG9mIFBlcmlvZGljIE5vdGVzLi4uIGNhbGVuZGFyIHNldDonLGNhbGVuZGFyU2V0KTtcclxuXHR9XHJcblxyXG5cdHdoaWxlIChjaGVja0RhdGUuaXNTYW1lT3JBZnRlcihjaGVja0RhdGVFYXJsaWVzdCxncmFudWxhcml0eSkpe1xyXG5cdFx0Y29uc3QgY2FjaGVzID0gdGhpcy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKS5jYWNoZS5nZXRQZXJpb2RpY05vdGVzKGNhbGVuZGFyU2V0LmlkLGdyYW51bGFyaXR5LGNoZWNrRGF0ZSk7XHJcblx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgY2FjaGVzKXtcclxuXHRcdFx0Ly9cdTUzQjNcdTVCQzZcdTMwNkJcdTMwREVcdTMwQzNcdTMwQzFcdTMwNTdcdTMwNUZcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTUxRkFcdTMwNkFcdTMwNTFcdTMwOENcdTMwNzBcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuXHRcdFx0aWYgKCB0aGlzLnNldHRpbmdzLmV4YWN0TWF0Y2hPbmx5ICYmICFmaWxlPy5tYXRjaERhdGE/LmV4YWN0KSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9cdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwRDFcdTMwQjlcdTMwNEMubWRcdTMwNjdcdTdENDJcdTMwOEZcdTMwODlcdTMwNkFcdTMwNTFcdTMwOENcdTMwNzBcdUZGMDhcdTMwREVcdTMwRkNcdTMwQUZcdTMwQzBcdTMwQTZcdTMwRjNcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwNjdcdTMwNkFcdTMwNTFcdTMwOENcdTMwNzBcdUZGMDlcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MubWFya2Rvd25Pbmx5ICYmICFmaWxlPy5maWxlUGF0aC5lbmRzV2l0aChcIi5tZFwiKSl7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMEQxXHUzMEI5XHUzMDZCUE5cdTMwNkVcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwRDFcdTMwQjlcdTMwNENcdTU0MkJcdTMwN0VcdTMwOENcdTMwNjZcdTMwNDRcdTMwNkFcdTMwNDQgJiYgUE5cdTMwNkVcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwRDFcdTMwQjlcdTMwNENcdTYzMDdcdTVCOUFcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwOEIgXHUzMDZFXHUzMDY4XHUzMDREXHUzMDZGXHU1MUU2XHU3NDA2XHUzMDkyXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcblx0XHRcdC8vIFx1RkYwQVx1NzNGRVx1NzJCNlx1MzA2RVBOXHUzMEQ5XHUzMEZDXHUzMEJGXHUzMDY3XHUzMDZGXHUzMDAxXHUzMEFCXHUzMEVDXHUzMEYzXHUzMEMwXHUzMEZDXHUzMEJCXHUzMEMzXHUzMEM4XHUzMDZFXHU2MzA3XHU1QjlBXHUzMDZCXHUzMDRCXHUzMDRCXHUzMDhGXHUzMDg5XHUzMDVBXHU1MTY4XHUzMEJCXHUzMEMzXHUzMEM4XHUzMDZCXHU1NDJCXHUzMDdFXHUzMDhDXHUzMDhCUE5cdTMwNENcdThGRDRcdTMwNTVcdTMwOENcdTMwOEJcdTMwODhcdTMwNDZcdTMwNjdcdTMwNDJcdTMwOEJcdTMwNUZcdTMwODFcdTMwMDFcdTU0MDRcdTMwQkJcdTMwQzNcdTMwQzhcdTMwNkVcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwRDFcdTMwQjlcdTMwNjdcdTMwRDVcdTMwQTNcdTMwRUJcdTMwQkZcdTMwRUFcdTMwRjNcdTMwQjBcdTMwNTlcdTMwOEJcclxuXHRcdFx0Ly8gXHUzMDVGXHUzMDYwXHUzMDU3XHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMEQxXHUzMEI5XHUzMDRDXHU2MzA3XHU1QjlBXHUzMDU1XHUzMDhDXHUzMDY2XHUzMDQ0XHUzMDZBXHUzMDQ0XHUzMDY4XHUzMDREXHUzMDZGXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcblx0XHRcdGlmICghZmlsZS5maWxlUGF0aC5zdGFydHNXaXRoKGNhbGVuZGFyU2V0W2dyYW51bGFyaXR5XS5mb2xkZXIuY29uY2F0KFwiL1wiKSkgJiYgY2FsZW5kYXJTZXRbZ3JhbnVsYXJpdHldLmZvbGRlcil7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc3QgZmlsZW9iaiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlLmZpbGVQYXRoKTtcclxuXHRcdFx0aWYgKGZpbGVvYmogaW5zdGFuY2VvZiBURmlsZSl7XHJcblx0XHRcdFx0ZmlsZXMucHVzaChmaWxlb2JqKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Y2hlY2tEYXRlLnN1YnRyYWN0KDEsZ3JhbnVsYXJpdHkpO1xyXG5cdH1cclxuXHRyZXR1cm4gZmlsZXM7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmFja2xpbmtGaWxlcyhhcHA6IEFwcCwgZmlsZTpURmlsZSk6VEZpbGVbXXtcclxuXHRsZXQgZmlsZXM6VEZpbGVbXT1bXTtcclxuXHRsZXQgYmFja2xpbmtzID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0QmFja2xpbmtzRm9yRmlsZShmaWxlKS5kYXRhO1xyXG5cdGZvciAoIGNvbnN0IGtleSBpbiBiYWNrbGlua3Mpe1xyXG5cdFx0Y29uc3QgZmlsZW9iaiA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoa2V5KTtcclxuXHRcdGlmIChmaWxlb2JqIGluc3RhbmNlb2YgVEZpbGUpe1xyXG5cdFx0XHRmaWxlcy5wdXNoKGZpbGVvYmopO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gZmlsZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCYWNrbGlua0ZpbGVzRGF0YXZpZXcoYXBwOkFwcCwgZmlsZTpURmlsZSk6VEZpbGVbXXtcclxuXHRsZXQgZmlsZXM6VEZpbGVbXT1bXTtcclxuXHJcblx0aWYgKCFhcHAucGx1Z2lucy5wbHVnaW5zWydkYXRhdmlldyddKXtcclxuXHRcdHJldHVybiBnZXRCYWNrbGlua0ZpbGVzKGFwcCwgZmlsZSk7XHJcblx0fVxyXG5cclxuXHRsZXQgYmFja2xpbmtzID0gYXBwLnBsdWdpbnMucGx1Z2lucz8uZGF0YXZpZXc/LmFwaT8ucGFnZXMoYFwiJHtmaWxlLnBhdGh9XCJgKT8udmFsdWVzWzBdPy5maWxlLmlubGlua3MudmFsdWVzO1xyXG5cclxuXHRpZiAoIWJhY2tsaW5rcykge1xyXG5cdFx0cmV0dXJuIGdldEJhY2tsaW5rRmlsZXMoYXBwLGZpbGUpO1xyXG5cdH1cclxuXHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBiYWNrbGlua3MubGVuZ3RoOyBpKyspe1xyXG5cdFx0Y29uc3QgZmlsZW9iaiA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmFja2xpbmtzW2ldLnBhdGgpO1xyXG5cdFx0aWYgKGZpbGVvYmogaW5zdGFuY2VvZiBURmlsZSl7XHJcblx0XHRcdGZpbGVzLnB1c2goZmlsZW9iaik7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBmaWxlcztcclxufSIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBnZXREYXRlRnJvbUZpbGUgfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IEZpbGVJbmZvLCBHUkFOVUxBUklUWV9MSVNULCBPdXRsaW5lRGF0YSB9IGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHsgZ2V0QmFja2xpbmtGaWxlc0RhdGF2aWV3IH0gZnJvbSBcIi4vZ2V0VGFyZ2V0RmlsZXNcIjtcclxuaW1wb3J0IHsgY2hlY2tMaXN0Q2FsbG91dHMsIGNoZWNrVGltZUxpc3QgfSBmcm9tIFwiLi91dGlsXCI7XHJcblxyXG4vLyBcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNkVcdTkxNERcdTUyMTdcdTMwNEJcdTMwODlcdTU0MDRcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwNkJcdTk1QTJcdTMwNTlcdTMwOEJcdTYwQzVcdTU4MzFcdTMwOTJcdTYyQkRcdTUxRkFcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpbGVJbmZvKGZpbGVzOlRGaWxlW10pOlByb21pc2U8RmlsZUluZm9bXT57XHJcbiAgICBsZXQgZmlsZUluZm86RmlsZUluZm9bXT1bXTtcclxuICAgIGZvciAobGV0IGk9MDsgaSA8IGZpbGVzLmxlbmd0aCA7IGkrKyl7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZXNbaV0pO1xyXG4gICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdChcIlxcblwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgYmFja2xpbmtGaWxlcyA9ICh0aGlzLnNldHRpbmdzLnNob3dCYWNrbGlua3MpID8gZ2V0QmFja2xpbmtGaWxlc0RhdGF2aWV3KCB0aGlzLmFwcCwgZmlsZXNbaV0pOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGxldCBpbmZvOkZpbGVJbmZvID0ge1xyXG4gICAgICAgICAgICBkYXRlOiBnZXREYXRlRnJvbUZpbGUoZmlsZXNbaV0sR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XSksXHJcbiAgICAgICAgICAgIC8vY29udGVudDogY29udGVudCxcclxuICAgICAgICAgICAgbGluZXM6IGxpbmVzLFxyXG4gICAgICAgICAgICBudW1PZkxpbmVzOiBsaW5lcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGlzRm9sZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgYmFja2xpbmtzOiBiYWNrbGlua0ZpbGVzLFxyXG4gICAgICAgICAgICBmcm9udG1hdHRlckxpbmtzOiB1bmRlZmluZWRcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcGVyaW9kaWMgbm90ZXMgYmV0YVx1NUJGRVx1NUZEQ1xyXG4gICAgICAgIGlmICh0aGlzLnZlclBOID09IDIpe1xyXG4gICAgICAgICAgICBpbmZvLmRhdGUgPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpLmNhY2hlLmNhY2hlZEZpbGVzLmdldCh0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF0uaWQpLmdldChmaWxlc1tpXS5wYXRoKS5kYXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmlsZUluZm8ucHVzaChpbmZvKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmaWxlSW5mbztcclxufVxyXG5cclxuLy8gXHUzMEUxXHUzMEJGXHUzMEM3XHUzMEZDXHUzMEJGXHUzMDRCXHUzMDg5XHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU4OTgxXHU3RDIwXHUzMDkyXHU2MkJEXHU1MUZBXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPdXRsaW5lKGZpbGVzOlRGaWxlW10saW5mbzpGaWxlSW5mb1tdKTpQcm9taXNlPE91dGxpbmVEYXRhW11bXT57XHJcbiAgICBsZXQgZGF0YTpPdXRsaW5lRGF0YVtdW109W107ICAgIFxyXG4gICAgZm9yIChsZXQgaT0wOyBpPCBmaWxlcy5sZW5ndGggOyBpKyspe1xyXG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZXNbaV0pO1xyXG5cclxuICAgICAgICAvLyBwcm9wZXJ0aWVzKGZyb250bWF0dGVyKVx1MzA0Qlx1MzA4OVx1MzBFQVx1MzBGM1x1MzBBRlx1MzA5Mlx1NTNENlx1NUY5N1xyXG4gICAgICAgIGluZm9baV0uZnJvbnRtYXR0ZXJMaW5rcyA9IGNhY2hlPy5mcm9udG1hdHRlckxpbmtzO1xyXG5cclxuICAgICAgICAvLyBcdTdBN0FcdTkxNERcdTUyMTdcdTMwOTJcdTYzMDdcdTVCOUFcclxuICAgICAgICBkYXRhW2ldPVtdO1xyXG4gICAgICAgIGlmICghY2FjaGUpe1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaGVhZGluZ3MsbGlua3MsdGFnc1x1MzA5Mlx1NjJCRFx1NTFGQVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2sgaGVhZGluZ3MnLGNhY2hlLmhhc093blByb3BlcnR5KFwiaGVhZGluZ3NcIikgKTtcclxuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoXCJoZWFkaW5nc1wiKSl7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGo9MDsgajwgY2FjaGUuaGVhZGluZ3MubGVuZ3RoIDsgaisrKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQ6T3V0bGluZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mRWxlbWVudCA6IFwiaGVhZGluZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogY2FjaGUuaGVhZGluZ3Nbal0ucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQgOiBjYWNoZS5oZWFkaW5nc1tqXS5oZWFkaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiBjYWNoZS5oZWFkaW5nc1tqXS5sZXZlbFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0ucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoZWNrIGxpbmtzJyxjYWNoZS5oYXNPd25Qcm9wZXJ0eShcImxpbmtzXCIpICk7XHJcbiAgICAgICAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KFwibGlua3NcIikpe1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqPTA7IGo8IGNhY2hlLmxpbmtzLmxlbmd0aCA7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50Ok91dGxpbmVEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVPZkVsZW1lbnQgOiBcImxpbmtcIixcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA6IGNhY2hlLmxpbmtzW2pdLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHUzMERFXHUzMEZDXHUzMEFGXHUzMEMwXHUzMEE2XHUzMEYzXHUzMEVBXHUzMEYzXHUzMEFGXHUzMDZCXHU1QkZFXHU1RkRDXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQgOiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGNhY2hlLmxpbmtzW2pdLmRpc3BsYXlUZXh0ID09XCJcIikgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2FjaGUubGlua3Nbal0ub3JpZ2luYWwuc3Vic3RyaW5nKDEsY2FjaGUubGlua3Nbal0ub3JpZ2luYWwuaW5kZXhPZihcIl1cIikpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNhY2hlLmxpbmtzW2pdLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGNhY2hlLmxpbmtzW2pdLmxpbmtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ldLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9lbWJlZHNcdTMwNkJcdTVCRkVcdTVGRENcclxuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoXCJlbWJlZHNcIikpe1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqPTA7IGo8IGNhY2hlLmVtYmVkcy5sZW5ndGggOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudDpPdXRsaW5lRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlT2ZFbGVtZW50IDogXCJsaW5rXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gOiBjYWNoZS5lbWJlZHNbal0ucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgLy9cdTMwREVcdTMwRkNcdTMwQUZcdTMwQzBcdTMwQTZcdTMwRjNcdTMwRUFcdTMwRjNcdTMwQUZcdTMwNkJcdTVCRkVcdTVGRENcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dCA6IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2FjaGUuZW1iZWRzW2pdLmRpc3BsYXlUZXh0ID09XCJcIikgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2FjaGUuZW1iZWRzW2pdLm9yaWdpbmFsLnN1YnN0cmluZygxLGNhY2hlLmVtYmVkc1tqXS5vcmlnaW5hbC5pbmRleE9mKFwiXVwiKSkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY2FjaGUuZW1iZWRzW2pdLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGNhY2hlLmVtYmVkc1tqXS5saW5rXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZGF0YVtpXS5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2sgbGlzdHMnKTtcclxuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoXCJsaXN0SXRlbXNcIikpe1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaj0wOyBqPCBjYWNoZS5saXN0SXRlbXMubGVuZ3RoIDsgaisrKXtcclxuICAgICAgICAgICAgICAgIC8vIFx1MzBFQVx1MzBCOVx1MzBDOFx1OEExOFx1NTNGN1x1MzA2OFx1MzBCRlx1MzBCOVx1MzBBRlx1OEExOFx1NTNGN1x1MzA5Mlx1OTY2NFx1NTNCQlxyXG4gICAgICAgICAgICAgICAgbGV0IGRpc3BsYXlUZXh0ID0gdGhpcy5maWxlSW5mb1tpXS5saW5lc1tjYWNoZS5saXN0SXRlbXNbal0ucG9zaXRpb24uc3RhcnQubGluZV0ucmVwbGFjZSgvXihcXHN8XFx0KSotXFxzKFxcWy5cXF1cXHMpKi8sJycpO1xyXG4gICAgICAgICAgICAgICAgLy9cdTRFRTVcdTRFMEJcdTMwNjdcdTMwRUFcdTMwQjlcdTMwQzhcdTMwQTJcdTMwQTRcdTMwQzZcdTMwRTBcdTMwNkVcdTk2OEVcdTVDNjRcdTMwNkVcdTUyMjRcdTVCOUFcdTMwOTJcdTg4NENcdTMwNDZcdTMwMDJcclxuICAgICAgICAgICAgICAgIC8vXHUzMEVBXHUzMEI5XHUzMEM4XHUzMDZFXHU1MTQ4XHU5ODJEXHUzMDZFXHU5ODA1XHU3NkVFOjBcdTMwMDFcdTUxNDhcdTk4MkRcdTMwNjdcdTMwNkZcdTMwNkFcdTMwNDRcdTMwNENcdTMwRUJcdTMwRkNcdTMwQzhcdTMwRUNcdTMwRDlcdTMwRUI6MVx1MzAwMVx1N0IyQzJcdTk2OEVcdTVDNjRcdTRFRTVcdTRFMEJcdUZGMUEyXHUzMDY4XHUzMDU3XHUzMDY2XHUzMDQ0XHUzMDhCXHUzMDAyXHJcbiAgICAgICAgICAgICAgICAvL3BhcmVudFx1MzA0Q1x1NkI2M1x1MzA2RVx1NjU3MFx1MzA2QVx1MzA4OVx1N0IyQzJcdTk2OEVcdTVDNjRcdTRFRTVcdTRFMEJcclxuICAgICAgICAgICAgICAgIC8vXHU4Q0EwXHUzMDZFXHU2NTcwXHUzMDY3XHUzMDAxXHU3RDc2XHU1QkZFXHU1MDI0XHUzMDRDcG9zaXRpb24uc3RhcnQubGluZVx1MzA2OFx1NEUwMFx1ODFGNFx1MzA1N1x1MzA2Nlx1MzA0NFx1MzA4Q1x1MzA3MFx1MzBDOFx1MzBDM1x1MzBEN1x1MzBBMlx1MzBBNFx1MzBDNlx1MzBFMCgwKVx1MzAwMVx1OTc1RVx1NEUwMFx1ODFGNFx1MzA2QVx1MzA4OVx1MzBFQlx1MzBGQ1x1MzBDOFx1RkYwODFcdUZGMDlcclxuICAgICAgICAgICAgICAgIC8vXHUzMDVGXHUzMDYwXHUzMDU3XHU4OTk2XHU4OTlBXHU3Njg0XHUzMDZCXHU5NkUyXHUzMDhDXHUzMDVGXHUzMEM4XHUzMEMzXHUzMEQ3XHUzMEVDXHUzMEQ5XHUzMEVCXHUzMDZFXHUzMEEyXHUzMEE0XHUzMEM2XHUzMEUwXHUzMDY3XHUzMDgyXHUzMDAxXHU5NTkzXHUzMDZCaGVhZGluZ1x1MzA0Q1x1MzA2QVx1MzA0NFx1MzA2OFx1MzBFQlx1MzBGQ1x1MzBDOFx1MzBBMlx1MzBBNFx1MzBDNlx1MzBFMFx1MzA2OFx1MzA1N1x1MzA2Nlx1NTIyNFx1NUI5QVx1MzA1NVx1MzA4Q1x1MzA2Nlx1MzA1N1x1MzA3RVx1MzA0Nlx1MzA2RVx1MzA2N1x1MzAwMVxyXG4gICAgICAgICAgICAgICAgLy9cdTUyNERcdTMwNkVcdTMwRUFcdTMwQjlcdTMwQzhcdTMwQTJcdTMwQTRcdTMwQzZcdTMwRTBcdTMwNjhcdTMwNkVcdTg4NENcdTMwNkVcdTVERUVcdTMwNEMxXHUzMDZFXHU2NjQyXHUzMDZFXHUzMDdGXHUzMEVCXHUzMEZDXHUzMEM4XHUzMEEyXHUzMEE0XHUzMEM2XHUzMEUwXHUzMDY4XHUzMDU3XHUzMDY2XHU1MjI0XHU1QjlBXHUzMDU5XHUzMDhCXHUzMDg4XHUzMDQ2XHU0RkVFXHU2QjYzXHUzMDU5XHUzMDhCXHUzMDAyXHJcbiAgICAgICAgICAgICAgICBsZXQgbGlzdExldmVsOiBudW1iZXIgPSAwOyAvLyAwOnRvcCBpdGVtIG9mIGEgbGlzdCAxOnJvb3QgbGV2ZSAyOm90aGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGUubGlzdEl0ZW1zW2pdLnBhcmVudCA+MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdExldmVsID0gMjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaj4wKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShNYXRoLmFicyhjYWNoZS5saXN0SXRlbXNbal0ucGFyZW50KSA9PSBjYWNoZS5saXN0SXRlbXNbal0ucG9zaXRpb24uc3RhcnQubGluZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGNhY2hlLmxpc3RJdGVtc1tqXS5wb3NpdGlvbi5zdGFydC5saW5lIC0gY2FjaGUubGlzdEl0ZW1zW2otMV0ucG9zaXRpb24uc3RhcnQubGluZSA9PSAxKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdExldmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwRUFcdTMwQjlcdTMwQzhcdTMwQjNcdTMwRkNcdTMwRUJcdTMwQTJcdTMwQTZcdTMwQzgsXHU2NjQyXHU5NTkzXHU0RUQ4XHUzMDREXHUzMEVBXHUzMEI5XHUzMEM4XHUzMDkyXHU1MjI0XHU1QjlBXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0Q2FsbG91dCA9IGNoZWNrTGlzdENhbGxvdXRzKGRpc3BsYXlUZXh0LCB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnM/Llsnb2JzaWRpYW4tbGlzdC1jYWxsb3V0cyddPy5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gY2hlY2tUaW1lTGlzdChkaXNwbGF5VGV4dCk7IFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudDpPdXRsaW5lRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlT2ZFbGVtZW50IDogJ2xpc3RJdGVtcycsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gOiBjYWNoZS5saXN0SXRlbXNbal0ucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQgOiB0aGlzLmZpbGVJbmZvW2ldLmxpbmVzW2NhY2hlLmxpc3RJdGVtc1tqXS5wb3NpdGlvbi5zdGFydC5saW5lXS5yZXBsYWNlKC9eKFxcc3xcXHQpKi1cXHMoXFxbLlxcXVxccykqLywnJyksXHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwgOiBsaXN0TGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFzayA6IGNhY2hlLmxpc3RJdGVtc1tqXS50YXNrLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RDYWxsb3V0IDogbGlzdENhbGxvdXQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZSA6IHRpbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ldLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoZWNrIHRhZ3MnLGNhY2hlLmhhc093blByb3BlcnR5KFwidGFnc1wiKSApO1xyXG4gICAgICAgIGlmIChjYWNoZS5oYXNPd25Qcm9wZXJ0eShcInRhZ3NcIikpe1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqPTA7IGo8IGNhY2hlLnRhZ3MubGVuZ3RoIDsgaisrKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQ6T3V0bGluZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mRWxlbWVudCA6IFwidGFnXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gOiBjYWNoZS50YWdzW2pdLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0IDogY2FjaGUudGFnc1tqXS50YWcuc3Vic3RyaW5nKDEpLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0ucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBcdTg5ODFcdTdEMjBcdTMwNkVcdTc2N0JcdTU4MzRcdTk4MDZcdTMwNkJcdTMwQkRcdTMwRkNcdTMwQzhcclxuICAgICAgICBkYXRhW2ldLnNvcnQoKGEsYik9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoYS5wb3NpdGlvbi5zdGFydC5vZmZzZXQgLSBiLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7XHJcblxyXG59IiwgImltcG9ydCB7IEFwcCwgTWFya2Rvd25WaWV3LCBNZW51LCBURmlsZSwgcGFyc2VMaW5rdGV4dCwgc2V0SWNvbiwgc2V0VG9vbHRpcCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBGaWxlSW5mbywgT3V0bGluZURhdGEsIEdSQU5VTEFSSVRZX0xJU1QgfSBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IGFkZEZsYWcsIGNoZWNrRmxhZywgY2hlY2tMaXN0Q2FsbG91dHMsIGdldFN1YnBhdGhQb3NpdGlvbiwgcmVtb3ZlRmxhZywgc2hvdWxkRGlzcGxheUxpc3RJdGVtIH0gZnJvbSBcIi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUgfSBmcm9tIFwiLi92aWV3XCI7XHJcblxyXG4vLyAgXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU2M0NGXHU3NTNCXHRcclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdPdXRsaW5lKCBmaWxlczogVEZpbGVbXSwgaW5mbzogRmlsZUluZm9bXSwgZGF0YTogT3V0bGluZURhdGFbXVtdKTp2b2lkIHtcclxuXHJcbiAgICBjb25zdCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQgPSBjcmVhdGVEaXYoXCJuYXYtZmlsZXMtY29udGFpbmVyIG5vZGUtaW5zZXJ0LWV2ZW50XCIpO1xyXG4gICAgY29uc3Qgcm9vdEVsOiBIVE1MRWxlbWVudCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdihcInRyZWUtaXRlbSBuYXYtZm9sZGVyIG1vZC1yb290XCIpOyBcclxuICAgIGNvbnN0IHJvb3RDaGlsZHJlbkVsOiBIVE1MRWxlbWVudCA9IHJvb3RFbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0tY2hpbGRyZW4gbmF2LWZvbGRlci1jaGlsZHJlblwiKTsgXHJcblxyXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICByb290Q2hpbGRyZW5FbC5jcmVhdGVFbChcImg0XCIse1xyXG4gICAgICAgICAgICB0ZXh0OiBcIkRhaWx5L3BlcmlvZGljIG5vdGUgbG9hZGluZyBlcnJvcih0cnkgY2xpY2tpbmcgb24gdGhlIEhvbWUgaWNvbilcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGluY2x1ZGUgb25seSBtb2RlXHUzMDRDXHUzMEFBXHUzMEYzXHUzMDZCXHUzMDZBXHUzMDYzXHUzMDY2XHUzMDQ0XHUzMDhCXHUzMDRCXHJcbiAgICBsZXQgaW5jbHVkZU1vZGU6IGJvb2xlYW4gPSAodGhpcy5zZXR0aW5ncy5pbmNsdWRlT25seSAhPSAnbm9uZScpICYmIChCb29sZWFuKHRoaXMuc2V0dGluZ3Mud29yZHNUb0luY2x1ZGUubGVuZ3RoKSB8fCAodGhpcy5zZXR0aW5ncy5pbmNsdWRlQmVnaW5uaW5nKSk7XHJcblxyXG4gICAgLy8gXHU4ODY4XHU3OTNBXHUzMEFBXHUzMEYzXHUzMDZCXHUzMDZBXHUzMDYzXHUzMDY2XHUzMDQ0XHUzMDhCXHU4OThCXHU1MUZBXHUzMDU3XHUzMEVDXHUzMEQ5XHUzMEVCXHUzMDZFXHU2NzAwXHU5QUQ4XHU1MDI0XHJcbiAgICBsZXQgbWF4TGV2ZWwgPSB0aGlzLnNldHRpbmdzLmhlYWRpbmdMZXZlbC5pbmRleE9mKHRydWUpO1xyXG5cclxuICAgIFxyXG5cclxuXHJcbiAgICBmb3IgKGxldCBpPTA7IGk8ZmlsZXMubGVuZ3RoIDsgaSsrKXtcclxuXHJcbiAgICAgICAgLy8gXHU2NzAwXHU2NUIwXHUzMDZFXHU4OThCXHU1MUZBXHUzMDU3XHUzMEVDXHUzMEQ5XHUzMEVCXHJcbiAgICAgICAgbGV0IGxhdGVzdEhlYWRpbmdMZXZlbCA9IDA7XHJcblxyXG4gICAgICAgIC8vIFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA2RVx1MzBCRlx1MzBBNFx1MzBDOFx1MzBFQlx1OTBFOFx1NTIwNlx1NEY1Q1x1NjIxMCA9IFx1MzBENVx1MzBBOVx1MzBFQlx1MzBDMFx1NEY1Q1x1NjIxMFxyXG4gICAgICAgIGNvbnN0IGRhaWx5Tm90ZUVsOiBIVE1MRWxlbWVudCA9IHJvb3RDaGlsZHJlbkVsLmNyZWF0ZURpdihcInRyZWUtaXRlbSBuYXYtZm9sZGVyXCIpO1xyXG4gICAgICAgIGNvbnN0IGRhaWx5Tm90ZVRpdGxlRWw6IEhUTUxFbGVtZW50ID0gZGFpbHlOb3RlRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtLXNlbGYgaXMtY2xpY2thYmxlIG1vZC1jb2xsYXBzaWJsZSBuYXYtZm9sZGVyLXRpdGxlXCIpO1xyXG4gICAgICAgIGNvbnN0IGRhaWx5Tm90ZUNoaWxkcmVuRWw6IEhUTUxFbGVtZW50ID0gZGFpbHlOb3RlRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtLWNoaWxkcmVuIG5hdi1mb2xkZXItY2hpbGRyZW5cIik7XHJcblxyXG4gICAgICAgIC8vIFx1MzBDRVx1MzBGQ1x1MzBDOFx1MzBCRlx1MzBBNFx1MzBDOFx1MzBFQlx1MzA2Qlx1ODBDQ1x1NjY2Rlx1ODI3Mlx1MzA5Mlx1OENBMFx1ODM3N1xyXG4gICAgICAgIGNvbnN0IGNoYW5nZUNvbG9yID0gdGhpcy5zZXR0aW5ncy5ub3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3I7XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VDb2xvciAhPSdub25lJyl7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbUNvbG9yID0gdGhpcy5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbUNvbG9ySG92ZXIgPSB0aGlzLnNldHRpbmdzLmN1c3RvbU5vdGVUaXRsZUJhY2tncm91bmRDb2xvckhvdmVyO1xyXG4gICAgICAgICAgICBjb25zdCB0aGVtZSA9IEJvb2xlYW4oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWxpZ2h0JykpPyAnbGlnaHQnOidkYXJrJ1xyXG5cclxuICAgICAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjdXN0b21Db2xvcltjaGFuZ2VDb2xvcl1bdGhlbWVdO1xyXG4gICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY3VzdG9tQ29sb3JIb3ZlcltjaGFuZ2VDb2xvcl1bdGhlbWVdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID1jdXN0b21Db2xvcltjaGFuZ2VDb2xvcl1bdGhlbWVdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICBcdTYyOThcdTMwOEFcdTMwNUZcdTMwNUZcdTMwN0ZcdTMwQTJcdTMwQTRcdTMwQjNcdTMwRjNcclxuICAgICAgICBjb25zdCBub3RlQ29sbGFwc2VJY29uOkhUTUxFbGVtZW50ID0gZGFpbHlOb3RlVGl0bGVFbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0taWNvbiBjb2xsYXBzZS1pY29uIG5hdi1mb2xkZXItY29sbGFwc2UtaW5kaWNhdG9yXCIpO1xyXG4gICAgICAgIHNldEljb24obm90ZUNvbGxhcHNlSWNvbixcInJpZ2h0LXRyaWFuZ2xlXCIpO1xyXG5cclxuICAgICAgICAvL1x1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1NTQwRFx1MzA2Qlx1MzBBMlx1MzBBNFx1MzBCM1x1MzBGM1x1MzA5Mlx1NEVEOFx1NTJBMFxyXG4gICAgICAgIC8vIHN3aXRjaCh0aGlzLnNldHRpbmdzLmljb24ubm90ZSl7XHJcbiAgICAgICAgLy8gICAgIGNhc2UgJ25vbmUnOlxyXG4gICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gICAgIGNhc2UgJ2N1c3RvbSc6XHJcbiAgICAgICAgLy8gICAgICAgICBzZXRJY29uKGRhaWx5Tm90ZVRpdGxlRWwsIHRoaXMuc2V0dGluZ3MuY3VzdG9tSWNvbi5ub3RlKTtcclxuICAgICAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIC8vICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaWNvbi5ub3RlKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICBzZXRJY29uKGRhaWx5Tm90ZVRpdGxlRWwsIHRoaXMuc2V0dGluZ3MuaWNvbi5ub3RlKTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIC8vICBcdTYyOThcdTMwOEFcdTMwNUZcdTMwNUZcdTMwN0ZcdTMwQTJcdTMwQTRcdTMwQjNcdTMwRjNcdTMwQUZcdTMwRUFcdTMwQzNcdTMwQUZcdTY2NDJcdTMwNkVcdTUxRTZcdTc0MDZcclxuICAgICAgICBub3RlQ29sbGFwc2VJY29uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgYXN5bmMgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwRDVcdTMwQTlcdTMwRkNcdTMwRUJcdTMwQzlcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwOEJcdTU4MzRcdTU0MDhcclxuICAgICAgICAgICAgICAgIGlmIChpbmZvW2ldLmlzRm9sZGVkKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTUwMEJcdTUyMjVcdTMwRDVcdTMwQTlcdTMwRkNcdTMwRUJcdTMwQzlcdTMwRDVcdTMwRTlcdTMwQjBcdTMwOTJcdTk2NjRcdTUzQkJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29sbGFwc2VBbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrRmxhZyhmaWxlc1tpXSwgJ2ZvbGQnLCB0aGlzLnNldHRpbmdzKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVGbGFnKGZpbGVzW2ldLCAnZm9sZCcsIHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1MzBBQVx1MzBGQ1x1MzBEN1x1MzBGM1x1NTFFNlx1NzQwNlxyXG4gICAgICAgICAgICAgICAgICAgIGRhaWx5Tm90ZUVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWNvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGVDb2xsYXBzZUljb24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5mb1tpXS5pc0ZvbGRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhaWx5Tm90ZUNoaWxkcmVuRWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTk1OEJcdTMwNDRcdTMwNjZcdTMwNDRcdTMwOEJcdTU4MzRcdTU0MDhcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTAwQlx1NTIyNVx1MzBENVx1MzBBOVx1MzBGQ1x1MzBFQlx1MzBDOVx1MzBENVx1MzBFOVx1MzBCMFx1MzA5Mlx1OEZGRFx1NTJBMFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb2xsYXBzZUFsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGbGFnKGZpbGVzW2ldLCdmb2xkJyx0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHUzMEQ1XHUzMEE5XHUzMEZDXHUzMEVCXHUzMEM5XHU1MUU2XHU3NDA2XHJcbiAgICAgICAgICAgICAgICAgICAgZGFpbHlOb3RlRWwuY2xhc3NMaXN0LmFkZCgnaXMtY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90ZUNvbGxhcHNlSWNvbi5jbGFzc0xpc3QuYWRkKCdpcy1jb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpbmZvW2ldLmlzRm9sZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBkYWlseU5vdGVDaGlsZHJlbkVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgIC8vd2Vla2x5IG5vdGVcdTMwNkVcdTU4MzRcdTU0MDhcdTMwMDFcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTU0MERcdTMwNkJcdTY1RTVcdTRFRDhcdTMwNkVcdTdCQzRcdTU2RjJcdTMwOTJcdTRFRDhcdTUyQTBcdTg4NjhcdTc5M0FcclxuICAgICAgICBsZXQgbmFtZSA9IGZpbGVzW2ldLmJhc2VuYW1lO1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmF0dGFjaFdlZWtseU5vdGVzTmFtZSAmJiBHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldID09J3dlZWsnKXtcclxuICAgICAgICAgICAgbmFtZSA9IG5hbWUgKyBcIiAoXCIgK3RoaXMuZmlsZUluZm9baV0uZGF0ZS5jbG9uZSgpLnN0YXJ0T2YoJ3dlZWsnKS5mb3JtYXQoXCJNTS9ERCBbLV0gXCIpICsgdGhpcy5maWxlSW5mb1tpXS5kYXRlLmNsb25lKCkuZW5kT2YoJ3dlZWsnKS5mb3JtYXQoXCJNTS9ERFwiKSArXCIpXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtLWlubmVyIG5hdi1mb2xkZXItdGl0bGUtY29udGVudFwiKS5zZXRUZXh0KG5hbWUpO1xyXG5cclxuICAgICAgICAvL1x1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1NTQwRFx1MzA2RVx1NUY4Q1x1MzA2RVx1NjBDNVx1NTgzMVx1MzA5Mlx1ODg2OFx1NzkzQVxyXG4gICAgICAgIGNvbnN0IGluZm9Ub0Rpc3BsYXkgPSAodGhpcy5hY3RpdmVHcmFudWxhcml0eSA9PSAwICkgPyB0aGlzLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb0RhaWx5IDogdGhpcy5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9QZXJpb2RpYztcclxuXHJcbiAgICAgICAgc3dpdGNoIChpbmZvVG9EaXNwbGF5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xpbmVzJzpcclxuICAgICAgICAgICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuZGF0YXNldC5zdWJpbmZvID0gaW5mb1tpXS5udW1PZkxpbmVzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZGF5cyc6XHJcbiAgICAgICAgICAgICAgICBsZXQgYmFzZWRhdGUgPSAodGhpcy5zZXR0aW5ncy5zZXRCYXNlRGF0ZUFzSG9tZSA9PSBmYWxzZSk/IHdpbmRvdy5tb21lbnQoKTogd2luZG93Lm1vbWVudCh0aGlzLnNldHRpbmdzLm9uc2V0KTtcclxuICAgICAgICAgICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuZGF0YXNldC5zdWJpbmZvID0gTWF0aC5hYnMoaW5mb1tpXS5kYXRlLmRpZmYoYmFzZWRhdGUuc3RhcnRPZihHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKSxHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKSkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkb3cnOlxyXG4gICAgICAgICAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5kYXRhc2V0LnN1YmluZm8gPSBpbmZvW2ldLmRhdGUuZm9ybWF0KFwiZGRkZFwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkb3dzaG9ydCc6XHJcbiAgICAgICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmRhdGFzZXQuc3ViaW5mbyA9IGluZm9baV0uZGF0ZS5mb3JtYXQoXCJkZGRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnd2Vla251bWJlcic6XHJcbiAgICAgICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmRhdGFzZXQuc3ViaW5mbyA9IGluZm9baV0uZGF0ZS5mb3JtYXQoXCJbd113d1wiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0YWcnOlxyXG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0dGFnSW5kZXggPSBkYXRhW2ldLmZpbmRJbmRleCggKGVsZW1lbnQsaW5kZXgpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtpXVtpbmRleF0udHlwZU9mRWxlbWVudCA9PSd0YWcnKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdHRhZ0luZGV4ID49IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuZGF0YXNldC5zdWJpbmZvID0gZGF0YVtpXVtmaXJzdHRhZ0luZGV4XS5kaXNwbGF5VGV4dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdub25lJzpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzBCRlx1MzBBNFx1MzBDOFx1MzBFQlx1MzA5Mlx1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1MzA1N1x1MzA1Rlx1MzA4OVx1MzA1RFx1MzA2RVx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA5Mm9wZW5cclxuICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgYXN5bmMoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vaG92ZXIgcHJldmlld1xyXG4gICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdob3Zlci1saW5rJywge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgICAgICBzb3VyY2U6IERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZSxcclxuICAgICAgICAgICAgICAgIGhvdmVyUGFyZW50OiByb290RWwsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRFbDogZGFpbHlOb3RlVGl0bGVFbCxcclxuICAgICAgICAgICAgICAgIGxpbmt0ZXh0OiBmaWxlc1tpXS5wYXRoLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBcdTMwQjNcdTMwRjNcdTMwQzZcdTMwQURcdTMwQjlcdTMwQzhcdTMwRTFcdTMwQ0JcdTMwRTVcdTMwRkNcclxuICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1x1NjVCMFx1ODk4Rlx1MzBCRlx1MzBENlx1MzA2Qlx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJPcGVuIGluIG5ldyB0YWJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJmaWxlLXBsdXNcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAvL1x1NTNGM1x1MzA2Qlx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJPcGVuIHRvIHRoZSByaWdodFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNlcGFyYXRvci12ZXJ0aWNhbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignc3BsaXQnKS5vcGVuRmlsZShmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgLy9cdTY1QjBcdTg5OEZcdTMwQTZcdTMwQTNcdTMwRjNcdTMwQzlcdTMwQTZcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBpbiBuZXcgd2luZG93XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2NhblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3dpbmRvdycpLm9wZW5GaWxlKGxpbmtUYXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5Qb3BvdXRMZWFmKHtzaXplOnt3aWR0aDp0aGlzLnNldHRpbmdzLnBvcG91dFNpemUud2lkdGgsaGVpZ2h0OnRoaXMuc2V0dGluZ3MucG9wb3V0U2l6ZS5oZWlnaHR9fSkub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucG9wb3V0QWx3YXlzT25Ub3Ape1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBvcG91dEFsd2F5c09uVG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIGNvbnN0cnVjdE91dGxpbmVET00uY2FsbCh0aGlzLCBmaWxlc1tpXSwgaW5mb1tpXSwgZGF0YVtpXSwgZGFpbHlOb3RlQ2hpbGRyZW5FbCk7XHJcblxyXG4gICAgICAgIC8vIGluY2x1ZGUgbW9kZSBcdTc1MjhcdTMwNkVcdTU5MDlcdTY1NzBcdTMwOTJcdTVCQTNcdThBMDBcclxuICAgICAgICBsZXQgaXNJbmNsdWRlZCA9IHRoaXMuc2V0dGluZ3MuaW5jbHVkZUJlZ2lubmluZztcclxuICAgICAgICBsZXQgaW5jbHVkZU1vZGVIZWFkaW5nTGV2ZWw6IG51bWJlcjtcclxuICAgICAgICAvLyBleGNsdWRlIG1vZGUgXHU3NTI4XHU1OTA5XHU2NTcwXHJcbiAgICAgICAgbGV0IGlzRXhjbHVkZWQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgZXhjbHVkZVR5cGU6IHN0cmluZztcclxuICAgICAgICBsZXQgZXhjbHVkZU1vZGVIZWFkaW5nTGV2ZWw6IG51bWJlcjtcclxuICAgICAgICBsZXQgcHJpbWVUeXBlID0gdGhpcy5zZXR0aW5ncy5pbmNsdWRlT25seSA9PSAnbm9uZScgPyB0aGlzLnNldHRpbmdzLnByaW1lRWxlbWVudCA6IHRoaXMuc2V0dGluZ3MuaW5jbHVkZU9ubHk7XHJcbiAgICAgICAgLy8gZXh0cmFjdCBcdTMwREVcdTMwQzNcdTMwQzFcdTMwNTlcdTMwOEJcdTk4MDVcdTc2RUVcdTMwNENcdTMwNDJcdTMwNjNcdTMwNUZcdTMwNEJcdTMwNjlcdTMwNDZcdTMwNEJcclxuICAgICAgICBsZXQgaXNFeHRyYWN0ZWQgPSBmYWxzZTtcclxuXHJcblxyXG4gICAgICAgIC8vIHByb3BlcnRpZXNcdTMwNkVcdTUxRTZcdTc0MDZcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93UHJvcGVydHlMaW5rcyAmJiBpbmZvW2ldLmZyb250bWF0dGVyTGlua3Mpe1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZm9baV0uZnJvbnRtYXR0ZXJMaW5rcy5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtUYXJnZXQgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHBhcnNlTGlua3RleHQoaW5mb1tpXS5mcm9udG1hdHRlckxpbmtzW2pdLmxpbmspLnBhdGgsIGZpbGVzW2ldLnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEobGlua1RhcmdldCBpbnN0YW5jZW9mIFRGaWxlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGlua1N1YnBhdGggPSBwYXJzZUxpbmt0ZXh0KGluZm9baV0uZnJvbnRtYXR0ZXJMaW5rc1tqXS5saW5rKS5zdWJwYXRoO1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2MkJEXHU1MUZBIGV4dHJhY3RcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4dHJhY3RNb2RlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRyYWN0VHlwZSA9PSAnbm9yYW1sJyAmJiBpbmZvW2ldLmZyb250bWF0dGVyTGlua3Nbal0uZGlzcGxheVRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0LnRvTG93ZXJDYXNlKCkpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFeHRyYWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRsaW5lRWw6IEhUTUxFbGVtZW50ID0gZGFpbHlOb3RlQ2hpbGRyZW5FbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0gbmF2LWZpbGVcIik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRsaW5lVGl0bGU6IEhUTUxFbGVtZW50ID0gb3V0bGluZUVsLmNyZWF0ZURpdihcInRyZWUtaXRlbS1zZWxmIGlzLWNsaWNrYWJsZSBuYXYtZmlsZS10aXRsZVwiKTtcclxuICAgICAgICAgICAgICAgIHNldEljb24ob3V0bGluZVRpdGxlLCdsaW5rJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuc3R5bGUucGFkZGluZ0xlZnQgPScwLjVlbSc7XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuY3JlYXRlRGl2KFwidHJlZS1pdGVtLWlubmVyIG5hdi1maWxlLXRpdGxlLWNvbnRlbnRcIikuc2V0VGV4dChpbmZvW2ldLmZyb250bWF0dGVyTGlua3Nbal0uZGlzcGxheVRleHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vXHUzMEFGXHUzMEVBXHUzMEMzXHUzMEFGXHU2NjQyXHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9ob3ZlciBwcmV2aWV3XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtUYXJnZXQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1MzBFQVx1MzBGM1x1MzBBRlx1NjBDNVx1NTgzMVx1MzA2QnN1YnBhdGhcdUZGMDhcdTg5OEJcdTUxRkFcdTMwNTdcdTMwNzhcdTMwNkVcdTMwRUFcdTMwRjNcdTMwQUZcdUZGMDlcdTMwNENcdTU0MkJcdTMwN0VcdTMwOENcdTMwOEJcdTU4MzRcdTU0MDhcdTMwMDFcdTMwNURcdTMwNkVcdTRGNERcdTdGNkVcdTMwOTJcdTUzRDZcdTVGOTdcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc0luZm8gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYobGlua1N1YnBhdGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VicGF0aFBvc2l0aW9uID0gZ2V0U3VicGF0aFBvc2l0aW9uKHRoaXMuYXBwLCBsaW5rVGFyZ2V0LCBsaW5rU3VicGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VicGF0aFBvc2l0aW9uPy5zdGFydD8ubGluZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zSW5mbyA9IHsgc2Nyb2xsOiBzdWJwYXRoUG9zaXRpb24uc3RhcnQubGluZX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2hvdmVyLWxpbmsnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogRGFpbHlOb3RlT3V0bGluZVZpZXdUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXJQYXJlbnQ6IHJvb3RFbCwgICAvLyByb290RWxcdTIxOTJwYXJlbnRFbFx1MzA2Qlx1MzA1N1x1MzA1RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWw6IG91dGxpbmVUaXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmt0ZXh0OiBsaW5rVGFyZ2V0LnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogcG9zSW5mb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb250ZXh0bWVudVxyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjb250ZXh0bWVudVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU2MkJEXHU1MUZBIGZpbHRlclx1OTVBMlx1OTAyM1x1MzBCM1x1MzBFMVx1MzBGM1x1MzBDOFx1MzBBMlx1MzBBNlx1MzBDOFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiRXh0cmFjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2VhcmNoXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4dHJhY3QgPSBpbmZvW2ldLmZyb250bWF0dGVyTGlua3Nbal0uZGlzcGxheVRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RNb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0VHlwZSA9ICdub3JtYWwnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImxpbmtzLWdvaW5nLW91dFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShsaW5rVGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rU3VicGF0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJwYXRoUG9zaXRpb24gPSBnZXRTdWJwYXRoUG9zaXRpb24odGhpcy5hcHAsIGxpbmtUYXJnZXQsIGxpbmtTdWJwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvRWxlbWVudChzdWJwYXRoUG9zaXRpb24uc3RhcnQ/LmxpbmUsMCx0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTMwRUFcdTMwRjNcdTMwQUZcdTUxNDhcdTMwOTJcdTY1QjBcdTg5OEZcdTMwQkZcdTMwRDZcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBsaW5rZWQgZmlsZSBpbiBuZXcgdGFiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJmaWxlLXBsdXNcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJykub3BlbkZpbGUobGlua1RhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rU3VicGF0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW5rU3VicGF0aFx1MzA0Q1x1MzA0Mlx1MzA4Qlx1MzA2OFx1MzA0RFx1MzA2Rlx1MzA1RFx1MzA1M1x1MzA3RVx1MzA2N1x1MzBCOVx1MzBBRlx1MzBFRFx1MzBGQ1x1MzBFQlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VicGF0aFBvc2l0aW9uID0gZ2V0U3VicGF0aFBvc2l0aW9uKHRoaXMuYXBwLCBsaW5rVGFyZ2V0LCBsaW5rU3VicGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb0VsZW1lbnQoc3VicGF0aFBvc2l0aW9uLnN0YXJ0Py5saW5lLCAwLCB0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1MzBFQVx1MzBGM1x1MzBBRlx1NTE0OFx1MzA5Mlx1NTNGM1x1MzA2Qlx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJPcGVuIGxpbmtlZCBmaWxlIHRvIHRoZSByaWdodFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2VwYXJhdG9yLXZlcnRpY2FsXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jykub3BlbkZpbGUobGlua1RhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rU3VicGF0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJwYXRoUG9zaXRpb24gPSBnZXRTdWJwYXRoUG9zaXRpb24odGhpcy5hcHAsIGxpbmtUYXJnZXQsIGxpbmtTdWJwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvRWxlbWVudChzdWJwYXRoUG9zaXRpb24uc3RhcnQ/LmxpbmUsIDAsIHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHUzMEVBXHUzMEYzXHUzMEFGXHU1MTQ4XHUzMDkyXHU2NUIwXHU4OThGXHUzMEE2XHUzMEEzXHUzMEYzXHUzMEM5XHUzMEE2XHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGUgaW4gbmV3IHdpbmRvd1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2NhblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd3aW5kb3cnKS5vcGVuRmlsZShsaW5rVGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5Qb3BvdXRMZWFmKHtzaXplOnt3aWR0aDp0aGlzLnNldHRpbmdzLnBvcG91dFNpemUud2lkdGgsaGVpZ2h0OnRoaXMuc2V0dGluZ3MucG9wb3V0U2l6ZS5oZWlnaHR9fSkub3BlbkZpbGUobGlua1RhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rU3VicGF0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJwYXRoUG9zaXRpb24gPSBnZXRTdWJwYXRoUG9zaXRpb24odGhpcy5hcHAsIGxpbmtUYXJnZXQsIGxpbmtTdWJwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvRWxlbWVudChzdWJwYXRoUG9zaXRpb24uc3RhcnQ/LmxpbmUsIDAsIHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5wb3BvdXRBbHdheXNPblRvcCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQb3BvdXRBbHdheXNPblRvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU2NUIwXHU4OThGXHUzMEJGXHUzMEQ2XHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gaW4gbmV3IHRhYlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZmlsZS1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1NTNGM1x1MzA2Qlx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJPcGVuIHRvIHRoZSByaWdodFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2VwYXJhdG9yLXZlcnRpY2FsXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jykub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU2NUIwXHU4OThGXHUzMEE2XHUzMEEzXHUzMEYzXHUzMEM5XHUzMEE2XHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gaW4gbmV3IHdpbmRvd1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2NhblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd3aW5kb3cnKS5vcGVuRmlsZShmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy9cdTMwQTJcdTMwQTZcdTMwQzhcdTMwRTlcdTMwQTRcdTMwRjNcdTg5ODFcdTdEMjBcdTMwNkVcdTYzQ0ZcdTc1M0JcdTMwMDJkYXRhW2ldXHUzMDRDXHU4OTgxXHU3RDIwMFx1MzA2QVx1MzA4OVx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG4gICAgICAgIC8vXHU0RThDXHU5MUNEXHUzMEVCXHUzMEZDXHUzMEQ3XHUzMDRCXHUzMDg5XHU2MjlDXHUzMDUxXHUzMDhCXHUzMDVGXHUzMDgxXHUzMEU5XHUzMEQ5XHUzMEVCZWxlbWVudGxvb3BcdTMwOTJcdTMwNjRcdTMwNTFcdTMwNUZcclxuICAgICAgICBpZiAoZGF0YVtpXS5sZW5ndGggPiAwKXtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnRsb29wOiBmb3IgKGxldCBqPTA7IGo8ZGF0YVtpXS5sZW5ndGg7IGorKyl7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXHU3M0ZFXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU4OTgxXHU3RDIwXHUzMDZFXHU3QTJFXHU1MjI1XHUzMDkyXHU1M0Q2XHU1Rjk3XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZGF0YVtpXVtqXS50eXBlT2ZFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgbGV0IGRpc3BsYXlUZXh0ID0gZGF0YVtpXVtqXS5kaXNwbGF5VGV4dDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtUYXJnZXQgPSAoZWxlbWVudCAhPT0gJ2xpbmsnKT8gbnVsbCA6IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QocGFyc2VMaW5rdGV4dChkYXRhW2ldW2pdPy5saW5rKS5wYXRoLCBmaWxlc1tpXS5wYXRoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtTdWJwYXRoID0gKCFsaW5rVGFyZ2V0KT8gdW5kZWZpbmVkIDogcGFyc2VMaW5rdGV4dChkYXRhW2ldW2pdPy5saW5rKS5zdWJwYXRoO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vLy8gaW5jbHVkZSBtb2RlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZU1vZGUgJiYgdGhpcy5zZXR0aW5ncy5pbmNsdWRlT25seSA9PSBlbGVtZW50KXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbmNsdWRlZCA9PSB0cnVlICYmIGVsZW1lbnQgPT0gJ2hlYWRpbmcnICYmIGRhdGFbaV1bal0ubGV2ZWwgPiBpbmNsdWRlTW9kZUhlYWRpbmdMZXZlbCAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTRFMEJcdTRGNERcdTg5OEJcdTUxRkFcdTMwNTdcdTMwNkVcdTU4MzRcdTU0MDhcdTMwNkZcdTUxRTZcdTc0MDZcdTMwOTJcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTdENDRcdTMwN0ZcdTUxNjVcdTMwOENcdTMwOEJcdTMwRUZcdTMwRkNcdTMwQzlcdTMwNkJcdTMwREVcdTMwQzNcdTMwQzFcdTMwNTlcdTMwOEJcdTMwNEJcdTUyMjRcdTVCOUFcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNJbmNsdWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuc2V0dGluZ3Mud29yZHNUb0luY2x1ZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAodmFsdWUpICYmIGRpc3BsYXlUZXh0LmluY2x1ZGVzKHZhbHVlKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbmNsdWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gJ2hlYWRpbmcnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZU1vZGVIZWFkaW5nTGV2ZWwgPSBkYXRhW2ldW2pdLmxldmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghaXNJbmNsdWRlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vLy8gZXhjbHVkZSBtb2RlXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzRXhjbHVkZWQgfHwgKGlzRXhjbHVkZWQgJiYgKGV4Y2x1ZGVUeXBlID09IGVsZW1lbnQgfHwgcHJpbWVUeXBlID09IGVsZW1lbnQpKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gJ2hlYWRpbmcnICYmIGRhdGFbaV1bal0ubGV2ZWwgPiBleGNsdWRlTW9kZUhlYWRpbmdMZXZlbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RTBCXHU0RjREXHU4OThCXHU1MUZBXHUzMDU3XHUzMDZFXHU1ODM0XHU1NDA4XHUzMDZGXHU1MUU2XHU3NDA2XHUzMDkyXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHRcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0V4Y2x1ZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZVtlbGVtZW50XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICh2YWx1ZSkgJiYgZGlzcGxheVRleHQuaW5jbHVkZXModmFsdWUpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0V4Y2x1ZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNsdWRlVHlwZSA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gJ2hlYWRpbmcnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjbHVkZU1vZGVIZWFkaW5nTGV2ZWwgPSBkYXRhW2ldW2pdLmxldmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICBcclxuICAgICAgICAgICAgICAgIGlmIChpc0V4Y2x1ZGVkKXtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL1x1ODk4MVx1N0QyMFx1MzA1NFx1MzA2OFx1MzA2RVx1OTc1RVx1ODg2OFx1NzkzQVx1NTIyNFx1NUI5QSAgXHU4QTJEXHU1QjlBXHUzMDY3XHU5NzVFXHU4ODY4XHU3OTNBXHUzMDZCXHUzMDZBXHUzMDYzXHUzMDY2XHUzMDQ0XHUzMDhDXHUzMDcwXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGFbaV1bal0udGFzayAmJiB0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50c1tlbGVtZW50XSA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFbaV1bal0udGFzayAmJiAhdGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHMudGFzayl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBzaW1wbGUgZmlsdGVyIFx1OTY2NFx1NTkxNlx1MzBFRlx1MzBGQ1x1MzBDOVx1MzA2Qlx1MzBERVx1MzBDM1x1MzBDMVx1MzA1OVx1MzA4Q1x1MzA3MFx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5zZXR0aW5ncy53b3Jkc1RvSWdub3JlW2VsZW1lbnRdKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiggKHZhbHVlKSAmJiBkaXNwbGF5VGV4dC5pbmNsdWRlcyh2YWx1ZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBlbGVtZW50bG9vcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8vLyBcdTYyQkRcdTUxRkEgZXh0cmFjdFxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4dHJhY3RNb2RlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRyYWN0VHlwZSA9PSAnbm9ybWFsJyAmJiBkaXNwbGF5VGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3Mud29yZHNUb0V4dHJhY3QudG9Mb3dlckNhc2UoKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0V4dHJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV4dHJhY3RUeXBlID09ICd0YXNrJyAmJiBkYXRhW2ldW2pdLnRhc2sgIT09IHZvaWQgMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRXh0cmFjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZXh0cmFjdFR5cGUgPT0gJ2xpc3RDYWxsb3V0JyAmJiB0eXBlb2YgZGF0YVtpXVtqXS5saXN0Q2FsbG91dCA9PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0V4dHJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV4dHJhY3RUeXBlID09ICd0aW1lJyAmJiBkYXRhW2ldW2pdLnRpbWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0V4dHJhY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vLy8gXHU4OTgxXHU3RDIwXHU3QTJFXHU1MjI1XHUzMDU0XHUzMDY4XHUzMDZFXHU1MUU2XHU3NDA2XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGhlYWRpbmdzXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSAnaGVhZGluZycpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjcwMFx1NjVCMFx1MzA2RVx1ODk4Qlx1NTFGQVx1MzA1N1x1MzBFQ1x1MzBEOVx1MzBFQlx1MzA5Mlx1NTNENlx1NUY5N1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdGVzdEhlYWRpbmdMZXZlbCA9IGRhdGFbaV1bal0ubGV2ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU3Mjc5XHU1QjlBXHUzMDZFXHU4OThCXHU1MUZBXHUzMDU3XHUzMEVDXHUzMEQ5XHUzMEVCXHUzMDRDXHU5NzVFXHU4ODY4XHU3OTNBXHUzMDZFXHU1ODM0XHU1NDA4XHUzMDAxXHU4QTcyXHU1RjUzXHUzMDU5XHUzMDhDXHUzMDcwXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhdGhpcy5zZXR0aW5ncy5oZWFkaW5nTGV2ZWxbZGF0YVtpXVtqXS5sZXZlbCAtIDFdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGxpbmtzXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSAnbGluaycpe1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRhZ3NcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09ICd0YWcnKXtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gbGlzdEl0ZW1zXHJcbiAgICAgICAgICAgICAgICBsZXQgY2FsbG91dHNJbmRleCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09ICdsaXN0SXRlbXMnKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkRGlzcGxheUxpc3RJdGVtKGRhdGFbaV1bal0sIHRoaXMuc2V0dGluZ3MsIGNhbGxvdXRzSW5kZXgpID09IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU4OTgxXHU3RDIwXHU5MEU4XHU1MjA2XHU0RjVDXHU2MjEwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRsaW5lRWw6IEhUTUxFbGVtZW50ID0gZGFpbHlOb3RlQ2hpbGRyZW5FbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY3JlYXRlRGl2KFwidHJlZS1pdGVtIG5hdi1maWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgLy9cdTRFMkRcdThFQUJcdTMwOTJcdThBMkRcdTVCOUFcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dGxpbmVUaXRsZTogSFRNTEVsZW1lbnQgPSBvdXRsaW5lRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtLXNlbGYgaXMtY2xpY2thYmxlIG5hdi1maWxlLXRpdGxlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy9cdTMwQTJcdTMwQTRcdTMwQjNcdTMwRjMgaWNvblxyXG4gICAgICAgICAgICAgICAgc3dpdGNoKHRoaXMuc2V0dGluZ3MuaWNvbltlbGVtZW50XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm9uZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlYWRpbmd3aXRobnVtYmVyJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsIGBoZWFkaW5nLSR7ZGF0YVtpXVtqXS5sZXZlbH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY3VzdG9tJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsIHRoaXMuc2V0dGluZ3MuY3VzdG9tSWNvbltlbGVtZW50XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24ob3V0bGluZVRpdGxlLCB0aGlzLnNldHRpbmdzLmljb25bZWxlbWVudF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFx1MzBCRlx1MzBCOVx1MzBBRlx1MzA2MFx1MzA2M1x1MzA1Rlx1NTgzNFx1NTQwOFx1MzBBMlx1MzBBNFx1MzBCM1x1MzBGM1x1NEUwQVx1NjZGOFx1MzA0RFxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0nbGlzdEl0ZW1zJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV1bal0udGFzayAhPT0gdm9pZCAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV1bal0udGFzayA9PSAneCcpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsIHRoaXMuc2V0dGluZ3MuaWNvbi50YXNrRG9uZSA9PSAnY3VzdG9tJyA/IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tSWNvbi50YXNrRG9uZSA6IHRoaXMuc2V0dGluZ3MuaWNvbi50YXNrRG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uKG91dGxpbmVUaXRsZSwgdGhpcy5zZXR0aW5ncy5pY29uLnRhc2sgPT0nY3VzdG9tJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXN0b21JY29uLnRhc2sgOiB0aGlzLnNldHRpbmdzLmljb24udGFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tU3RhdHVzID0gT2JqZWN0LmtleXModGhpcy5zZXR0aW5ncy50YXNrSWNvbikuZmluZCgoY3VzdG9tU3RhdHVzKT0+IHRoaXMuc2V0dGluZ3MudGFza0ljb25bY3VzdG9tU3RhdHVzXS5zeW1ib2wgPT09IGRhdGFbaV1bal0udGFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21TdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24ob3V0bGluZVRpdGxlLCB0aGlzLnNldHRpbmdzLnRhc2tJY29uW2N1c3RvbVN0YXR1c10uaWNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHUzMEVBXHUzMEI5XHUzMEM4XHUzMEIzXHUzMEZDXHUzMEVCXHUzMEEyXHUzMEE2XHUzMEM4LFx1MzBCRlx1MzBBNFx1MzBFMFx1MzBFQVx1MzBCOVx1MzBDOFx1MzA3OFx1MzA2RVx1NUJGRVx1NUZEQ1x1RkYwOFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjYWxsb3V0c0luZGV4ID0gZGF0YVtpXVtqXT8ubGlzdENhbGxvdXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsb3V0c0luZGV4ID09J251bWJlcicgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPWBSR0JBKCR7dGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zWydvYnNpZGlhbi1saXN0LWNhbGxvdXRzJ10uc2V0dGluZ3NbY2FsbG91dHNJbmRleF0uY29sb3J9LDAuMTUpYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1snb2JzaWRpYW4tbGlzdC1jYWxsb3V0cyddLnNldHRpbmdzW2NhbGxvdXRzSW5kZXhdLmhhc093blByb3BlcnR5KCdpY29uJykgJiYgZGF0YVtpXVtqXS50YXNrID09PSB2b2lkIDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsIHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1snb2JzaWRpYW4tbGlzdC1jYWxsb3V0cyddLnNldHRpbmdzW2NhbGxvdXRzSW5kZXhdLmljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dC5yZXBsYWNlKC9eXFxTK1xccy8sJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldW2pdPy50aW1lKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV1bal0udGFzayA9PT0gdm9pZCAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24ob3V0bGluZVRpdGxlLCB0aGlzLnNldHRpbmdzLmljb24udGltZSA9PSdjdXN0b20nID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmN1c3RvbUljb24udGltZSA6IHRoaXMuc2V0dGluZ3MuaWNvbi50aW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL3ByZWZpeFx1MzAwMVx1MzBBNFx1MzBGM1x1MzBDN1x1MzBGM1x1MzBDOFxyXG4gICAgICAgICAgICAgICAgbGV0IHByZWZpeCA9IHRoaXMuc2V0dGluZ3MucHJlZml4W2VsZW1lbnRdO1xyXG4gICAgICAgICAgICAgICAgLy8gXHU3Mjc5XHU1QjlBXHUzMDZFcHJlZml4XHUzMDZCXHU1QkZFXHU1RkRDXHJcbiAgICAgICAgICAgICAgICBpZiAoIGVsZW1lbnQgPT0gJ2hlYWRpbmcnKXtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2V0dGluZ3MucmVwZWF0SGVhZGluZ1ByZWZpeCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xldmVsJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IHByZWZpeC5yZXBlYXQoZGF0YVtpXVtqXS5sZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGV2ZWxtaW51czEnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gcHJlZml4LnJlcGVhdChkYXRhW2ldW2pdLmxldmVsIC0gMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gJ2xpc3RJdGVtcycgJiYgZGF0YVtpXVtqXS50aW1lKXtcclxuICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSB0aGlzLnNldHRpbmdzLnByZWZpeC50aW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpbmRlbnQ6IG51bWJlciA9IDAuNTtcclxuICAgICAgICAgICAgICAgIC8vIFx1ODk4Qlx1NTFGQVx1MzA1N1x1MzA2RVx1MzBBNFx1MzBGM1x1MzBDN1x1MzBGM1x1MzBDOFxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0naGVhZGluZycgJiYgdGhpcy5zZXR0aW5ncy5pbmRlbnQuaGVhZGluZyA9PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgKyAoZGF0YVtpXVtqXS5sZXZlbCAtIChtYXhMZXZlbCArIDEpKSoxLjU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTg5OEJcdTUxRkFcdTMwNTdcdTRFRTVcdTU5MTZcdTMwNkVcdTMwQTRcdTMwRjNcdTMwQzdcdTMwRjNcdTMwQzhcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9J2hlYWRpbmcnICYmIHRoaXMuc2V0dGluZ3MuaW5kZW50Rm9sbG93SGVhZGluZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbEluZGVudCA9IChsYXRlc3RIZWFkaW5nTGV2ZWwgLSAobWF4TGV2ZWwgKyAxKSArICh0aGlzLnNldHRpbmdzLmluZGVudEZvbGxvd0hlYWRpbmcgPT0gMiA/IDE6IDApKSoxLjU7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZW50ID0gaW5kZW50ICsgKGFkZGl0aW9uYWxJbmRlbnQgPiAwID8gYWRkaXRpb25hbEluZGVudCA6IDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gXHUzMEVBXHUzMEYzXHUzMEFGXHUzMDRDXHU1MjREXHUzMDZFXHUzMEE4XHUzMEVDXHUzMEUxXHUzMEYzXHUzMEM4XHUzMDY4XHU1NDBDXHUzMDU4XHU4ODRDXHUzMDYwXHUzMDYzXHUzMDVGXHU1ODM0XHU1NDA4XHUzMEE0XHUzMEYzXHUzMEM3XHUzMEYzXHUzMEM4XHU0RUQ4XHU1MkEwXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSdsaW5rJyAmJiBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgPT0gZGF0YVtpXVtqLTFdPy5wb3NpdGlvbi5zdGFydC5saW5lKXtcclxuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgKyAxLjU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLnN0eWxlLnBhZGRpbmdMZWZ0ID0gYCR7aW5kZW50fWVtYDtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0nbGlzdEl0ZW1zJyAmJiBkYXRhW2ldW2pdLnRhc2sgIT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBkYXRhW2ldW2pdLnRhc2sgPT0gJ3gnID8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnByZWZpeC50YXNrRG9uZSA6IHRoaXMuc2V0dGluZ3MucHJlZml4LnRhc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmFkZENoZWNrYm94VGV4dCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBwcmVmaXggKyAnWycrZGF0YVtpXVtqXS50YXNrKyddICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0ID0gdGhpcy5zdHJpcE1hcmtkb3duU3ltYm9sKGRpc3BsYXlUZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRsaW5lVGl0bGVDb250ZW50ID0gb3V0bGluZVRpdGxlLmNyZWF0ZURpdihcInRyZWUtaXRlbS1pbm5lciBuYXYtZmlsZS10aXRsZS1jb250ZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlQ29udGVudC5zZXRUZXh0KHByZWZpeCArIGRpc3BsYXlUZXh0KTtcclxuICAgICAgICAgICAgICAgIC8vIHdyYXBMaW5lIHRydWVcdTMwNkFcdTMwODlcdTYyOThcdTMwOEFcdThGRDRcdTMwNTdcdThBMkRcdTVCOUFcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLndyYXBMaW5lKXtcclxuICAgICAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGVDb250ZW50LmNsYXNzTGlzdC5hZGQoJ3dyYXAtbGluZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gXHUzMEE0XHUzMEYzXHUzMEU5XHUzMEE0XHUzMEYzXHUzMEQ3XHUzMEVDXHUzMEQzXHUzMEU1XHUzMEZDXHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwRUFcdTMwRjNcdTMwQUZcdTMwNjhcdTMwQkZcdTMwQjBcdTMwNkZcdTMwMDFcdTMwQTJcdTMwQTZcdTMwQzhcdTMwRTlcdTMwQTRcdTMwRjNcdTg5ODFcdTdEMjBcdTMwNkVcdTMwNDJcdTMwNjhcdTMwNkJcdTY1ODdcdTVCNTdcdTUyMTdcdTMwNENcdTdEOUFcdTMwNEZcdTU4MzRcdTU0MDhcdTMwNURcdTMwNkVcdTg4NENcdTMwOTJcdTMwRDdcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcdTMwMDFcdTMwNURcdTMwNDZcdTMwNjdcdTMwNkFcdTMwNTFcdTMwOENcdTMwNzBcdTZCMjFcdTMwNkVcdTg4NENcdTMwOTJcdTMwRDdcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmlubGluZVByZXZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJldmlld1RleHQ6IHN0cmluZyA9Jyc7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChlbGVtZW50ID09ICdsaW5rJyB8fCBlbGVtZW50ID09ICd0YWcnKSAmJiBkYXRhW2ldW2pdLnBvc2l0aW9uLmVuZC5jb2wgPCBpbmZvW2ldLmxpbmVzWyBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgXS5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3VGV4dCA9IGluZm9baV0ubGluZXNbIGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSBdLnNsaWNlKGRhdGFbaV1bal0ucG9zaXRpb24uZW5kLmNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld1RleHQgPSAoIGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSA8IGluZm9baV0ubnVtT2ZMaW5lcyAtMSApP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1tpXS5saW5lc1sgZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lICsgMV0gOiBcIlwiOyBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmNyZWF0ZURpdihcIm5hdi1maWxlLXRpdGxlLXByZXZpZXdcIikuc2V0VGV4dChwcmV2aWV3VGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwQzRcdTMwRkNcdTMwRUJcdTMwQzFcdTMwQzNcdTMwRDdcdTMwRDdcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcclxuICAgICAgICAgICAgICAgIC8vIFx1MzA1RFx1MzA2RVx1ODk4MVx1N0QyMFx1MzA2RVx1ODg0Q1x1MzA0Qlx1MzA4OVx1NkIyMVx1MzA2RVx1ODk4MVx1N0QyMFx1MzA2RVx1NTI0RFx1MzA3RVx1MzA2N1x1MzA5Mlx1MzBEN1x1MzBFQ1x1MzBEM1x1MzBFNVx1MzBGQ1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudG9vbHRpcFByZXZpZXcpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmV2aWV3VGV4dDI6c3RyaW5nID0nJztcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTMwN0VcdTMwNUFcdTZCMjFcdTMwNkVcdTg4NjhcdTc5M0FcdTg5ODFcdTdEMjBcdTMwNkVcdTVGMTVcdTY1NzBcdTMwOTJcdTcyNzlcdTVCOUFcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kTGluZTpudW1iZXIgPSBpbmZvW2ldLm51bU9mTGluZXMgLSAxOyAgLy9cdTUyMURcdTY3MUZcdTUwMjRcdTMwNkZcdTY1ODdcdTdBRTBcdTY3MkJcclxuICAgICAgICAgICAgICAgICAgICBsZXQgayA9IGogKzE7IC8vIFx1NzNGRVx1NTcyOFx1MzA2RVx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1NUYxNVx1NjU3MCsxXHUzMDRCXHUzMDg5XHUzMEVCXHUzMEZDXHUzMEQ3XHU5NThCXHU1OUNCXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcHJldmlld2xvb3A6IHdoaWxlIChrPCBkYXRhW2ldLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1ODg2OFx1NzkzQVx1MzA1OVx1MzA4Qlx1MzBBOFx1MzBFQ1x1MzBFMVx1MzBGM1x1MzBDOFx1MzBCRlx1MzBBNFx1MzBEN1x1MzA2N1x1MzA0Mlx1MzA4Q1x1MzA3MFx1ODg0Q1x1MzA5Mlx1NTNENlx1NUY5N1x1MzA1N1x1MzA2Nlx1MzBFQlx1MzBGQ1x1MzBEN1x1MzA5Mlx1NjI1M1x1MzA2MVx1NTIwN1x1MzA4QlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHNbZGF0YVtpXVtrXS50eXBlT2ZFbGVtZW50XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1x1MzA1Rlx1MzA2MFx1MzA1N1x1NTQwNFx1N0EyRVx1MzA2RVx1NUI5Rlx1OTY5Qlx1MzA2Qlx1MzA2Rlx1OTc1RVx1ODg2OFx1NzkzQVx1MzA2OFx1MzA2QVx1MzA4Qlx1Njc2MVx1NEVGNlx1MzA5Mlx1NkU4MFx1MzA1Rlx1MzA1N1x1MzA2Nlx1MzA0NFx1MzA1Rlx1MzA4OVx1NjI1M1x1MzA2MVx1NTIwN1x1MzA4OVx1MzA2QVx1MzA0NFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHUzMEVBXHUzMEI5XHUzMEM4XHUzMDZFXHU4QTJEXHU1QjlBXHUzMDZCXHUzMDg4XHUzMDhCXHU5NzVFXHU4ODY4XHU3OTNBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXVtrXS50eXBlT2ZFbGVtZW50ID09ICdsaXN0SXRlbXMnICYmIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIGRhdGFbaV1ba10ubGV2ZWwgPj0yIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodGhpcy5zZXR0aW5ncy5hbGxSb290SXRlbXMgPT0gZmFsc2UgJiYgZGF0YVtpXVtrXS5sZXZlbCA9PSAxKSAmJiAodGhpcy5zZXR0aW5ncy5hbGxUYXNrcyA9PSBmYWxzZSB8fCBkYXRhW2ldW2tdLnRhc2sgPT09IHZvaWQgMCkpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnNldHRpbmdzLnRhc2tPbmx5ICYmIGRhdGFbaV1ba10udGFzayA9PT0gdm9pZCAwKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zZXR0aW5ncy5oaWRlQ29tcGxldGVkVGFza3MgJiYgZGF0YVtpXVtrXS50YXNrID09ICd4JykpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTg5OEJcdTUxRkFcdTMwNTdcdTMwNkVcdTMwRUNcdTMwRDlcdTMwRUJcdTMwNkJcdTMwODhcdTMwOEJcdTk3NUVcdTg4NjhcdTc5M0FcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YVtpXVtrXS50eXBlT2ZFbGVtZW50ID09ICdoZWFkaW5nJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuaGVhZGluZ0xldmVsW2RhdGFbaV1ba10ubGV2ZWwgLSAxXSA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2ltcGxlIGZpbHRlclx1MzA2Qlx1MzA4OFx1MzA4Qlx1OTc1RVx1ODg2OFx1NzkzQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuc2V0dGluZ3Mud29yZHNUb0lnbm9yZVtkYXRhW2ldW2tdLnR5cGVPZkVsZW1lbnRdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICh2YWx1ZSkgJiYgZGF0YVtpXVtrXS5kaXNwbGF5VGV4dC5pbmNsdWRlcyh2YWx1ZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgZW5kcHJldmlld2xvb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZExpbmUgPSBkYXRhW2ldW2tdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBsID0gZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lOyBsIDw9IGVuZExpbmU7IGwrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdUZXh0MiA9IHByZXZpZXdUZXh0MiArIGluZm9baV0ubGluZXNbbF0gKydcXG4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTdBN0FcdTg4NENcdTMwOTJcdTk2NjRcdTUzQkJcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3VGV4dDIgPSBwcmV2aWV3VGV4dDIucmVwbGFjZSgvXFxuJHxcXG4oPz1cXG4pL2csJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRvb2x0aXAob3V0bGluZVRpdGxlLCBwcmV2aWV3VGV4dDIsIHtjbGFzc2VzOlsnRE5PLXByZXZpZXcnXX0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuZGF0YXNldC50b29sdGlwUG9zaXRpb24gPSB0aGlzLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3RGlyZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1kZWxheScsJzEwJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb0VsZW1lbnQoZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lLGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQuY29sLCB0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2hvdmVyIHByZXZpZXcgXHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2hvdmVyLWxpbmsnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXJQYXJlbnQ6IHJvb3RFbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWw6IG91dGxpbmVUaXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlua3RleHQ6IGZpbGVzW2ldLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOntzY3JvbGw6IGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZX1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNvbnRleHRtZW51XHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRleHRtZW51XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x1NjJCRFx1NTFGQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiRXh0cmFjdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2VhcmNoXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4dHJhY3QgPSBkYXRhW2ldW2pdLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0TW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdFR5cGUgPSAnbm9ybWFsJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gKFx1MzBFQVx1MzBGM1x1MzBBRlx1MzA2RVx1MzA3Rlx1RkYwOVx1MzBFQVx1MzBGM1x1MzBBRlx1NTE0OFx1MzA5Mlx1NzZGNFx1NjNBNVx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSdsaW5rJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJsaW5rcy1nb2luZy1vdXRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShsaW5rVGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rU3VicGF0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VicGF0aFBvc2l0aW9uID0gZ2V0U3VicGF0aFBvc2l0aW9uKHRoaXMuYXBwLCBsaW5rVGFyZ2V0LCBsaW5rU3VicGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9FbGVtZW50KHN1YnBhdGhQb3NpdGlvbi5zdGFydD8ubGluZSwwLHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTMwRUFcdTMwRjNcdTMwQUZcdTUxNDhcdTMwOTJcdTY1QjBcdTg5OEZcdTMwQkZcdTMwRDZcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBsaW5rZWQgZmlsZSBpbiBuZXcgdGFiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZmlsZS1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJykub3BlbkZpbGUobGlua1RhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlua1N1YnBhdGgpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YnBhdGhQb3NpdGlvbiA9IGdldFN1YnBhdGhQb3NpdGlvbih0aGlzLmFwcCwgbGlua1RhcmdldCwgbGlua1N1YnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvRWxlbWVudChzdWJwYXRoUG9zaXRpb24uc3RhcnQ/LmxpbmUsIDAsIHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdC8vXHUzMEVBXHUzMEYzXHUzMEFGXHU1MTQ4XHUzMDkyXHU1M0YzXHUzMDZCXHU5NThCXHUzMDRGXHJcblx0XHRcdFx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKT0+XHJcblx0XHRcdFx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGUgdG8gdGhlIHJpZ2h0XCIpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRJY29uKFwic2VwYXJhdG9yLXZlcnRpY2FsXCIpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGxpbmtUYXJnZXQgIT0gdGhpcy5hY3RpdmVGaWxlKXtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuaG9sZFVwZGF0ZU9uY2UgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignc3BsaXQnKS5vcGVuRmlsZShsaW5rVGFyZ2V0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAobGlua1N1YnBhdGgpe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc3VicGF0aFBvc2l0aW9uID0gZ2V0U3VicGF0aFBvc2l0aW9uKHRoaXMuYXBwLCBsaW5rVGFyZ2V0LCBsaW5rU3VicGF0aCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxUb0VsZW1lbnQoc3VicGF0aFBvc2l0aW9uLnN0YXJ0Py5saW5lLCAwLCB0aGlzLmFwcCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0Ly9cdTMwRUFcdTMwRjNcdTMwQUZcdTUxNDhcdTMwOTJcdTY1QjBcdTg5OEZcdTMwQTZcdTMwQTNcdTMwRjNcdTMwQzlcdTMwQTZcdTMwNkJcdTk1OEJcdTMwNEZcclxuXHRcdFx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuXHRcdFx0XHRcdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdFx0XHRcdFx0LnNldFRpdGxlKFwiT3BlbiBsaW5rZWQgZmlsZSBpbiBuZXcgd2luZG93XCIpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRJY29uKFwic2NhblwiKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQub25DbGljayhhc3luYygpPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChsaW5rVGFyZ2V0ICE9IHRoaXMuYWN0aXZlRmlsZSl7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmhvbGRVcGRhdGVPbmNlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3dpbmRvdycpLm9wZW5GaWxlKGxpbmtUYXJnZXQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuUG9wb3V0TGVhZih7c2l6ZTp7d2lkdGg6dGhpcy5zZXR0aW5ncy5wb3BvdXRTaXplLndpZHRoLGhlaWdodDp0aGlzLnNldHRpbmdzLnBvcG91dFNpemUuaGVpZ2h0fX0pLm9wZW5GaWxlKGxpbmtUYXJnZXQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChsaW5rU3VicGF0aCl7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzdWJwYXRoUG9zaXRpb24gPSBnZXRTdWJwYXRoUG9zaXRpb24odGhpcy5hcHAsIGxpbmtUYXJnZXQsIGxpbmtTdWJwYXRoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbFRvRWxlbWVudChzdWJwYXRoUG9zaXRpb24uc3RhcnQ/LmxpbmUsIDAsIHRoaXMuYXBwKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucG9wb3V0QWx3YXlzT25Ub3Ape1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0UG9wb3V0QWx3YXlzT25Ub3AoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRtZW51LmFkZFNlcGFyYXRvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU2NUIwXHU4OThGXHUzMEJGXHUzMEQ2XHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gaW4gbmV3IHRhYlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZmlsZS1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0VsZW1lbnQoZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lLCBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmNvbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU1M0YzXHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gdG8gdGhlIHJpZ2h0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJzZXBhcmF0b3ItdmVydGljYWxcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignc3BsaXQnKS5vcGVuRmlsZShmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9FbGVtZW50KGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSwgZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5jb2wpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU2NUIwXHU4OThGXHUzMEE2XHUzMEEzXHUzMEYzXHUzMEM5XHUzMEE2XHUzMDZCXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gaW4gbmV3IHdpbmRvd1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic2NhblwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd3aW5kb3cnKS5vcGVuRmlsZShmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9FbGVtZW50KGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSwgZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5jb2wpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9cdTg5ODFcdTdEMjAwXHUzMDYwXHUzMDYzXHUzMDVGXHUzMDY4XHUzMDREXHUzMDZFXHU1MUU2XHU3NDA2XHJcbiAgICAgICAgICAgIC8vXHU1NDA0XHU4ODRDXHUzMDkyXHUzMEMxXHUzMEE3XHUzMEMzXHUzMEFGXHUzMDU3XHUzMDAxXHU3QTdBXHU4ODRDXHUzMDY3XHUzMDZBXHUzMDQ0XHU1MjFEXHUzMDgxXHUzMDZFXHU4ODRDXHUzMDkyXHU4ODY4XHU3OTNBXHUzMDU5XHUzMDhCKFx1NjJCRFx1NTFGQVx1MzBFMlx1MzBGQ1x1MzBDOVx1MzA2N1x1MzA2Rlx1ODg0Q1x1MzA4Rlx1MzA2QVx1MzA0NClcclxuICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFjdE1vZGUgPT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbmZvW2ldLmxpbmVzLmxlbmd0aDsgaisrKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm9baV0ubGluZXNbal0gPT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dGxpbmVFbDogSFRNTEVsZW1lbnQgPSBkYWlseU5vdGVDaGlsZHJlbkVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZURpdihcInRyZWUtaXRlbSBuYXYtZmlsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0bGluZVRpdGxlOiBIVE1MRWxlbWVudCA9IG91dGxpbmVFbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0tc2VsZiBpcy1jbGlja2FibGUgbmF2LWZpbGUtdGl0bGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0taW5uZXIgbmF2LWZpbGUtdGl0bGUtY29udGVudFwiKS5zZXRUZXh0KGluZm9baV0ubGluZXNbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTMwQzRcdTMwRkNcdTMwRUJcdTMwQzFcdTMwQzNcdTMwRDdcdTMwRDdcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByZXZpZXdUZXh0Mjogc3RyaW5nID0gaW5mb1tpXS5saW5lcy5qb2luKCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VG9vbHRpcChvdXRsaW5lVGl0bGUsIHByZXZpZXdUZXh0Miwge2NsYXNzZXM6WydETk8tcHJldmlldyddfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5kYXRhc2V0LnRvb2x0aXBQb3NpdGlvbiA9IHRoaXMuc2V0dGluZ3MudG9vbHRpcFByZXZpZXdEaXJlY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1kZWxheScsJzEwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9iYWNrbGluayBmaWxlc1x1MzA2RVx1NTFFNlx1NzQwNlxyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5nZXRCYWNrbGlua3MgfHwgIXRoaXMuc2V0dGluZ3Muc2hvd0JhY2tsaW5rcyl7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZm9baV0uYmFja2xpbmtzPy5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTYyQkRcdTUxRkEgZXh0cmFjdFxyXG4gICAgICAgICAgICBpZiAodGhpcy5leHRyYWN0TW9kZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRyYWN0VHlwZSA9PSAnbm9ybWFsJyAmJiBpbmZvW2ldLmJhY2tsaW5rc1tqXS5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3Mud29yZHNUb0V4dHJhY3QudG9Mb3dlckNhc2UoKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRXh0cmFjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBjb25zdCBvdXRsaW5lRWw6IEhUTUxFbGVtZW50ID0gZGFpbHlOb3RlQ2hpbGRyZW5FbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0gbmF2LWZpbGVcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dGxpbmVUaXRsZTogSFRNTEVsZW1lbnQgPSBvdXRsaW5lRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtLXNlbGYgaXMtY2xpY2thYmxlIG5hdi1maWxlLXRpdGxlXCIpO1xyXG5cclxuICAgICAgICAgICAgLy9cdTMwQTJcdTMwQTRcdTMwQjNcdTMwRjMgaWNvblxyXG4gICAgICAgICAgICBzd2l0Y2godGhpcy5zZXR0aW5ncy5pY29uLmJhY2tsaW5rKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY3VzdG9tJzpcclxuICAgICAgICAgICAgICAgICAgICBzZXRJY29uKG91dGxpbmVUaXRsZSwgdGhpcy5zZXR0aW5ncy5jdXN0b21JY29uLmJhY2tsaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsIHRoaXMuc2V0dGluZ3MuaWNvbi5iYWNrbGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG91dGxpbmVUaXRsZS5zdHlsZS5wYWRkaW5nTGVmdCA9JzAuNWVtJztcclxuICAgICAgICAgICAgb3V0bGluZVRpdGxlLmNyZWF0ZURpdihcInRyZWUtaXRlbS1pbm5lciBuYXYtZmlsZS10aXRsZS1jb250ZW50XCIpLnNldFRleHQoaW5mb1tpXS5iYWNrbGlua3Nbal0uYmFzZW5hbWUpO1xyXG4gICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8vXHUzMEFGXHUzMEVBXHUzMEMzXHUzMEFGXHU2NjQyXHJcbiAgICAgICAgICAgIG91dGxpbmVUaXRsZS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGluZm9baV0uYmFja2xpbmtzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vaG92ZXIgcHJldmlldyBcclxuICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2hvdmVyLWxpbmsnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJQYXJlbnQ6IHJvb3RFbCwgICAvLyByb290RWxcdTIxOTJwYXJlbnRFbFx1MzA2Qlx1MzA1N1x1MzA1RlxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEVsOiBvdXRsaW5lVGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlua3RleHQ6IGluZm9baV0uYmFja2xpbmtzW2pdLnBhdGgsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cdFx0XHQvLyBjb250ZXh0bWVudVxyXG5cdFx0XHRvdXRsaW5lVGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcclxuXHRcdFx0XHRcImNvbnRleHRtZW51XCIsXHJcblx0XHRcdFx0KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdFx0XHRcdC8vXHUzMEVBXHUzMEYzXHUzMEFGXHU1MTQzXHUzMDkyXHU2NUIwXHU4OThGXHUzMEJGXHUzMEQ2XHUzMDZCXHU5NThCXHUzMDRGXHJcblx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuXHRcdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRUaXRsZShcIk9wZW4gYmFja2xpbmsgZmlsZSBpbiBuZXcgdGFiXCIpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oXCJmaWxlLXBsdXNcIilcclxuXHRcdFx0XHRcdFx0XHQub25DbGljayhhc3luYygpPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKGluZm9baV0uYmFja2xpbmtzW2pdKTtcclxuXHRcdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdC8vXHUzMEVBXHUzMEYzXHUzMEFGXHU1MTQ4XHUzMDkyXHU1M0YzXHUzMDZCXHU5NThCXHUzMDRGXHJcblx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuXHRcdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGUgdG8gdGhlIHJpZ2h0XCIpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oXCJzZXBhcmF0b3ItdmVydGljYWxcIilcclxuXHRcdFx0XHRcdFx0XHQub25DbGljayhhc3luYygpPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jykub3BlbkZpbGUoaW5mb1tpXS5iYWNrbGlua3Nbal0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0Ly9cdTMwRUFcdTMwRjNcdTMwQUZcdTUxNDhcdTMwOTJcdTY1QjBcdTg5OEZcdTMwQTZcdTMwQTNcdTMwRjNcdTMwQzlcdTMwQTZcdTMwNkJcdTk1OEJcdTMwNEZcclxuXHRcdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG5cdFx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHRcdFx0LnNldFRpdGxlKFwiT3BlbiBsaW5rZWQgZmlsZSBpbiBuZXcgd2luZG93XCIpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oXCJzY2FuXCIpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd3aW5kb3cnKS5vcGVuRmlsZShpbmZvLmJhY2tsaW5rc1tpXSk7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlblBvcG91dExlYWYoe3NpemU6e3dpZHRoOnRoaXMuc2V0dGluZ3MucG9wb3V0U2l6ZS53aWR0aCxoZWlnaHQ6dGhpcy5zZXR0aW5ncy5wb3BvdXRTaXplLmhlaWdodH19KS5vcGVuRmlsZShpbmZvW2ldLmJhY2tsaW5rc1tqXSk7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5wb3BvdXRBbHdheXNPblRvcCl7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldFBvcG91dEFsd2F5c09uVG9wKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG5cdFx0XHRcdH0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIG5vdGVET01cdTMwNkVcdTVGOENcdTUxRTZcdTc0MDZcclxuXHJcbiAgICAgICAgLy8gXHU2Mjk4XHUzMDhBXHUzMDVGXHUzMDVGXHUzMDdFXHUzMDhDXHUzMDY2XHUzMDQ0XHUzMDhDXHUzMDcwXHU1QjUwXHU4OTgxXHU3RDIwXHUzMDkyXHU5NzVFXHU4ODY4XHU3OTNBXHUzMDZCXHUzMDU5XHUzMDhCXHJcbiAgICAgICAgaWYgKHRoaXMuY29sbGFwc2VBbGx8fCB0aGlzLnNldHRpbmdzLmZpbGVGbGFnPy5bZmlsZXNbaV0ucGF0aF0/LmZvbGQpe1xyXG4gICAgICAgICAgICBkYWlseU5vdGVFbC5jbGFzc0xpc3QuYWRkKCdpcy1jb2xscGFzZWQnKTtcclxuICAgICAgICAgICAgbm90ZUNvbGxhcHNlSWNvbi5jbGFzc0xpc3QuYWRkKCdpcy1jb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgaW5mb1tpXS5pc0ZvbGRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGRhaWx5Tm90ZUNoaWxkcmVuRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbmZvW2ldLmlzRm9sZGVkID1mYWxzZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyBcdTYyQkRcdTUxRkFcdTMwRTJcdTMwRkNcdTMwQzlcdTMwNjdcdTYyQkRcdTUxRkFcdTMwNTdcdTMwNUZcdTg5ODFcdTdEMjBcdTMwNENcdTMwNkFcdTMwNDRcdTU4MzRcdTU0MDhcdTMwMDFcdTMwQ0VcdTMwRkNcdTMwQzhcdTgxRUFcdTRGNTNcdTMwOTJcdTk3NUVcdTg4NjhcdTc5M0FcdTMwNkJcdTMwMDJcclxuICAgICAgICBpZiAodGhpcy5leHRyYWN0TW9kZSA9PSB0cnVlICYmIGlzRXh0cmFjdGVkID09IGZhbHNlKXtcclxuICAgICAgICAgICAgZGFpbHlOb3RlRWwucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU5MEU4XHU1MjA2XHUzMDZFXHU2M0NGXHU3NTNCXHU1QjlGXHU4ODRDXHJcbiAgICB0aGlzLmNvbnRlbnRFbC5hcHBlbmRDaGlsZChjb250YWluZXJFbCk7XHJcbn1cclxuXHJcblxyXG4vLyBcdTMwQjlcdTMwQUZcdTMwRURcdTMwRkNcdTMwRUJcclxuZXhwb3J0IGZ1bmN0aW9uIHNjcm9sbFRvRWxlbWVudChsaW5lOiBudW1iZXIsIGNvbDogbnVtYmVyLCBhcHA6IEFwcCk6IHZvaWQge1xyXG4gICAgY29uc3QgdmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gICAgaWYgKHZpZXcpIHtcclxuICAgICAgICB2aWV3LnNldEVwaGVtZXJhbFN0YXRlKHtsaW5lfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFBvcG91dEFsd2F5c09uVG9wKCl7XHJcbiAgICBjb25zdCB7IHJlbW90ZSB9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKTtcclxuICAgIGNvbnN0IGFjdGl2ZVdpbmRvdyA9IHJlbW90ZS5Ccm93c2VyV2luZG93LmdldEZvY3VzZWRXaW5kb3coKTtcclxuICAgIGFjdGl2ZVdpbmRvdy5zZXRBbHdheXNPblRvcCh0cnVlKTtcclxufSIsICJpbXBvcnQgRGFpbHlOb3RlT3V0bGluZVBsdWdpbiwgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcInNyYy9tYWluXCI7XHJcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBhcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkIH0gZnJvbSBcIm9ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZVwiO1xyXG5cclxuaW1wb3J0IG1vbWVudCBmcm9tIFwibW9tZW50XCI7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIERhaWx5Tm90ZU91dGxpbmVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IERhaWx5Tm90ZU91dGxpbmVQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRGFpbHlOb3RlT3V0bGluZVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyIChhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBsZXQgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgLy8gXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDZFXHUzMEMxXHUzMEE3XHUzMEMzXHUzMEFGKHBlcmlvZGljIG5vdGVzIFx1MzA2MFx1MzA1MVx1MzA2N1x1MzA4Mm9uXHUzMDZCXHUzMDZBXHUzMDYzXHUzMDY2XHUzMDQ0XHUzMDhDXHUzMDcwXHU1NkRFXHU5MDdGKVxyXG4gICAgICAgIGlmICghYXBwLmludGVybmFsUGx1Z2lucy5wbHVnaW5zWydkYWlseS1ub3RlcyddPy5lbmFibGVkICYmICFhcHAucGx1Z2lucy5wbHVnaW5zWydwZXJpb2RpYy1ub3RlcyddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KFwic2V0dGluZ3MtYmFubmVyXCIsIChiYW5uZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGJhbm5lci5jcmVhdGVFbChcImgzXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIk5laXRoZXIgRGFpbHkgTm90ZSBwbHVnaW4gbm9yIFBlcmlvZGljIE5vdGVzIGNvbW11bml0eSBwbHVnaW4gaXMgZW5hYmxlZFwiLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2VhcmNoIGR1cmF0aW9uXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwibnVtYmVyIG9mIGRheXMgdG8gc2VhcmNoIHBlciBwYWdlIChkZWZhdWx0ID0gMjgpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ251bWJlcicpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5kYXkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24uZGF5KSlcclxuXHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyc2VkID0gcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkIDw9IDAgfHwgcGFyc2VkID49MzY2KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5kYXlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24uZGF5ID0gcGFyc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkluY2x1ZGUgZnV0dXJlIGRhaWx5IG5vdGVzXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcImluIGJhY2t3YXJkIHNlYXJjaCwgaW5jbHVkZSBuIGRheXMgb2YgZnV0dXJlIGRhaWx5IG5vdGVzIChkZWZhdWx0ID0gNSlcIilcclxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnbnVtYmVyJyk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFN0cmluZyhERUZBVUxUX1NFVFRJTkdTLm9mZnNldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vZmZzZXQpKVxyXG5cclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dGVkVmFsdWUgPSBOdW1iZXIoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRlZFZhbHVlIDwgMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ZWRWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dGVkVmFsdWUgPj0zNjYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRlZFZhbHVlID0gMzY2XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9mZnNldCA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJCYXNlIGRhdGVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJZb3UgY2FuIHNldCBvbmUgYmFzZSBkYXRlIHRvIHVzZSBmb3IganVtcGluZyBiYWNrKFlZWVktTU0tREQpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1Mub25zZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9uc2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbnNldCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTsgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTE2NVx1NTI5Qlx1NTgzNFx1OTc2Mlx1MzA2N1x1MzA2RVx1MzBEMFx1MzBFQVx1MzBDN1x1MzBGQ1x1MzBCN1x1MzBFN1x1MzBGM1x1MzAwMVx1NjVBRFx1NUZGNVx1MjAyNlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9tZW50KHZhbHVlICwgXCJZWVlZLU1NLUREXCIpLmlzVmFsaWQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbnNldCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiaW52YWxpZCBkYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiU2V0IEJhc2UgZGF0ZSBhcyBIb21lXCIpXHJcbiAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgLnNldERlc2MoXCJJZiBlbmFibGVkLCBkYWlseSBub3RlcyBjcmVhdGVkIG9uIGJhc2UgZGF0ZSBhcmUgZGlzcGxheWVkIGluIHRoZSB2aWV3IGF0IHN0YXJ0dXAgb3Igd2hlbiBIb21lIGljb24gaXMgY2xpY2tlZC5cIilcclxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2V0QmFzZURhdGVBc0hvbWUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2V0QmFzZURhdGVBc0hvbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgaGVhZGluZ3NcIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmhlYWRpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMuaGVhZGluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IGxpbmtzXCIpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saW5rKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmxpbmsgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IHRhZ3NcIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLnRhZylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy50YWcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBsaXN0IGl0ZW1zXCIpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saXN0SXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMubGlzdEl0ZW1zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saXN0SXRlbXMpe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBhbGwgcm9vdCBsaXN0IGl0ZW1zXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImlmIGRpc2FibGVkLCBvbmx5IHRvcCBpdGVtIG9mIHRoZSBsaXN0IGlzIGRpc3BsYXllZFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFsbFJvb3RJdGVtcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWxsUm9vdEl0ZW1zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgYWxsIGxpc3QgY2FsbG91dHNcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwic2hvd3MgYWxsIGxpc3QgaXRlbXMgbWFya2VkIHdpdGggTGlzdCBDYWxsb3V0cyBwbHVnaW5cIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93TGlzdENhbGxvdXRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93TGlzdENhbGxvdXRzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgYWxsIHRpbWUgbGlzdHNcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwic2hvd3MgYWxsIGxpc3QgaXRlbXMgc3RhcnQgd2l0aCB0aW1lKC0gSEg6bW0gKVwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUaW1lTGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1RpbWVMaXN0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJTaG93IHRhc2tzXCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy50YXNrKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy50YXNrID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLnRhc2spe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiSGlkZSBjb21wbGV0ZWQgdGFza3NcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlQ29tcGxldGVkVGFza3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVDb21wbGV0ZWRUYXNrcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIlNob3cgbGlua3MgaW4gcHJvcGVydGllc1wiKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UHJvcGVydHlMaW5rcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UHJvcGVydHlMaW5rcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJTaG93IGJhY2tsaW5rIGZpbGVzXCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dCYWNrbGlua3MpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0JhY2tsaW5rcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkNvbGxhcHNlIGFsbCBhdCBzdGFydHVwXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiZW5hYmxlIGNvbGxhcHNlIGFsbCBmdW5jdGlvbiBhdCBzdGFydHVwXCIpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbGxhcHNlQWxsQXRTdGFydHVwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VBbGxBdFN0YXJ0dXAgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTg4NjhcdTc5M0FcdTMwNTlcdTMwOEJcdTYwQzVcdTU4MzFcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIkRpc3BsYXkgZmlsZSBpbmZvcm1hdGlvbiBmb3IgZGFpbHkgbm90ZXNcIilcclxuICAgICAgICAuc2V0RGVzYyhcImNob29zZSB0eXBlIG9mIGZpbGUgaW5mb3JtYXRpb24gdG8gZGlzcGxheSB3aXRoIHRoZSBmaWxlIG5hbWUgZm9yIGRhaWx5IG5vdGVzXCIpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGluZXNcIixcImxpbmVzIG9mIHRoZSBub3RlXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiZGF5c1wiLFwiZGF5cyBmcm9tIGJhc2UgZGF0ZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImRvd1wiLFwiZGF5IG9mIHRoZSB3ZWVrXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiZG93c2hvcnRcIiwgXCJkYXkgb2YgdGhlIHdlZWsoc2hvcnQpXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwid2Vla251bWJlclwiLCBcIndlZWsgbnVtYmVyXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGFnXCIsXCJmaXJzdCB0YWdcIikgIFxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb0RhaWx5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb0RhaWx5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wZXJpb2RpY05vdGVzRW5hYmxlZCl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkRpc3BsYXkgZmlsZSBpbmZvcm1hdGlvbiBmb3IgcGVyaW9kaWMgbm90ZXNcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJjaG9vc2UgdHlwZSBvZiBmaWxlIGluZm9ybWF0aW9uIHRvIGRpc3BsYXkgZm9yIHBlcmlvZGljIG5vdGVzIG90aGVyIHRoYW4gZGFpbHkgbm90ZXNcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGluZXNcIixcImxpbmVzIG9mIHRoZSBub3RlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImRheXNcIixcImRpc3RhbmNlIGZyb20gYmFzZSBkYXRlXCIpICAgLy8gcGVyaW9kaWMgbm90ZXMgXHUzMDZCXHU1QkZFXHU1RkRDXHUzMDU5XHUzMDhCXHUzMDZBXHUzMDg5ZGF5cyBcdTMwNkJcdTk2NTBcdTMwODlcdTMwNkFcdTMwNEZcdTMwNkFcdTMwOEJcdTMwNkVcdTMwNjdkaXN0YW5jZVx1MzA2OFx1MzA1N1x1MzA1RlxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJ0YWdcIixcImZpcnN0IHRhZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9QZXJpb2RpYylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb1BlcmlvZGljID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIC8vIHZpZXdcdTMwOTJcdTg4NjhcdTc5M0FcdTMwNTlcdTMwOEJcdTRGNERcdTdGNkUgXHVGRjA4XHU1M0YzXHUzMEI1XHUzMEE0XHUzMEM5XHUzMEQwXHUzMEZDXHUzMDAxXHU1REU2XHUzMEI1XHUzMEE0XHUzMEM5XHUzMEQwXHUzMEZDXHUzMDAxXHUzMEUxXHUzMEE0XHUzMEYzXHUzMERBXHUzMEE0XHUzMEYzXHVGRjA5XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJQb3NpdGlvbiBvZiB0aGUgcGx1Z2luIHZpZXdcIilcclxuICAgICAgICAuc2V0RGVzYyhcIlNwZWNpZnkgZGVmYXVsdCBwb3NpdGlvbiB3aGVyZSB0aGlzIHBsdWdpbidzIHZpZXcgYXBwZWFyc1wiKVxyXG4gICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJyaWdodFwiLCBcInJpZ2h0IHNpZGUgcGFuZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxlZnRcIixcImxlZnQgc2lkZSBwYW5lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGFiXCIsXCJuZXcgdGFiIGluIG1haW4gcGFuZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInNwbGl0XCIsXCJzcGxpdHRlZCBwYW5lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwicG9wb3V0XCIsXCJwb3BvdXQgd2luZG93XCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mudmlld1Bvc2l0aW9uKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnZpZXdQb3NpdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy8gUGVyaW9kaWMgTm90ZXNcdTVCRkVcdTVGRENcdTMwNkVcdTMwQUFcdTMwRjNcdTMwQUFcdTMwRDVcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIlBlcmlvZGljIE5vdGVzXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghYXBwLnBsdWdpbnMucGx1Z2luc1sncGVyaW9kaWMtbm90ZXMnXSl7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiUGVyaW9kaWMgTm90ZXMgY29tbXVuaXR5IHBsdWdpbiBpcyBub3QgZW5hYmxlZFwiLFxyXG4gICAgICAgICAgICAgICAgY2xzOlwic2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlckNoZWNrID0gIE51bWJlcihhcHAucGx1Z2lucy5wbHVnaW5zWydwZXJpb2RpYy1ub3RlcyddPy5tYW5pZmVzdC52ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSk7XHJcbiAgICAgICAgICAgIGlmICh2ZXJDaGVjayA+PSAxKSB7ICAgXHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZShcImNhbGVuZGFyIHNldHNcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVuYWJsZSBjYWxlbmRhciBzZXRzIGZlYXR1cmUuIFlvdSBoYXZlIHRvIGFjdGl2YXRlIGFuZCBjb25maWd1cmUgdGhlIGJldGEgdmVyc2lvbiBvZiB0aGUgUGVyaW9kaWMgTm90ZXMgUGx1Z2luIGZpcnN0LlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWxlbmRhclNldHNFbmFibGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyU2V0c0VuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KHRydWUsdHJ1ZSx0cnVlKTsgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwicGVyaW9kaWMgbm90ZXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZW5hYmxlIHdlZWtseS9tb250aGx5L3F1YXJ0ZXJseS95ZWFybHkgbm90ZXMuIFlvdSBoYXZlIHRvIGFjdGl2YXRlIGFuZCBjb25maWd1cmUgdGhlIFBlcmlvZGljIE5vdGVzIFBsdWdpbiBmaXJzdC5cIilcclxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucGVyaW9kaWNOb3Rlc0VuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBlcmlvZGljTm90ZXNFbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KHRydWUsdHJ1ZSx0cnVlKTsgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnBlcmlvZGljTm90ZXNFbmFibGVkKXtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJTZWFyY2ggZHVyYXRpb24gZm9yIHBlcmlvZGljIG5vdGVzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJ3ZWVrbHkgbm90ZXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJudW1iZXIgb2Ygd2Vla3MgdG8gc2VhcmNoIHBlciBwYWdlIChkZWZhdWx0ID0gMTIpXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnbnVtYmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKERFRkFVTFRfU0VUVElOR1MuZHVyYXRpb24ud2VlaykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ud2VlaykpXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZWQgPSBwYXJzZUludCgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUsMTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkIDw9IDAgfHwgcGFyc2VkID49MzY2KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IERFRkFVTFRfU0VUVElOR1MuZHVyYXRpb24ud2Vla1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cmF0aW9uLndlZWsgPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJtb250aGx5IG5vdGVzXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwibnVtYmVyIG9mIG1vbnRocyB0byBzZWFyY2ggcGVyIHBhZ2UgKGRlZmF1bHQgPSAxMilcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5tb250aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ubW9udGgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyc2VkID0gcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSAwIHx8IHBhcnNlZCA+PTM2Nil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSBERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uLm1vbnRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ubW9udGggPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJxdWFydGVybHkgbm90ZXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJudW1iZXIgb2YgcXVhcnRlcnMgdG8gc2VhcmNoIHBlciBwYWdlIChkZWZhdWx0ID0gOClcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5xdWFydGVyKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXJhdGlvbi5xdWFydGVyKSlcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQgPD0gMCB8fCBwYXJzZWQgPj0zNjYpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi5xdWFydGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ucXVhcnRlciA9IHBhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcInllYXJseSBub3Rlc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIm51bWJlciBvZiB5ZWFycyB0byBzZWFyY2ggcGVyIHBhZ2UgKGRlZmF1bHQgPSAxMilcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi55ZWFyKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXJhdGlvbi55ZWFyKSlcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQgPD0gMCB8fCBwYXJzZWQgPj0zNjYpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi55ZWFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ueWVhciA9IHBhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJhdHRhY2ggZGF0ZSByYW5nZSB0byB3ZWVrbHkgbm90ZXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZGlzcGxheSBkYXRlIHJhbmdlIG5leHQgdG8gd2Vla2x5IG5vdGVzJyBuYW1lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaFdlZWtseU5vdGVzTmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNoV2Vla2x5Tm90ZXNOYW1lID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9cdTg4NjhcdTc5M0FcdTMwNTlcdTMwOEJcdTg5OEJcdTUxRkFcdTMwNTdcdTMwRUNcdTMwRDlcdTMwRUJcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIkhlYWRpbmdzXCIsXHJcbiAgICAgICAgICAgIGNsczpcInNldHRpbmctY2F0ZWdvcnlcIixcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmhlYWRpbmcpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIkhlYWRpbmcgbGV2ZWwgdG8gZGlzcGxheVwiLFxyXG4gICAgICAgICAgICAgICAgY2xzOlwic2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWFkaW5nTGV2ZWwuZm9yRWFjaCggKHZhbHVlLCBpbmRleCwgYXJyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoYExldmVsJHsgaW5kZXggKyAxfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVhZGluZ0xldmVsW2luZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWFkaW5nTGV2ZWxbIGluZGV4IF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJUbyBkaXNwbGF5IHRoaXMgc2VjdGlvbiwgYWN0aXZhdGUgJ1Nob3cgaGVhZGluZ3MnIGluIEJhc2ljcyBzZWN0aW9uLlwiLFxyXG4gICAgICAgICAgICAgICAgY2xzOlwic2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUzMEQ3XHUzMEVDXHUzMEQzXHUzMEU1XHUzMEZDXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJQcmV2aWV3XCIsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiSW5saW5lIHByZXZpZXdcIilcclxuICAgICAgICAuc2V0RGVzYyhcIlNob3cgYSBmZXcgc3Vic2VxdWVudCB3b3JkcyBuZXh0IHRvIHRoZSBvdXRsaW5lIGVsZW1lbnQgbmFtZVwiKVxyXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmxpbmVQcmV2aWV3KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmlubGluZVByZXZpZXcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiVG9vbHRpcCBwcmV2aWV3XCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJTaG93IHN1YnNlcXVlbnQgc2VudGVuY2VzIGFzIGEgdG9vbHRpcCB3aGVuIGhvdmVyXCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudG9vbHRpcFByZXZpZXcpe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJUb29sdGlwIHByZXZpZXcgZGlyZWN0aW9uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcInNwZWNpZnkgdGhlIGRpcmVjdGlvbiB0byBkaXNwbGF5IHRvb2x0aXAgcHJldmlld1wiKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsZWZ0XCIsIFwibGVmdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJyaWdodFwiLFwicmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiYm90dG9tXCIsXCJib3R0b21cIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidG9wXCIsXCJ0b3BcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudG9vbHRpcFByZXZpZXdEaXJlY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3RGlyZWN0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBvcG91dCBXaW5kb3dcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIlBvcG91dCB3aW5kb3dcIixcclxuICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiUG9wb3V0IHdpbmRvdyBzaXplXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV2lkdGhcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJkZWZhdWx0ICYgbWluID0gNjAwXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ251bWJlcicpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5wb3BvdXRTaXplLndpZHRoKSlcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcG91dFNpemUud2lkdGgpKVxyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSA2MDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSBERUZBVUxUX1NFVFRJTkdTLnBvcG91dFNpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcG91dFNpemUud2lkdGggPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJIZWlnaHRcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJkZWZhdWx0ID0gODAwIG1pbiA9IDYwMFwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKERFRkFVTFRfU0VUVElOR1MucG9wb3V0U2l6ZS5oZWlnaHQpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MucG9wb3V0U2l6ZS5oZWlnaHQpKVxyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSA2MDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IERFRkFVTFRfU0VUVElOR1MucG9wb3V0U2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcG91dFNpemUuaGVpZ2h0ID0gcGFyc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2V0IHBvcG91dCB3aW5kb3cgYWx3YXlzIG9uIHRvcFwiKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3BvdXRBbHdheXNPblRvcClcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcG91dEFsd2F5c09uVG9wID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8vIFx1MzBENVx1MzBBM1x1MzBFQlx1MzBCRlx1MzBGQ1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiU2ltcGxlIGZpbHRlclwiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMuaGVhZGluZyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkhlYWRpbmdzIHRvIGlnbm9yZVwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkhlYWRpbmdzIHdoaWNoIGluY2x1ZGUgbGlzdGVkIHdvcmRzIHdpbGwgbm90IGJlIGRpc3BsYXllZC4gU2VwYXJhdGUgd2l0aCBhIG5ldyBsaW5lLlwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEoKHRleHRBcmVhKSA9PntcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JZ25vcmUuaGVhZGluZy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLmhlYWRpbmcgPSBpbnB1dGVkVmFsdWUuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saW5rKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiTGlua3MgdG8gaWdub3JlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiTGlua3Mgd2hpY2ggaW5jbHVkZSBsaXN0ZWQgd29yZHMgd2lsbCBub3QgYmUgZGlzcGxheWVkLiBTZXBhcmF0ZSB3aXRoIGEgbmV3IGxpbmUuXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dEFyZWEpID0+e1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0lnbm9yZS5saW5rLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JZ25vcmUubGluayA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLnRhZyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRhZ3MgdG8gaWdub3JlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwidGFncyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLnRhZy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLnRhZyA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmxpc3RJdGVtcyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkxpc3QgaXRlbXMgdG8gaWdub3JlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiTGlzdCBpdGVtcyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLmxpc3RJdGVtcy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLmxpc3RJdGVtcyA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJbmNsdWRlIC8gRXhjbHVkZVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiSW5jbHVkZVwiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJJZiB5b3Ugc3BlY2lmeSBvbmUgb3V0bGluZSBlbGVtZW50IHR5cGUgYW5kIHdvcmRzIHRvIGluY2x1ZGUsIG9ubHkgZWxlbWVudHMgd2hpY2ggYmVsb25nIHRvIHRoZSBpbmNsdWRlZCBlbGVtZW50cyBhcmUgZGlzcGxheWVkLlwiLFxyXG4gICAgICAgICAgICBjbHM6XCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiKipOT1RFKio6IElmIEluY2x1ZGUgZmlsdGVyIGlzIHNldCBpbmNvcnJlY3RseSwgYSBudW1iZXIgb2Ygb3V0bGluZXMgbWF5IG5vdCBiZSBkaXNwbGF5ZWQuIEluIHN1Y2ggYSBjYXNlLCB0cnkgc2V0dGluZyAnRWxlbWVudCB0eXBlIGZvciBpbmNsdWRlJyB0byAnbm8gSW5jbHVkZSBmaWx0ZXInLlwiLFxyXG4gICAgICAgICAgICBjbHM6XCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcclxuICAgICAgICB9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIkVsZW1lbnQgdHlwZSBmb3IgaW5jbHVkZVwiKVxyXG4gICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJub25lXCIsIFwibm8gSW5jbHVkZSBmaWx0ZXJcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJoZWFkaW5nXCIsXCJoZWFkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGlua1wiLFwibGlua1wiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInRhZ1wiLFwidGFnXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGlzdEl0ZW1zXCIsXCJsaXN0SXRlbXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlT25seSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZU9ubHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVPbmx5ICE9ICdub25lJyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIldvcmRzIHRvIGluY2x1ZGVcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiT25seSBlbGVtZW50cyBzcGVjaWZpZWQgaW4gJ0VsZW1lbnQgdHlwZSBmb3IgaW5jbHVkZScgd2hpY2ggaW5jbHVkZSBsaXN0ZWQgd29yZHMgd2lsbCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSW5jbHVkZS5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSW5jbHVkZSA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJbmNsdWRlIHRoZSBiZWdpbm5pbmcgcGFydFwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgLnNldERlc2MoXCJTcGVjaWZ5IHdoZXRoZXIgdG8gaW5jbHVkZSB0aGUgYmVnaW5uaW5nIHBhcnRzIG9mIGVhY2ggZGFpbHkgbm90ZSB3aXRoIG5vIGVsZW1lbnQgdG8gaW5jbHVkZSBcIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZUJlZ2lubmluZylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVCZWdpbm5pbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiRXhjbHVkZVwiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJTcGVjaWZpZWQgb3V0bGluZSBlbGVtZW50cyBhbmQgZWxlbWVudHMgYmVsb25naW5nIHRvIHRoYXQgZWxlbWVudCB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuXCIsXHJcbiAgICAgICAgICAgIGNsczpcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvblwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiRXhjbHVzaW9uIGVuZHMgYXRcIilcclxuICAgICAgICAuc2V0RGVzYyhcIkV4Y2x1ZGluZyBlbGVtZW50cyBzcGVjaWZpZWQgYmVsb3cgZW5kcyBhdCB0aGUgc2VsZWN0ZWQgdHlwZSBvZiBlbGVtZW50cy4gSWYgeW91IHNwZWNpZmllZCAnRWxlbWVudCB0eXBlIGZvciBpbmNsdWRlJyBhYm92ZSwgdGhpcyB2YWx1ZSBpcyBpZ25vcmVkIGFuZCBleGNsdWRlaW5nIGVsZW1lbnRzIGVuZHMgYXQgdGhhdCB0eXBlIG9mIGVsZW1lbnRzLlwiKVxyXG4gICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJub25lXCIsIFwibm9uZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImhlYWRpbmdcIixcImhlYWRpbmdcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaW5rXCIsXCJsaW5rXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGFnXCIsXCJ0YWdcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaXN0SXRlbXNcIixcImxpc3RJdGVtc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByaW1lRWxlbWVudClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJpbWVFbGVtZW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMuaGVhZGluZyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkhlYWRpbmdzIHRvIGV4Y2x1ZGVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJIZWFkaW5ncyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyBhbmQgZWxlbWVudHMgd2hpY2ggYmVsb25nIHRvIHRoZW0gd2lsbCBub3QgYmUgZGlzcGxheWVkLiBTZXBhcmF0ZSB3aXRoIGEgbmV3IGxpbmUuXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dEFyZWEpID0+e1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4Y2x1ZGUuaGVhZGluZy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS5oZWFkaW5nID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMubGluayl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkxpbmtzIHRvIGV4Y2x1ZGVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJMaW5rcyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyBhbmQgZWxlbWVudHMgd2hpY2ggYmVsb25nIHRvIHRoZW0gd2lsbCBub3QgYmUgZGlzcGxheWVkLiBTZXBhcmF0ZSB3aXRoIGEgbmV3IGxpbmUuXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dEFyZWEpID0+e1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4Y2x1ZGUubGluay5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS5saW5rID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLnRhZyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRhZ3MgdG8gZXhjbHVkZVwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcInRhZ3Mgd2hpY2ggaW5jbHVkZSBsaXN0ZWQgd29yZHMgYW5kIGVsZW1lbnRzIHdoaWNoIGJlbG9uZyB0byB0aGVtIHdpbGwgbm90IGJlIGRpc3BsYXllZC4gU2VwYXJhdGUgd2l0aCBhIG5ldyBsaW5lLlwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEoKHRleHRBcmVhKSA9PntcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeGNsdWRlLnRhZy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS50YWcgPSBpbnB1dGVkVmFsdWUuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saXN0SXRlbXMpe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJMaXN0IGl0ZW1zIHRvIGV4Y2x1ZGVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJMaXN0IGl0ZW1zIHdoaWNoIGluY2x1ZGUgbGlzdGVkIHdvcmRzIGFuZCBlbGVtZW50cyB3aGljaCBiZWxvbmcgdG8gdGhlbSB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS5saXN0SXRlbXMuam9pbignXFxuJykpO1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4Y2x1ZGUubGlzdEl0ZW1zID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1NTkxNlx1ODlCM1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiQXBwZWFyYW5jZVwiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTg5ODFcdTdEMjBcdTU0MERcdTMwNkVcdTYyOThcdTMwOEFcdThGRDRcdTMwNTdcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIldyYXAgb3V0bGluZSBlbGVtZW50IHRleHRcIilcclxuICAgICAgICAuc2V0RGVzYyhcIklmIGVuYWJsZWQsIGxvbmcgZWxlbWVudCBuYW1lcyBhcmUgZGlzcGxheWVkIHdyYXBwZWQgb24gbXVsdGlwbGUgbGluZXNcIilcclxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud3JhcExpbmUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud3JhcExpbmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGhlYWRpbmdcdTMwNkVcdTMwQTRcdTMwRjNcdTMwQzdcdTMwRjNcdTMwQzhcdTMwRUNcdTMwRDlcdTMwRUJcdTMwNkJcdTMwNDJcdTMwOEZcdTMwNUJcdTMwNjZcdTRFRDZcdTMwNkVcdTg5ODFcdTdEMjBcdTMwOTJcdTMwQTRcdTMwRjNcdTMwQzdcdTMwRjNcdTMwQzhcdTMwNTlcdTMwOEJcdTMwNEJcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIkluZGVudGF0aW9uIG9mIG91dGxpbmUgZWxlbWVudHMgKG90aGVyIHRoYW4gIGhlYWRpbmdzKVwiKVxyXG4gICAgICAgIC5zZXREZXNjKFwiV2hldGhlciBvdGhlciBlbGVtZW50cyBzaG91bGQgYmUgaW5kZW50ZWQgdG8gcHJlY2VkaW5nIGhlYWRpbmdzXCIpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIjBcIixcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCIxXCIsXCJmb2xsb3cgcHJlY2VkaW5nIGhlYWRpbmdcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCIyXCIsXCJwcmVjZWRpbmcgaGVhZGluZyArIDFcIilcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZW50Rm9sbG93SGVhZGluZykpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZW50Rm9sbG93SGVhZGluZyA9IE51bWJlcih2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1MzBDRVx1MzBGQ1x1MzBDOFx1MzBCRlx1MzBBNFx1MzBDOFx1MzBFQlx1MzA2RVx1ODBDQ1x1NjY2Rlx1ODI3MlxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiTm90ZSB0aXRsZSBiYWNrZ3JvdW5kIGNvbG9yXCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJObyBjaGFuZ2U6IHVzZSB0aGUgY3VycmVudCBDU1MgdGhlbWUgc2V0dGluZyB2YWx1ZXMuIEFjY2VudDogaGlnaGxpZ2h0IGZpbGUgbmFtZXMuIEN1c3RvbTogU3BlY2lmeSBhbnkgY29sb3IgY29kZS4gUGxlYXNlIHVwZGF0ZSB0aGUgdmlldyB3aGVuIHlvdSB0b2dnbGVkIE9ic2lkaWFuJ3MgYmFzZSB0aGVtZShsaWdodC9kYXJrKS4gKGRlZmF1bHQgPSBubyBjaGFuZ2UpXCIpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJubyBjaGFuZ2VcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJhY2NlbnRcIixcImFjY2VudFwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImN1c3RvbVwiLFwiY3VzdG9tXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVRpdGxlQmFja2dyb3VuZENvbG9yKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVUaXRsZUJhY2tncm91bmRDb2xvciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVRpdGxlQmFja2dyb3VuZENvbG9yID09J2N1c3RvbScpe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJDdXN0b20gbm90ZSB0aXRsZSBiYWNrZ3JvdW5kIGNvbG9yIChsaWdodClcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJTcGVjaWZ5IGJhY2tncm91bmQgY29sb3IgKGV4LiAjRkZGRkZGIG9yIHJnYigyNTUsMjU1LDI1NSkpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3IuY3VzdG9tLmxpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCk9PntcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9yLmN1c3RvbS5saWdodCA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBub3RlIHRpdGxlIGJhY2tncm91bmQgY29sb3IgKGxpZ2h0LCBvbiBob3ZlcilcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJTcGVjaWZ5IGJhY2tncm91bmQgY29sb3Igb24gaG92ZXIgKGV4LiAjRkZGRkZGIG9yIHJnYigyNTUsMjU1LDI1NSkpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlci5jdXN0b20ubGlnaHQpO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlci5jdXN0b20ubGlnaHQgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBub3RlIHRpdGxlIGJhY2tncm91bmQgY29sb3IgKGRhcmspXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU3BlY2lmeSBiYWNrZ3JvdW5kIGNvbG9yIChleC4gI0ZGRkZGRiBvciByZ2IoMjU1LDI1NSwyNTUpKVwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9yLmN1c3RvbS5kYXJrKTtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCk9PntcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9yLmN1c3RvbS5kYXJrID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIG5vdGUgdGl0bGUgYmFja2dyb3VuZCBjb2xvciAoZGFyaywgb24gaG92ZXIpXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiU3BlY2lmeSBiYWNrZ3JvdW5kIGNvbG9yIG9uIGhvdmVyIChleC4gI0ZGRkZGRiBvciByZ2IoMjU1LDI1NSwyNTUpKVwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9ySG92ZXIuY3VzdG9tLmRhcmspO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlci5jdXN0b20uZGFyayA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFxyXG4gICAgICAgIC8vIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAvLyAgICAgdGV4dDogXCJOb3Rlc1wiLFxyXG4gICAgICAgIC8vICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC8vIC5zZXROYW1lKFwiSWNvblwiKVxyXG4gICAgICAgIC8vIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgLy8gLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgIC8vICAgICBkcm9wZG93blxyXG4gICAgICAgIC8vICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgLy8gICAgICAgICAuYWRkT3B0aW9uKFwiZmlsZVwiLFwiZmlsZVwiKVxyXG4gICAgICAgIC8vICAgICAgICAgLmFkZE9wdGlvbihcImNhbGVuZGFyXCIsXCJjYWxlbmRhclwiKVxyXG4gICAgICAgIC8vICAgICAgICAgLmFkZE9wdGlvbihcImNhbGVuZGFyLWRheXNcIixcImNhbGVuZGFyLWRheXNcIilcclxuICAgICAgICAvLyAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLm5vdGUpXHJcbiAgICAgICAgLy8gICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5ub3RlID0gdmFsdWU7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAvLyAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIC8vIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLm5vdGUgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgIC8vICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAvLyAgICAgLnNldE5hbWUoXCJDdXN0b20gaWNvblwiKVxyXG4gICAgICAgIC8vICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgLy8gICAgIC5zZXREZXNjKFwiZW50ZXIgTHVjaWRlIEljb24gbmFtZVwiKVxyXG4gICAgICAgIC8vICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAvLyAgICAgICAgIHRleHRcclxuICAgICAgICAvLyAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5jdXN0b21JY29uLm5vdGUpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24ubm90ZSk7XHJcbiAgICAgICAgLy8gICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi5ub3RlID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgLy8gICAgICAgICB9O1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODk4Qlx1NTFGQVx1MzA1N1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMuaGVhZGluZyl7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiSGVhZGluZ3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8uYWRkT3B0aW9uKFwiaGVhZGluZ1wiLFwiaGVhZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJoYXNoXCIsXCJoYXNoXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZXZyb24tcmlnaHRcIixcImNoZXZyb24tcmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAvLy5hZGRPcHRpb24oXCJoZWFkaW5nd2l0aG51bWJlclwiLFwiaGVhZGluZyB3aXRoIG51bWJlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjdXN0b21cIixcImN1c3RvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLmhlYWRpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5oZWFkaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLmhlYWRpbmcgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVudGVyIEx1Y2lkZSBJY29uIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24uaGVhZGluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24uaGVhZGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi5oZWFkaW5nID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJQcmVmaXhcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5wcmVmaXguaGVhZGluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC5oZWFkaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXguaGVhZGluZyA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXguaGVhZGluZyAhPSAnJyl7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlJlcGVhdCBoZWFkaW5nIHByZWZpeFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50LTJcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsZXZlbFwiLFwiYXMgbWFueSB0aW1lcyBhcyBpdHMgbGV2ZWxcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsZXZlbG1pbnVzMVwiLFwibGV2ZWwgLSAxXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwZWF0SGVhZGluZ1ByZWZpeClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwZWF0SGVhZGluZ1ByZWZpeCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFkZCBpbmRlbnRcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGVudC5oZWFkaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZW50LmhlYWRpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1MzBFQVx1MzBGM1x1MzBBRlxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMubGluayl7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiTGlua3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxpbmtcIixcImxpbmtcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGluay0yXCIsXCJsaW5rLTJcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY3VzdG9tXCIsXCJjdXN0b21cIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5saW5rKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24ubGluayA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5saW5rID09ICdjdXN0b20nKXtcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJDdXN0b20gaWNvblwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnQtMlwiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJlbnRlciBMdWNpZGUgSWNvbiBuYW1lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5jdXN0b21JY29uLmxpbmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLmxpbmspO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24ubGluayA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiUHJlZml4XCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucHJlZml4LmxpbmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgubGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZml4LmxpbmsgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUzMEJGXHUzMEIwXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy50YWcpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlRhZ3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInRhZ1wiLFwidGFnXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImhhc2hcIixcImhhc2hcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY3VzdG9tXCIsXCJjdXN0b21cIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi50YWcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi50YWcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGFnID09ICdjdXN0b20nKXtcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJDdXN0b20gaWNvblwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnQtMlwiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJlbnRlciBMdWNpZGUgSWNvbiBuYW1lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5jdXN0b21JY29uLnRhZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24udGFnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLnRhZyA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiUHJlZml4XCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucHJlZml4LnRhZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YWcgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUzMEVBXHUzMEI5XHUzMEM4XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saW5rKXtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJMaXN0IGl0ZW1zXCIsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSWNvblwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJub25lXCIsIFwibm9uZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaXN0XCIsXCJsaXN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZXZyb24tcmlnaHRcIixcImNoZXZyb24tcmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibWludXNcIixcIm1pbnVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNpcmNsZS1kb3RcIixcImNpcmNsZS1kb3RcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiYXN0ZXJpc2tcIixcImFzdGVyaXNrXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImN1c3RvbVwiLFwiY3VzdG9tXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24ubGlzdEl0ZW1zKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24ubGlzdEl0ZW1zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLmxpc3RJdGVtcyA9PSAnY3VzdG9tJyl7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIGljb25cIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50LTJcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZW50ZXIgTHVjaWRlIEljb24gbmFtZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MuY3VzdG9tSWNvbi5saXN0SXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLmxpc3RJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi5saXN0SXRlbXMgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlByZWZpeFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnByZWZpeC5saXN0SXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgubGlzdEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgubGlzdEl0ZW1zID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vXHUzMEJGXHUzMEE0XHUzMEUwXHUzMEVBXHUzMEI5XHUzMEM4XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiVGltZSBsaXN0c1wiLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkljb25cIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY2xvY2tcIixcImNsb2NrXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm1lc3NhZ2Utc3F1YXJlXCIsXCJtZXNzYWdlLXNxdWFyZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJtZXNzYWdlLWNpcmNsZVwiLFwibWVzc2FnZS1jaXJjbGVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidHdpdHRlclwiLFwidHdpdHRlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjdXN0b21cIixcImN1c3RvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRpbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRpbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGltZSA9PSAnY3VzdG9tJyl7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIGljb25cIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50LTJcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZW50ZXIgTHVjaWRlIEljb24gbmFtZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MuY3VzdG9tSWNvbi50aW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi50aW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLnRpbWUgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlByZWZpeFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnByZWZpeC50aW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZml4LnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50aW1lID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vXHU2NzJBXHU1QjhDXHU0RTg2XHUzMEJGXHUzMEI5XHUzMEFGXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiVGFza3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInNxdWFyZVwiLFwic3F1YXJlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNpcmNsZVwiLFwiY2lyY2xlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxpc3QtY2hlY2tzXCIsXCJsaXN0LWNoZWNrc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjdXN0b21cIixcImN1c3RvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRhc2spXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi50YXNrID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRhc2sgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVudGVyIEx1Y2lkZSBJY29uIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24udGFzaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24udGFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi50YXNrID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJQcmVmaXhcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5wcmVmaXgudGFzaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YXNrKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgudGFzayA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFkZCBjaGVja2JveCB0ZXh0IHRvIHByZWZpeFwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcImFkZCBbIF0gb3IgW3hdXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZGRDaGVja2JveFRleHQpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZGRDaGVja2JveFRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy9cdTVCOENcdTRFODZcdTZFMDhcdTMwN0ZcdTMwQkZcdTMwQjlcdTMwQUZcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJDb21wbGV0ZWQgdGFza3NcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZWNrLXNxdWFyZVwiLFwiY2hlY2stc3F1YXJlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZWNrLWNpcmNsZVwiLFwiY2hlY2stY2lyY2xlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNoZWNrXCIsXCJjaGVja1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjdXN0b21cIixcImN1c3RvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRhc2tEb25lKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGFza0RvbmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGFza0RvbmUgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVudGVyIEx1Y2lkZSBJY29uIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24udGFza0RvbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLnRhc2tEb25lKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLnRhc2tEb25lID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJQcmVmaXhcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5wcmVmaXgudGFza0RvbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgudGFza0RvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YXNrRG9uZSA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTMwRDBcdTMwQzNcdTMwQUZcdTMwRUFcdTMwRjNcdTMwQUZcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0JhY2tsaW5rcyl7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiQmFja2xpbmtzXCIsXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSWNvblwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJub25lXCIsIFwibm9uZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaW5rcy1jb21pbmctaW5cIixcImxpbmtzLWNvbWluZy1pblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJmaWxlXCIsXCJmaWxlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImNvcm5lci11cC1sZWZ0XCIsXCJjb3JuZXItdXAtbGVmdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjbG9ja1wiLFwiY2xvY2tcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY3VzdG9tXCIsXCJjdXN0b21cIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5iYWNrbGluaylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24uYmFja2xpbmsgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24uYmFja2xpbmsgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVudGVyIEx1Y2lkZSBJY29uIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24uYmFja2xpbmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLmJhY2tsaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLmJhY2tsaW5rID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJQcmVmaXhcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5wcmVmaXguYmFja2xpbmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXguYmFja2xpbmspO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC5iYWNrbGluayA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJPdGhlcnNcIixcclxuICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJTaG93IG9ubHkgLm1kIGZpbGVzXCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJUdXJuIG9uIGlmIG5vbi1tZCBmaWxlcyBhcmUgZGlzcGxheWVkIGluIHRoZSB2aWV3XCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1hcmtkb3duT25seSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXJrZG93bk9ubHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJTaG93IG9ubHkgZXhhY3RseSBtYXRjaGVkIGZpbGVzXCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJUdXJuIG9uIGlmIHlvdSBkbyBub3Qgd2FudCB0byBzZWUgZmlsZXMgdGhhdCBkbyBub3QgZXhhY3RseSBtYXRjaCB0aGUgZm9ybWF0XCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YWN0TWF0Y2hPbmx5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4YWN0TWF0Y2hPbmx5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93QmFja2xpbmtzKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ3JlYXRlIGRhaWx5IG5vdGVzIGNvcnJlc3BvbmRpbmcgdG8gdW5yZXNvbHZlZCBsaW5rcyBhdCBzdGFydHVwXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVG8gZGV0ZWN0IGJhY2tsaW5rcyB0byBkYWlseSBub3RlcywgYXQgc3RhcnR1cCwgdGhlIHBsdWdpbiBzZWFyY2hlcyBmb3IgbGlua3MgdG8gZGF0ZXMgYW5kIGNyZWF0ZXMgdGhlIGNvcnJlc3BvbmRpbmcgZGFpbHkgbm90ZSBpZiBvbmUgaGFzIG5vdCBiZWVuIGNyZWF0ZWQuXCIpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrVW5yZXNvbHZlZExpbmtzQXRTdGFydHVwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tVbnJlc29sdmVkTGlua3NBdFN0YXJ0dXAgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KHRydWUsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJTdGFydHVwIGRlbGF5IHRpbWUobXMpXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiV2FpdCBmb3IgdGhlIHNwZWNpZmllZCB0aW1lIGF0IHN0YXJ0dXAuIElmIGRhaWx5IG5vdGVzIGZhaWwgdG8gbG9hZCBhdCBzdGFydHVwLCBpbmNyZWFzaW5nIHRoaXMgbWF5IHJlc29sdmUgdGhlIGlzc3VlLiAoZGVmYXVsdCA9IDMwMClcIilcclxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnbnVtYmVyJyk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFN0cmluZyhERUZBVUxUX1NFVFRJTkdTLmJvb3REZWxheVRpbWUpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9vdERlbGF5VGltZSkpXHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSAwIHx8IHBhcnNlZCA+PTIwMDAwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IERFRkFVTFRfU0VUVElOR1MuYm9vdERlbGF5VGltZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib290RGVsYXlUaW1lID0gcGFyc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJEZWJ1Z1wiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwic2hvdyBkZWJ1ZyBpbmZvcm1hdGlvblwiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJkaXNwbGF5IGRlYnVnIGluZm9ybWF0aW9uIGluIHRoZSBjb25zb2xlXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgIH1cclxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBRUEsV0FBTyxlQUFlLFNBQVMsY0FBYyxFQUFFLE9BQU87QUFFdEQsUUFBSSxXQUFXLFFBQVE7QUFFdkIsUUFBTSw0QkFBNEI7QUFDbEMsUUFBTSw2QkFBNkI7QUFDbkMsUUFBTSw4QkFBOEI7QUFDcEMsUUFBTSxnQ0FBZ0M7QUFDdEMsUUFBTSw2QkFBNkI7QUFFbkMsNENBQXdDLGFBQWE7QUFackQ7QUFjSSxZQUFNLGdCQUFnQixPQUFPLElBQUksUUFBUSxVQUFVO0FBQ25ELGFBQU8saUJBQWlCLDJCQUFjLGFBQWQsbUJBQXlCLGlCQUF6QixtQkFBdUM7QUFBQTtBQU1uRSxxQ0FBZ0M7QUFyQmhDO0FBc0JJLFVBQUk7QUFFQSxjQUFNLEVBQUUsaUJBQWlCLFlBQVksT0FBTztBQUM1QyxZQUFJLCtCQUErQixVQUFVO0FBQ3pDLGdCQUFNLEVBQUUsaUJBQVEsaUJBQVEsd0JBQWEscUJBQVEsVUFBVSxzQkFBbEIsbUJBQXFDLGFBQXJDLG1CQUErQyxVQUFTO0FBQzdGLGlCQUFPO0FBQUEsWUFDSCxRQUFRLFdBQVU7QUFBQSxZQUNsQixRQUFRLG9DQUFRLFdBQVU7QUFBQSxZQUMxQixVQUFVLHdDQUFVLFdBQVU7QUFBQTtBQUFBO0FBR3RDLGNBQU0sRUFBRSxRQUFRLFFBQVEsYUFBYSw2QkFBZ0IsY0FBYyxtQkFBOUIsbUJBQThDLGFB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
