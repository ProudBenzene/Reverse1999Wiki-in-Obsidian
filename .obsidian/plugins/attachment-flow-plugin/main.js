/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AttachFlowPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/options/deleleAllAttachsInTheNote.ts
var import_obsidian4 = require("obsidian");

// src/util.ts
var import_obsidian = require("obsidian");
var import_child_process = require("child_process");
var import_fs = require("fs");
var import_obsidian2 = require("obsidian");
var DEBUG = false;
var SUCCESS_NOTICE_TIMEOUT = 1800;
var print = (message, ...optionalParams) => {
  if (DEBUG) {
    console.log(message, ...optionalParams);
  }
};
function setDebug(value) {
  DEBUG = value;
}
var checkReferenceInfo = (target_file, currentMd) => {
  const resolvedLinks = app.metadataCache.resolvedLinks;
  let CurMDPath;
  let result = {
    state: 0,
    mdPath: []
  };
  let refNum = 0;
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if (currentMd.path === mdFile) {
      CurMDPath = currentMd.path;
      result.mdPath.unshift(CurMDPath);
    }
    for (const [filePath, nr] of Object.entries(links)) {
      if ((target_file == null ? void 0 : target_file.path) === filePath) {
        refNum++;
        if (nr > 1) {
          result.state = 2 /* MORE */;
          result.mdPath.push(mdFile);
          return result;
        }
        result.mdPath.push(mdFile);
      }
    }
  }
  if (refNum > 1) {
    result.state = 1 /* MUTIPLE */;
  } else {
    result.state = 0 /* ONCE */;
  }
  return result;
};
var getFileByBaseName = (currentMd, FileBaseName) => {
  const resolvedLinks = app.metadataCache.resolvedLinks;
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if (currentMd.path === mdFile) {
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath.includes(FileBaseName)) {
          try {
            const AttachFile = app.vault.getAbstractFileByPath(filePath);
            if (AttachFile instanceof import_obsidian.TFile) {
              return AttachFile;
            }
          } catch (error) {
            new import_obsidian.Notice(` cannot get the image file`);
            console.error(error);
          }
        }
      }
    }
  }
};
var PureClearAttachment = (file, target_type, plugin) => __async(void 0, null, function* () {
  const deleteOption = plugin.settings.deleteOption;
  const delFileFolder = onlyOneFileExists(file);
  const fileFolder = getFileParentFolder(file);
  let name = target_type == "img" ? "Image" : "File";
  try {
    if (deleteOption === ".trash") {
      yield app.vault.trash(file, false);
      new import_obsidian.Notice(name + " moved to Obsidian Trash !", SUCCESS_NOTICE_TIMEOUT);
      if (delFileFolder) {
        yield app.vault.trash(fileFolder, false);
        new import_obsidian.Notice("Attachment folder have been deleted!", 3e3);
      }
    } else if (deleteOption === "system-trash") {
      yield app.vault.trash(file, true);
      new import_obsidian.Notice(name + " moved to System Trash !", SUCCESS_NOTICE_TIMEOUT);
      if (delFileFolder) {
        yield app.vault.trash(fileFolder, true);
        new import_obsidian.Notice("Attachment folder have been deleted!", 3e3);
      }
    } else if (deleteOption === "permanent") {
      yield app.vault.delete(file);
      new import_obsidian.Notice(name + " deleted Permanently !", SUCCESS_NOTICE_TIMEOUT);
      if (delFileFolder) {
        yield app.vault.delete(fileFolder, true);
        new import_obsidian.Notice("Attachment folder have been deleted!", 3e3);
      }
    }
  } catch (error) {
    console.error(error);
    new import_obsidian.Notice("Faild to delelte the " + name + "!", SUCCESS_NOTICE_TIMEOUT);
  }
});
var handlerDelFileNew = (FileBaseName, currentMd, plugin, target_type, target_pos, in_table, in_callout) => {
  let logs;
  let modal;
  const target_file = getFileByBaseName(currentMd, FileBaseName);
  const refInfo = checkReferenceInfo(target_file, currentMd);
  let state = refInfo.state;
  switch (state) {
    case 0:
      deleteCurTargetLink(FileBaseName, plugin, target_type, target_pos, in_table, in_callout);
      PureClearAttachment(target_file, target_type, plugin);
      break;
    case 1:
    case 2:
      deleteCurTargetLink(FileBaseName, plugin, target_type, target_pos, in_table, in_callout);
      logs = refInfo.mdPath;
      new import_obsidian.Notice("As other references of current file exist, just deleted the current reference link without deleting the actual file.", 3500);
    default:
      break;
  }
};
var deleteCurTargetLink = (file_base_name, plugin, target_type, target_pos, in_table, in_callout) => {
  file_base_name = file_base_name.startsWith("/") ? file_base_name.substring(1) : file_base_name;
  const activeView = plugin.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
  const editor = activeView.editor;
  const editorView = editor.cm;
  let target_line = editorView.state.doc.lineAt(target_pos);
  let line_text = target_line.text;
  if (!in_table && !in_callout) {
    let finds = findLinkInLine(file_base_name, line_text);
    if (finds.length == 0) {
      new import_obsidian.Notice("Fail to find the link-text, please delete it manually!", 0);
      return;
    } else if (finds.length != 1) {
      new import_obsidian.Notice("Find multiple same Link in current line, please delete it manually!", 0);
      return;
    } else {
      editor.replaceRange("", { line: target_line.number - 1, ch: finds[0][0] }, { line: target_line.number - 1, ch: finds[0][1] });
      return;
    }
  }
  let startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  let mode = in_table ? "table" : "callout";
  let finds_lines = [];
  let finds_all = [];
  for (let i = target_line.number; i <= editor.lineCount(); i++) {
    let line_text2 = editor.getLine(i - 1);
    if (!startReg[mode].test(line_text2))
      break;
    print(`line_${i}_text:`, line_text2);
    let finds = findLinkInLine(file_base_name, line_text2);
    if (finds.length > 0) {
      finds_lines.push(...new Array(finds.length).fill(i));
      finds_all.push(...finds);
    }
  }
  for (let i = target_line.number - 1; i >= 1; i--) {
    let line_text2 = editor.getLine(i - 1);
    if (!startReg[mode].test(line_text2))
      break;
    print(`line_${i}_text:`, line_text2);
    let finds = findLinkInLine(file_base_name, line_text2);
    if (finds.length > 0) {
      finds_lines.push(...new Array(finds.length).fill(i));
      finds_all.push(...finds);
    }
  }
  if (finds_all.length == 0) {
    new import_obsidian.Notice(`Fail to find the link-text (for links in ${mode}), please delete it manually!`, 0);
    return;
  } else if (finds_all.length != 1) {
    new import_obsidian.Notice(`Find multiple same Link in current ${mode}, please delete it manually!`, 0);
    return;
  } else {
    editor.replaceRange("", { line: finds_lines[0] - 1, ch: finds_all[0][0] }, { line: finds_lines[0] - 1, ch: finds_all[0][1] });
  }
  editor.focus();
};
var handlerCopyFile = (FileBaseName, currentMd, plugin) => __async(void 0, null, function* () {
  const file = getFileByBaseName(currentMd, FileBaseName);
  const basePath = file.vault.adapter.basePath;
  const file_ab_path = basePath + "/" + file.path;
  try {
    copyFileToClipboardCMD(file_ab_path);
    new import_obsidian.Notice("Copied to clipboard !", SUCCESS_NOTICE_TIMEOUT);
  } catch (error) {
    console.error(error);
    new import_obsidian.Notice("Faild to copy the file !", SUCCESS_NOTICE_TIMEOUT);
  }
});
var handlerMoveFile = (FileBaseName, currentMd, plugin) => __async(void 0, null, function* () {
  const target_file = getFileByBaseName(currentMd, FileBaseName);
  new moveFileToFolderSuggester(plugin.app, target_file).open();
});
var getFileParentFolder = (file) => {
  if (file instanceof import_obsidian.TFile) {
    if (file.parent instanceof import_obsidian.TFolder) {
      return file.parent;
    }
  }
  return;
};
var onlyOneFileExists = (file) => {
  const fileFolder = getFileParentFolder(file);
  return fileFolder.children.length === 1;
};
function copyFileToClipboardCMD(filePath) {
  if (!(0, import_fs.existsSync)(filePath)) {
    console.error(`File ${filePath} does not exist`);
    return;
  }
  const callback = (error, stdout, stderr) => {
    if (error) {
      new import_obsidian.Notice(`Error executing command: ${error.message}`, SUCCESS_NOTICE_TIMEOUT);
      console.error(`Error executing command: ${error.message}`);
      return;
    }
  };
  if (process.platform === "darwin") {
    (0, import_child_process.execSync)(`open -R "${filePath}"`);
    (0, import_child_process.execSync)(`osascript -e 'tell application "System Events" to keystroke "c" using command down'`);
    (0, import_child_process.execSync)(`osascript -e 'tell application "System Events" to keystroke "w" using command down'`);
    (0, import_child_process.execSync)(`open -a "Obsidian.app"`);
  } else if (process.platform === "linux") {
  } else if (process.platform === "win32") {
    let safeFilePath = filePath.replace(/'/g, "''");
    (0, import_child_process.exec)(`powershell -command "Set-Clipboard -Path '${safeFilePath}'"`, callback);
  }
}
var findLinkInLine = (file_name, line_text) => {
  const file_name_mdlink = file_name.replace(/ /g, "%20");
  let regWikiLink = /\!\[\[[^\[\]]*?\]\]/g;
  let regMdLink = /\!\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  print("target_name (WIKI/MD):", file_name, file_name_mdlink);
  let search_result = [];
  if (line_text.includes(file_name)) {
    while (true) {
      let match = regWikiLink.exec(line_text);
      if (!match)
        break;
      let matched_link = match[0];
      print("matched_link:", matched_link);
      print("matched_link.includes(file_name)", matched_link.includes(file_name));
      if (matched_link.includes(file_name)) {
        search_result.push([match.index, match.index + matched_link.length]);
      }
    }
  }
  if (line_text.includes(file_name_mdlink)) {
    while (true) {
      let match = regMdLink.exec(line_text);
      if (!match)
        break;
      let matched_link = match[0];
      print("matched_link:", matched_link);
      print("matched_link.includes(file_name_mdlink)", matched_link.includes(file_name_mdlink));
      if (matched_link.includes(file_name_mdlink)) {
        search_result.push([match.index, match.index + matched_link.length]);
      }
    }
  }
  return search_result;
};
var handlerRenameFile = (FileBaseName, currentMd, plugin) => {
  const target_file = getFileByBaseName(currentMd, FileBaseName);
  let path = target_file.path;
  let name = target_file.name;
  let target_folder = path.substring(0, path.length - name.length);
  let file_type = name.split(".").pop();
  new RenameModal(plugin.app, target_folder, name.substring(0, name.length - file_type.length - 1), file_type, (result) => {
    if (!result)
      return;
    if (result == path)
      return;
    app.vault.adapter.exists(result).then((exists) => {
      if (exists) {
        new import_obsidian.Notice(`Fail to rename for there alreay exist file ${result}`);
      } else {
        plugin.app.fileManager.renameFile(target_file, `${result}`);
      }
    });
  }).open();
};
var RenameModal = class extends import_obsidian2.Modal {
  constructor(app2, folder, name, filetype, onSubmit) {
    super(app2);
    this.onSubmit = onSubmit;
    this.folder = folder;
    this.name = name;
    this.filetype = filetype;
  }
  onOpen() {
    const { contentEl } = this;
    let setting = new import_obsidian2.Setting(contentEl).setName("Rename:").addText((text) => text.setValue(this.name).onChange((value) => {
      this.result = `${this.folder}${value}.${this.filetype}`;
    }));
    setTimeout(() => {
      let inputBox = setting.settingEl.querySelector('input[type="text"]');
      if (inputBox && inputBox.parentElement) {
        let folder_indicator = document.createElement("label");
        folder_indicator.innerText = `${this.folder}`;
        folder_indicator.style.marginRight = "4px";
        inputBox.parentElement.insertBefore(folder_indicator, inputBox);
        let file_type_indicator = document.createElement("label");
        file_type_indicator.innerText = `.${this.filetype}`;
        file_type_indicator.style.marginLeft = "4px";
        inputBox.after(file_type_indicator);
        let parentEl = setting.settingEl.parentElement;
        if (parentEl) {
          parentEl.style.display = "flex";
          parentEl.style.justifyContent = "center";
        }
        let inputElem = inputBox;
        inputElem.select();
      } else {
        console.error("\u65E0\u6CD5\u627E\u5230\u6587\u672C\u8F93\u5165\u6846");
      }
    }, 0);
    this.scope.register([], "Enter", (evt) => {
      if (evt.isComposing) {
        return;
      }
      this.close();
      this.onSubmit(this.result);
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};
var moveFileToFolderSuggester = class extends import_obsidian2.FuzzySuggestModal {
  constructor(app2, file) {
    super(app2);
    this.folderList = this.getAllFolders(this.app.vault);
    this.target_file = file;
  }
  getAllFolders(vault) {
    const folders = /* @__PURE__ */ new Set();
    vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian.TFolder) {
        folders.add(file.path);
      }
    });
    return folders;
  }
  getItems() {
    return Array.from(this.folderList).sort();
  }
  getItemText(item) {
    return item;
  }
  onChooseItem(item) {
    return __async(this, null, function* () {
      var _a;
      if (((_a = this.target_file.parent) == null ? void 0 : _a.path) === item) {
        new import_obsidian.Notice("The file is already in the folder!", 3e3);
        return;
      }
      let choosed_folder = item.endsWith("/") ? item : item + "/";
      let new_path = choosed_folder + this.target_file.name;
      print(new_path);
      app.vault.adapter.exists(new_path).then((exists) => {
        if (exists) {
          new import_obsidian.Notice(`Fail to move for there alreay exist file ${new_path}`);
        } else {
          this.app.fileManager.renameFile(this.target_file, `${new_path}`);
        }
      });
    });
  }
  renderSuggestion(item, el) {
    el.innerText = item.item;
  }
};

// src/utils/deleteFile.ts
var import_obsidian3 = require("obsidian");
var SUCCESS_NOTICE_TIMEOUT2 = 1800;
var deleteFile = (file, plugin) => __async(void 0, null, function* () {
  const deleteOption = plugin.settings.deleteOption;
  try {
    if (deleteOption === ".trash") {
      yield app.vault.trash(file, false);
    } else if (deleteOption === "system-trash") {
      yield app.vault.trash(file, true);
    } else if (deleteOption === "permanent") {
      yield app.vault.delete(file);
    }
  } catch (error) {
    console.error(error);
    new import_obsidian3.Notice("Faild to delete the file/folder !", SUCCESS_NOTICE_TIMEOUT2);
  }
});

// src/options/deleleAllAttachsInTheNote.ts
var deleteAllAttachs = (plugin) => __async(void 0, null, function* () {
  const activeMd = app.workspace.getActiveFile();
  const resolvedLinks = app.metadataCache.resolvedLinks;
  const attachsPaths = [];
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if ((activeMd == null ? void 0 : activeMd.path) === mdFile) {
      let fileCount = 0;
      let flag = false;
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath.match(/.*\.md$/m))
          continue;
        if (isReferencedByOtherNotes(filePath, activeMd))
          continue;
        attachsPaths.push(filePath);
        try {
          const AttachFile = app.vault.getAbstractFileByPath(filePath);
          if (AttachFile instanceof import_obsidian4.TFile) {
            deleteFile(AttachFile, plugin);
          }
          const parentFolder = getFileParentFolder(AttachFile);
          if (!flag) {
            fileCount = parentFolder.children.length;
            flag = !flag;
          }
          fileCount = fileCount - 1;
          if (!fileCount) {
            yield deleteFile(parentFolder, plugin);
            new import_obsidian4.Notice("All attachments and its parent folder deleted!", 3e3);
          }
        } catch (error) {
          console.warn(error);
        }
      }
    }
  }
});
var isReferencedByOtherNotes = (attachPath, currentMd) => {
  const resolvedLinks = app.metadataCache.resolvedLinks;
  let flag = false;
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if (mdFile !== currentMd.path) {
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath === attachPath) {
          flag = true;
        }
      }
    }
  }
  return flag;
};
var getRefencedLinkCount = () => {
  const activeMd = app.workspace.getActiveFile();
  const resolvedLinks = app.metadataCache.resolvedLinks;
  const attachsPaths = [];
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if ((activeMd == null ? void 0 : activeMd.path) === mdFile) {
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath.match(/.*\.md$/m))
          continue;
        if (isReferencedByOtherNotes(filePath, activeMd))
          continue;
        attachsPaths.push(filePath);
      }
    }
  }
  return attachsPaths.length;
};

// src/config/addCommand-config.ts
var addCommand = (myPlugin) => {
  myPlugin.addCommand({
    id: "clear-all-attachments-in-current-file",
    name: "clear all attachments in current file",
    callback: () => __async(void 0, null, function* () {
      deleteAllAttachs(myPlugin);
    })
  });
};

// src/settings.ts
var import_obsidian5 = require("obsidian");
var DEFAULT_SETTINGS = {
  deleteOption: ".trash",
  logsModal: true,
  dragResize: true,
  resizeInterval: 0,
  clickView: false,
  adaptiveRatio: 0.9,
  moveFileMenu: false,
  debug: false
};
var AttachFlowSettingsTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian5.Setting(containerEl).setName("Right-click menu for attachments").setHeading();
    new import_obsidian5.Setting(containerEl).setName("Deleted attachment destination").setDesc("Select where you want Attachments to be moved once they are deleted").addDropdown((dropdown) => {
      dropdown.addOption("permanent", "Delete Permanently");
      dropdown.addOption(".trash", "Move to Obsidian Trash");
      dropdown.addOption("system-trash", "Move to System Trash");
      dropdown.setValue(this.plugin.settings.deleteOption);
      dropdown.onChange((option) => {
        this.plugin.settings.deleteOption = option;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian5.Setting(containerEl).setName("Move file to...").setDesc('Add a "Move to..." option to the right-click menu for attachments').addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.moveFileMenu).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.moveFileMenu = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian5.Setting(containerEl).setName("Click to view images").setHeading();
    new import_obsidian5.Setting(containerEl).setName("Click to view images").setDesc("Click the right half of the image to view the image in detail.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.clickView).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.clickView = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian5.Setting(containerEl).setName("Adaptive image display ratio based on window size").setDesc("When the image exceeds the window size, the image is displayed adaptively according to the window size.").addSlider((slider) => {
      slider.setLimits(0.1, 1, 0.05);
      slider.setValue(this.plugin.settings.adaptiveRatio);
      slider.onChange((value) => __async(this, null, function* () {
        this.plugin.settings.adaptiveRatio = value;
        new import_obsidian5.Notice(`Adaptive ratio: ${value}`);
        yield this.plugin.saveSettings();
      }));
      slider.setDynamicTooltip();
    });
    new import_obsidian5.Setting(containerEl).setName("Drag to resize images").setHeading();
    new import_obsidian5.Setting(containerEl).setName("Drag to resize images").setDesc("Turn on to enable drag to resize images.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.dragResize).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.dragResize = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian5.Setting(containerEl).setName("Resize interval").setDesc("\u62D6\u62FD\u8C03\u8282\u6700\u5C0F\u523B\u5EA6\uFF08\u9ED8\u8BA4\u503C\u4E3A 0 \u5373\u4E0D\u5BF9\u9F50\u523B\u5EA6\uFF09").addText((text) => {
      text.setValue(this.plugin.settings.resizeInterval.toString()).onChange((value) => __async(this, null, function* () {
        if (value === "") {
          this.plugin.settings.resizeInterval = 0;
          yield this.plugin.saveSettings();
        } else if (/^\d+$/.test(value) && Number(value) >= 0) {
          this.plugin.settings.resizeInterval = parseInt(value);
          yield this.plugin.saveSettings();
        } else {
          new import_obsidian5.Notice("\u8BF7\u8F93\u5165\u6B63\u6574\u6570");
          text.setValue(this.plugin.settings.resizeInterval.toString());
        }
      }));
    });
    new import_obsidian5.Setting(containerEl).setName("Debug").setHeading();
    new import_obsidian5.Setting(containerEl).setName("Debug mode").setDesc("Print debug information in console").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.debug).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.debug = value;
        setDebug(value);
        yield this.plugin.saveSettings();
      }));
    });
  }
};

// src/utils/handlerEvent.ts
var getMouseEventTarget = (event) => {
  event.preventDefault();
  const target = event.target;
  return target;
};

// src/modals/deletionPrompt.ts
var import_obsidian6 = require("obsidian");
var DeleteAllLogsModal = class extends import_obsidian6.Modal {
  constructor(note, myPlugin) {
    super(app);
    this.note = note;
    this.myPlugin = myPlugin;
  }
  getLog() {
    const referenceMessage = `Are you sure you want to delete "${this.note.basename}.md"?

It will be moved to your ${this.myPlugin.settings.deleteOption}.`;
    return referenceMessage;
  }
  showLogs() {
    const logs = this.contentEl.createEl("div");
    logs.addClass("attachment-flow-log");
    logs.setText(this.getLog());
  }
  onOpen() {
    const { contentEl } = this;
    const myModal = this;
    const headerWrapper = contentEl.createEl("div");
    headerWrapper.addClass("attachment-flow-center-wrapper");
    this.showLogs();
    const referencedMessageWrapper = contentEl.createEl("span");
    referencedMessageWrapper.style.color = "red";
    const referencedMessage = `There are(is) currently  [${getRefencedLinkCount()}]  non-multi-referenced link(s) pointing to this note.`;
    referencedMessageWrapper.append(referencedMessage);
    const buttonWrapper = this.contentEl.createEl("div");
    buttonWrapper.addClass("attachment-flow-center-wrapper");
    const headerEl = headerWrapper.createEl("h1", {
      text: "Delete the file and its all attachments - logs "
    });
    headerEl.addClass("modal-title");
    this.showConfirmButton(buttonWrapper, myModal);
    this.showCancelBtn(buttonWrapper, myModal);
  }
  showCancelBtn(buttonWrapper, myModal) {
    const closeButton = buttonWrapper.createEl("button", {
      text: "Cancel"
    });
    closeButton.setAttribute("aria-label", "Cancel the operation");
    closeButton.addEventListener("click", () => {
      myModal.close();
    });
  }
  showConfirmButton(buttonWrapper, myModal) {
    const removeLinkButton = buttonWrapper.createEl("button", {
      text: "Confirm"
    });
    removeLinkButton.setAttribute("aria-label", "Continue to delete current file and its all non-multi-referenced attachments");
    removeLinkButton.addClass("mod-warning");
    removeLinkButton.addEventListener("click", () => __async(this, null, function* () {
      deleteFile(this.note, this.myPlugin);
      deleteAllAttachs(this.myPlugin);
      myModal.close();
    }));
  }
};

// src/helpers.ts
var loadImageBlobTimeout = 3e3;
function withTimeout(ms, promise) {
  const timeout = new Promise((resolve, reject) => {
    const id = setTimeout(() => {
      clearTimeout(id);
      reject(`timed out after ${ms} ms`);
    }, ms);
  });
  return Promise.race([
    promise,
    timeout
  ]);
}
function loadImageBlob(imgSrc, retryCount = 0) {
  return __async(this, null, function* () {
    const loadImageBlobCore = () => {
      return new Promise((resolve, reject) => {
        const image = new Image();
        image.crossOrigin = "anonymous";
        image.onload = () => {
          const canvas = document.createElement("canvas");
          canvas.width = image.width;
          canvas.height = image.height;
          const ctx = canvas.getContext("2d");
          ctx.drawImage(image, 0, 0);
          canvas.toBlob((blob) => {
            resolve(blob);
          });
        };
        image.onerror = () => __async(this, null, function* () {
          if (retryCount < 3) {
            try {
              yield fetch(image.src, { "mode": "no-cors" });
              const blob = yield loadImageBlob(`https://api.allorigins.win/raw?url=${encodeURIComponent(imgSrc)}`, retryCount + 1);
              resolve(blob);
            } catch (e) {
              reject();
            }
          } else {
            reject(new Error("Unable to retrieve the image data after 3 retries."));
          }
        });
        image.src = imgSrc;
      });
    };
    return withTimeout(loadImageBlobTimeout, loadImageBlobCore());
  });
}
function onElement(el, event, selector, listener, options) {
  el.on(event, selector, listener, options);
  return () => el.off(event, selector, listener, options);
}

// src/main.ts
var AttachFlowPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.updateImageLinkWithNewSize = (img, target_pos, newWidth, newHeight) => {
      var _a;
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
      const inTable = img.closest("table") != null;
      const inCallout = img.closest(".callout") != null;
      const isExcalidraw = img.classList.contains("excalidraw-embedded-img");
      if (activeView) {
        print("update new Width", newWidth);
        let imageName = img.getAttribute("src");
        if (imageName == null ? void 0 : imageName.startsWith("http")) {
          updateExternalLink(activeView, img, target_pos, newWidth, newHeight, inTable, inCallout);
        } else if (isExcalidraw) {
          let target_name = img.getAttribute("filesource");
          let draw_base_name = getExcalidrawBaseName(img);
          img.style.maxWidth = "none";
          updateInternalLink(activeView, img, target_pos, draw_base_name, newWidth, newHeight, inTable, inCallout);
        } else {
          imageName = (_a = img.closest(".internal-embed")) == null ? void 0 : _a.getAttribute("src");
          updateInternalLink(activeView, img, target_pos, imageName, newWidth, newHeight, inTable, inCallout);
        }
      }
    };
    this.addMenuExtendedSourceMode = (menu, FileBaseName, currentMd, target_type, target_pos, inTable, inCallout) => {
      this.addMenuExtendedPreviewMode(menu, FileBaseName, currentMd);
      menu.addItem((item) => item.setIcon("pencil").setTitle("Rename").onClick(() => __async(this, null, function* () {
        try {
          print("test rename");
          handlerRenameFile(FileBaseName, currentMd, this);
        } catch (e) {
          new import_obsidian7.Notice("Error, could not rename the file!");
        }
      })));
      if (this.settings.moveFileMenu) {
        menu.addItem((item) => item.setIcon("folder-tree").setTitle("Move file to...").onClick(() => __async(this, null, function* () {
          try {
            handlerMoveFile(FileBaseName, currentMd, this);
          } catch (e) {
            new import_obsidian7.Notice("Error, could not Move the file!");
          }
        })));
      }
      menu.addItem((item) => item.setIcon("trash-2").setTitle("Clear file and associated link").onClick(() => __async(this, null, function* () {
        try {
          handlerDelFileNew(FileBaseName, currentMd, this, target_type, target_pos, inTable, inCallout);
        } catch (e) {
          new import_obsidian7.Notice("Error, could not clear the file!");
        }
      })));
    };
    this.addMenuExtendedPreviewMode = (menu, FileBaseName, currentMd) => {
      const file = getFileByBaseName(currentMd, FileBaseName);
      if (process.platform != "linux") {
        menu.addItem((item) => item.setIcon("copy").setTitle("Copy file to clipboard").onClick(() => __async(this, null, function* () {
          try {
            handlerCopyFile(FileBaseName, currentMd, this);
          } catch (e) {
            new import_obsidian7.Notice("Error, could not copy the file!");
          }
        })));
      }
      menu.addItem((item) => item.setIcon("arrow-up-right").setTitle("Open in default app").onClick(() => this.app.openWithDefaultApp(file.path)));
      menu.addItem((item) => item.setIcon("arrow-up-right").setTitle(import_obsidian7.Platform.isMacOS ? "Reveal in finder" : "Show in system explorer").onClick(() => {
        this.app.showInFolder(file.path);
      }));
      menu.addItem((item) => item.setIcon("folder").setTitle("Reveal file in navigation").onClick(() => {
        const abstractFilePath = this.app.vault.getAbstractFileByPath(file.path);
        this.app.internalPlugins.getEnabledPluginById("file-explorer").revealInFolder(abstractFilePath);
      }));
    };
    this.addExternalImageMenuPreviewMode = (menu, img) => {
      menu.addItem((item) => item.setIcon("copy").setTitle("Copy image to clipboard").onClick(() => __async(this, null, function* () {
        try {
          const blob = yield loadImageBlob(img.src);
          yield navigator.clipboard.write([new ClipboardItem({ "image/png": blob })]);
          new import_obsidian7.Notice("Image copied to clipboard");
        } catch (error) {
          new import_obsidian7.Notice("Failed to copy image!");
        }
      })));
      menu.addItem((item) => item.setIcon("link").setTitle("Copy image link").onClick(() => __async(this, null, function* () {
        navigator.clipboard.writeText(img.src);
      })));
      menu.addItem((item) => item.setIcon("link").setTitle("Copy markdown link").onClick(() => __async(this, null, function* () {
        navigator.clipboard.writeText(`![](${img.src})`);
      })));
      menu.addItem((item) => item.setIcon("external-link").setTitle("Open in external browser").onClick(() => __async(this, null, function* () {
        window.open(img.src, "_blank");
      })));
    };
    this.addExternalImageMenuSourceMode = (menu, img, inTable, inCallout) => {
      this.addExternalImageMenuPreviewMode(menu, img);
      menu.addItem((item) => item.setIcon("trash-2").setTitle("Clear image link").onClick(() => {
        var _a;
        const editor = (_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.editor;
        const editorView = editor.cm;
        const target_pos = editorView.posAtDOM(img);
        deleteCurTargetLink(img.src, this, "img", target_pos, inTable, inCallout);
      }));
    };
  }
  onload() {
    return __async(this, null, function* () {
      console.log("AttachFlow plugin loaded...");
      this.edgeSize = 20;
      this.addSettingTab(new AttachFlowSettingsTab(this.app, this));
      yield this.loadSettings();
      this.registerDocument(document);
      app.workspace.on("window-open", (workspaceWindow, window2) => {
        this.registerDocument(window2.document);
      });
      this.registerEvent(this.app.workspace.on("file-menu", (menu, file) => {
        if (file instanceof import_obsidian7.TFile) {
          if (!file.path.endsWith(".md"))
            return;
          const addMenuItem = (item) => {
            item.setTitle("Delete file and its attachments").setIcon("trash-2").setSection("danger");
            item.onClick(() => __async(this, null, function* () {
              const modal = new DeleteAllLogsModal(file, this);
              modal.open();
            }));
          };
          menu.addItem(addMenuItem);
        }
      }));
      addCommand(this);
      this.registerDomEvent(document, "click", (evt) => __async(this, null, function* () {
        if (!this.settings.clickView)
          return;
        const target = evt.target;
        if (target.tagName !== "IMG") {
          this.removeZoomedImage();
          return;
        }
        const rect = target.getBoundingClientRect();
        const imageCenter = rect.left + rect.width / 2;
        if (evt.clientX <= imageCenter || document.getElementById("af-zoomed-image"))
          return;
        evt.preventDefault();
        const mask = createZoomMask();
        const { zoomedImage, originalWidth, originalHeight } = yield createZoomedImage(target.src, this.settings.adaptiveRatio);
        const scaleDiv = createZoomScaleDiv(zoomedImage, originalWidth, originalHeight);
        zoomedImage.addEventListener("wheel", (e) => handleZoomMouseWheel(e, zoomedImage, originalWidth, originalHeight, scaleDiv));
        zoomedImage.addEventListener("contextmenu", (e) => handleZoomContextMenu(e, zoomedImage, originalWidth, originalHeight, scaleDiv));
        zoomedImage.addEventListener("mousedown", (e) => handleZoomDragStart(e, zoomedImage));
        zoomedImage.addEventListener("dblclick", (e) => {
          adaptivelyDisplayImage(zoomedImage, originalWidth, originalHeight, this.settings.adaptiveRatio);
          updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight);
        });
      }));
      this.registerDomEvent(document, "keydown", (evt) => {
        if (evt.key === "Escape") {
          this.removeZoomedImage();
        }
      });
      setDebug(this.settings.debug);
    });
  }
  onunload() {
    console.log("AttachFlow plugin unloaded...");
  }
  removeZoomedImage() {
    if (document.getElementById("af-zoomed-image")) {
      const zoomedImage = document.getElementById("af-zoomed-image");
      if (zoomedImage)
        document.body.removeChild(zoomedImage);
      const scaleDiv = document.getElementById("af-scale-div");
      if (scaleDiv)
        document.body.removeChild(scaleDiv);
      const mask = document.getElementById("af-mask");
      if (mask)
        document.body.removeChild(mask);
    }
  }
  registerDocument(document2) {
    this.register(onElement(document2, "contextmenu", "img, iframe, video, div.file-embed-title, audio", this.onRightClickMenu.bind(this)));
    this.register(onElement(document2, "mousedown", "img", (event) => {
      var _a, _b;
      if (!this.settings.dragResize)
        return;
      const currentMd = app.workspace.getActiveFile();
      if (currentMd.name.endsWith(".canvas"))
        return;
      const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
      if (inPreview)
        return;
      if (event.button === 0) {
        event.preventDefault();
      }
      const img = event.target;
      if (img.id == "af-zoomed-image")
        return;
      const editor = (_b = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _b.editor;
      const editorView = editor.cm;
      const target_pos = editorView.posAtDOM(img);
      let target_line = editorView.state.doc.lineAt(target_pos);
      const inTable = img.closest("table") != null;
      const inCallout = img.closest(".callout") != null;
      const isExcalidraw = img.classList.contains("excalidraw-embedded-img");
      print("InTable", inTable);
      print("Target Element", img);
      let preventEvent = function(event2) {
        event2.preventDefault();
        event2.stopPropagation();
      };
      const rect = img.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;
      const edgeSize = this.edgeSize;
      if (x < edgeSize || y < edgeSize || x > rect.width - edgeSize || y > rect.height - edgeSize) {
        const startX = event.clientX;
        const startY = event.clientY;
        const startWidth = img.clientWidth;
        const startHeight = img.clientHeight;
        let lastUpdateX = startX;
        let lastUpdateY = startY;
        let lastUpdate = 1;
        let updatedWidth = startWidth;
        let lastMoveTime = Date.now();
        const onMouseMove = (event2) => {
          img.addEventListener("click", preventEvent);
          const currentX = event2.clientX;
          lastUpdate = currentX - lastUpdateX == 0 ? lastUpdate : currentX - lastUpdateX;
          let newWidth = startWidth + (currentX - startX);
          const aspectRatio = startWidth / startHeight;
          newWidth = Math.max(newWidth, 100);
          let newHeight = newWidth / aspectRatio;
          newWidth = Math.round(newWidth);
          newHeight = Math.round(newHeight);
          updatedWidth = newWidth;
          if (img instanceof HTMLImageElement) {
            img.classList.add("image-in-drag-resize");
            img.style.width = `${newWidth}px`;
          }
          const now = Date.now();
          if (now - lastMoveTime < 100)
            return;
          lastMoveTime = now;
          this.updateImageLinkWithNewSize(img, target_pos, newWidth, newHeight);
          lastUpdateX = event2.clientX;
          lastUpdateY = event2.clientY;
        };
        const allowOtherEvent = () => {
          img.removeEventListener("click", preventEvent);
        };
        const onMouseUp = (event2) => {
          setTimeout(allowOtherEvent, 100);
          event2.preventDefault();
          img.classList.remove("image-in-drag-resize");
          document2.removeEventListener("mousemove", onMouseMove);
          document2.removeEventListener("mouseup", onMouseUp);
          if (this.settings.resizeInterval > 1) {
            let resize_interval = this.settings.resizeInterval;
            let width_offset = lastUpdate > 0 ? resize_interval : 0;
            if (updatedWidth % resize_interval != 0) {
              updatedWidth = Math.floor(updatedWidth / resize_interval) * resize_interval + width_offset;
            }
            img.style.width = `${updatedWidth}px`;
            this.updateImageLinkWithNewSize(img, target_pos, updatedWidth, 0);
          }
        };
        document2.addEventListener("mousemove", onMouseMove);
        document2.addEventListener("mouseup", onMouseUp);
      }
    }));
    this.register(onElement(document2, "mouseover", "img", (event) => {
      var _a;
      const currentMd = app.workspace.getActiveFile();
      if (currentMd.name.endsWith(".canvas"))
        return;
      const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
      const img = event.target;
      const rect = img.getBoundingClientRect();
      const edgeSize = this.edgeSize;
      if (img.id == "af-zoomed-image")
        return;
      const isExcalidraw = img.classList.contains("excalidraw-embedded-img");
      let lastMove = 0;
      const mouseOverHandler = (event2) => {
        if (event2.buttons != 0)
          return;
        if (!this.settings.dragResize)
          return;
        const now = Date.now();
        if (now - lastMove < 100)
          return;
        lastMove = now;
        const x = event2.clientX - rect.left;
        const y = event2.clientY - rect.top;
        if (x >= rect.width - edgeSize || x <= edgeSize || (y >= rect.height - edgeSize || y <= edgeSize)) {
          if (this.settings.dragResize && !inPreview) {
            img.classList.remove("image-ready-click-view");
            img.classList.add("image-ready-resize");
          } else if (inPreview && this.settings.clickView && x > rect.width / 2) {
            img.classList.add("image-ready-click-view");
            img.classList.remove("image-ready-resize");
          }
        } else if (x > rect.width / 2 && this.settings.clickView) {
          img.classList.add("image-ready-click-view");
          img.classList.remove("image-ready-resize");
        } else {
          img.classList.remove("image-ready-click-view", "image-ready-resize");
        }
      };
      this.registerDomEvent(img, "mousemove", mouseOverHandler);
    }));
    this.register(onElement(document2, "mouseout", "img", (event) => {
      var _a;
      if (!this.settings.dragResize)
        return;
      const currentMd = app.workspace.getActiveFile();
      if (currentMd.name.endsWith(".canvas"))
        return;
      const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
      if (event.buttons != 0)
        return;
      const img = event.target;
      if (this.settings.clickView || this.settings.dragResize) {
        img.classList.remove("image-ready-click-view", "image-ready-resize");
      }
    }));
    this.register(onElement(document2, "mousedown", "img", this.externalImageContextMenuCall.bind(this)));
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  registerEscapeButton(menu, document2 = activeDocument) {
    menu.register(onElement(document2, "keydown", "*", (e) => {
      if (e.key === "Escape") {
        e.preventDefault();
        e.stopPropagation();
        menu.hide();
      }
    }));
  }
  externalImageContextMenuCall(event) {
    var _a, _b, _c;
    const img = event.target;
    const inTable = img.closest("table") != null;
    const inCallout = img.closest(".callout") != null;
    if (img.id == "af-zoomed-image")
      return;
    if (!img.src.startsWith("http"))
      return;
    if (event.button != 2)
      return;
    event.preventDefault();
    (_b = (_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.editor) == null ? void 0 : _b.blur();
    img.classList.remove("image-ready-click-view", "image-ready-resize");
    const menu = new import_obsidian7.Menu();
    const inPreview = ((_c = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _c.getMode()) == "preview";
    if (inPreview) {
      this.addExternalImageMenuPreviewMode(menu, img);
    } else {
      this.addExternalImageMenuSourceMode(menu, img, inTable, inCallout);
    }
    this.registerEscapeButton(menu);
    let offset = 0;
    if (!inPreview && (inTable || inCallout))
      offset = -138;
    menu.showAtPosition({ x: event.pageX, y: event.pageY + offset });
    this.app.workspace.trigger("AttachFlow:contextmenu", menu);
  }
  onRightClickMenu(event) {
    var _a, _b, _c, _d, _e;
    const target = getMouseEventTarget(event);
    const curTargetType = target.localName;
    if (target.id == "af-zoomed-image")
      return;
    const currentMd = app.workspace.getActiveFile();
    const inCanvas = currentMd.name.endsWith(".canvas");
    const SupportedTargetType = ["img", "iframe", "video", "div", "audio"];
    const menu = new import_obsidian7.Menu();
    if (!SupportedTargetType.includes(curTargetType))
      return;
    const inTable = target.closest("table") != null;
    const inCallout = target.closest(".callout") != null;
    const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
    const isExcalidraw = target.classList.contains("excalidraw-embedded-img");
    let target_name = target.getAttribute("src");
    if (target_name && target_name.startsWith("http"))
      return;
    if (inCanvas) {
      if ((_b = target.parentElement) == null ? void 0 : _b.classList.contains("canvas-node-content"))
        return;
      let file_name = (_c = target.parentElement) == null ? void 0 : _c.getAttribute("src");
      return;
    }
    target.classList.remove("image-ready-click-view", "image-ready-resize");
    if (isExcalidraw) {
      target_name = getExcalidrawBaseName(target);
      target_name = target_name.replace(/^(\.\.\/)+/g, "");
    } else {
      target_name = (_d = target.closest(".internal-embed")) == null ? void 0 : _d.getAttribute("src");
      target_name = target_name.replace(/^(\.\.\/)+/g, "");
      let pdf_match = target_name.match(/.*\.pdf/);
      target_name = pdf_match ? pdf_match[0] : target_name;
      if (curTargetType == "img" && pdf_match)
        return;
    }
    if (inPreview) {
      if (SupportedTargetType.includes(curTargetType)) {
        this.addMenuExtendedPreviewMode(menu, target_name, currentMd);
      }
    } else {
      const editor = (_e = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _e.editor;
      const editorView = editor.cm;
      const target_pos = editorView.posAtDOM(target);
      let target_line = editorView.state.doc.lineAt(target_pos);
      print("target line information: line-content, line-number(1-based), target.ch");
      print(target_line.text, target_line.number, target_pos - target_line.from);
      if (SupportedTargetType.includes(curTargetType)) {
        this.addMenuExtendedSourceMode(menu, target_name, currentMd, curTargetType, target_pos, inTable, inCallout);
      }
    }
    this.registerEscapeButton(menu);
    let offset = -163;
    let linux_offset = -138;
    offset = process.platform == "linux" ? linux_offset : offset;
    if (this.settings.moveFileMenu)
      offset -= 25;
    if (inTable && !inPreview) {
      menu.showAtPosition({ x: event.pageX, y: event.pageY + offset });
    } else {
      menu.showAtPosition({ x: event.pageX, y: event.pageY });
    }
    this.app.workspace.trigger("AttachFlow:contextmenu", menu);
  }
};
function updateInternalLink(activeView, target, target_pos, imageName, newWidth, newHeight, inTable, inCallout) {
  const editor = activeView.editor;
  const editorView = editor.cm;
  let target_line = editorView.state.doc.lineAt(target_pos);
  if (!inCallout && !inTable) {
    let matched = matchLineWithInternalLink(target_line.text, imageName, newWidth, inTable);
    if (matched.length == 1) {
      editorView.dispatch({
        changes: {
          from: target_line.from + matched[0].from_ch,
          to: target_line.from + matched[0].to_ch,
          insert: matched[0].new_link
        }
      });
    } else if (matched.length == 0) {
    } else {
      new import_obsidian7.Notice("Find multiple same image-link in line, please zoom manually!");
    }
    return;
  }
  let startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  let mode = inTable ? "table" : "callout";
  print("mode", mode);
  const start_reg = startReg[mode];
  let start_line_number = target_line.number;
  let matched_results = [];
  let matched_lines = [];
  for (let i = start_line_number; i <= editor.lineCount(); i++) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithInternalLink(line.text, imageName, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  for (let i = start_line_number - 1; i >= 1; i--) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithInternalLink(line.text, imageName, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  if (matched_results.length == 1) {
    let target_line2 = editorView.state.doc.line(matched_lines[0]);
    if (mode == "table") {
      let old_text = target_line2.text;
      let new_line_text = old_text.substring(0, matched_results[0].from_ch) + matched_results[0].new_link + old_text.substring(matched_results[0].to_ch);
      editorView.dispatch({
        changes: {
          from: target_line2.from,
          to: target_line2.from + old_text.length,
          insert: new_line_text
        }
      });
    } else {
      editorView.dispatch({
        changes: {
          from: target_line2.from + matched_results[0].from_ch,
          to: target_line2.from + matched_results[0].to_ch,
          insert: matched_results[0].new_link
        }
      });
    }
  } else if (matched_results.length == 0) {
    new import_obsidian7.Notice(`Fail to find current image-link in ${mode}, please zoom manually!`);
  } else {
    new import_obsidian7.Notice(`Find multiple same image-link in ${mode}, please zoom manually!`);
  }
  return;
}
function updateExternalLink(activeView, target, target_pos, newWidth, newHeight, inTable, inCallout) {
  const editor = activeView.editor;
  const editorView = editor.cm;
  let target_line = editorView.state.doc.lineAt(target_pos);
  const link = target.getAttribute("src");
  const altText = target.getAttribute("alt");
  if (!inCallout && !inTable) {
    let matched = matchLineWithExternalLink(target_line.text, link, altText, newWidth, inTable);
    if (matched.length == 1) {
      editorView.dispatch({
        changes: {
          from: target_line.from + matched[0].from_ch,
          to: target_line.from + matched[0].to_ch,
          insert: matched[0].new_link
        }
      });
    } else if (matched.length == 0) {
    } else {
      new import_obsidian7.Notice("Find multiple same image-link in line, please zoom manually!");
    }
    return;
  }
  let startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  let mode = inTable ? "table" : "callout";
  print("mode", mode);
  const start_reg = startReg[mode];
  let start_line_number = target_line.number;
  let matched_results = [];
  let matched_lines = [];
  for (let i = start_line_number; i <= editor.lineCount(); i++) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithExternalLink(line.text, link, altText, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  for (let i = start_line_number - 1; i >= 1; i--) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithExternalLink(line.text, link, altText, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  print(matched_results);
  print(matched_lines);
  if (matched_results.length == 1) {
    let target_line2 = editorView.state.doc.line(matched_lines[0]);
    if (mode == "table") {
      let old_text = target_line2.text;
      let new_line_text = old_text.substring(0, matched_results[0].from_ch) + matched_results[0].new_link + old_text.substring(matched_results[0].to_ch);
      editorView.dispatch({
        changes: {
          from: target_line2.from,
          to: target_line2.from + old_text.length,
          insert: new_line_text
        }
      });
    } else {
      editorView.dispatch({
        changes: {
          from: target_line2.from + matched_results[0].from_ch,
          to: target_line2.from + matched_results[0].to_ch,
          insert: matched_results[0].new_link
        }
      });
    }
  } else if (matched_results.length == 0) {
    new import_obsidian7.Notice(`Fail to find current image-link in ${mode}, please zoom manually!`);
  } else {
    new import_obsidian7.Notice(`Find multiple same image-link in ${mode}, please zoom manually!`);
  }
  return;
}
function matchLineWithInternalLink(line_text, target_name, new_width, intable) {
  let regWikiLink = /\!\[\[[^\[\]]*?\]\]/g;
  let regMdLink = /\!\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  const target_name_mdlink = target_name.replace(/ /g, "%20");
  if (!line_text.includes(target_name) && !line_text.includes(target_name_mdlink))
    return [];
  let result = [];
  while (true) {
    let wiki_match = regWikiLink.exec(line_text);
    if (!wiki_match)
      break;
    const matched_link = wiki_match[0];
    if (matched_link.includes(target_name)) {
      let normal_link = intable ? matched_link.replace(/\\\|/g, "|") : matched_link;
      let link_match = normal_link.match(/!\[\[(.*?)(\||\]\])/);
      let link_text = link_match ? link_match[1] : "";
      let alt_match = matched_link.match(/!\[\[.*?(\|(.*?))\]\]/);
      let alt_text = alt_match ? alt_match[1] : "";
      let alt_text_list = alt_text.split("|");
      let alt_text_wo_size = "";
      let new_alt_text = "";
      for (let alt of alt_text_list) {
        if (!/^\d+$/.test(alt) && !/^\s*$/.test(alt)) {
          alt_text_wo_size = alt_text_wo_size + "|" + alt;
        }
      }
      new_alt_text = new_width != 0 ? `${alt_text_wo_size}|${new_width}` : alt_text_wo_size;
      new_alt_text = intable ? new_alt_text.replace(/\|/g, "\\|") : new_alt_text;
      let newWikiLink = link_match ? `![[${link_text}${new_alt_text}]]` : `![[${target_name}${new_alt_text}]]`;
      result.push({
        old_link: matched_link,
        new_link: newWikiLink,
        from_ch: wiki_match.index,
        to_ch: wiki_match.index + matched_link.length
      });
    }
  }
  while (true) {
    let match = regMdLink.exec(line_text);
    if (!match)
      break;
    const matched_link = match[0];
    if (matched_link.includes(target_name_mdlink)) {
      let alt_text_match = matched_link.match(/\[.*?\]/g);
      let alt_text = alt_text_match[0].substring(1, alt_text_match[0].length - 1);
      let pure_alt = alt_text.replace(/\|\d+(\|\d+)?$/g, "");
      if (intable) {
        pure_alt = alt_text.replace(/\\\|\d+(\|\d+)?$/g, "");
      }
      let link_text = matched_link.substring(alt_text_match[0].length + 2, matched_link.length - 1);
      let newMDLink = intable ? `![${pure_alt}\\|${new_width}](${link_text})` : `![${pure_alt}|${new_width}](${link_text})`;
      if (/^\d*$/.test(alt_text)) {
        newMDLink = `![${new_width}](${link_text})`;
      }
      result.push({
        old_link: matched_link,
        new_link: newMDLink,
        from_ch: match.index,
        to_ch: match.index + matched_link.length
      });
    }
  }
  print("Line Text: ", line_text);
  print("MatchedInfo:", result);
  return result;
}
function matchLineWithExternalLink(line_text, link, alt_text, new_width, intable) {
  let result = [];
  let regMdLink = /\!\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  if (!line_text.includes(link))
    return [];
  while (true) {
    let match = regMdLink.exec(line_text);
    if (!match)
      break;
    let matched_link = match[0];
    if (matched_link.includes(link)) {
      let alt_text_match = matched_link.match(/\[.*?\]/g);
      let alt_text2 = alt_text_match[0].substring(1, alt_text_match[0].length - 1);
      let pure_alt = alt_text2.replace(/\|\d+(\|\d+)?$/g, "");
      if (intable) {
        pure_alt = alt_text2.replace(/\\\|\d+(\|\d+)?$/g, "");
      }
      if (/^\d*$/.test(alt_text2)) {
        pure_alt = "";
      }
      let link_text = matched_link.substring(alt_text_match[0].length + 2, matched_link.length - 1);
      let newExternalLink = intable ? `![${pure_alt}\\|${new_width}](${link_text})` : `![${pure_alt}|${new_width}](${link_text})`;
      result.push({
        old_link: matched_link,
        new_link: newExternalLink,
        from_ch: match.index,
        to_ch: match.index + matched_link.length
      });
    }
  }
  print("Line Text: ", line_text);
  print("MatchedInfo:", result);
  return result;
}
function createZoomMask() {
  const mask = document.createElement("div");
  mask.id = "af-mask";
  mask.style.position = "fixed";
  mask.style.top = "0";
  mask.style.left = "0";
  mask.style.width = "100%";
  mask.style.height = "100%";
  mask.style.background = "rgba(0, 0, 0, 0.5)";
  mask.style.zIndex = "9998";
  document.body.appendChild(mask);
  return mask;
}
function createZoomedImage(src, adaptive_ratio) {
  return __async(this, null, function* () {
    const zoomedImage = document.createElement("img");
    zoomedImage.id = "af-zoomed-image";
    zoomedImage.src = src;
    zoomedImage.style.position = "fixed";
    zoomedImage.style.zIndex = "9999";
    zoomedImage.style.top = "50%";
    zoomedImage.style.left = "50%";
    zoomedImage.style.transform = "translate(-50%, -50%)";
    document.body.appendChild(zoomedImage);
    let originalWidth = zoomedImage.naturalWidth;
    let originalHeight = zoomedImage.naturalHeight;
    adaptivelyDisplayImage(zoomedImage, originalWidth, originalHeight, adaptive_ratio);
    return {
      zoomedImage,
      originalWidth,
      originalHeight
    };
  });
}
function createZoomScaleDiv(zoomedImage, originalWidth, originalHeight) {
  const scaleDiv = document.createElement("div");
  scaleDiv.id = "af-scale-div";
  scaleDiv.classList.add("af-scale-div");
  scaleDiv.style.zIndex = "10000";
  updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight);
  document.body.appendChild(scaleDiv);
  return scaleDiv;
}
function updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight) {
  const width = zoomedImage.offsetWidth;
  const height = zoomedImage.offsetHeight;
  let scalePercent = width / originalWidth * 100;
  scaleDiv.innerText = `${width}\xD7${height} (${scalePercent.toFixed(1)}%)`;
}
function handleZoomMouseWheel(e, zoomedImage, originalWidth, originalHeight, scaleDiv) {
  e.preventDefault();
  const mouseX = e.clientX;
  const mouseY = e.clientY;
  const scale = e.deltaY > 0 ? 0.95 : 1.05;
  const newWidth = scale * zoomedImage.offsetWidth;
  const newHeight = scale * zoomedImage.offsetHeight;
  const newLeft = mouseX - (mouseX - zoomedImage.offsetLeft) * scale;
  const newTop = mouseY - (mouseY - zoomedImage.offsetTop) * scale;
  zoomedImage.style.width = `${newWidth}px`;
  zoomedImage.style.height = `${newHeight}px`;
  zoomedImage.style.left = `${newLeft}px`;
  zoomedImage.style.top = `${newTop}px`;
  updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight);
}
function handleZoomContextMenu(e, zoomedImage, originalWidth, originalHeight, scaleDiv) {
  e.preventDefault();
  zoomedImage.style.width = `${originalWidth}px`;
  zoomedImage.style.height = `${originalHeight}px`;
  zoomedImage.style.left = `50%`;
  zoomedImage.style.top = `50%`;
  updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight);
}
function adaptivelyDisplayImage(zoomedImage, originalWidth, originalHeight, adaptive_ratio) {
  zoomedImage.style.left = `50%`;
  zoomedImage.style.top = `50%`;
  let screenRatio = adaptive_ratio;
  let screenWidth = window.innerWidth;
  let screenHeight = window.innerHeight;
  if (originalWidth > screenWidth || originalHeight > screenHeight) {
    if (originalWidth / screenWidth > originalHeight / screenHeight) {
      zoomedImage.style.width = `${screenWidth * screenRatio}px`;
      zoomedImage.style.height = "auto";
    } else {
      zoomedImage.style.height = `${screenHeight * screenRatio}px`;
      zoomedImage.style.width = "auto";
    }
  } else {
    zoomedImage.style.width = `${originalWidth}px`;
    zoomedImage.style.height = `${originalHeight}px`;
  }
}
function handleZoomDragStart(e, zoomedImage) {
  e.preventDefault();
  let clickX = e.clientX;
  let clickY = e.clientY;
  const updatePosition = (moveEvt) => {
    let moveX = moveEvt.clientX - clickX;
    let moveY = moveEvt.clientY - clickY;
    zoomedImage.style.left = `${zoomedImage.offsetLeft + moveX}px`;
    zoomedImage.style.top = `${zoomedImage.offsetTop + moveY}px`;
    clickX = moveEvt.clientX;
    clickY = moveEvt.clientY;
  };
  document.addEventListener("mousemove", updatePosition);
  document.addEventListener("mouseup", function listener() {
    document.removeEventListener("mousemove", updatePosition);
    document.removeEventListener("mouseup", listener);
  }, { once: true });
}
function getExcalidrawBaseName(target) {
  let target_name = target.getAttribute("filesource");
  let file_base_name = target_name;
  if (file_base_name.includes("/")) {
    let temp_arr = file_base_name.split("/");
    file_base_name = temp_arr[temp_arr.length - 1];
  } else if (file_base_name.includes("\\")) {
    let temp_arr = file_base_name.split("\\");
    file_base_name = temp_arr[temp_arr.length - 1];
  }
  file_base_name = file_base_name.endsWith(".md") ? file_base_name.substring(0, file_base_name.length - 3) : file_base_name;
  return file_base_name;
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL29wdGlvbnMvZGVsZWxlQWxsQXR0YWNoc0luVGhlTm90ZS50cyIsICJzcmMvdXRpbC50cyIsICJzcmMvdXRpbHMvZGVsZXRlRmlsZS50cyIsICJzcmMvY29uZmlnL2FkZENvbW1hbmQtY29uZmlnLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvdXRpbHMvaGFuZGxlckV2ZW50LnRzIiwgInNyYy9tb2RhbHMvZGVsZXRpb25Qcm9tcHQudHMiLCAic3JjL2hlbHBlcnMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IE1lbnUsIE1lbnVJdGVtLCBOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIE1hcmtkb3duVmlldywgUGxhdGZvcm0sIEVkaXRvciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgYWRkQ29tbWFuZCB9IGZyb20gXCIuL2NvbmZpZy9hZGRDb21tYW5kLWNvbmZpZ1wiO1xuaW1wb3J0IHsgQXR0YWNoRmxvd1NldHRpbmdzVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IEF0dGFjaEZsb3dTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgKiBhcyBVdGlsIGZyb20gXCIuL3V0aWxcIjtcbmltcG9ydCB7IHByaW50LCBzZXREZWJ1ZywgZGVsZXRlQ3VyVGFyZ2V0TGluayB9IGZyb20gJy4vdXRpbCdcbmltcG9ydCB7IGdldE1vdXNlRXZlbnRUYXJnZXQgfSBmcm9tIFwiLi91dGlscy9oYW5kbGVyRXZlbnRcIjtcbmltcG9ydCB7IERlbGV0ZUFsbExvZ3NNb2RhbCB9IGZyb20gXCIuL21vZGFscy9kZWxldGlvblByb21wdFwiO1xuaW1wb3J0IHsgRWRpdG9yVmlldywga2V5bWFwLCBWaWV3VXBkYXRlIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQge1xuXHRFbGVjdHJvbldpbmRvdywgRmlsZVN5c3RlbUFkYXB0ZXJXaXRoSW50ZXJuYWxBcGksXG5cdGxvYWRJbWFnZUJsb2IsIEFwcFdpdGhEZXNrdG9wSW50ZXJuYWxBcGksIEVkaXRvckludGVybmFsQXBpLCBvbkVsZW1lbnRcbn0gZnJvbSBcIi4vaGVscGVyc1wiXG5cbmludGVyZmFjZSBNYXRjaGVkTGlua0luTGluZSB7XG5cdG9sZF9saW5rOiBzdHJpbmcsXG5cdG5ld19saW5rOiBzdHJpbmcsXG5cdGZyb21fY2g6IG51bWJlcixcblx0dG9fY2g6IG51bWJlclxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdHRhY2hGbG93UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IEF0dGFjaEZsb3dTZXR0aW5ncztcblx0ZWRnZVNpemU6IG51bWJlcjtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJBdHRhY2hGbG93IHBsdWdpbiBsb2FkZWQuLi5cIik7XG5cdFx0dGhpcy5lZGdlU2l6ZSA9IDIwO1xuXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBBdHRhY2hGbG93U2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5yZWdpc3RlckRvY3VtZW50KGRvY3VtZW50KTtcblx0XHRhcHAud29ya3NwYWNlLm9uKFwid2luZG93LW9wZW5cIiwgKHdvcmtzcGFjZVdpbmRvdywgd2luZG93KSA9PiB7XG5cdFx0XHR0aGlzLnJlZ2lzdGVyRG9jdW1lbnQod2luZG93LmRvY3VtZW50KTtcblx0XHR9KTtcblx0XHQvLyBhZGQgY29udGV4dG1lbnUgb24gZmlsZSBjb250ZXh0XG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1tZW51XCIsIChtZW51LCBmaWxlKSA9PiB7XG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0XHRpZiAoIWZpbGUucGF0aC5lbmRzV2l0aChcIi5tZFwiKSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGFkZE1lbnVJdGVtID0gKGl0ZW06IE1lbnVJdGVtKSA9PiB7XG5cdFx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKFwiRGVsZXRlIGZpbGUgYW5kIGl0cyBhdHRhY2htZW50c1wiKVxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbihcInRyYXNoLTJcIilcblx0XHRcdFx0XHRcdFx0LnNldFNlY3Rpb24oXCJkYW5nZXJcIik7XG5cdFx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBEZWxldGVBbGxMb2dzTW9kYWwoZmlsZSwgdGhpcyk7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0bWVudS5hZGRJdGVtKGFkZE1lbnVJdGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpO1xuXHRcdC8vIHJlZ2lzdGVyIGFsbCBjb21tYW5kcyBpbiBhZGRDb21tYW5kIGZ1bmN0aW9uXG5cdFx0YWRkQ29tbWFuZCh0aGlzKTtcblxuXHRcdC8vIFx1NEUzQlx1NTkwNFx1NzQwNlx1NTFGRFx1NjU3MFxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgYXN5bmMgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmNsaWNrVmlldykgcmV0dXJuO1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGlmICh0YXJnZXQudGFnTmFtZSAhPT0gJ0lNRycpIHtcblx0XHRcdFx0dGhpcy5yZW1vdmVab29tZWRJbWFnZSgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb25zdCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0Y29uc3QgaW1hZ2VDZW50ZXIgPSByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMjtcblx0XHRcdGlmIChldnQuY2xpZW50WCA8PSBpbWFnZUNlbnRlciB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWYtem9vbWVkLWltYWdlJykpIHJldHVybjtcblx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y29uc3QgbWFzayA9IGNyZWF0ZVpvb21NYXNrKCk7XG5cdFx0XHRjb25zdCB7IHpvb21lZEltYWdlLCBvcmlnaW5hbFdpZHRoLCBvcmlnaW5hbEhlaWdodCB9ID0gYXdhaXQgY3JlYXRlWm9vbWVkSW1hZ2UoKHRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zcmMsIHRoaXMuc2V0dGluZ3MuYWRhcHRpdmVSYXRpbyk7XG5cdFx0XHRjb25zdCBzY2FsZURpdiA9IGNyZWF0ZVpvb21TY2FsZURpdih6b29tZWRJbWFnZSwgb3JpZ2luYWxXaWR0aCwgb3JpZ2luYWxIZWlnaHQpO1xuXHRcdFx0em9vbWVkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZSkgPT4gaGFuZGxlWm9vbU1vdXNlV2hlZWwoZSwgem9vbWVkSW1hZ2UsIG9yaWdpbmFsV2lkdGgsIG9yaWdpbmFsSGVpZ2h0LCBzY2FsZURpdikpO1xuXHRcdFx0em9vbWVkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4gaGFuZGxlWm9vbUNvbnRleHRNZW51KGUsIHpvb21lZEltYWdlLCBvcmlnaW5hbFdpZHRoLCBvcmlnaW5hbEhlaWdodCwgc2NhbGVEaXYpKTtcblx0XHRcdHpvb21lZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiBoYW5kbGVab29tRHJhZ1N0YXJ0KGUsIHpvb21lZEltYWdlKSk7XG5cdFx0XHR6b29tZWRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdGFkYXB0aXZlbHlEaXNwbGF5SW1hZ2Uoem9vbWVkSW1hZ2UsIG9yaWdpbmFsV2lkdGgsIG9yaWdpbmFsSGVpZ2h0LCB0aGlzLnNldHRpbmdzLmFkYXB0aXZlUmF0aW8pO1xuXHRcdFx0XHR1cGRhdGVab29tU2NhbGVEaXYoc2NhbGVEaXYsIHpvb21lZEltYWdlLCBvcmlnaW5hbFdpZHRoLCBvcmlnaW5hbEhlaWdodCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleWRvd24nLCAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcblx0XHRcdFx0dGhpcy5yZW1vdmVab29tZWRJbWFnZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0c2V0RGVidWcodGhpcy5zZXR0aW5ncy5kZWJ1Zyk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHRjb25zb2xlLmxvZyhcIkF0dGFjaEZsb3cgcGx1Z2luIHVubG9hZGVkLi4uXCIpO1xuXHR9XG5cblx0cmVtb3ZlWm9vbWVkSW1hZ2UoKSB7XG5cdFx0aWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZi16b29tZWQtaW1hZ2UnKSkge1xuXHRcdFx0Y29uc3Qgem9vbWVkSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWYtem9vbWVkLWltYWdlJyk7XG5cdFx0XHRpZiAoem9vbWVkSW1hZ2UpIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoem9vbWVkSW1hZ2UpO1xuXHRcdFx0Y29uc3Qgc2NhbGVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWYtc2NhbGUtZGl2Jyk7XG5cdFx0XHRpZiAoc2NhbGVEaXYpIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NhbGVEaXYpO1xuXHRcdFx0Y29uc3QgbWFzayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZi1tYXNrJyk7XG5cdFx0XHRpZiAobWFzaykgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtYXNrKTtcblx0XHR9XG5cdH1cblxuXHRyZWdpc3RlckRvY3VtZW50KGRvY3VtZW50OiBEb2N1bWVudCkge1xuXHRcdHRoaXMucmVnaXN0ZXIoXG5cdFx0XHRvbkVsZW1lbnQoXG5cdFx0XHRcdGRvY3VtZW50LFxuXHRcdFx0XHRcImNvbnRleHRtZW51XCIgYXMga2V5b2YgSFRNTEVsZW1lbnRFdmVudE1hcCxcblx0XHRcdFx0XCJpbWcsIGlmcmFtZSwgdmlkZW8sIGRpdi5maWxlLWVtYmVkLXRpdGxlLCBhdWRpb1wiLFxuXHRcdFx0XHR0aGlzLm9uUmlnaHRDbGlja01lbnUuYmluZCh0aGlzKVxuXHRcdFx0KVxuXHRcdCk7XG5cblx0XHQvLyBcdTRFRTVcdTRFMEJcdTRFMDlcdTRFMkFcdTRFOEJcdTRFRjZcdTY2MkZcdTRFM0FcdTRFODZcdTVCOUVcdTczQjBcdTYyRDZcdTYyRkRcdTY1MzlcdTUzRDhcdTU2RkVcdTcyNDdcdTU5MjdcdTVDMEZcdTc2ODRcdTUyOUZcdTgwRkRcdUZGMENcdTRGRUVcdTY1MzlcdTgxRUEgaHR0cHM6Ly9naXRodWIuY29tL3hSeXVsL29ic2lkaWFuLWltYWdlLWNvbnZlcnRlclxuXHRcdC8vIFx1OTY0NFx1NEUwQVx1NTE3NiBNSVQgTGljZW5zZVxuXHRcdC8vIE1JVCBMaWNlbnNlXG5cdFx0Ly8gQ29weXJpZ2h0IChjKSAyMDIzIHhSeXVsXG5cdFx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuXHRcdC8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcblx0XHQvLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG5cdFx0Ly8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuXHRcdC8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuXHRcdC8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblx0XHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcblx0XHQvLyBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5cdFx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuXHRcdC8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuXHRcdC8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuXHRcdC8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcblx0XHQvLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuXHRcdC8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG5cdFx0Ly8gU09GVFdBUkUuXG5cblx0XHR0aGlzLnJlZ2lzdGVyKFxuXHRcdFx0b25FbGVtZW50KFxuXHRcdFx0XHRkb2N1bWVudCxcblx0XHRcdFx0XCJtb3VzZWRvd25cIixcblx0XHRcdFx0XCJpbWdcIixcblx0XHRcdFx0KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmRyYWdSZXNpemUpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50TWQgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSBhcyBURmlsZTtcblx0XHRcdFx0XHRpZiAoY3VycmVudE1kLm5hbWUuZW5kc1dpdGgoJy5jYW52YXMnKSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGluUHJldmlldzogYm9vbGVhbiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmdldE1vZGUoKSA9PSBcInByZXZpZXdcIjtcblx0XHRcdFx0XHRpZiAoaW5QcmV2aWV3KSByZXR1cm47XG5cblx0XHRcdFx0XHRpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBpbWcgPSBldmVudC50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudDtcblx0XHRcdFx0XHRpZiAoaW1nLmlkID09ICdhZi16b29tZWQtaW1hZ2UnKSByZXR1cm47XG5cblx0XHRcdFx0XHRjb25zdCBlZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3I7XG5cdFx0XHRcdFx0Ly8gIEB0cy1leHBlY3QtZXJyb3IsIG5vdCB0eXBlZFxuXHRcdFx0XHRcdGNvbnN0IGVkaXRvclZpZXcgPSBlZGl0b3IuY20gYXMgRWRpdG9yVmlldztcblx0XHRcdFx0XHRjb25zdCB0YXJnZXRfcG9zID0gZWRpdG9yVmlldy5wb3NBdERPTShpbWcpO1xuXHRcdFx0XHRcdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0YXJnZXRfcG9zKTtcblxuXHRcdFx0XHRcdGNvbnN0IGluVGFibGU6IGJvb2xlYW4gPSBpbWcuY2xvc2VzdCgndGFibGUnKSAhPSBudWxsO1xuXHRcdFx0XHRcdGNvbnN0IGluQ2FsbG91dDogYm9vbGVhbiA9IGltZy5jbG9zZXN0KCcuY2FsbG91dCcpICE9IG51bGw7XG5cdFx0XHRcdFx0Y29uc3QgaXNFeGNhbGlkcmF3ID0gaW1nLmNsYXNzTGlzdC5jb250YWlucygnZXhjYWxpZHJhdy1lbWJlZGRlZC1pbWcnKTtcblx0XHRcdFx0XHRwcmludCgnSW5UYWJsZScsIGluVGFibGUpXG5cdFx0XHRcdFx0cHJpbnQoJ1RhcmdldCBFbGVtZW50JywgaW1nKVxuXG5cdFx0XHRcdFx0Ly8gcHJpbnQoXCJpbWcucGFyZW50XCIsIGltZy5wYXJlbnRFbGVtZW50P2ltZy5wYXJlbnRFbGVtZW50OidOVUxMJylcblxuXHRcdFx0XHRcdC8vIFx1NUI5QVx1NEU0OVx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNlx1NTFGRFx1NjU3MFxuXHRcdFx0XHRcdGxldCBwcmV2ZW50RXZlbnQgPSBmdW5jdGlvbihldmVudDogTW91c2VFdmVudCkge1xuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRjb25zdCByZWN0ID0gaW1nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0XHRcdGNvbnN0IHggPSBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0O1xuXHRcdFx0XHRcdGNvbnN0IHkgPSBldmVudC5jbGllbnRZIC0gcmVjdC50b3A7XG5cdFx0XHRcdFx0Y29uc3QgZWRnZVNpemUgPSB0aGlzLmVkZ2VTaXplOyAvLyBzaXplIG9mIHRoZSBlZGdlIGluIHBpeGVsc1xuXHRcdFx0XHRcdGlmICh4IDwgZWRnZVNpemUgfHwgeSA8IGVkZ2VTaXplIHx8IHggPiByZWN0LndpZHRoIC0gZWRnZVNpemUgfHwgeSA+IHJlY3QuaGVpZ2h0IC0gZWRnZVNpemUpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHN0YXJ0WCA9IGV2ZW50LmNsaWVudFg7XG5cdFx0XHRcdFx0XHRjb25zdCBzdGFydFkgPSBldmVudC5jbGllbnRZO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RhcnRXaWR0aCA9IGltZy5jbGllbnRXaWR0aDtcblx0XHRcdFx0XHRcdGNvbnN0IHN0YXJ0SGVpZ2h0ID0gaW1nLmNsaWVudEhlaWdodDtcblx0XHRcdFx0XHRcdGxldCBsYXN0VXBkYXRlWCA9IHN0YXJ0WDtcblx0XHRcdFx0XHRcdGxldCBsYXN0VXBkYXRlWSA9IHN0YXJ0WTtcblxuXHRcdFx0XHRcdFx0bGV0IGxhc3RVcGRhdGUgPSAxO1xuXHRcdFx0XHRcdFx0bGV0IHVwZGF0ZWRXaWR0aCA9IHN0YXJ0V2lkdGg7XG5cdFx0XHRcdFx0XHRsZXQgbGFzdE1vdmVUaW1lID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0XHRcdGNvbnN0IG9uTW91c2VNb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vIHRoaXMuQWxsb3dab29tID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdGltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHByZXZlbnRFdmVudCk7XG5cdFx0XHRcdFx0XHRcdC8vIGltZy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBwcmV2ZW50RXZlbnQpO1xuXHRcdFx0XHRcdFx0XHQvLyBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBwcmV2ZW50RXZlbnQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBjdXJyZW50WCA9IGV2ZW50LmNsaWVudFg7XG5cdFx0XHRcdFx0XHRcdGxhc3RVcGRhdGUgPSBjdXJyZW50WCAtIGxhc3RVcGRhdGVYID09IDA/bGFzdFVwZGF0ZTpjdXJyZW50WCAtIGxhc3RVcGRhdGVYO1xuXHRcdFx0XHRcdFx0XHQvLyBwcmludCgnbGFzdFVwZGF0ZScsIGxhc3RVcGRhdGUpXG5cdFx0XHRcdFx0XHRcdGxldCBuZXdXaWR0aCA9IHN0YXJ0V2lkdGggKyAoY3VycmVudFggLSBzdGFydFgpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBhc3BlY3RSYXRpbyA9IHN0YXJ0V2lkdGggLyBzdGFydEhlaWdodDtcblxuXHRcdFx0XHRcdFx0XHQvLyBFbnN1cmUgdGhlIGltYWdlIGRvZXNuJ3QgZ2V0IHRvbyBzbWFsbFxuXHRcdFx0XHRcdFx0XHRuZXdXaWR0aCA9IE1hdGgubWF4KG5ld1dpZHRoLCAxMDApO1xuXG5cdFx0XHRcdFx0XHRcdGxldCBuZXdIZWlnaHQgPSBuZXdXaWR0aCAvIGFzcGVjdFJhdGlvO1xuXHRcdFx0XHRcdFx0XHQvLyBSb3VuZCB0aGUgdmFsdWVzIHRvIHRoZSBuZWFyZXN0IHdob2xlIG51bWJlclxuXHRcdFx0XHRcdFx0XHRuZXdXaWR0aCA9IE1hdGgucm91bmQobmV3V2lkdGgpO1xuXHRcdFx0XHRcdFx0XHRuZXdIZWlnaHQgPSBNYXRoLnJvdW5kKG5ld0hlaWdodCk7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRXaWR0aCA9IG5ld1dpZHRoO1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFwcGx5IHRoZSBuZXcgZGltZW5zaW9ucyB0byB0aGUgaW1hZ2Ugb3IgdmlkZW9cblx0XHRcdFx0XHRcdFx0aWYgKGltZyBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRpbWcuY2xhc3NMaXN0LmFkZCgnaW1hZ2UtaW4tZHJhZy1yZXNpemUnKVxuXHRcdFx0XHRcdFx0XHRcdGltZy5zdHlsZS53aWR0aCA9IGAke25ld1dpZHRofXB4YDtcblx0XHRcdFx0XHRcdFx0XHQvLyBpbWcuc3R5bGUuaGVpZ2h0ID0gYCR7bmV3SGVpZ2h0fXB4YDtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRcdFx0XHRcdGlmIChub3cgLSBsYXN0TW92ZVRpbWUgPCAxMDApIHJldHVybjsgLy8gT25seSBleGVjdXRlIG9uY2UgZXZlcnkgMTAwbXNcblx0XHRcdFx0XHRcdFx0bGFzdE1vdmVUaW1lID0gbm93O1xuXHRcdFx0XHRcdFx0XHQvLyB1cGRhdGUgaW1hZ2UgbGlua1xuXHRcdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZUltYWdlTGlua1dpdGhOZXdTaXplKGltZywgdGFyZ2V0X3BvcywgbmV3V2lkdGgsIG5ld0hlaWdodCk7XG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgbGFzdCB1cGRhdGUgY29vcmRpbmF0ZXNcblx0XHRcdFx0XHRcdFx0bGFzdFVwZGF0ZVggPSBldmVudC5jbGllbnRYO1xuXHRcdFx0XHRcdFx0XHRsYXN0VXBkYXRlWSA9IGV2ZW50LmNsaWVudFk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvbnN0IGFsbG93T3RoZXJFdmVudCA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0aW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJldmVudEV2ZW50KTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Y29uc3Qgb25Nb3VzZVVwID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoYWxsb3dPdGhlckV2ZW50LCAxMDApO1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHRcdFx0XHRcdGltZy5jbGFzc0xpc3QucmVtb3ZlKCdpbWFnZS1pbi1kcmFnLXJlc2l6ZScsIClcblx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbk1vdXNlTW92ZSk7XG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG9uTW91c2VVcCk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gXHU5MDc1XHU1RkFBXHU2NzAwXHU1QzBGXHU1MjNCXHU1RUE2XG5cdFx0XHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnJlc2l6ZUludGVydmFsID4gMSkge1xuXHRcdFx0XHRcdFx0XHRcdGxldCByZXNpemVfaW50ZXJ2YWwgPSB0aGlzLnNldHRpbmdzLnJlc2l6ZUludGVydmFsO1xuXHRcdFx0XHRcdFx0XHRcdGxldCB3aWR0aF9vZmZzZXQgPSBsYXN0VXBkYXRlPjA/cmVzaXplX2ludGVydmFsOjA7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHVwZGF0ZWRXaWR0aCVyZXNpemVfaW50ZXJ2YWwhPTApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHVwZGF0ZWRXaWR0aCA9IE1hdGguZmxvb3IodXBkYXRlZFdpZHRoL3Jlc2l6ZV9pbnRlcnZhbCkqcmVzaXplX2ludGVydmFsK3dpZHRoX29mZnNldDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLndpZHRoID0gYCR7dXBkYXRlZFdpZHRofXB4YDtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZUltYWdlTGlua1dpdGhOZXdTaXplKGltZywgdGFyZ2V0X3BvcywgdXBkYXRlZFdpZHRoLCAwKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uTW91c2VNb3ZlKTtcblx0XHRcdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG9uTW91c2VVcCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHQpXG5cdFx0KVxuXHRcdHRoaXMucmVnaXN0ZXIoXG5cdFx0XHRvbkVsZW1lbnQoXG5cdFx0XHRcdGRvY3VtZW50LFxuXHRcdFx0XHRcIm1vdXNlb3ZlclwiLFxuXHRcdFx0XHRcImltZ1wiLFxuXHRcdFx0XHQoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50TWQgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSBhcyBURmlsZTtcblx0XHRcdFx0XHRpZiAoY3VycmVudE1kLm5hbWUuZW5kc1dpdGgoJy5jYW52YXMnKSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGluUHJldmlldzogYm9vbGVhbiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmdldE1vZGUoKSA9PSBcInByZXZpZXdcIjtcblx0XHRcdFx0XHQvLyBpZiAoaW5QcmV2aWV3KSByZXR1cm47XG5cblx0XHRcdFx0XHRjb25zdCBpbWcgPSBldmVudC50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudCB8IEhUTUxWaWRlb0VsZW1lbnQ7XG5cdFx0XHRcdFx0Y29uc3QgcmVjdCA9IGltZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgLy8gQ2FjaGUgdGhpc1xuXHRcdFx0XHRcdGNvbnN0IGVkZ2VTaXplID0gdGhpcy5lZGdlU2l6ZTsgLy8gc2l6ZSBvZiB0aGUgZWRnZSBpbiBwaXhlbHNcblxuXHRcdFx0XHRcdGlmIChpbWcuaWQgPT0gJ2FmLXpvb21lZC1pbWFnZScpIHJldHVybjtcblxuXHRcdFx0XHRcdGNvbnN0IGlzRXhjYWxpZHJhdyA9IGltZy5jbGFzc0xpc3QuY29udGFpbnMoJ2V4Y2FsaWRyYXctZW1iZWRkZWQtaW1nJyk7XG5cblx0XHRcdFx0XHQvLyBUaHJvdHRsZSBtb3VzZW1vdmUgZXZlbnRzXG5cdFx0XHRcdFx0bGV0IGxhc3RNb3ZlID0gMDtcblx0XHRcdFx0XHRjb25zdCBtb3VzZU92ZXJIYW5kbGVyID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZXZlbnQuYnV0dG9ucyAhPSAwKSByZXR1cm47XG5cdFx0XHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZHJhZ1Jlc2l6ZSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0XHRcdGlmIChub3cgLSBsYXN0TW92ZSA8IDEwMCkgcmV0dXJuOyAvLyBPbmx5IGV4ZWN1dGUgb25jZSBldmVyeSAxMDBtc1xuXHRcdFx0XHRcdFx0bGFzdE1vdmUgPSBub3c7XG5cblx0XHRcdFx0XHRcdGNvbnN0IHggPSBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0O1xuXHRcdFx0XHRcdFx0Y29uc3QgeSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcDtcblxuXHRcdFx0XHRcdFx0aWYgKCh4ID49IHJlY3Qud2lkdGggLSBlZGdlU2l6ZSB8fCB4IDw9IGVkZ2VTaXplKSB8fCAoeSA+PSByZWN0LmhlaWdodCAtIGVkZ2VTaXplIHx8IHkgPD0gZWRnZVNpemUpKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmRyYWdSZXNpemUgJiYgIWluUHJldmlldyl7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLmNsYXNzTGlzdC5yZW1vdmUoJ2ltYWdlLXJlYWR5LWNsaWNrLXZpZXcnKVxuXHRcdFx0XHRcdFx0XHRcdGltZy5jbGFzc0xpc3QuYWRkKCdpbWFnZS1yZWFkeS1yZXNpemUnKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChpblByZXZpZXcgJiYgdGhpcy5zZXR0aW5ncy5jbGlja1ZpZXcgJiYgeCA+IHJlY3Qud2lkdGggLyAyKSB7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLmNsYXNzTGlzdC5hZGQoJ2ltYWdlLXJlYWR5LWNsaWNrLXZpZXcnKVxuXHRcdFx0XHRcdFx0XHRcdGltZy5jbGFzc0xpc3QucmVtb3ZlKCdpbWFnZS1yZWFkeS1yZXNpemUnKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoeCA+IHJlY3Qud2lkdGggLyAyICYmIHRoaXMuc2V0dGluZ3MuY2xpY2tWaWV3KSB7XG5cdFx0XHRcdFx0XHRcdGltZy5jbGFzc0xpc3QuYWRkKCdpbWFnZS1yZWFkeS1jbGljay12aWV3Jylcblx0XHRcdFx0XHRcdFx0aW1nLmNsYXNzTGlzdC5yZW1vdmUoJ2ltYWdlLXJlYWR5LXJlc2l6ZScpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRcdFx0aW1nLmNsYXNzTGlzdC5yZW1vdmUoJ2ltYWdlLXJlYWR5LWNsaWNrLXZpZXcnLCAnaW1hZ2UtcmVhZHktcmVzaXplJylcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChpbWcsICdtb3VzZW1vdmUnLCBtb3VzZU92ZXJIYW5kbGVyKTtcblx0XHRcdFx0fVxuXHRcdFx0KVxuXHRcdCk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyKFxuXHRcdFx0b25FbGVtZW50KFxuXHRcdFx0XHRkb2N1bWVudCxcblx0XHRcdFx0XCJtb3VzZW91dFwiLFxuXHRcdFx0XHRcImltZ1wiLFxuXHRcdFx0XHQoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZHJhZ1Jlc2l6ZSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRNZCA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpIGFzIFRGaWxlO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50TWQubmFtZS5lbmRzV2l0aCgnLmNhbnZhcycpKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3QgaW5QcmV2aWV3OiBib29sZWFuID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZ2V0TW9kZSgpID09IFwicHJldmlld1wiO1xuXHRcdFx0XHRcdGlmIChldmVudC5idXR0b25zICE9IDApIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBpbWcgPSBldmVudC50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudCB8IEhUTUxWaWRlb0VsZW1lbnQ7XG5cblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5jbGlja1ZpZXcgfHwgdGhpcy5zZXR0aW5ncy5kcmFnUmVzaXplKXtcblx0XHRcdFx0XHRcdGltZy5jbGFzc0xpc3QucmVtb3ZlKCdpbWFnZS1yZWFkeS1jbGljay12aWV3JywgJ2ltYWdlLXJlYWR5LXJlc2l6ZScpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHQpXG5cdFx0KTtcblxuXHRcdC8vIFx1NjIxMVx1NUI5RVx1NzNCMFx1NzY4NFx1NTkxNlx1OTBFOFx1OTRGRVx1NjNBNVx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVxuXHRcdC8vIFx1NTE3M1x1OTUyRVx1NTcyOFx1NEU4RSBlZGl0b3IuYmx1cigpXHVGRjBDXHU4RkQ5XHU2ODM3XHU1M0VGXHU0RUU1XHU4QkE5IE9ic2lkaWFuIFx1NTkzMVx1NTNCQlx1NzEyNlx1NzBCOVx1RkYwQ1x1NEVDRVx1ODAwQ1x1NEUwRFx1NEYxQVx1ODlFNlx1NTNEMSBPYnNpZGlhbiBcdTc2ODRcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcblx0XHR0aGlzLnJlZ2lzdGVyKFxuXHRcdFx0b25FbGVtZW50KFxuXHRcdFx0XHRkb2N1bWVudCxcblx0XHRcdFx0XCJtb3VzZWRvd25cIixcblx0XHRcdFx0XCJpbWdcIixcblx0XHRcdFx0dGhpcy5leHRlcm5hbEltYWdlQ29udGV4dE1lbnVDYWxsLmJpbmQodGhpcylcblx0XHRcdClcblx0XHQpO1xuXHRcdFxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKFxuXHRcdFx0e30sXG5cdFx0XHRERUZBVUxUX1NFVFRJTkdTLFxuXHRcdFx0YXdhaXQgdGhpcy5sb2FkRGF0YSgpXG5cdFx0KTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cdHJlZ2lzdGVyRXNjYXBlQnV0dG9uKG1lbnU6IE1lbnUsIGRvY3VtZW50OiBEb2N1bWVudCA9IGFjdGl2ZURvY3VtZW50KSB7XG5cdFx0bWVudS5yZWdpc3Rlcihcblx0XHRcdG9uRWxlbWVudChcblx0XHRcdFx0ZG9jdW1lbnQsXG5cdFx0XHRcdFwia2V5ZG93blwiIGFzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXAsXG5cdFx0XHRcdFwiKlwiLFxuXHRcdFx0XHQoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdG1lbnUuaGlkZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0KVxuXHRcdCk7XG5cdH1cblxuXHR1cGRhdGVJbWFnZUxpbmtXaXRoTmV3U2l6ZSA9IChpbWc6IEhUTUxJbWFnZUVsZW1lbnQsIHRhcmdldF9wb3M6IG51bWJlciwgbmV3V2lkdGg6IG51bWJlciwgbmV3SGVpZ2h0OiBudW1iZXIpID0+IHtcblx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRjb25zdCBpblRhYmxlOiBib29sZWFuID0gaW1nLmNsb3Nlc3QoJ3RhYmxlJykgIT0gbnVsbDtcblx0XHRjb25zdCBpbkNhbGxvdXQ6IGJvb2xlYW4gPSBpbWcuY2xvc2VzdCgnLmNhbGxvdXQnKSAhPSBudWxsO1xuXHRcdGNvbnN0IGlzRXhjYWxpZHJhdyA9IGltZy5jbGFzc0xpc3QuY29udGFpbnMoJ2V4Y2FsaWRyYXctZW1iZWRkZWQtaW1nJyk7XG5cdFx0aWYgKGFjdGl2ZVZpZXcpIHtcblx0XHRcdHByaW50KFwidXBkYXRlIG5ldyBXaWR0aFwiLCBuZXdXaWR0aCk7XG5cdFx0XHRsZXQgaW1hZ2VOYW1lID0gaW1nLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG5cdFx0XHRpZiAoaW1hZ2VOYW1lPy5zdGFydHNXaXRoKCdodHRwJykpIHtcblx0XHRcdFx0dXBkYXRlRXh0ZXJuYWxMaW5rKGFjdGl2ZVZpZXcsIGltZywgdGFyZ2V0X3BvcywgbmV3V2lkdGgsIG5ld0hlaWdodCwgaW5UYWJsZSwgaW5DYWxsb3V0KTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGlzRXhjYWxpZHJhdykge1xuXHRcdFx0XHRsZXQgdGFyZ2V0X25hbWUgPSBpbWcuZ2V0QXR0cmlidXRlKCdmaWxlc291cmNlJykgYXMgc3RyaW5nO1xuXHRcdFx0XHRsZXQgZHJhd19iYXNlX25hbWUgPSBnZXRFeGNhbGlkcmF3QmFzZU5hbWUoaW1nIGFzIEhUTUxJbWFnZUVsZW1lbnQpO1xuXHRcdFx0XHRpbWcuc3R5bGUubWF4V2lkdGggPSAnbm9uZSc7XG5cdFx0XHRcdHVwZGF0ZUludGVybmFsTGluayhhY3RpdmVWaWV3LCBpbWcsIHRhcmdldF9wb3MsIGRyYXdfYmFzZV9uYW1lLCBuZXdXaWR0aCwgbmV3SGVpZ2h0LCBpblRhYmxlLCBpbkNhbGxvdXQpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGltYWdlTmFtZSA9IGltZy5jbG9zZXN0KCcuaW50ZXJuYWwtZW1iZWQnKT8uZ2V0QXR0cmlidXRlKCdzcmMnKSBhcyBzdHJpbmc7XG5cdFx0XHRcdHVwZGF0ZUludGVybmFsTGluayhhY3RpdmVWaWV3LCBpbWcsIHRhcmdldF9wb3MsIGltYWdlTmFtZSwgbmV3V2lkdGgsIG5ld0hlaWdodCwgaW5UYWJsZSwgaW5DYWxsb3V0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRleHRlcm5hbEltYWdlQ29udGV4dE1lbnVDYWxsKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG5cdFx0Y29uc3QgaW1nID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG5cdFx0Y29uc3QgaW5UYWJsZTogYm9vbGVhbiA9IGltZy5jbG9zZXN0KCd0YWJsZScpICE9IG51bGw7XG5cdFx0Y29uc3QgaW5DYWxsb3V0OiBib29sZWFuID0gaW1nLmNsb3Nlc3QoJy5jYWxsb3V0JykgIT0gbnVsbDtcblx0XHRpZiAoaW1nLmlkID09ICdhZi16b29tZWQtaW1hZ2UnKSByZXR1cm47XG5cdFx0aWYgKCFpbWcuc3JjLnN0YXJ0c1dpdGgoJ2h0dHAnKSkgcmV0dXJuO1xuXHRcdGlmIChldmVudC5idXR0b24gIT0gMikgcmV0dXJuO1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZWRpdG9yPy5ibHVyKCk7XG5cdFx0aW1nLmNsYXNzTGlzdC5yZW1vdmUoJ2ltYWdlLXJlYWR5LWNsaWNrLXZpZXcnLCAnaW1hZ2UtcmVhZHktcmVzaXplJyk7XG5cdFx0Y29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG5cdFx0Y29uc3QgaW5QcmV2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZ2V0TW9kZSgpID09IFwicHJldmlld1wiO1xuXHRcdGlmIChpblByZXZpZXcpIHtcblx0XHRcdHRoaXMuYWRkRXh0ZXJuYWxJbWFnZU1lbnVQcmV2aWV3TW9kZShtZW51LCBpbWcpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRoaXMuYWRkRXh0ZXJuYWxJbWFnZU1lbnVTb3VyY2VNb2RlKG1lbnUsIGltZywgaW5UYWJsZSwgaW5DYWxsb3V0KTtcblx0XHR9XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXNjYXBlQnV0dG9uKG1lbnUpO1xuXG5cdFx0bGV0IG9mZnNldCA9IDA7XG5cdFx0aWYgKCFpblByZXZpZXcgJiYgKGluVGFibGUgfHwgaW5DYWxsb3V0KSkgb2Zmc2V0ID0gLTEzODtcblx0XHRtZW51LnNob3dBdFBvc2l0aW9uKHsgeDogZXZlbnQucGFnZVgsIHk6IGV2ZW50LnBhZ2VZICsgb2Zmc2V0IH0pO1xuXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoXCJBdHRhY2hGbG93OmNvbnRleHRtZW51XCIsIG1lbnUpO1xuXHR9XG5cblxuXHQvKipcblx0ICogXHU4QkJFXHU3RjZFXHU4M0RDXHU1MzU1XHU2MzA5XHU5NEFFXHVGRjBDXHU1RTc2XHU4QkJFXHU3RjZFXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XG5cdCAqXG5cdCAqIEBwYXJhbSBtZW51XG5cdCAqIEBwYXJhbSBGaWxlQmFzZU5hbWVcblx0ICogQHBhcmFtIGN1cnJlbnRNZFxuXHQgKi9cblx0YWRkTWVudUV4dGVuZGVkU291cmNlTW9kZSA9IChtZW51OiBNZW51LCBGaWxlQmFzZU5hbWU6IHN0cmluZywgY3VycmVudE1kOiBURmlsZSwgdGFyZ2V0X3R5cGU6IHN0cmluZywgdGFyZ2V0X3BvczogbnVtYmVyLCBpblRhYmxlOiBib29sZWFuLCBpbkNhbGxvdXQ6IGJvb2xlYW4pID0+IHtcblx0XHR0aGlzLmFkZE1lbnVFeHRlbmRlZFByZXZpZXdNb2RlKG1lbnUsIEZpbGVCYXNlTmFtZSwgY3VycmVudE1kKTtcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxuXHRcdFx0aXRlbVxuXHRcdFx0XHQuc2V0SWNvbihcInBlbmNpbFwiKVxuXHRcdFx0XHQuc2V0VGl0bGUoXCJSZW5hbWVcIilcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRwcmludChcInRlc3QgcmVuYW1lXCIpXG5cdFx0XHRcdFx0XHRVdGlsLmhhbmRsZXJSZW5hbWVGaWxlKEZpbGVCYXNlTmFtZSwgY3VycmVudE1kLCB0aGlzKTtcblx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJFcnJvciwgY291bGQgbm90IHJlbmFtZSB0aGUgZmlsZSFcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdClcblxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1vdmVGaWxlTWVudSl7XG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxuXHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0LnNldEljb24oXCJmb2xkZXItdHJlZVwiKVxuXHRcdFx0XHRcdC5zZXRUaXRsZShcIk1vdmUgZmlsZSB0by4uLlwiKVxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFV0aWwuaGFuZGxlck1vdmVGaWxlKEZpbGVCYXNlTmFtZSwgY3VycmVudE1kLCB0aGlzKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRXJyb3IsIGNvdWxkIG5vdCBNb3ZlIHRoZSBmaWxlIVwiKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxuXHRcdFx0aXRlbVxuXHRcdFx0XHQuc2V0SWNvbihcInRyYXNoLTJcIilcblx0XHRcdFx0LnNldFRpdGxlKFwiQ2xlYXIgZmlsZSBhbmQgYXNzb2NpYXRlZCBsaW5rXCIpXG5cdFx0XHRcdC8vIC5zZXRTZWN0aW9uKFwiYXR0YWNoLWZsb3dcIilcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHQvLyBVdGlsLmhhbmRsZXJEZWxGaWxlKEZpbGVCYXNlTmFtZSwgY3VycmVudE1kLCB0aGlzKTtcblx0XHRcdFx0XHRcdFV0aWwuaGFuZGxlckRlbEZpbGVOZXcoRmlsZUJhc2VOYW1lLCBjdXJyZW50TWQsIHRoaXMsIHRhcmdldF90eXBlLCB0YXJnZXRfcG9zLCBpblRhYmxlLCBpbkNhbGxvdXQpO1xuXHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkVycm9yLCBjb3VsZCBub3QgY2xlYXIgdGhlIGZpbGUhXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHQpO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIFx1OEJCRVx1N0Y2RVx1ODNEQ1x1NTM1NVx1NjMwOVx1OTRBRVx1RkYwQ1x1NUU3Nlx1OEJCRVx1N0Y2RVx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxuXHQgKlxuXHQgKiBAcGFyYW0gbWVudVxuXHQgKiBAcGFyYW0gRmlsZUJhc2VOYW1lXG5cdCAqIEBwYXJhbSBjdXJyZW50TWRcblx0ICovXG5cdGFkZE1lbnVFeHRlbmRlZFByZXZpZXdNb2RlID0gKG1lbnU6IE1lbnUsIEZpbGVCYXNlTmFtZTogc3RyaW5nLCBjdXJyZW50TWQ6IFRGaWxlKSA9PiB7XG5cdFx0Y29uc3QgZmlsZSA9IFV0aWwuZ2V0RmlsZUJ5QmFzZU5hbWUoY3VycmVudE1kLCBGaWxlQmFzZU5hbWUpIGFzIFRGaWxlO1xuXHRcdC8vIGNvbnN0IGJhc2VQYXRoID0gKGZpbGUudmF1bHQuYWRhcHRlciBhcyBhbnkpLmJhc2VQYXRoO1xuXHRcdC8vIGNvbnN0IHJlbGF0aXZlRmlsZVBhdGggPSBmaWxlLnBhdGg7XG5cdFx0aWYgKHByb2Nlc3MucGxhdGZvcm0gIT0gJ2xpbnV4Jykge1xuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtOiBNZW51SXRlbSkgPT5cblx0XHRcdFx0aXRlbVxuXHRcdFx0XHRcdC5zZXRJY29uKFwiY29weVwiKVxuXHRcdFx0XHRcdC5zZXRUaXRsZShcIkNvcHkgZmlsZSB0byBjbGlwYm9hcmRcIilcblx0XHRcdFx0XHQvLyAuc2V0Q2hlY2tlZCh0cnVlKVxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFV0aWwuaGFuZGxlckNvcHlGaWxlKEZpbGVCYXNlTmFtZSwgY3VycmVudE1kLCB0aGlzKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRXJyb3IsIGNvdWxkIG5vdCBjb3B5IHRoZSBmaWxlIVwiKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PiBpdGVtXG5cdFx0XHQuc2V0SWNvbihcImFycm93LXVwLXJpZ2h0XCIpXG5cdFx0XHQuc2V0VGl0bGUoXCJPcGVuIGluIGRlZmF1bHQgYXBwXCIpXG5cdFx0XHQub25DbGljaygoKSA9PiAodGhpcy5hcHAgYXMgQXBwV2l0aERlc2t0b3BJbnRlcm5hbEFwaSkub3BlbldpdGhEZWZhdWx0QXBwKGZpbGUucGF0aCkpXG5cdFx0KTtcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PiBpdGVtXG5cdFx0XHQuc2V0SWNvbihcImFycm93LXVwLXJpZ2h0XCIpXG5cdFx0XHQuc2V0VGl0bGUoUGxhdGZvcm0uaXNNYWNPUyA/IFwiUmV2ZWFsIGluIGZpbmRlclwiIDogXCJTaG93IGluIHN5c3RlbSBleHBsb3JlclwiKVxuXHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHQodGhpcy5hcHAgYXMgQXBwV2l0aERlc2t0b3BJbnRlcm5hbEFwaSkuc2hvd0luRm9sZGVyKGZpbGUucGF0aCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0bWVudS5hZGRJdGVtKChpdGVtOiBNZW51SXRlbSkgPT4gaXRlbVxuXHRcdFx0LnNldEljb24oXCJmb2xkZXJcIilcblx0XHRcdC5zZXRUaXRsZShcIlJldmVhbCBmaWxlIGluIG5hdmlnYXRpb25cIilcblx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0Y29uc3QgYWJzdHJhY3RGaWxlUGF0aCA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlLnBhdGgpO1xuXHRcdFx0XHQodGhpcy5hcHAgYXMgYW55KS5pbnRlcm5hbFBsdWdpbnMuZ2V0RW5hYmxlZFBsdWdpbkJ5SWQoXCJmaWxlLWV4cGxvcmVyXCIpLnJldmVhbEluRm9sZGVyKGFic3RyYWN0RmlsZVBhdGgpO1xuXHRcdFx0fSlcblx0XHQpO1xuXHR9O1xuXG5cblx0YWRkRXh0ZXJuYWxJbWFnZU1lbnVQcmV2aWV3TW9kZSA9IChtZW51OiBNZW51LCBpbWc6IEhUTUxJbWFnZUVsZW1lbnQpID0+IHtcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxuXHRcdFx0aXRlbVxuXHRcdFx0XHQuc2V0SWNvbihcImNvcHlcIilcblx0XHRcdFx0LnNldFRpdGxlKFwiQ29weSBpbWFnZSB0byBjbGlwYm9hcmRcIilcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCBibG9iID0gYXdhaXQgbG9hZEltYWdlQmxvYihpbWcuc3JjKTtcblx0XHRcdFx0XHRcdGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGUoW25ldyBDbGlwYm9hcmRJdGVtKHsgXCJpbWFnZS9wbmdcIjogYmxvYiB9KV0pO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnSW1hZ2UgY29waWVkIHRvIGNsaXBib2FyZCcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBjb3B5IGltYWdlIScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0bWVudS5hZGRJdGVtKChpdGVtOiBNZW51SXRlbSkgPT5cblx0XHRcdGl0ZW1cblx0XHRcdFx0LnNldEljb24oXCJsaW5rXCIpXG5cdFx0XHRcdC5zZXRUaXRsZShcIkNvcHkgaW1hZ2UgbGlua1wiKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoaW1nLnNyYyk7XG5cdFx0XHRcdH0pXG5cdFx0KTtcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxuXHRcdFx0aXRlbVxuXHRcdFx0XHQuc2V0SWNvbihcImxpbmtcIilcblx0XHRcdFx0LnNldFRpdGxlKFwiQ29weSBtYXJrZG93biBsaW5rXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChgIVtdKCR7aW1nLnNyY30pYCk7XG5cdFx0XHRcdH0pXG5cdFx0KTtcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxuXHRcdFx0aXRlbVxuXHRcdFx0XHQuc2V0SWNvbihcImV4dGVybmFsLWxpbmtcIilcblx0XHRcdFx0LnNldFRpdGxlKFwiT3BlbiBpbiBleHRlcm5hbCBicm93c2VyXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR3aW5kb3cub3BlbihpbWcuc3JjLCAnX2JsYW5rJyk7XG5cdFx0XHRcdH0pXG5cdFx0KTtcblx0fVxuXG5cdGFkZEV4dGVybmFsSW1hZ2VNZW51U291cmNlTW9kZSA9IChtZW51OiBNZW51LCBpbWc6IEhUTUxJbWFnZUVsZW1lbnQsIGluVGFibGU6IGJvb2xlYW4sIGluQ2FsbG91dDogYm9vbGVhbikgPT4ge1xuXHRcdHRoaXMuYWRkRXh0ZXJuYWxJbWFnZU1lbnVQcmV2aWV3TW9kZShtZW51LCBpbWcpO1xuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XG5cdFx0XHRpdGVtXG5cdFx0XHRcdC5zZXRJY29uKFwidHJhc2gtMlwiKVxuXHRcdFx0XHQuc2V0VGl0bGUoXCJDbGVhciBpbWFnZSBsaW5rXCIpXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBlZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3I7XG5cdFx0XHRcdFx0Ly8gIEB0cy1leHBlY3QtZXJyb3IsIG5vdCB0eXBlZFxuXHRcdFx0XHRcdGNvbnN0IGVkaXRvclZpZXcgPSBlZGl0b3IuY20gYXMgRWRpdG9yVmlldztcblx0XHRcdFx0XHRjb25zdCB0YXJnZXRfcG9zID0gZWRpdG9yVmlldy5wb3NBdERPTShpbWcpO1xuXHRcdFx0XHRcdGRlbGV0ZUN1clRhcmdldExpbmsoaW1nLnNyYywgdGhpcywgJ2ltZycsIHRhcmdldF9wb3MsIGluVGFibGUsIGluQ2FsbG91dCk7XG5cdFx0XHRcdH0pXG5cdFx0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBcdTlGMjBcdTY4MDdcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcdTRFOEJcdTRFRjZcblx0ICovXG5cdG9uUmlnaHRDbGlja01lbnUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcblx0XHRjb25zdCB0YXJnZXQgPSBnZXRNb3VzZUV2ZW50VGFyZ2V0KGV2ZW50KTtcblx0XHRjb25zdCBjdXJUYXJnZXRUeXBlID0gdGFyZ2V0LmxvY2FsTmFtZTtcblx0XHRpZiAodGFyZ2V0LmlkID09ICdhZi16b29tZWQtaW1hZ2UnKSByZXR1cm47XG5cblx0XHRjb25zdCBjdXJyZW50TWQgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSBhcyBURmlsZTtcblx0XHRjb25zdCBpbkNhbnZhcyA9IGN1cnJlbnRNZC5uYW1lLmVuZHNXaXRoKCcuY2FudmFzJyk7XG5cdFx0Y29uc3QgU3VwcG9ydGVkVGFyZ2V0VHlwZSA9IFtcImltZ1wiLCBcImlmcmFtZVwiLCBcInZpZGVvXCIsIFwiZGl2XCIsIFwiYXVkaW9cIl07XG5cblx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuXHRcdGlmICghU3VwcG9ydGVkVGFyZ2V0VHlwZS5pbmNsdWRlcyhjdXJUYXJnZXRUeXBlKSkgcmV0dXJuO1xuXG5cdFx0Ly8gXHU1MjI0XHU2NUFEXHU1RjUzXHU1MjREXHU3MEI5XHU1MUZCXHU3Njg0XHU1NzMwXHU2NUI5XHU2NjJGXHU1NDI2XHU0RTNBXHU4ODY4XHU2ODNDXG5cdFx0Ly8gY29uc3QgaW5UYWJsZTpib29sZWFuID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ/LnBhcmVudEVsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnY2xhc3MnKT09J3RhYmxlLWNlbGwtd3JhcHBlcic7XG5cdFx0Y29uc3QgaW5UYWJsZTogYm9vbGVhbiA9IHRhcmdldC5jbG9zZXN0KCd0YWJsZScpICE9IG51bGw7XG5cdFx0Y29uc3QgaW5DYWxsb3V0OiBib29sZWFuID0gdGFyZ2V0LmNsb3Nlc3QoJy5jYWxsb3V0JykgIT0gbnVsbDtcblx0XHRjb25zdCBpblByZXZpZXc6IGJvb2xlYW4gPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5nZXRNb2RlKCkgPT0gXCJwcmV2aWV3XCI7XG5cdFx0Y29uc3QgaXNFeGNhbGlkcmF3OiBib29sZWFuID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZXhjYWxpZHJhdy1lbWJlZGRlZC1pbWcnKTtcblxuXHRcdGxldCB0YXJnZXRfbmFtZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgYXMgc3RyaW5nO1xuXHRcdC8vIFx1NUJGOVx1NEU4RSBDYWxsb3V0IFx1NTQ4QyBUYWJsZSBcdTRFMkRcdTc2ODRcdTdGNTFcdTdFRENcdTU2RkVcdTcyNDdcdUZGMENcdTZDQTFcdTY3MDlcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcblx0XHRpZiAodGFyZ2V0X25hbWUgJiYgdGFyZ2V0X25hbWUuc3RhcnRzV2l0aCgnaHR0cCcpKSByZXR1cm47XG5cblx0XHRpZiAoaW5DYW52YXMpIHtcblx0XHRcdC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NTZGRVx1NTBDRlx1ODI4Mlx1NzBCOVx1RkYwQ1x1OEZENFx1NTZERVxuXHRcdFx0aWYgKHRhcmdldC5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoJ2NhbnZhcy1ub2RlLWNvbnRlbnQnKSkgcmV0dXJuO1xuXHRcdFx0bGV0IGZpbGVfbmFtZSA9IHRhcmdldC5wYXJlbnRFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xuXHRcdFx0Ly8gcHJpbnQoXCJUYXJnZXQgTmFtZTpcIiwgZmlsZV9uYW1lKTtcblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdpbWFnZS1yZWFkeS1jbGljay12aWV3JywgJ2ltYWdlLXJlYWR5LXJlc2l6ZScpO1xuXG5cdFx0aWYgKGlzRXhjYWxpZHJhdykge1xuXHRcdFx0dGFyZ2V0X25hbWUgPSBnZXRFeGNhbGlkcmF3QmFzZU5hbWUodGFyZ2V0IGFzIEhUTUxJbWFnZUVsZW1lbnQpO1xuXHRcdFx0dGFyZ2V0X25hbWUgPSB0YXJnZXRfbmFtZS5yZXBsYWNlKC9eKFxcLlxcLlxcLykrL2csICcnKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0YXJnZXRfbmFtZSA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJuYWwtZW1iZWQnKT8uZ2V0QXR0cmlidXRlKFwic3JjXCIpIGFzIHN0cmluZztcblx0XHRcdC8vIFx1NTIyMFx1OTY2NCB0YXJnZXRfbmFtZSBcdTUzRUZcdTgwRkRcdTUyNERcdTdGMDBcdTc2ODRcdTU5MUFcdTRFMkEgJy4uLydcdUZGMENcdTY1MkZcdTYzMDFcdTk0RkVcdTYzQTVcdThERUZcdTVGODRcdTRFM0FcdTVGNTNcdTUyNERcdTdCMTRcdThCQjBcdTc2ODRcdTc2RjhcdTVCRjlcdThERUZcdTVGODRcblx0XHRcdHRhcmdldF9uYW1lID0gdGFyZ2V0X25hbWUucmVwbGFjZSgvXihcXC5cXC5cXC8pKy9nLCAnJyk7XG5cdFx0XHRsZXQgcGRmX21hdGNoID0gdGFyZ2V0X25hbWUubWF0Y2goLy4qXFwucGRmLyk7XG5cdFx0XHR0YXJnZXRfbmFtZSA9IHBkZl9tYXRjaCA/IHBkZl9tYXRjaFswXSA6IHRhcmdldF9uYW1lO1xuXHRcdFx0aWYgKGN1clRhcmdldFR5cGUgPT0gJ2ltZycgJiYgcGRmX21hdGNoKSByZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKGluUHJldmlldykge1xuXHRcdFx0aWYgKFN1cHBvcnRlZFRhcmdldFR5cGUuaW5jbHVkZXMoY3VyVGFyZ2V0VHlwZSkpIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJGaWxlQmFzZU5hbWVcIiwgRmlsZUJhc2VOYW1lKTtcblx0XHRcdFx0dGhpcy5hZGRNZW51RXh0ZW5kZWRQcmV2aWV3TW9kZShtZW51LCB0YXJnZXRfbmFtZSwgY3VycmVudE1kKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zdCBlZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3I7XG5cdFx0XHQvLyAgQHRzLWV4cGVjdC1lcnJvciwgbm90IHR5cGVkXG5cdFx0XHRjb25zdCBlZGl0b3JWaWV3ID0gZWRpdG9yLmNtIGFzIEVkaXRvclZpZXc7XG5cdFx0XHRjb25zdCB0YXJnZXRfcG9zID0gZWRpdG9yVmlldy5wb3NBdERPTSh0YXJnZXQpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2coJ3RhcmdldCcsIHRhcmdldClcblx0XHRcdC8vIGNvbnNvbGUubG9nKCd0YXJnZXQucGFyZW50RWxlbWVudCcsIHRhcmdldC5wYXJlbnRFbGVtZW50KVxuXHRcdFx0Ly8gY29uc3QgcHJldl9wb3MgPSBlZGl0b3JWaWV3LnBvc0F0RE9NKHRhcmdldC5wYXJlbnRFbGVtZW50Py5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50KTtcblx0XHRcdC8vIGNvbnN0IG5leHRfcG9zID0gZWRpdG9yVmlldy5wb3NBdERPTSh0YXJnZXQucGFyZW50RWxlbWVudD8ubmV4dEVsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50KTtcblx0XHRcdC8vIGxldCBwcmV2X3RhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZUF0KHByZXZfcG9zKTtcblx0XHRcdC8vIGxldCBuZXh0X3RhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZUF0KG5leHRfcG9zKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdwcmV2IHRhcmdldCBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKHByZXZfdGFyZ2V0X2xpbmUudGV4dCwgcHJldl90YXJnZXRfbGluZS5udW1iZXIsIHByZXZfcG9zLXByZXZfdGFyZ2V0X2xpbmUuZnJvbSlcblxuXHRcdFx0bGV0IHRhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZUF0KHRhcmdldF9wb3MpO1xuXHRcdFx0cHJpbnQoJ3RhcmdldCBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKTtcblx0XHRcdHByaW50KHRhcmdldF9saW5lLnRleHQsIHRhcmdldF9saW5lLm51bWJlciwgdGFyZ2V0X3BvcyAtIHRhcmdldF9saW5lLmZyb20pO1xuXG5cdFx0XHQvLyAtLS0tLS0tLS0tIEVkaXRvckludGVybmFsQXBpLnBvc0F0TW91c2UgXHU0RTBEXHU2NjJGXHU1Rjg4XHU1MUM2XHU3ODZFXHVGRjBDXHU0RTBEXHU3N0U1XHU5MDUzXHU0RTNBXHU0RUMwXHU0RTQ4XHVGRjBDXHU4ODRDXHU1M0Y3XHU1NDhDY2hcdTkwRkRcdTRFMERcdTUxQzZcdTc4NkUgLS0tLS0tLS0tLVxuXHRcdFx0Ly8gY29uc3QgZWRpdG9yMiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmVkaXRvciBhcyBFZGl0b3JJbnRlcm5hbEFwaTtcblx0XHRcdC8vIGNvbnN0IHBvc2l0aW9uID0gZWRpdG9yMi5wb3NBdE1vdXNlKGV2ZW50KTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdJbnRlckFQSVBvcyBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKVxuXHRcdFx0Ly8gY29uc29sZS5sb2coZWRpdG9yPy5nZXRMaW5lKHBvc2l0aW9uLmxpbmUpLCBwb3NpdGlvbi5saW5lKzEsIHBvc2l0aW9uLmNoKVxuXHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHRcdC8vIGNvbnNvbGUubG9nKCduZXh0IHRhcmdldCBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKG5leHRfdGFyZ2V0X2xpbmUudGV4dCwgbmV4dF90YXJnZXRfbGluZS5udW1iZXIsIG5leHRfcG9zLW5leHRfdGFyZ2V0X2xpbmUuZnJvbSlcblxuXHRcdFx0aWYgKFN1cHBvcnRlZFRhcmdldFR5cGUuaW5jbHVkZXMoY3VyVGFyZ2V0VHlwZSkpIHtcblx0XHRcdFx0dGhpcy5hZGRNZW51RXh0ZW5kZWRTb3VyY2VNb2RlKG1lbnUsIHRhcmdldF9uYW1lLCBjdXJyZW50TWQsIGN1clRhcmdldFR5cGUsIHRhcmdldF9wb3MsIGluVGFibGUsIGluQ2FsbG91dCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5yZWdpc3RlckVzY2FwZUJ1dHRvbihtZW51KTtcblxuXHRcdGxldCBvZmZzZXQgPSAtMTYzO1xuXHRcdGxldCBsaW51eF9vZmZzZXQgPSAtMTM4O1xuXHRcdG9mZnNldCA9IHByb2Nlc3MucGxhdGZvcm0gPT0gJ2xpbnV4JyA/IGxpbnV4X29mZnNldCA6IG9mZnNldDtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5tb3ZlRmlsZU1lbnUpIG9mZnNldCAtPSAyNTtcblxuXHRcdGlmIChpblRhYmxlICYmICFpblByZXZpZXcpIHtcblx0XHRcdG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgKyBvZmZzZXQgfSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0bWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9KTtcblx0XHR9XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoXCJBdHRhY2hGbG93OmNvbnRleHRtZW51XCIsIG1lbnUpO1xuXHR9XG5cbn1cblxuZnVuY3Rpb24gdXBkYXRlSW50ZXJuYWxMaW5rKGFjdGl2ZVZpZXc6IE1hcmtkb3duVmlldywgdGFyZ2V0OiBIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTFZpZGVvRWxlbWVudCwgdGFyZ2V0X3BvczogbnVtYmVyLCBpbWFnZU5hbWU6IHN0cmluZywgbmV3V2lkdGg6IG51bWJlciwgbmV3SGVpZ2h0OiBudW1iZXIsIGluVGFibGU6IGJvb2xlYW4sIGluQ2FsbG91dDogYm9vbGVhbik6IHZvaWQge1xuXHRjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcblx0Ly8gIEB0cy1leHBlY3QtZXJyb3IsIG5vdCB0eXBlZFxuXHRjb25zdCBlZGl0b3JWaWV3ID0gZWRpdG9yLmNtIGFzIEVkaXRvclZpZXc7XG5cdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0YXJnZXRfcG9zKTtcblx0Ly8gcHJpbnQoJ3RhcmdldCBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKTtcblx0Ly8gcHJpbnQodGFyZ2V0X2xpbmUudGV4dCwgdGFyZ2V0X2xpbmUubnVtYmVyLCB0YXJnZXRfcG9zIC0gdGFyZ2V0X2xpbmUuZnJvbSk7XG5cblxuXHRpZiAoIWluQ2FsbG91dCAmJiAhaW5UYWJsZSkge1xuXHRcdGxldCBtYXRjaGVkID0gbWF0Y2hMaW5lV2l0aEludGVybmFsTGluayh0YXJnZXRfbGluZS50ZXh0LCBpbWFnZU5hbWUsIG5ld1dpZHRoLCBpblRhYmxlKTtcblx0XHRpZiAobWF0Y2hlZC5sZW5ndGggPT0gMSkge1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaCh7XG5cdFx0XHRcdGNoYW5nZXM6IHtcblx0XHRcdFx0XHRmcm9tOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZFswXS5mcm9tX2NoLFxuXHRcdFx0XHRcdHRvOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZFswXS50b19jaCxcblx0XHRcdFx0XHRpbnNlcnQ6IG1hdGNoZWRbMF0ubmV3X2xpbmtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvLyBlZGl0b3IucmVwbGFjZVJhbmdlKG1hdGNoZWRbMF0ubmV3X2xpbmssIFxuXHRcdFx0Ly8gXHR7bGluZTp0YXJnZXRfbGluZS5udW1iZXItMSwgY2g6bWF0Y2hlZFswXS5mcm9tX2NofSwgXG5cdFx0XHQvLyBcdHtsaW5lOnRhcmdldF9saW5lLm51bWJlci0xLCBjaDptYXRjaGVkWzBdLnRvX2NofVxuXHRcdFx0Ly8gXHQpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChtYXRjaGVkLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHQvLyBuZXcgTm90aWNlKCdGYWlsIHRvIGZpbmQgY3VycmVudCBpbWFnZS1saW5rLCBwbGVhc2Ugem9vbSBtYW51YWxseSEnKVxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdG5ldyBOb3RpY2UoJ0ZpbmQgbXVsdGlwbGUgc2FtZSBpbWFnZS1saW5rIGluIGxpbmUsIHBsZWFzZSB6b29tIG1hbnVhbGx5IScpXG5cdFx0fVxuXHRcdHJldHVybjtcblx0fVxuXG5cdHR5cGUgUmVnRGljdGlvbmFyeSA9IHtcblx0XHRba2V5OiBzdHJpbmddOiBSZWdFeHA7XG5cdH07XG5cblx0bGV0IHN0YXJ0UmVnOiBSZWdEaWN0aW9uYXJ5ID0ge1xuXHRcdCd0YWJsZSc6IC9eXFxzKlxcfC8sXG5cdFx0J2NhbGxvdXQnOiAvXj4vLFxuXHR9O1xuXG5cdGxldCBtb2RlID0gaW5UYWJsZSA/ICd0YWJsZScgOiAnY2FsbG91dCc7XG5cdHByaW50KCdtb2RlJywgbW9kZSlcblxuXHRjb25zdCBzdGFydF9yZWcgPSBzdGFydFJlZ1ttb2RlXTtcblx0bGV0IHN0YXJ0X2xpbmVfbnVtYmVyID0gdGFyZ2V0X2xpbmUubnVtYmVyO1xuXHRsZXQgbWF0Y2hlZF9yZXN1bHRzOiBNYXRjaGVkTGlua0luTGluZVtdID0gW107XG5cdGxldCBtYXRjaGVkX2xpbmVzOiBudW1iZXJbXSA9IFtdOyAgLy8xLWJhc2VkXG5cdGZvciAobGV0IGkgPSBzdGFydF9saW5lX251bWJlcjsgaSA8PSBlZGl0b3IubGluZUNvdW50KCk7IGkrKykge1xuXHRcdGxldCBsaW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZShpKTtcblx0XHRpZiAoIXN0YXJ0X3JlZy50ZXN0KGxpbmUudGV4dCkpIGJyZWFrO1xuXHRcdGxldCBtYXRjaGVkID0gbWF0Y2hMaW5lV2l0aEludGVybmFsTGluayhsaW5lLnRleHQsIGltYWdlTmFtZSwgbmV3V2lkdGgsIGluVGFibGUpO1xuXHRcdG1hdGNoZWRfcmVzdWx0cy5wdXNoKC4uLm1hdGNoZWQpO1xuXHRcdG1hdGNoZWRfbGluZXMucHVzaCguLi5uZXcgQXJyYXkobWF0Y2hlZC5sZW5ndGgpLmZpbGwoaSkpO1xuXHR9XG5cblx0Zm9yIChsZXQgaSA9IHN0YXJ0X2xpbmVfbnVtYmVyIC0gMTsgaSA+PSAxOyBpLS0pIHtcblx0XHRsZXQgbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmUoaSk7XG5cdFx0aWYgKCFzdGFydF9yZWcudGVzdChsaW5lLnRleHQpKSBicmVhaztcblx0XHRsZXQgbWF0Y2hlZCA9IG1hdGNoTGluZVdpdGhJbnRlcm5hbExpbmsobGluZS50ZXh0LCBpbWFnZU5hbWUsIG5ld1dpZHRoLCBpblRhYmxlKTtcblx0XHRtYXRjaGVkX3Jlc3VsdHMucHVzaCguLi5tYXRjaGVkKTtcblx0XHRtYXRjaGVkX2xpbmVzLnB1c2goLi4ubmV3IEFycmF5KG1hdGNoZWQubGVuZ3RoKS5maWxsKGkpKTtcblx0fVxuXG5cdC8vIHByaW50KFwiTWF0Y2hlZCBJbmZvcm1hdGlvblwiKVxuXHQvLyBwcmludChtYXRjaGVkX3Jlc3VsdHMpXG5cdC8vIHByaW50KG1hdGNoZWRfbGluZXMpXG5cblx0aWYgKG1hdGNoZWRfcmVzdWx0cy5sZW5ndGggPT0gMSkge1xuXHRcdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmUobWF0Y2hlZF9saW5lc1swXSk7XG5cdFx0aWYgKG1vZGUgPT0gJ3RhYmxlJykge1xuXHRcdFx0bGV0IG9sZF90ZXh0ID0gdGFyZ2V0X2xpbmUudGV4dDtcblx0XHRcdGxldCBuZXdfbGluZV90ZXh0ID0gb2xkX3RleHQuc3Vic3RyaW5nKDAsIG1hdGNoZWRfcmVzdWx0c1swXS5mcm9tX2NoKSArXG5cdFx0XHRcdG1hdGNoZWRfcmVzdWx0c1swXS5uZXdfbGluayArXG5cdFx0XHRcdG9sZF90ZXh0LnN1YnN0cmluZyhtYXRjaGVkX3Jlc3VsdHNbMF0udG9fY2gpO1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaCh7XG5cdFx0XHRcdGNoYW5nZXM6IHtcblx0XHRcdFx0XHRmcm9tOiB0YXJnZXRfbGluZS5mcm9tLFxuXHRcdFx0XHRcdHRvOiB0YXJnZXRfbGluZS5mcm9tICsgb2xkX3RleHQubGVuZ3RoLFxuXHRcdFx0XHRcdGluc2VydDogbmV3X2xpbmVfdGV4dFxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaCh7XG5cdFx0XHRcdGNoYW5nZXM6IHtcblx0XHRcdFx0XHRmcm9tOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZF9yZXN1bHRzWzBdLmZyb21fY2gsXG5cdFx0XHRcdFx0dG86IHRhcmdldF9saW5lLmZyb20gKyBtYXRjaGVkX3Jlc3VsdHNbMF0udG9fY2gsXG5cdFx0XHRcdFx0aW5zZXJ0OiBtYXRjaGVkX3Jlc3VsdHNbMF0ubmV3X2xpbmtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdGVsc2UgaWYgKG1hdGNoZWRfcmVzdWx0cy5sZW5ndGggPT0gMCkge1xuXHRcdG5ldyBOb3RpY2UoYEZhaWwgdG8gZmluZCBjdXJyZW50IGltYWdlLWxpbmsgaW4gJHttb2RlfSwgcGxlYXNlIHpvb20gbWFudWFsbHkhYClcblx0fVxuXHRlbHNlIHtcblx0XHRuZXcgTm90aWNlKGBGaW5kIG11bHRpcGxlIHNhbWUgaW1hZ2UtbGluayBpbiAke21vZGV9LCBwbGVhc2Ugem9vbSBtYW51YWxseSFgKVxuXHR9XG5cdHJldHVybjtcbn1cblxuXG5mdW5jdGlvbiB1cGRhdGVFeHRlcm5hbExpbmsoYWN0aXZlVmlldzogTWFya2Rvd25WaWV3LCB0YXJnZXQ6IEhUTUxJbWFnZUVsZW1lbnQgfCBIVE1MVmlkZW9FbGVtZW50LCB0YXJnZXRfcG9zOiBudW1iZXIsIG5ld1dpZHRoOiBudW1iZXIsIG5ld0hlaWdodDogbnVtYmVyLCBpblRhYmxlOiBib29sZWFuLCBpbkNhbGxvdXQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0Y29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG5cdC8vICBAdHMtZXhwZWN0LWVycm9yLCBub3QgdHlwZWRcblx0Y29uc3QgZWRpdG9yVmlldyA9IGVkaXRvci5jbSBhcyBFZGl0b3JWaWV3O1xuXHRsZXQgdGFyZ2V0X2xpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lQXQodGFyZ2V0X3Bvcyk7XG5cblx0Y29uc3QgbGluayA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3NyYycpIGFzIHN0cmluZztcblx0Y29uc3QgYWx0VGV4dCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJhbHRcIikgYXMgc3RyaW5nO1xuXG5cdGlmICghaW5DYWxsb3V0ICYmICFpblRhYmxlKSB7XG5cdFx0bGV0IG1hdGNoZWQgPSBtYXRjaExpbmVXaXRoRXh0ZXJuYWxMaW5rKHRhcmdldF9saW5lLnRleHQsIGxpbmssIGFsdFRleHQsIG5ld1dpZHRoLCBpblRhYmxlKTtcblx0XHRpZiAobWF0Y2hlZC5sZW5ndGggPT0gMSkge1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaCh7XG5cdFx0XHRcdGNoYW5nZXM6IHtcblx0XHRcdFx0XHRmcm9tOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZFswXS5mcm9tX2NoLFxuXHRcdFx0XHRcdHRvOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZFswXS50b19jaCxcblx0XHRcdFx0XHRpbnNlcnQ6IG1hdGNoZWRbMF0ubmV3X2xpbmtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKG1hdGNoZWQubGVuZ3RoID09IDApIHtcblx0XHRcdC8vIG5ldyBOb3RpY2UoJ0ZhaWwgdG8gZmluZCBjdXJyZW50IGltYWdlLWxpbmssIHBsZWFzZSB6b29tIG1hbnVhbGx5IScpXG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0bmV3IE5vdGljZSgnRmluZCBtdWx0aXBsZSBzYW1lIGltYWdlLWxpbmsgaW4gbGluZSwgcGxlYXNlIHpvb20gbWFudWFsbHkhJylcblx0XHR9XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0dHlwZSBSZWdEaWN0aW9uYXJ5ID0ge1xuXHRcdFtrZXk6IHN0cmluZ106IFJlZ0V4cDtcblx0fTtcblxuXHRsZXQgc3RhcnRSZWc6IFJlZ0RpY3Rpb25hcnkgPSB7XG5cdFx0J3RhYmxlJzogL15cXHMqXFx8Lyxcblx0XHQnY2FsbG91dCc6IC9ePi8sXG5cdH07XG5cblx0bGV0IG1vZGUgPSBpblRhYmxlID8gJ3RhYmxlJyA6ICdjYWxsb3V0Jztcblx0cHJpbnQoJ21vZGUnLCBtb2RlKVxuXG5cdGNvbnN0IHN0YXJ0X3JlZyA9IHN0YXJ0UmVnW21vZGVdO1xuXHRsZXQgc3RhcnRfbGluZV9udW1iZXIgPSB0YXJnZXRfbGluZS5udW1iZXI7XG5cdGxldCBtYXRjaGVkX3Jlc3VsdHM6IE1hdGNoZWRMaW5rSW5MaW5lW10gPSBbXTtcblx0bGV0IG1hdGNoZWRfbGluZXM6IG51bWJlcltdID0gW107ICAvLzEtYmFzZWRcblx0Zm9yIChsZXQgaSA9IHN0YXJ0X2xpbmVfbnVtYmVyOyBpIDw9IGVkaXRvci5saW5lQ291bnQoKTsgaSsrKSB7XG5cdFx0bGV0IGxpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lKGkpO1xuXHRcdGlmICghc3RhcnRfcmVnLnRlc3QobGluZS50ZXh0KSkgYnJlYWs7XG5cdFx0bGV0IG1hdGNoZWQgPSBtYXRjaExpbmVXaXRoRXh0ZXJuYWxMaW5rKGxpbmUudGV4dCwgbGluaywgYWx0VGV4dCwgbmV3V2lkdGgsIGluVGFibGUpO1xuXHRcdG1hdGNoZWRfcmVzdWx0cy5wdXNoKC4uLm1hdGNoZWQpO1xuXHRcdG1hdGNoZWRfbGluZXMucHVzaCguLi5uZXcgQXJyYXkobWF0Y2hlZC5sZW5ndGgpLmZpbGwoaSkpO1xuXHR9XG5cblx0Zm9yIChsZXQgaSA9IHN0YXJ0X2xpbmVfbnVtYmVyIC0gMTsgaSA+PSAxOyBpLS0pIHtcblx0XHRsZXQgbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmUoaSk7XG5cdFx0aWYgKCFzdGFydF9yZWcudGVzdChsaW5lLnRleHQpKSBicmVhaztcblx0XHRsZXQgbWF0Y2hlZCA9IG1hdGNoTGluZVdpdGhFeHRlcm5hbExpbmsobGluZS50ZXh0LCBsaW5rLCBhbHRUZXh0LCBuZXdXaWR0aCwgaW5UYWJsZSk7XG5cdFx0bWF0Y2hlZF9yZXN1bHRzLnB1c2goLi4ubWF0Y2hlZCk7XG5cdFx0bWF0Y2hlZF9saW5lcy5wdXNoKC4uLm5ldyBBcnJheShtYXRjaGVkLmxlbmd0aCkuZmlsbChpKSk7XG5cdH1cblxuXHRwcmludChtYXRjaGVkX3Jlc3VsdHMpXG5cdHByaW50KG1hdGNoZWRfbGluZXMpXG5cblx0aWYgKG1hdGNoZWRfcmVzdWx0cy5sZW5ndGggPT0gMSkge1xuXHRcdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmUobWF0Y2hlZF9saW5lc1swXSk7XG5cdFx0aWYgKG1vZGUgPT0gJ3RhYmxlJykge1xuXHRcdFx0bGV0IG9sZF90ZXh0ID0gdGFyZ2V0X2xpbmUudGV4dDtcblx0XHRcdGxldCBuZXdfbGluZV90ZXh0ID0gb2xkX3RleHQuc3Vic3RyaW5nKDAsIG1hdGNoZWRfcmVzdWx0c1swXS5mcm9tX2NoKSArXG5cdFx0XHRcdG1hdGNoZWRfcmVzdWx0c1swXS5uZXdfbGluayArXG5cdFx0XHRcdG9sZF90ZXh0LnN1YnN0cmluZyhtYXRjaGVkX3Jlc3VsdHNbMF0udG9fY2gpO1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaCh7XG5cdFx0XHRcdGNoYW5nZXM6IHtcblx0XHRcdFx0XHRmcm9tOiB0YXJnZXRfbGluZS5mcm9tLFxuXHRcdFx0XHRcdHRvOiB0YXJnZXRfbGluZS5mcm9tICsgb2xkX3RleHQubGVuZ3RoLFxuXHRcdFx0XHRcdGluc2VydDogbmV3X2xpbmVfdGV4dFxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaCh7XG5cdFx0XHRcdGNoYW5nZXM6IHtcblx0XHRcdFx0XHRmcm9tOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZF9yZXN1bHRzWzBdLmZyb21fY2gsXG5cdFx0XHRcdFx0dG86IHRhcmdldF9saW5lLmZyb20gKyBtYXRjaGVkX3Jlc3VsdHNbMF0udG9fY2gsXG5cdFx0XHRcdFx0aW5zZXJ0OiBtYXRjaGVkX3Jlc3VsdHNbMF0ubmV3X2xpbmtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdGVsc2UgaWYgKG1hdGNoZWRfcmVzdWx0cy5sZW5ndGggPT0gMCkge1xuXHRcdG5ldyBOb3RpY2UoYEZhaWwgdG8gZmluZCBjdXJyZW50IGltYWdlLWxpbmsgaW4gJHttb2RlfSwgcGxlYXNlIHpvb20gbWFudWFsbHkhYClcblx0fVxuXHRlbHNlIHtcblx0XHRuZXcgTm90aWNlKGBGaW5kIG11bHRpcGxlIHNhbWUgaW1hZ2UtbGluayBpbiAke21vZGV9LCBwbGVhc2Ugem9vbSBtYW51YWxseSFgKVxuXHR9XG5cdHJldHVybjtcblxufVxuXG5cbmZ1bmN0aW9uIG1hdGNoTGluZVdpdGhJbnRlcm5hbExpbmsobGluZV90ZXh0OiBzdHJpbmcsIHRhcmdldF9uYW1lOiBzdHJpbmcsIG5ld193aWR0aDogbnVtYmVyLCBpbnRhYmxlOiBib29sZWFuKTogTWF0Y2hlZExpbmtJbkxpbmVbXSB7XG5cdGxldCByZWdXaWtpTGluayA9IC9cXCFcXFtcXFtbXlxcW1xcXV0qP1xcXVxcXS9nO1xuXHRsZXQgcmVnTWRMaW5rID0gL1xcIVxcW1teXFxbXFxdXSo/XFxdXFwoW15cXHNcXClcXChcXFtcXF1cXHtcXH0nXSpcXCkvZztcblx0Y29uc3QgdGFyZ2V0X25hbWVfbWRsaW5rID0gdGFyZ2V0X25hbWUucmVwbGFjZSgvIC9nLCAnJTIwJyk7XG5cdGlmICghbGluZV90ZXh0LmluY2x1ZGVzKHRhcmdldF9uYW1lKSAmJiAhbGluZV90ZXh0LmluY2x1ZGVzKHRhcmdldF9uYW1lX21kbGluaykpIHJldHVybiBbXTtcblxuXHQvLyBwcmludChsaW5lX3RleHQpXG5cdGxldCByZXN1bHQ6IE1hdGNoZWRMaW5rSW5MaW5lW10gPSBbXTtcblx0Ly8gY29uc3QgbmV3V2lraUxpbmsgPSBpbnRhYmxlID8gYCFbWyR7dGFyZ2V0X25hbWV9XFxcXHwke25ld193aWR0aH1dXWA6YCFbWyR7dGFyZ2V0X25hbWV9fCR7bmV3X3dpZHRofV1dYDtcblx0d2hpbGUgKHRydWUpIHtcblx0XHRsZXQgd2lraV9tYXRjaCA9IHJlZ1dpa2lMaW5rLmV4ZWMobGluZV90ZXh0KTtcblx0XHRpZiAoIXdpa2lfbWF0Y2gpIGJyZWFrO1xuXHRcdGNvbnN0IG1hdGNoZWRfbGluayA9IHdpa2lfbWF0Y2hbMF07XG5cdFx0Ly8gcHJpbnQoJ21hdGNoZWRfbGluazonLCBtYXRjaGVkX2xpbmspXG5cdFx0aWYgKG1hdGNoZWRfbGluay5pbmNsdWRlcyh0YXJnZXRfbmFtZSkpIHtcblx0XHRcdGxldCBub3JtYWxfbGluayA9IGludGFibGUgPyBtYXRjaGVkX2xpbmsucmVwbGFjZSgvXFxcXFxcfC9nLCAnfCcpIDogbWF0Y2hlZF9saW5rO1xuXHRcdFx0bGV0IGxpbmtfbWF0Y2ggPSBub3JtYWxfbGluay5tYXRjaCgvIVxcW1xcWyguKj8pKFxcfHxcXF1cXF0pLyk7XG5cdFx0XHRsZXQgbGlua190ZXh0ID0gbGlua19tYXRjaCA/IGxpbmtfbWF0Y2hbMV0gOiAnJztcblxuXHRcdFx0bGV0IGFsdF9tYXRjaCA9IG1hdGNoZWRfbGluay5tYXRjaCgvIVxcW1xcWy4qPyhcXHwoLio/KSlcXF1cXF0vKTtcblx0XHRcdGxldCBhbHRfdGV4dCA9IGFsdF9tYXRjaCA/IGFsdF9tYXRjaFsxXSA6ICcnO1xuXHRcdFx0bGV0IGFsdF90ZXh0X2xpc3QgPSBhbHRfdGV4dC5zcGxpdCgnfCcpO1xuXHRcdFx0bGV0IGFsdF90ZXh0X3dvX3NpemUgPSAnJztcblx0XHRcdGxldCBuZXdfYWx0X3RleHQgPSAnJ1xuXHRcdFx0Zm9yIChsZXQgYWx0IG9mIGFsdF90ZXh0X2xpc3QpIHtcblx0XHRcdFx0aWYgKCEvXlxcZCskLy50ZXN0KGFsdCkgJiYgIS9eXFxzKiQvLnRlc3QoYWx0KSkge1xuXHRcdFx0XHRcdGFsdF90ZXh0X3dvX3NpemUgPSBhbHRfdGV4dF93b19zaXplICsgJ3wnICsgYWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRuZXdfYWx0X3RleHQgPSBuZXdfd2lkdGggIT0gMCA/IGAke2FsdF90ZXh0X3dvX3NpemV9fCR7bmV3X3dpZHRofWAgOiBhbHRfdGV4dF93b19zaXplO1xuXHRcdFx0bmV3X2FsdF90ZXh0ID0gaW50YWJsZSA/IG5ld19hbHRfdGV4dC5yZXBsYWNlKC9cXHwvZywgJ1xcXFx8JykgOiBuZXdfYWx0X3RleHQ7XG5cdFx0XHRsZXQgbmV3V2lraUxpbmsgPSBsaW5rX21hdGNoID8gYCFbWyR7bGlua190ZXh0fSR7bmV3X2FsdF90ZXh0fV1dYCA6IGAhW1ske3RhcmdldF9uYW1lfSR7bmV3X2FsdF90ZXh0fV1dYDtcblxuXHRcdFx0cmVzdWx0LnB1c2goe1xuXHRcdFx0XHRvbGRfbGluazogbWF0Y2hlZF9saW5rLFxuXHRcdFx0XHRuZXdfbGluazogbmV3V2lraUxpbmssXG5cdFx0XHRcdGZyb21fY2g6IHdpa2lfbWF0Y2guaW5kZXgsXG5cdFx0XHRcdHRvX2NoOiB3aWtpX21hdGNoLmluZGV4ICsgbWF0Y2hlZF9saW5rLmxlbmd0aFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0d2hpbGUgKHRydWUpIHtcblx0XHRsZXQgbWF0Y2ggPSByZWdNZExpbmsuZXhlYyhsaW5lX3RleHQpO1xuXHRcdGlmICghbWF0Y2gpIGJyZWFrO1xuXHRcdGNvbnN0IG1hdGNoZWRfbGluayA9IG1hdGNoWzBdO1xuXHRcdGlmIChtYXRjaGVkX2xpbmsuaW5jbHVkZXModGFyZ2V0X25hbWVfbWRsaW5rKSkge1xuXHRcdFx0Ly8gXHU2MjdFXHU1MjMwIG1hdGNoZWRfbGluayBcdTRFMkRcdTc2ODQgYWx0VGV4dFxuXHRcdFx0bGV0IGFsdF90ZXh0X21hdGNoID0gbWF0Y2hlZF9saW5rLm1hdGNoKC9cXFsuKj9cXF0vZykgYXMgc3RyaW5nW107XG5cdFx0XHRsZXQgYWx0X3RleHQgPSBhbHRfdGV4dF9tYXRjaFswXS5zdWJzdHJpbmcoMSwgYWx0X3RleHRfbWF0Y2hbMF0ubGVuZ3RoIC0gMSk7XG5cdFx0XHRsZXQgcHVyZV9hbHQgPSBhbHRfdGV4dC5yZXBsYWNlKC9cXHxcXGQrKFxcfFxcZCspPyQvZywgJycpO1xuXHRcdFx0aWYgKGludGFibGUpIHtcblx0XHRcdFx0cHVyZV9hbHQgPSBhbHRfdGV4dC5yZXBsYWNlKC9cXFxcXFx8XFxkKyhcXHxcXGQrKT8kL2csICcnKVxuXHRcdFx0fVxuXHRcdFx0bGV0IGxpbmtfdGV4dCA9IG1hdGNoZWRfbGluay5zdWJzdHJpbmcoYWx0X3RleHRfbWF0Y2hbMF0ubGVuZ3RoICsgMiwgbWF0Y2hlZF9saW5rLmxlbmd0aCAtIDEpXG5cdFx0XHRsZXQgbmV3TURMaW5rID0gaW50YWJsZSA/IGAhWyR7cHVyZV9hbHR9XFxcXHwke25ld193aWR0aH1dKCR7bGlua190ZXh0fSlgIDogYCFbJHtwdXJlX2FsdH18JHtuZXdfd2lkdGh9XSgke2xpbmtfdGV4dH0pYDtcblx0XHRcdGlmICgvXlxcZCokLy50ZXN0KGFsdF90ZXh0KSkge1xuXHRcdFx0XHRuZXdNRExpbmsgPSBgIVske25ld193aWR0aH1dKCR7bGlua190ZXh0fSlgO1xuXHRcdFx0fVxuXHRcdFx0Ly8gbGV0IG5ld0xpbmVUZXh0ID0gbGluZV90ZXh0LnN1YnN0cmluZygwLCBtYXRjaC5pbmRleCkgKyBcblx0XHRcdC8vIFx0XHRcdFx0XHRuZXdNRExpbmsgKyBcblx0XHRcdC8vIFx0XHRcdFx0XHRsaW5lX3RleHQuc3Vic3RyaW5nKG1hdGNoLmluZGV4K21hdGNoZWRfbGluay5sZW5ndGgpO1xuXHRcdFx0cmVzdWx0LnB1c2goe1xuXHRcdFx0XHRvbGRfbGluazogbWF0Y2hlZF9saW5rLFxuXHRcdFx0XHRuZXdfbGluazogbmV3TURMaW5rLFxuXHRcdFx0XHRmcm9tX2NoOiBtYXRjaC5pbmRleCxcblx0XHRcdFx0dG9fY2g6IG1hdGNoLmluZGV4ICsgbWF0Y2hlZF9saW5rLmxlbmd0aFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdHByaW50KFwiTGluZSBUZXh0OiBcIiwgbGluZV90ZXh0KVxuXHRwcmludChcIk1hdGNoZWRJbmZvOlwiLCByZXN1bHQpO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIG1hdGNoTGluZVdpdGhFeHRlcm5hbExpbmsobGluZV90ZXh0OiBzdHJpbmcsIGxpbms6IHN0cmluZywgYWx0X3RleHQ6IHN0cmluZywgbmV3X3dpZHRoOiBudW1iZXIsIGludGFibGU6IGJvb2xlYW4pOiBNYXRjaGVkTGlua0luTGluZVtdIHtcblx0bGV0IHJlc3VsdDogTWF0Y2hlZExpbmtJbkxpbmVbXSA9IFtdXG5cdGxldCByZWdNZExpbmsgPSAvXFwhXFxbW15cXFtcXF1dKj9cXF1cXChbXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKlxcKS9nO1xuXHRpZiAoIWxpbmVfdGV4dC5pbmNsdWRlcyhsaW5rKSkgcmV0dXJuIFtdO1xuXHR3aGlsZSAodHJ1ZSkge1xuXHRcdGxldCBtYXRjaCA9IHJlZ01kTGluay5leGVjKGxpbmVfdGV4dCk7XG5cdFx0aWYgKCFtYXRjaCkgYnJlYWs7XG5cdFx0bGV0IG1hdGNoZWRfbGluayA9IG1hdGNoWzBdO1xuXHRcdGlmIChtYXRjaGVkX2xpbmsuaW5jbHVkZXMobGluaykpIHtcblx0XHRcdGxldCBhbHRfdGV4dF9tYXRjaCA9IG1hdGNoZWRfbGluay5tYXRjaCgvXFxbLio/XFxdL2cpIGFzIHN0cmluZ1tdO1xuXHRcdFx0bGV0IGFsdF90ZXh0ID0gYWx0X3RleHRfbWF0Y2hbMF0uc3Vic3RyaW5nKDEsIGFsdF90ZXh0X21hdGNoWzBdLmxlbmd0aCAtIDEpO1xuXHRcdFx0bGV0IHB1cmVfYWx0ID0gYWx0X3RleHQucmVwbGFjZSgvXFx8XFxkKyhcXHxcXGQrKT8kL2csICcnKTtcblx0XHRcdGlmIChpbnRhYmxlKSB7XG5cdFx0XHRcdHB1cmVfYWx0ID0gYWx0X3RleHQucmVwbGFjZSgvXFxcXFxcfFxcZCsoXFx8XFxkKyk/JC9nLCAnJylcblx0XHRcdH1cblx0XHRcdGlmICgvXlxcZCokLy50ZXN0KGFsdF90ZXh0KSkge1xuXHRcdFx0XHRwdXJlX2FsdCA9ICcnO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGxpbmtfdGV4dCA9IG1hdGNoZWRfbGluay5zdWJzdHJpbmcoYWx0X3RleHRfbWF0Y2hbMF0ubGVuZ3RoICsgMiwgbWF0Y2hlZF9saW5rLmxlbmd0aCAtIDEpXG5cdFx0XHRsZXQgbmV3RXh0ZXJuYWxMaW5rID0gaW50YWJsZSA/IGAhWyR7cHVyZV9hbHR9XFxcXHwke25ld193aWR0aH1dKCR7bGlua190ZXh0fSlgIDogYCFbJHtwdXJlX2FsdH18JHtuZXdfd2lkdGh9XSgke2xpbmtfdGV4dH0pYDtcblx0XHRcdFxuXHRcdFx0cmVzdWx0LnB1c2goe1xuXHRcdFx0XHRvbGRfbGluazogbWF0Y2hlZF9saW5rLFxuXHRcdFx0XHRuZXdfbGluazogbmV3RXh0ZXJuYWxMaW5rLFxuXHRcdFx0XHRmcm9tX2NoOiBtYXRjaC5pbmRleCxcblx0XHRcdFx0dG9fY2g6IG1hdGNoLmluZGV4ICsgbWF0Y2hlZF9saW5rLmxlbmd0aFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdHByaW50KFwiTGluZSBUZXh0OiBcIiwgbGluZV90ZXh0KVxuXHRwcmludChcIk1hdGNoZWRJbmZvOlwiLCByZXN1bHQpO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5cblxuLy8gXHU1MjFCXHU1RUZBXHU5MDZFXHU3RjY5XHU1MTQzXHU3RDIwXG5mdW5jdGlvbiBjcmVhdGVab29tTWFzaygpOiBIVE1MRGl2RWxlbWVudCB7XG4gICAgY29uc3QgbWFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG1hc2suaWQgPSAnYWYtbWFzayc7XG4gICAgbWFzay5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgbWFzay5zdHlsZS50b3AgPSAnMCc7XG4gICAgbWFzay5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgIG1hc2suc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgbWFzay5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgbWFzay5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMCwgMCwgMCwgMC41KSc7XG4gICAgbWFzay5zdHlsZS56SW5kZXggPSAnOTk5OCc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtYXNrKTtcbiAgICByZXR1cm4gbWFzaztcbn1cblxuLy8gXHU1MjFCXHU1RUZBXHU2NTNFXHU1OTI3XHU3Njg0XHU1NkZFXHU1MENGXHU1MTQzXHU3RDIwXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVab29tZWRJbWFnZShzcmM6IHN0cmluZywgYWRhcHRpdmVfcmF0aW86IG51bWJlcik6IFByb21pc2U8e3pvb21lZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBvcmlnaW5hbFdpZHRoOiBudW1iZXIsIG9yaWdpbmFsSGVpZ2h0OiBudW1iZXJ9PiB7XG4gICAgY29uc3Qgem9vbWVkSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICB6b29tZWRJbWFnZS5pZCA9ICdhZi16b29tZWQtaW1hZ2UnO1xuICAgIHpvb21lZEltYWdlLnNyYyA9IHNyYztcbiAgICB6b29tZWRJbWFnZS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgem9vbWVkSW1hZ2Uuc3R5bGUuekluZGV4ID0gJzk5OTknO1xuICAgIHpvb21lZEltYWdlLnN0eWxlLnRvcCA9ICc1MCUnO1xuICAgIHpvb21lZEltYWdlLnN0eWxlLmxlZnQgPSAnNTAlJztcbiAgICB6b29tZWRJbWFnZS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKC01MCUsIC01MCUpJztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHpvb21lZEltYWdlKTtcblxuICAgIGxldCBvcmlnaW5hbFdpZHRoID0gem9vbWVkSW1hZ2UubmF0dXJhbFdpZHRoO1xuXHRsZXQgb3JpZ2luYWxIZWlnaHQgPSB6b29tZWRJbWFnZS5uYXR1cmFsSGVpZ2h0O1xuXG5cdGFkYXB0aXZlbHlEaXNwbGF5SW1hZ2Uoem9vbWVkSW1hZ2UsIG9yaWdpbmFsV2lkdGgsIG9yaWdpbmFsSGVpZ2h0LCBhZGFwdGl2ZV9yYXRpbyk7XG5cbiAgICByZXR1cm4ge1xuXHRcdHpvb21lZEltYWdlLFxuXHRcdG9yaWdpbmFsV2lkdGgsXG5cdFx0b3JpZ2luYWxIZWlnaHRcblx0fTtcbn1cblxuLy8gXHU1MjFCXHU1RUZBXHU3NjdFXHU1MjA2XHU2QkQ0XHU2MzA3XHU3OTNBXHU1MTQzXHU3RDIwXG5mdW5jdGlvbiBjcmVhdGVab29tU2NhbGVEaXYoem9vbWVkSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsIG9yaWdpbmFsV2lkdGg6IG51bWJlciwgb3JpZ2luYWxIZWlnaHQ6bnVtYmVyKTogSFRNTERpdkVsZW1lbnQge1xuXHRjb25zdCBzY2FsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRzY2FsZURpdi5pZCA9ICdhZi1zY2FsZS1kaXYnO1xuXHRzY2FsZURpdi5jbGFzc0xpc3QuYWRkKCdhZi1zY2FsZS1kaXYnKTtcblx0c2NhbGVEaXYuc3R5bGUuekluZGV4ID0gJzEwMDAwJztcblx0dXBkYXRlWm9vbVNjYWxlRGl2KHNjYWxlRGl2LCB6b29tZWRJbWFnZSwgb3JpZ2luYWxXaWR0aCwgb3JpZ2luYWxIZWlnaHQpO1xuXHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjYWxlRGl2KTtcblx0cmV0dXJuIHNjYWxlRGl2O1xufVxuXG5mdW5jdGlvbiB1cGRhdGVab29tU2NhbGVEaXYoc2NhbGVEaXY6IEhUTUxEaXZFbGVtZW50LCB6b29tZWRJbWFnZTogSFRNTEltYWdlRWxlbWVudCwgb3JpZ2luYWxXaWR0aDogbnVtYmVyLCBvcmlnaW5hbEhlaWdodDpudW1iZXIpe1xuXHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTc2ODRcdTVCQkRcdTVFQTZcdTU0OENcdTlBRDhcdTVFQTZcblx0Y29uc3Qgd2lkdGggPSB6b29tZWRJbWFnZS5vZmZzZXRXaWR0aDtcblx0Y29uc3QgaGVpZ2h0ID0gem9vbWVkSW1hZ2Uub2Zmc2V0SGVpZ2h0O1xuXHRsZXQgc2NhbGVQZXJjZW50ID0gd2lkdGggLyBvcmlnaW5hbFdpZHRoICogMTAwO1xuXHRzY2FsZURpdi5pbm5lclRleHQgPSBgJHt3aWR0aH1cdTAwRDcke2hlaWdodH0gKCR7c2NhbGVQZXJjZW50LnRvRml4ZWQoMSl9JSlgO1xufVxuXG4vLyBcdTZFREFcdThGNkVcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcdTU2NjhcbmZ1bmN0aW9uIGhhbmRsZVpvb21Nb3VzZVdoZWVsKGU6IFdoZWVsRXZlbnQsIHpvb21lZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBvcmlnaW5hbFdpZHRoOiBudW1iZXIsIG9yaWdpbmFsSGVpZ2h0OiBudW1iZXIsIHNjYWxlRGl2OiBIVE1MRGl2RWxlbWVudCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBtb3VzZVggPSBlLmNsaWVudFg7XG4gICAgY29uc3QgbW91c2VZID0gZS5jbGllbnRZO1xuICAgIGNvbnN0IHNjYWxlID0gZS5kZWx0YVkgPiAwID8gMC45NSA6IDEuMDU7XG4gICAgY29uc3QgbmV3V2lkdGggPSBzY2FsZSAqIHpvb21lZEltYWdlLm9mZnNldFdpZHRoO1xuICAgIGNvbnN0IG5ld0hlaWdodCA9IHNjYWxlICogem9vbWVkSW1hZ2Uub2Zmc2V0SGVpZ2h0O1xuICAgIGNvbnN0IG5ld0xlZnQgPSBtb3VzZVggLSAobW91c2VYIC0gem9vbWVkSW1hZ2Uub2Zmc2V0TGVmdCkgKiBzY2FsZTtcbiAgICBjb25zdCBuZXdUb3AgPSBtb3VzZVkgLSAobW91c2VZIC0gem9vbWVkSW1hZ2Uub2Zmc2V0VG9wKSAqIHNjYWxlO1xuICAgIHpvb21lZEltYWdlLnN0eWxlLndpZHRoID0gYCR7bmV3V2lkdGh9cHhgO1xuICAgIHpvb21lZEltYWdlLnN0eWxlLmhlaWdodCA9IGAke25ld0hlaWdodH1weGA7XG4gICAgem9vbWVkSW1hZ2Uuc3R5bGUubGVmdCA9IGAke25ld0xlZnR9cHhgO1xuICAgIHpvb21lZEltYWdlLnN0eWxlLnRvcCA9IGAke25ld1RvcH1weGA7XG4gICAgdXBkYXRlWm9vbVNjYWxlRGl2KHNjYWxlRGl2LCB6b29tZWRJbWFnZSwgb3JpZ2luYWxXaWR0aCwgb3JpZ2luYWxIZWlnaHQpO1xufVxuXG4vLyBcdTlGMjBcdTY4MDdcdTUzRjNcdTk1MkVcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcdTU2NjhcbmZ1bmN0aW9uIGhhbmRsZVpvb21Db250ZXh0TWVudShlOiBNb3VzZUV2ZW50LHpvb21lZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBvcmlnaW5hbFdpZHRoOiBudW1iZXIsIG9yaWdpbmFsSGVpZ2h0OiBudW1iZXIsIHNjYWxlRGl2OiBIVE1MRGl2RWxlbWVudCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB6b29tZWRJbWFnZS5zdHlsZS53aWR0aCA9IGAke29yaWdpbmFsV2lkdGh9cHhgO1xuICAgIHpvb21lZEltYWdlLnN0eWxlLmhlaWdodCA9IGAke29yaWdpbmFsSGVpZ2h0fXB4YDtcbiAgICB6b29tZWRJbWFnZS5zdHlsZS5sZWZ0ID0gYDUwJWA7XG4gICAgem9vbWVkSW1hZ2Uuc3R5bGUudG9wID0gYDUwJWA7XG5cdHVwZGF0ZVpvb21TY2FsZURpdihzY2FsZURpdiwgem9vbWVkSW1hZ2UsIG9yaWdpbmFsV2lkdGgsIG9yaWdpbmFsSGVpZ2h0KTtcbn1cblxuXG5mdW5jdGlvbiBhZGFwdGl2ZWx5RGlzcGxheUltYWdlKHpvb21lZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBvcmlnaW5hbFdpZHRoOiBudW1iZXIsIG9yaWdpbmFsSGVpZ2h0OiBudW1iZXIsIGFkYXB0aXZlX3JhdGlvOm51bWJlcikge1xuXHR6b29tZWRJbWFnZS5zdHlsZS5sZWZ0ID0gYDUwJWA7XG5cdHpvb21lZEltYWdlLnN0eWxlLnRvcCA9IGA1MCVgO1xuXHQvLyBcdTU5ODJcdTY3OUNcdTU2RkVcdTcyNDdcdTc2ODRcdTVDM0FcdTVCRjhcdTU5MjdcdTRFOEVcdTVDNEZcdTVFNTVcdTVDM0FcdTVCRjhcdUZGMENcdTRGN0ZcdTUxNzZcdTU5MjdcdTVDMEZcdTRFM0FcdTVDNEZcdTVFNTVcdTVDM0FcdTVCRjhcdTc2ODQgYWRhcHRpdmVfcmF0aW9cblx0bGV0IHNjcmVlblJhdGlvID0gYWRhcHRpdmVfcmF0aW87ICAgLy8gXHU1QzRGXHU1RTU1XHU1QzNBXHU1QkY4XHU2QkQ0XHU0RjhCXG5cdGxldCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRsZXQgc2NyZWVuSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG5cdC8vIEFkanVzdCBpbml0aWFsIHNpemUgb2YgdGhlIGltYWdlIGlmIGl0IGV4Y2VlZHMgc2NyZWVuIHNpemVcblx0aWYgKG9yaWdpbmFsV2lkdGggPiBzY3JlZW5XaWR0aCB8fCBvcmlnaW5hbEhlaWdodCA+IHNjcmVlbkhlaWdodCkge1xuXHRcdGlmIChvcmlnaW5hbFdpZHRoIC8gc2NyZWVuV2lkdGggPiBvcmlnaW5hbEhlaWdodCAvIHNjcmVlbkhlaWdodCkge1xuXHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUud2lkdGggPSBgJHtzY3JlZW5XaWR0aCAqIHNjcmVlblJhdGlvfXB4YDtcblx0XHRcdHpvb21lZEltYWdlLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gYCR7c2NyZWVuSGVpZ2h0ICogc2NyZWVuUmF0aW99cHhgO1xuXHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUud2lkdGggPSAnYXV0byc7XG5cdFx0fVxuXHR9ZWxzZXtcblx0XHR6b29tZWRJbWFnZS5zdHlsZS53aWR0aCA9IGAke29yaWdpbmFsV2lkdGh9cHhgO1xuXHRcdHpvb21lZEltYWdlLnN0eWxlLmhlaWdodCA9IGAke29yaWdpbmFsSGVpZ2h0fXB4YDtcblx0fVxufVxuXG5mdW5jdGlvbiBoYW5kbGVab29tRHJhZ1N0YXJ0KGU6IE1vdXNlRXZlbnQsem9vbWVkSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgICAvLyBcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcdTc2ODRcdTRFRTNcdTc4MDEgLi4uXG5cdC8vIFx1OTYzQlx1NkI2Mlx1NkQ0Rlx1ODlDOFx1NTY2OFx1OUVEOFx1OEJBNFx1NzY4NFx1NjJENlx1NTJBOFx1NEU4Qlx1NEVGNlxuXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0Ly8gXHU4QkIwXHU1RjU1XHU3MEI5XHU1MUZCXHU0RjREXHU3RjZFXG5cdGxldCBjbGlja1ggPSBlLmNsaWVudFg7XG5cdGxldCBjbGlja1kgPSBlLmNsaWVudFk7XG5cblx0Ly8gXHU2NkY0XHU2NUIwXHU1MTQzXHU3RDIwXHU0RjREXHU3RjZFXHU3Njg0XHU1NkRFXHU4QzAzXHU1MUZEXHU2NTcwXG5cdGNvbnN0IHVwZGF0ZVBvc2l0aW9uID0gKG1vdmVFdnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHQvLyBcdThCQTFcdTdCOTdcdTlGMjBcdTY4MDdcdTc5RkJcdTUyQThcdThERERcdTc5QkJcblx0XHRsZXQgbW92ZVggPSBtb3ZlRXZ0LmNsaWVudFggLSBjbGlja1g7XG5cdFx0bGV0IG1vdmVZID0gbW92ZUV2dC5jbGllbnRZIC0gY2xpY2tZO1xuXG5cdFx0Ly8gXHU1QjlBXHU0RjREXHU1NkZFXHU3MjQ3XHU0RjREXHU3RjZFXG5cdFx0em9vbWVkSW1hZ2Uuc3R5bGUubGVmdCA9IGAke3pvb21lZEltYWdlLm9mZnNldExlZnQgKyBtb3ZlWH1weGA7XG5cdFx0em9vbWVkSW1hZ2Uuc3R5bGUudG9wID0gYCR7em9vbWVkSW1hZ2Uub2Zmc2V0VG9wICsgbW92ZVl9cHhgO1xuXG5cdFx0Ly8gXHU2NkY0XHU2NUIwXHU3MEI5XHU1MUZCXHU0RjREXHU3RjZFXG5cdFx0Y2xpY2tYID0gbW92ZUV2dC5jbGllbnRYO1xuXHRcdGNsaWNrWSA9IG1vdmVFdnQuY2xpZW50WTtcblx0fVxuXG5cdC8vIFx1OUYyMFx1NjgwN1x1NzlGQlx1NTJBOFx1NEU4Qlx1NEVGNlxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB1cGRhdGVQb3NpdGlvbik7XG5cblx0Ly8gXHU5RjIwXHU2ODA3XHU2NzdFXHU1RjAwXHU0RThCXHU0RUY2XG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5jdGlvbiBsaXN0ZW5lcigpIHtcblx0XHQvLyBcdTc5RkJcdTk2NjRcdTlGMjBcdTY4MDdcdTc5RkJcdTUyQThcdTU0OENcdTlGMjBcdTY4MDdcdTY3N0VcdTVGMDBcdTc2ODRcdTc2RDFcdTU0MkNcdTU2Njhcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB1cGRhdGVQb3NpdGlvbik7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGxpc3RlbmVyKTtcblx0fSwgeyBvbmNlOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRFeGNhbGlkcmF3QmFzZU5hbWUodGFyZ2V0OiBIVE1MSW1hZ2VFbGVtZW50KTogc3RyaW5nIHtcblx0bGV0IHRhcmdldF9uYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZmlsZXNvdXJjZScpIGFzIHN0cmluZztcblx0bGV0IGZpbGVfYmFzZV9uYW1lID0gdGFyZ2V0X25hbWVcblx0aWYgKGZpbGVfYmFzZV9uYW1lLmluY2x1ZGVzKCcvJykpIHtcblx0XHRsZXQgdGVtcF9hcnIgPSBmaWxlX2Jhc2VfbmFtZS5zcGxpdCgnLycpO1xuXHRcdGZpbGVfYmFzZV9uYW1lID0gdGVtcF9hcnJbdGVtcF9hcnIubGVuZ3RoIC0gMV1cblx0fSBlbHNlIGlmIChmaWxlX2Jhc2VfbmFtZS5pbmNsdWRlcygnXFxcXCcpKSB7XG5cdFx0bGV0IHRlbXBfYXJyID0gZmlsZV9iYXNlX25hbWUuc3BsaXQoJ1xcXFwnKTtcblx0XHRmaWxlX2Jhc2VfbmFtZSA9IHRlbXBfYXJyW3RlbXBfYXJyLmxlbmd0aCAtIDFdXG5cdH1cblx0ZmlsZV9iYXNlX25hbWUgPSBmaWxlX2Jhc2VfbmFtZS5lbmRzV2l0aCgnLm1kJykgP1xuXHRcdGZpbGVfYmFzZV9uYW1lLnN1YnN0cmluZygwLCBmaWxlX2Jhc2VfbmFtZS5sZW5ndGggLSAzKSA6XG5cdFx0ZmlsZV9iYXNlX25hbWU7XG5cdHJldHVybiBmaWxlX2Jhc2VfbmFtZTtcbn0iLCAiaW1wb3J0IHsgTm90aWNlLCBURmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgZ2V0RmlsZVBhcmVudEZvbGRlciB9IGZyb20gXCJzcmMvdXRpbFwiO1xuaW1wb3J0IHsgZGVsZXRlRmlsZSB9IGZyb20gXCJzcmMvdXRpbHMvZGVsZXRlRmlsZVwiO1xuaW1wb3J0IEF0dGFjaEZsb3dQbHVnaW4gZnJvbSBcIi4uLy4uL3NyYy9tYWluXCI7XG4vKipcbiAqIGRlbEFsbEF0dGFjaHNCeUNvbW1hbmRcbiAqXG4gKiAxLiBnZXQgY3VycmVudCBmaWxlXG4gKiAyLiBnZXQgVEZpbGUgb2YgdGhlIGF0dGFjaG1lbnQgcmVmZXJlbmNlZCBieSBmaWxlXG4gKi9cbmV4cG9ydCBjb25zdCBkZWxldGVBbGxBdHRhY2hzID0gYXN5bmMgKHBsdWdpbjogQXR0YWNoRmxvd1BsdWdpbikgPT4ge1xuXHQvLyAxLiBnZXQgY3VycmVudCBmaWxlXG5cdGNvbnN0IGFjdGl2ZU1kOiBURmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpIGFzIFRGaWxlO1xuXHRjb25zdCByZXNvbHZlZExpbmtzID0gYXBwLm1ldGFkYXRhQ2FjaGUucmVzb2x2ZWRMaW5rcztcblx0Y29uc3QgYXR0YWNoc1BhdGhzOiBzdHJpbmdbXSA9IFtdO1xuXHRmb3IgKGNvbnN0IFttZEZpbGUsIGxpbmtzXSBvZiBPYmplY3QuZW50cmllcyhyZXNvbHZlZExpbmtzKSkge1xuXHRcdGlmIChhY3RpdmVNZD8ucGF0aCA9PT0gbWRGaWxlKSB7XG5cdFx0XHRsZXQgZmlsZUNvdW50ID0gMDtcblx0XHRcdGxldCBmbGFnID0gZmFsc2U7XG5cdFx0XHRmb3IgKGNvbnN0IFtmaWxlUGF0aCwgbnJdIG9mIE9iamVjdC5lbnRyaWVzKGxpbmtzKSkge1xuXHRcdFx0XHQvLyBJZiB0aGUgZmlsZVBhdGggZW5kcyB3aXRoICcubWQnICx3aGljaCBpbmRpY2F0ZXMgdGhlIGZpbGUgaXMgbWFya2Rvd24gZmlsZSwgYW5kIGRvIG5vdCBkZWxldGUgaXRcblx0XHRcdFx0aWYgKGZpbGVQYXRoLm1hdGNoKC8uKlxcLm1kJC9tKSkgY29udGludWU7XG5cdFx0XHRcdC8vIGlmIHRoZSBhdHRhY2htZW50IGluIHRoZSBub3RlIGhhcyBiZWVuIHJlZmVyZW5jZWQgYnkgb3RoZXIgbm90ZXMgIHNpbXVsdGFuZW91c2x5IHNraXAgaXQuXG5cdFx0XHRcdGlmIChpc1JlZmVyZW5jZWRCeU90aGVyTm90ZXMoZmlsZVBhdGgsIGFjdGl2ZU1kKSkgY29udGludWU7XG5cdFx0XHRcdGF0dGFjaHNQYXRocy5wdXNoKGZpbGVQYXRoKTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyAyLiBnZXQgVEZpbGUgb2YgdGhlIGF0dGFjaG1lbnQgcmVmZXJlbmNlZCBieSBmaWxlXG5cdFx0XHRcdFx0Y29uc3QgQXR0YWNoRmlsZTogVEZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFxuXHRcdFx0XHRcdFx0ZmlsZVBhdGhcblx0XHRcdFx0XHQpIGFzIFRGaWxlO1xuXHRcdFx0XHRcdGlmIChBdHRhY2hGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0XHRcdGRlbGV0ZUZpbGUoQXR0YWNoRmlsZSwgcGx1Z2luKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgcGFyZW50Rm9sZGVyID0gZ2V0RmlsZVBhcmVudEZvbGRlcihcblx0XHRcdFx0XHRcdEF0dGFjaEZpbGVcblx0XHRcdFx0XHQpIGFzIFRGb2xkZXI7XG5cdFx0XHRcdFx0aWYgKCFmbGFnKSB7XG5cdFx0XHRcdFx0XHRmaWxlQ291bnQgPSBwYXJlbnRGb2xkZXIuY2hpbGRyZW4ubGVuZ3RoO1xuXHRcdFx0XHRcdFx0ZmxhZyA9ICFmbGFnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmaWxlQ291bnQgPSBmaWxlQ291bnQgLSAxO1xuXHRcdFx0XHRcdGlmICghZmlsZUNvdW50KSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBkZWxldGVGaWxlKHBhcmVudEZvbGRlciwgcGx1Z2luKTtcblx0XHRcdFx0XHRcdC8vIGF3YWl0IGFwcC52YXVsdC5kZWxldGUocGFyZW50Rm9sZGVyLCB0cnVlKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXG5cdFx0XHRcdFx0XHRcdFwiQWxsIGF0dGFjaG1lbnRzIGFuZCBpdHMgcGFyZW50IGZvbGRlciBkZWxldGVkIVwiLFxuXHRcdFx0XHRcdFx0XHQzMDAwXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oZXJyb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdC8vIHJlbW92ZUFsbFVudXNlZFJlZmVyZW5jZUxpbmtzKGFjdGl2ZU1kLCBhdHRhY2hzUGF0aHMpO1xufTtcbi8qKlxuICpcbiAqIEBwYXJhbSBhdHRhY2hQYXRoXG4gKiBAcGFyYW0gY3VycmVudE1kXG4gKiBAcmV0dXJuc1xuICovXG5jb25zdCBpc1JlZmVyZW5jZWRCeU90aGVyTm90ZXMgPSAoXG5cdGF0dGFjaFBhdGg6IHN0cmluZyxcblx0Y3VycmVudE1kOiBURmlsZVxuKTogYm9vbGVhbiA9PiB7XG5cdGNvbnN0IHJlc29sdmVkTGlua3MgPSBhcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xuXHRsZXQgZmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuXG5cdGZvciAoY29uc3QgW21kRmlsZSwgbGlua3NdIG9mIE9iamVjdC5lbnRyaWVzKHJlc29sdmVkTGlua3MpKSB7XG5cdFx0aWYgKG1kRmlsZSAhPT0gY3VycmVudE1kLnBhdGgpIHtcblx0XHRcdGZvciAoY29uc3QgW2ZpbGVQYXRoLCBucl0gb2YgT2JqZWN0LmVudHJpZXMobGlua3MpKSB7XG5cdFx0XHRcdGlmIChmaWxlUGF0aCA9PT0gYXR0YWNoUGF0aCkge1xuXHRcdFx0XHRcdGZsYWcgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBmbGFnO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYWxsIHJlZmVyZW5jZSBsaW5rc1xuICpcbiAqIEBwYXJhbSBpbWFnZVBhdGhzICBwYXRoICBsaXN0ICBvZiB0aGUgY3VycmVudCBkZWxldGVkIGltYWdlIHdpdGhvdXQgc3VicGF0aCxmb3JtYXQgYXMgIG5hbWUuZXh0ZW5zaW9uXG4gKiBAcGFyYW0gbWRGaWxlICB0aGUgbWFya2Rvd24gZmlsZSBjb250YWluaW5nIHRoZSBkZWxldGVkIGltYWdlXG4gKi9cbmV4cG9ydCBjb25zdCByZW1vdmVBbGxVbnVzZWRSZWZlcmVuY2VMaW5rcyA9IGFzeW5jIChcblx0YWN0aXZlTWQ6IFRGaWxlLFxuXHRhdHRhY2hzUGF0aHM6IHN0cmluZ1tdXG4pID0+IHtcblx0Ly8gMS5nZXQgcGF0aCBsaXN0IG9mIGFsbCB1bnVzZWQgYXR0YWNobWVudHNcblx0Y29uc3Qgb3JpZ2luQ29udGVudHMgPSBhd2FpdCBhcHAudmF1bHQucmVhZChhY3RpdmVNZCk7XG5cdGNvbnN0IGxpbmVzID0gb3JpZ2luQ29udGVudHMuc3BsaXQoXCJcXG5cIik7XG5cdGNvbnN0IG5ld0NvbnRlbnRzOiBzdHJpbmdbXSA9IFtdO1xuXHRsZXQgaXNOb3RUYXJnZXRMaW5lOiBib29sZWFuID0gdHJ1ZTtcblxuXHQvLyAyLiBjbGVhciBhbGwgdW51c2VkIGF0dGFjaG1lbnRzIGxpbmtzIGluIHRoZSBub3RlXG5cdC8vIEVzY2FwZSAuIHRvIFxcLiBmb3IgcmVndWxhciBleHByZXNpb25cblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Zm9yIChjb25zdCBpbmRleCBpbiBhdHRhY2hzUGF0aHMpIHtcblx0XHRcdGNvbnN0IHJlZ01kUmVmTGluayA9IG5ldyBSZWdFeHAoXG5cdFx0XHRcdFwiIVxcXFxbKC4qKT9cXFxcXVxcXFwoKCguKlxcXFwvKSspP1wiICsgYXR0YWNoc1BhdGhzW2luZGV4XSArIFwiXFxcXClcIixcblx0XHRcdFx0XCJnbVwiXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3QgcmVnV2lraVJlZkxpbmsyID0gbmV3IFJlZ0V4cChcblx0XHRcdFx0XCIhXFxcXFtcXFxcWy4qP1wiICsgYXR0YWNoc1BhdGhzW2luZGV4XSArIFwiKFxcXFx8XFxcXGQqKT9cXFxcXVxcXFxdXCIsXG5cdFx0XHRcdFwiZ21cIlxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IGRlY29kZUxpbmUgPSBkZWNvZGVVUkkobGluZSk7XG5cdFx0XHRjb25zdCBpc0luY2x1ZGVJbWFnZSA9IGRlY29kZUxpbmUuaW5jbHVkZXMoYXR0YWNoc1BhdGhzW2luZGV4XSk7XG5cdFx0XHRjb25zdCBpc01hcmtkb3duU3R5bGUgPSBkZWNvZGVMaW5lLm1hdGNoKHJlZ01kUmVmTGluaykgIT0gbnVsbDtcblx0XHRcdGNvbnN0IGlzV2lraVN0eWxlID0gZGVjb2RlTGluZS5tYXRjaChyZWdXaWtpUmVmTGluazIpICE9IG51bGw7XG5cdFx0XHRpZiAoaXNJbmNsdWRlSW1hZ2UgJiYgaXNNYXJrZG93blN0eWxlKSB7XG5cdFx0XHRcdGlzTm90VGFyZ2V0TGluZSA9IGZhbHNlO1xuXHRcdFx0XHRuZXdDb250ZW50cy5wdXNoKGRlY29kZUxpbmUucmVwbGFjZShyZWdNZFJlZkxpbmssIFwiXCIpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9IGVsc2UgaWYgKGlzSW5jbHVkZUltYWdlICYmIGlzV2lraVN0eWxlKSB7XG5cdFx0XHRcdGlzTm90VGFyZ2V0TGluZSA9IGZhbHNlO1xuXHRcdFx0XHRuZXdDb250ZW50cy5wdXNoKGRlY29kZUxpbmUucmVwbGFjZShyZWdXaWtpUmVmTGluazIsIFwiXCIpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGlzTm90VGFyZ2V0TGluZSkgbmV3Q29udGVudHMucHVzaChsaW5lKTtcblx0fVxuXHRhcHAudmF1bHQuYWRhcHRlci53cml0ZShhY3RpdmVNZC5wYXRoLCBuZXdDb250ZW50cy5qb2luKFwiXFxuXCIpKTtcbn07XG5leHBvcnQgY29uc3QgZ2V0UmVmZW5jZWRMaW5rQ291bnQgPSAoKTogbnVtYmVyID0+IHtcblx0Y29uc3QgYWN0aXZlTWQ6IFRGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkgYXMgVEZpbGU7XG5cdGNvbnN0IHJlc29sdmVkTGlua3MgPSBhcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xuXHRjb25zdCBhdHRhY2hzUGF0aHM6IHN0cmluZ1tdID0gW107XG5cdGZvciAoY29uc3QgW21kRmlsZSwgbGlua3NdIG9mIE9iamVjdC5lbnRyaWVzKHJlc29sdmVkTGlua3MpKSB7XG5cdFx0aWYgKGFjdGl2ZU1kPy5wYXRoID09PSBtZEZpbGUpIHtcblx0XHRcdGZvciAoY29uc3QgW2ZpbGVQYXRoLCBucl0gb2YgT2JqZWN0LmVudHJpZXMobGlua3MpKSB7XG5cdFx0XHRcdGlmIChmaWxlUGF0aC5tYXRjaCgvLipcXC5tZCQvbSkpIGNvbnRpbnVlO1xuXHRcdFx0XHRpZiAoaXNSZWZlcmVuY2VkQnlPdGhlck5vdGVzKGZpbGVQYXRoLCBhY3RpdmVNZCkpIGNvbnRpbnVlO1xuXHRcdFx0XHRhdHRhY2hzUGF0aHMucHVzaChmaWxlUGF0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBhdHRhY2hzUGF0aHMubGVuZ3RoO1xufTtcbiIsICJpbXBvcnQgQXR0YWNoRmxvd1BsdWdpbiBmcm9tIFwic3JjL21haW5cIjtcbmltcG9ydCB7IFRGaWxlLCBOb3RpY2UsIFRGb2xkZXIsIE1hcmtkb3duVmlldywgRWRpdG9yfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGltYWdlUmVmZXJlbmNlZFN0YXRlIH0gZnJvbSBcIi4vZW51bS9pbWFnZVJlZmVyZW5jZWRTdGF0ZVwiO1xuaW1wb3J0IHsgcmVzdWx0RGV0ZXJtaW5lSW1hZ2VEZWxldGlvbiBhcyBkZWxldGlvblJlc3VsdCB9IGZyb20gXCIuL2ludGVyZmFjZS9yZXN1bHREZXRlcm1pbmVJbWFnZURlbGV0aW9uXCI7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgeyBleGVjLCBleGVjU3luYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IHsgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7XG5cdEVsZWN0cm9uV2luZG93LCBGaWxlU3lzdGVtQWRhcHRlcldpdGhJbnRlcm5hbEFwaSxcblx0bG9hZEltYWdlQmxvYiwgQXBwV2l0aERlc2t0b3BJbnRlcm5hbEFwaSwgRWRpdG9ySW50ZXJuYWxBcGlcbiAgfSBmcm9tIFwiLi9oZWxwZXJzXCJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIEZ1enp5U3VnZ2VzdE1vZGFsLCBWYXVsdCwgRnV6enlNYXRjaCB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgbGV0IERFQlVHOmJvb2xlYW4gPSBmYWxzZTtcbmNvbnN0IFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQgPSAxODAwO1xuXG5leHBvcnQgY29uc3QgcHJpbnQ9KG1lc3NhZ2U/OiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSkgPT57XG4gICAgaWYgKERFQlVHKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWJ1Zyh2YWx1ZTogYm9vbGVhbikge1xuICAgIERFQlVHID0gdmFsdWU7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB0YXJnZXRfZmlsZSBcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdTc2RUVcdTY4MDdcdTY1ODdcdTRFRjZcbiAqIEBwYXJhbSBjdXJyZW50TWRcdFx1NUY1M1x1NTI0RFx1NjI0MFx1NTcyOFx1NzY4NCBtYXJrZG93biBcdTY1ODdcdTRFRjZcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBjb25zdCBjaGVja1JlZmVyZW5jZUluZm8gPSAoXG5cdHRhcmdldF9maWxlOiBURmlsZSxcblx0Y3VycmVudE1kOiBURmlsZVxuKTogeyBzdGF0ZTogbnVtYmVyOyBtZFBhdGg6IHN0cmluZ1tdIH0gPT4ge1xuXG5cdGNvbnN0IHJlc29sdmVkTGlua3MgPSBhcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xuXHRsZXQgQ3VyTURQYXRoOiBzdHJpbmc7XG5cdC8vIC8vIHJlY29yZCB0aGUgc3RhdGUgb2YgaW1hZ2UgcmVmZXJlbmNlZCBhbmQgYWxsIHBhdGhzIG9mIG1hcmtkb3duIHJlZmVyZW5jaW5nIHRvIHRoZSBpbWFnZVxuXHRsZXQgcmVzdWx0OiBkZWxldGlvblJlc3VsdCA9IHtcblx0XHRzdGF0ZTogMCxcblx0XHRtZFBhdGg6IFtdLFxuXHR9O1xuXHRsZXQgcmVmTnVtID0gMDsgLy8gcmVjb3JkIHRoZSBudW1iZXIgb2Ygbm90ZSByZWZlcmVuY2luZyB0byB0aGUgaW1hZ2UuXG5cdGZvciAoY29uc3QgW21kRmlsZSwgbGlua3NdIG9mIE9iamVjdC5lbnRyaWVzKHJlc29sdmVkTGlua3MpKSB7XG5cdFx0aWYgKGN1cnJlbnRNZC5wYXRoID09PSBtZEZpbGUpIHtcblx0XHRcdEN1ck1EUGF0aCA9IGN1cnJlbnRNZC5wYXRoO1xuXHRcdFx0cmVzdWx0Lm1kUGF0aC51bnNoaWZ0KEN1ck1EUGF0aCk7XG5cdFx0fVxuXHRcdGZvciAoY29uc3QgW2ZpbGVQYXRoLCBucl0gb2YgT2JqZWN0LmVudHJpZXMobGlua3MpKSB7XG5cdFx0XHRpZiAodGFyZ2V0X2ZpbGU/LnBhdGggPT09IGZpbGVQYXRoKSB7XG5cdFx0XHRcdHJlZk51bSsrO1xuXHRcdFx0XHQvLyBpZiB0aGUgZGVsZXRlZCB0YXJnZXQgaW1hZ2UgcmVmZXJlbmNlZCBieSBjdXJyZW50IG5vdGUgbW9yZSB0aGFuIG9uY2Vcblx0XHRcdFx0aWYgKG5yID4gMSkge1xuXHRcdFx0XHRcdHJlc3VsdC5zdGF0ZSA9IGltYWdlUmVmZXJlbmNlZFN0YXRlLk1PUkU7XG5cdFx0XHRcdFx0cmVzdWx0Lm1kUGF0aC5wdXNoKG1kRmlsZSk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXN1bHQubWRQYXRoLnB1c2gobWRGaWxlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKHJlZk51bSA+IDEpIHtcblx0XHRyZXN1bHQuc3RhdGUgPSBpbWFnZVJlZmVyZW5jZWRTdGF0ZS5NVVRJUExFO1xuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdC5zdGF0ZSA9IGltYWdlUmVmZXJlbmNlZFN0YXRlLk9OQ0U7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cblxuLyoqXG4gKiBcdFx1OTAxQVx1OEZDN1x1NUY1M1x1NTI0RG1kXHU2NTg3XHU0RUY2XHU1NDhDXHU1NkZFXHU3MjQ3XHU1NDBEIFx1ODNCN1x1NTNENiBcdTU2RkVcdTcyNDdcdTY1ODdcdTRFRjZcdTVCRjlcdThDNjEgICBcdUZGMENcdTdDN0JcdTU3OEJcdTRFM0FURmlsZVxuICogXG5cdEBwYXJhbSBjdXJyZW50TWQgIFx1NUY1M1x1NTI0RFx1OTcwMFx1ODk4MVx1ODhBQlx1NTIyMFx1OTY2NFx1NzY4NGN1ck1kXHU2MjQwXHU1NzI4XHU3Njg0bWFya2Rvd25cdTY1ODdcdTRFRjZcblx0QHBhcmFtIEZpbGVCYXNlTmFtZSAgXHU1RjUzXHU1MjREXHU5NzAwXHU4OTgxXHU4OEFCXHU1MjIwXHU5NjY0XHU3Njg0Y3VyTWRcdTU0MEQgbmFtZS5leHRlbnNpb25cbiAqICBAcmV0dXJucyAgQXR0YWNoRmlsZVxuICovXG5leHBvcnQgY29uc3QgZ2V0RmlsZUJ5QmFzZU5hbWUgPSAoXG5cdGN1cnJlbnRNZDogVEZpbGUsXG5cdEZpbGVCYXNlTmFtZTogc3RyaW5nXG4pOiBURmlsZSB8IHVuZGVmaW5lZCA9PiB7XG5cdGNvbnN0IHJlc29sdmVkTGlua3MgPSBhcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xuXHRmb3IgKGNvbnN0IFttZEZpbGUsIGxpbmtzXSBvZiBPYmplY3QuZW50cmllcyhyZXNvbHZlZExpbmtzKSkge1xuXHRcdGlmIChjdXJyZW50TWQucGF0aCA9PT0gbWRGaWxlKSB7XG5cdFx0XHRmb3IgKGNvbnN0IFtmaWxlUGF0aCwgbnJdIG9mIE9iamVjdC5lbnRyaWVzKGxpbmtzKSkge1xuXHRcdFx0XHQvLyBwcmludCgnZmlsZVBhdGgnLCBmaWxlUGF0aClcblx0XHRcdFx0Ly8gcHJpbnQoRmlsZUJhc2VOYW1lKVxuXHRcdFx0XHRpZiAoZmlsZVBhdGguaW5jbHVkZXMoRmlsZUJhc2VOYW1lKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCBBdHRhY2hGaWxlOiBURmlsZSA9XG5cdFx0XHRcdFx0XHRcdGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpIGFzIFRGaWxlO1xuXHRcdFx0XHRcdFx0aWYgKEF0dGFjaEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gQXR0YWNoRmlsZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgIGNhbm5vdCBnZXQgdGhlIGltYWdlIGZpbGVgKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLyoqXG4gKiBcdTUyMjBcdTk2NjRcdTYzMDdcdTVCOUFcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcbiAqXG4gKiBAcGFyYW0gZmlsZSAgXHU2MzA3XHU1QjlBXHU3Njg0XHU5NjQ0XHU0RUY2XHU2NTg3XHU0RUY2XG4gKiBAcGFyYW0gcGx1Z2luIFx1NUY1M1x1NTI0RFx1NjNEMlx1NEVGNlxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGNvbnN0IFB1cmVDbGVhckF0dGFjaG1lbnQgPSBhc3luYyAoXG5cdGZpbGU6IFRGaWxlLFxuXHR0YXJnZXRfdHlwZTogc3RyaW5nLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW5cbikgPT4ge1xuXHRjb25zdCBkZWxldGVPcHRpb24gPSBwbHVnaW4uc2V0dGluZ3MuZGVsZXRlT3B0aW9uO1xuXHRjb25zdCBkZWxGaWxlRm9sZGVyID0gb25seU9uZUZpbGVFeGlzdHMoZmlsZSk7XG5cdGNvbnN0IGZpbGVGb2xkZXIgPSBnZXRGaWxlUGFyZW50Rm9sZGVyKGZpbGUpIGFzIFRGb2xkZXI7XG5cdGxldCBuYW1lID0gdGFyZ2V0X3R5cGU9PSdpbWcnID8gJ0ltYWdlJyA6ICdGaWxlJztcblx0dHJ5IHtcblx0XHRpZiAoZGVsZXRlT3B0aW9uID09PSBcIi50cmFzaFwiKSB7XG5cdFx0XHRhd2FpdCBhcHAudmF1bHQudHJhc2goZmlsZSwgZmFsc2UpO1xuXHRcdFx0bmV3IE5vdGljZShcblx0XHRcdFx0bmFtZSArIFwiIG1vdmVkIHRvIE9ic2lkaWFuIFRyYXNoICFcIixcblx0XHRcdFx0U1VDQ0VTU19OT1RJQ0VfVElNRU9VVFxuXHRcdFx0KTtcblx0XHRcdGlmIChkZWxGaWxlRm9sZGVyKSB7XG5cdFx0XHRcdGF3YWl0IGFwcC52YXVsdC50cmFzaChmaWxlRm9sZGVyLCBmYWxzZSk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJBdHRhY2htZW50IGZvbGRlciBoYXZlIGJlZW4gZGVsZXRlZCFcIiwgMzAwMCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChkZWxldGVPcHRpb24gPT09IFwic3lzdGVtLXRyYXNoXCIpIHtcblx0XHRcdGF3YWl0IGFwcC52YXVsdC50cmFzaChmaWxlLCB0cnVlKTtcblx0XHRcdG5ldyBOb3RpY2UobmFtZSArIFwiIG1vdmVkIHRvIFN5c3RlbSBUcmFzaCAhXCIsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHRcdFx0aWYgKGRlbEZpbGVGb2xkZXIpIHtcblx0XHRcdFx0YXdhaXQgYXBwLnZhdWx0LnRyYXNoKGZpbGVGb2xkZXIsIHRydWUpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQXR0YWNobWVudCBmb2xkZXIgaGF2ZSBiZWVuIGRlbGV0ZWQhXCIsIDMwMDApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoZGVsZXRlT3B0aW9uID09PSBcInBlcm1hbmVudFwiKSB7XG5cdFx0XHRhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGZpbGUpO1xuXHRcdFx0bmV3IE5vdGljZShuYW1lICsgXCIgZGVsZXRlZCBQZXJtYW5lbnRseSAhXCIsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHRcdFx0aWYgKGRlbEZpbGVGb2xkZXIpIHtcblx0XHRcdFx0YXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShmaWxlRm9sZGVyLCB0cnVlKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkF0dGFjaG1lbnQgZm9sZGVyIGhhdmUgYmVlbiBkZWxldGVkIVwiLCAzMDAwKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0bmV3IE5vdGljZShcIkZhaWxkIHRvIGRlbGVsdGUgdGhlIFwiICsgbmFtZSArIFwiIVwiLCBTVUNDRVNTX05PVElDRV9USU1FT1VUKTtcblx0fVxufTtcblxuXG5leHBvcnQgY29uc3QgaGFuZGxlckRlbEZpbGVOZXcgPSAoXG5cdEZpbGVCYXNlTmFtZTogc3RyaW5nLFxuXHRjdXJyZW50TWQ6IFRGaWxlLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW4sXG5cdHRhcmdldF90eXBlOiBzdHJpbmcsXG5cdHRhcmdldF9wb3M6IG51bWJlcixcblx0aW5fdGFibGU6IGJvb2xlYW4sXG5cdGluX2NhbGxvdXQ6IGJvb2xlYW5cbikgPT4ge1xuXHRsZXQgbG9nczogc3RyaW5nW107XG5cdGxldCBtb2RhbDtcblx0Y29uc3QgdGFyZ2V0X2ZpbGUgPSBnZXRGaWxlQnlCYXNlTmFtZShjdXJyZW50TWQsIEZpbGVCYXNlTmFtZSkgYXMgVEZpbGU7XG5cdGNvbnN0IHJlZkluZm8gPSBjaGVja1JlZmVyZW5jZUluZm8odGFyZ2V0X2ZpbGUsIGN1cnJlbnRNZCk7XG5cdGxldCBzdGF0ZSA9IHJlZkluZm8uc3RhdGU7XG5cdHN3aXRjaCAoc3RhdGUpIHtcblx0XHRjYXNlIDA6XG5cdFx0XHQvLyBjbGVhciBhdHRhY2htZW50IGRpcmVjdGx5XG5cdFx0XHRkZWxldGVDdXJUYXJnZXRMaW5rKEZpbGVCYXNlTmFtZSwgcGx1Z2luLCB0YXJnZXRfdHlwZSwgdGFyZ2V0X3BvcywgaW5fdGFibGUsIGluX2NhbGxvdXQpO1xuXHRcdFx0UHVyZUNsZWFyQXR0YWNobWVudCh0YXJnZXRfZmlsZSwgdGFyZ2V0X3R5cGUsIHBsdWdpbik7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIDE6XG5cdFx0Y2FzZSAyOlxuXHRcdFx0ZGVsZXRlQ3VyVGFyZ2V0TGluayhGaWxlQmFzZU5hbWUsIHBsdWdpbiwgdGFyZ2V0X3R5cGUsIHRhcmdldF9wb3MsIGluX3RhYmxlLCBpbl9jYWxsb3V0KTtcblx0XHRcdC8vIHJlZmVyZW5jZWQgYnkgZWl0aG9yIG9ubHkgbm90ZSBvciBvdGhlciBtdXRpcGxlIG5vdGVzIG1vcmUgdGhhbiBvbmNlXG5cdFx0XHRsb2dzID0gcmVmSW5mby5tZFBhdGggYXMgc3RyaW5nW107XG5cdFx0XHQvLyBcdTc1MzFcdTRFOEVcdTY3MDlcdTUyMkJcdTc2ODRcdTVGMTVcdTc1MjhcdUZGMENcdTYyNDBcdTRFRTVcdTUzRUFcdTUyMjBcdTk2NjRcdTVGNTNcdTUyNERcdTc2ODRcdTVGMTVcdTc1MjhcdTk0RkVcdTYzQTVcdTgwMENcdTRFMERcdTUyMjBcdTk2NjRcdTY1ODdcdTRFRjZcblx0XHRcdG5ldyBOb3RpY2UoXCJBcyBvdGhlciByZWZlcmVuY2VzIG9mIGN1cnJlbnQgZmlsZSBleGlzdCwgXCIgKyBcblx0XHRcdFx0XCJqdXN0IGRlbGV0ZWQgdGhlIGN1cnJlbnQgcmVmZXJlbmNlIGxpbmsgd2l0aG91dCBkZWxldGluZyB0aGUgYWN0dWFsIGZpbGUuXCIsIFxuXHRcdFx0XHQzNTAwKTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0YnJlYWs7XG5cdH1cbn1cblxuLy8gXHU1OTgyXHU2NzlDXHU2NjJGIHR5cGUgXHU2NjJGIFwiaW1nXCJcdUZGMENcdTVDMzFcdTUxQzZcdTc4NkVcdTUyMjBcdTk2NjRcdTU2RkVcdTcyNDdcdTVGMTVcdTc1MjhcdTk0RkVcdTYzQTVcdTc2ODRcdTkwRThcdTUyMDZcdUZGMENcdTU5ODJcdTY3OUNcdTY2MkZcdTUxNzZcdTRFRDZcdTdDN0JcdTU3OEJcdUZGMENcdTc2RjRcdTYzQTVcdTUyMjBcdTk2NjRcdTY1NzRcdTg4NENcbi8vIHRhcmdldF9saW5lIFx1RkYwODEtYmFzZWRcdUZGMDkgXHU1NDhDIHRhcmdldF9jaCBcdTY2MkZcdTYzMDdcdTc5M0FcdTk2NDRcdTRFRjZcdTYyNDBcdTU3MjhcdTc2ODRcdTRGNERcdTdGNkVcbmV4cG9ydCBjb25zdCBkZWxldGVDdXJUYXJnZXRMaW5rID0gKFxuXHRmaWxlX2Jhc2VfbmFtZTogc3RyaW5nLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW4sXG5cdHRhcmdldF90eXBlOiBzdHJpbmcsXG5cdHRhcmdldF9wb3M6IG51bWJlcixcblx0aW5fdGFibGU6IGJvb2xlYW4sXG5cdGluX2NhbGxvdXQ6IGJvb2xlYW5cbikgPT4ge1xuXHRmaWxlX2Jhc2VfbmFtZSA9IGZpbGVfYmFzZV9uYW1lLnN0YXJ0c1dpdGgoJy8nKSA/IGZpbGVfYmFzZV9uYW1lLnN1YnN0cmluZygxKTpmaWxlX2Jhc2VfbmFtZTtcblx0Y29uc3QgYWN0aXZlVmlldyA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KSBhcyBNYXJrZG93blZpZXc7XG5cdGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuXHQvLyAgQHRzLWV4cGVjdC1lcnJvciwgbm90IHR5cGVkXG5cdGNvbnN0IGVkaXRvclZpZXcgPSBlZGl0b3IuY20gYXMgRWRpdG9yVmlldztcblxuXHRsZXQgdGFyZ2V0X2xpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lQXQodGFyZ2V0X3Bvcyk7XG5cdGxldCBsaW5lX3RleHQgPSB0YXJnZXRfbGluZS50ZXh0O1xuXG5cdGlmICghaW5fdGFibGUgJiYgIWluX2NhbGxvdXQpe1xuXHRcdGxldCBmaW5kcyA9IGZpbmRMaW5rSW5MaW5lKGZpbGVfYmFzZV9uYW1lLCBsaW5lX3RleHQpO1xuXHRcdGlmIChmaW5kcy5sZW5ndGggPT0gMCl7XG5cdFx0XHRuZXcgTm90aWNlKFwiRmFpbCB0byBmaW5kIHRoZSBsaW5rLXRleHQsIHBsZWFzZSBkZWxldGUgaXQgbWFudWFsbHkhXCIsIDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRlbHNlIGlmKGZpbmRzLmxlbmd0aCAhPSAxKXtcblx0XHRcdG5ldyBOb3RpY2UoXCJGaW5kIG11bHRpcGxlIHNhbWUgTGluayBpbiBjdXJyZW50IGxpbmUsIHBsZWFzZSBkZWxldGUgaXQgbWFudWFsbHkhXCIsIDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRlbHNle1xuXHRcdFx0Ly8gZWRpdG9yVmlldy5kaXNwYXRjaCh7Y2hhbmdlczoge2Zyb206IHRhcmdldF9saW5lLmZyb20gKyBmaW5kc1swXVswXSwgdG86IHRhcmdldF9saW5lLmZyb20gKyBmaW5kc1swXVsxXSwgaW5zZXJ0OiAnJ319KTtcblx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoJycsIHtsaW5lOiB0YXJnZXRfbGluZS5udW1iZXItMSwgY2g6IGZpbmRzWzBdWzBdfSwge2xpbmU6IHRhcmdldF9saW5lLm51bWJlci0xLCBjaDogZmluZHNbMF1bMV19KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHR0eXBlIFJlZ0RpY3Rpb25hcnkgPSB7XG5cdFx0W2tleTogc3RyaW5nXTogUmVnRXhwO1xuXHR9O1xuXHRcblx0bGV0IHN0YXJ0UmVnOiBSZWdEaWN0aW9uYXJ5ID0ge1xuXHRcdCd0YWJsZSc6IC9eXFxzKlxcfC8sXG5cdFx0J2NhbGxvdXQnOiAvXj4vLFxuXHR9O1xuXG5cdGxldCBtb2RlID0gaW5fdGFibGUgPyAndGFibGUnIDogJ2NhbGxvdXQnO1xuXHRsZXQgZmluZHNfbGluZXM6IG51bWJlcltdID0gW107XG5cdGxldCBmaW5kc19hbGw6IFtmcm9tOm51bWJlciwgdG86bnVtYmVyXVtdID0gW107XG5cdGZvciAobGV0IGk9dGFyZ2V0X2xpbmUubnVtYmVyOyBpPD1lZGl0b3IubGluZUNvdW50KCk7IGkrKyl7XG5cdFx0bGV0IGxpbmVfdGV4dCA9IGVkaXRvci5nZXRMaW5lKGktMSk7XG5cdFx0aWYgKCFzdGFydFJlZ1ttb2RlXS50ZXN0KGxpbmVfdGV4dCkpIGJyZWFrO1xuXHRcdHByaW50KGBsaW5lXyR7aX1fdGV4dDpgLCBsaW5lX3RleHQpXG5cdFx0bGV0IGZpbmRzID0gZmluZExpbmtJbkxpbmUoZmlsZV9iYXNlX25hbWUsIGxpbmVfdGV4dCk7XG5cdFx0aWYgKGZpbmRzLmxlbmd0aCA+IDApe1xuXHRcdFx0ZmluZHNfbGluZXMucHVzaCguLi5uZXcgQXJyYXkoZmluZHMubGVuZ3RoKS5maWxsKGkpKTtcblx0XHRcdGZpbmRzX2FsbC5wdXNoKC4uLmZpbmRzKTtcblx0XHR9XG5cdH1cblxuXHRmb3IgKGxldCBpPXRhcmdldF9saW5lLm51bWJlci0xOyBpPj0xOyBpLS0pe1xuXHRcdGxldCBsaW5lX3RleHQgPSBlZGl0b3IuZ2V0TGluZShpLTEpO1xuXHRcdGlmICghc3RhcnRSZWdbbW9kZV0udGVzdChsaW5lX3RleHQpKSBicmVhaztcblx0XHRwcmludChgbGluZV8ke2l9X3RleHQ6YCwgbGluZV90ZXh0KVxuXHRcdGxldCBmaW5kcyA9IGZpbmRMaW5rSW5MaW5lKGZpbGVfYmFzZV9uYW1lLCBsaW5lX3RleHQpO1xuXHRcdGlmIChmaW5kcy5sZW5ndGggPiAwKXtcblx0XHRcdGZpbmRzX2xpbmVzLnB1c2goLi4ubmV3IEFycmF5KGZpbmRzLmxlbmd0aCkuZmlsbChpKSk7XG5cdFx0XHRmaW5kc19hbGwucHVzaCguLi5maW5kcyk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKGZpbmRzX2FsbC5sZW5ndGggPT0gMCl7XG5cdFx0bmV3IE5vdGljZShgRmFpbCB0byBmaW5kIHRoZSBsaW5rLXRleHQgKGZvciBsaW5rcyBpbiAke21vZGV9KSwgcGxlYXNlIGRlbGV0ZSBpdCBtYW51YWxseSFgLCAwKTtcblx0XHRyZXR1cm47XG5cdH1cblx0ZWxzZSBpZihmaW5kc19hbGwubGVuZ3RoICE9IDEpe1xuXHRcdG5ldyBOb3RpY2UoYEZpbmQgbXVsdGlwbGUgc2FtZSBMaW5rIGluIGN1cnJlbnQgJHttb2RlfSwgcGxlYXNlIGRlbGV0ZSBpdCBtYW51YWxseSFgLCAwKTtcblx0XHRyZXR1cm47XG5cdH1cblx0ZWxzZXtcblx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKCcnLCB7bGluZTogZmluZHNfbGluZXNbMF0tMSwgY2g6IGZpbmRzX2FsbFswXVswXX0sIHtsaW5lOiBmaW5kc19saW5lc1swXS0xLCBjaDogZmluZHNfYWxsWzBdWzFdfSk7XG5cdH1cblxuXHRlZGl0b3IuZm9jdXMoKTtcbn1cblxuLy8gY29weSBpbWcgZmlsZSB0byBjbGlwYm9hcmRcbmV4cG9ydCBjb25zdCBoYW5kbGVyQ29weUZpbGUgPSBhc3luYyAoXG5cdEZpbGVCYXNlTmFtZTogc3RyaW5nLFxuXHRjdXJyZW50TWQ6IFRGaWxlLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW5cbikgPT4ge1xuXHRjb25zdCBmaWxlID0gZ2V0RmlsZUJ5QmFzZU5hbWUoY3VycmVudE1kLCBGaWxlQmFzZU5hbWUpIGFzIFRGaWxlO1xuXHRjb25zdCBiYXNlUGF0aCA9IChmaWxlLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5iYXNlUGF0aFxuXHRjb25zdCBmaWxlX2FiX3BhdGggPSBiYXNlUGF0aCArICcvJyArIGZpbGUucGF0aFxuXG5cdHRyeXtcblx0XHRjb3B5RmlsZVRvQ2xpcGJvYXJkQ01EKGZpbGVfYWJfcGF0aCk7XG5cdFx0bmV3IE5vdGljZShcIkNvcGllZCB0byBjbGlwYm9hcmQgIVwiLCBTVUNDRVNTX05PVElDRV9USU1FT1VUKTtcblx0fVxuXHRjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRuZXcgTm90aWNlKFwiRmFpbGQgdG8gY29weSB0aGUgZmlsZSAhXCIsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVyTW92ZUZpbGUgPSBhc3luYyAoXG5cdEZpbGVCYXNlTmFtZTogc3RyaW5nLFxuXHRjdXJyZW50TWQ6IFRGaWxlLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW5cbikgPT4ge1xuXHRjb25zdCB0YXJnZXRfZmlsZSA9IGdldEZpbGVCeUJhc2VOYW1lKGN1cnJlbnRNZCwgRmlsZUJhc2VOYW1lKSBhcyBURmlsZTtcblx0bmV3IG1vdmVGaWxlVG9Gb2xkZXJTdWdnZXN0ZXIocGx1Z2luLmFwcCwgdGFyZ2V0X2ZpbGUpLm9wZW4oKTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGZpbGUgdGFyZ2V0IGRlbGV0ZWQgZmlsZVxuICogQHJldHVybnMgcGFyZW50IGZvbGRlciBvciB1bmRlZmllbmRcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEZpbGVQYXJlbnRGb2xkZXIgPSAoZmlsZTogVEZpbGUpOiBURm9sZGVyIHwgdW5kZWZpbmVkID0+IHtcblx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdGlmIChmaWxlLnBhcmVudCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdHJldHVybiBmaWxlLnBhcmVudDtcblx0XHR9XG5cdH1cblx0cmV0dXJuO1xufTtcbi8qKlxuICpcbiAqIEBwYXJhbSBmaWxlXG4gKiBAcmV0dXJuc1xuICovXG5jb25zdCBvbmx5T25lRmlsZUV4aXN0cyA9IChmaWxlOiBURmlsZSk6IGJvb2xlYW4gPT4ge1xuXHRjb25zdCBmaWxlRm9sZGVyID0gZ2V0RmlsZVBhcmVudEZvbGRlcihmaWxlKSBhcyBURm9sZGVyO1xuXHRyZXR1cm4gZmlsZUZvbGRlci5jaGlsZHJlbi5sZW5ndGggPT09IDE7XG59O1xuXG5cbi8vIFx1OEMwM1x1NzUyOFx1N0NGQlx1N0VERlx1NTQ3RFx1NEVFNFx1NTkwRFx1NTIzNlx1NjU4N1x1NEVGNlx1NTIzMFx1N0NGQlx1N0VERlx1NTI2QVx1OEQzNFx1Njc3RlxuZnVuY3Rpb24gY29weUZpbGVUb0NsaXBib2FyZENNRChmaWxlUGF0aDogc3RyaW5nKSB7XG5cblx0aWYgKCFleGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGaWxlICR7ZmlsZVBhdGh9IGRvZXMgbm90IGV4aXN0YCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjYWxsYmFjayA9IChlcnJvcjogRXJyb3IgfCBudWxsLCBzdGRvdXQ6IHN0cmluZywgc3RkZXJyOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvciBleGVjdXRpbmcgY29tbWFuZDogJHtlcnJvci5tZXNzYWdlfWAsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHRcdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgZXhlY3V0aW5nIGNvbW1hbmQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcblx0XHRcdHJldHVybjtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ2RhcndpbicpIHtcblx0XHQvLyBcdTg5RTNcdTUxQjNcdTY1QjlcdTY4NDgxOiBcdTRGMUFcdThDMDNcdTUxRkFGaW5kZXJcdUZGMENcdTRFQTdcdTc1MUZcdTc3QUNcdTk1RjRcdTc2ODRcdTdBOTdcdTUzRTNcdUZGMENcdTRGNDZcdTY2MkZcdThCRTVcdTU5MERcdTUyMzZcdTY0Q0RcdTRGNUNcdTVCOENcdTUxNjhcdTY2MkZcdTdDRkJcdTdFREZcdTdFQTdcdTUyMkJcdTc2ODRcdUZGMENcdTZDQTFcdTY3MDlcdTRFRkJcdTRGNTVcdTk2NTBcdTUyMzZcblx0XHRleGVjU3luYyhgb3BlbiAtUiBcIiR7ZmlsZVBhdGh9XCJgKTtcbiAgICAgICAgZXhlY1N5bmMoYG9zYXNjcmlwdCAtZSAndGVsbCBhcHBsaWNhdGlvbiBcIlN5c3RlbSBFdmVudHNcIiB0byBrZXlzdHJva2UgXCJjXCIgdXNpbmcgY29tbWFuZCBkb3duJ2ApO1xuICAgICAgICBleGVjU3luYyhgb3Nhc2NyaXB0IC1lICd0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiIHRvIGtleXN0cm9rZSBcIndcIiB1c2luZyBjb21tYW5kIGRvd24nYCk7XG5cdFx0ZXhlY1N5bmMoYG9wZW4gLWEgXCJPYnNpZGlhbi5hcHBcImApO1xuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIFx1NkQ0Qlx1OEJENVx1NTIwN1x1NjM2Mlx1OEY5M1x1NTE2NVx1NkNENVx1NjVCOVx1Njg0ODogXHU2QTIxXHU2MkRGU2hpZnRcdTk1MkVcdTYzMDlcdTRFMEJcdUZGMENcdTRGNDZcdTY2MkZcdTU5MzFcdThEMjVcdTRFODZcblx0XHQvLyBleGVjU3luYyhgb3Nhc2NyaXB0IC1lICd0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiIHRvIGtleSBkb3duIHNoaWZ0J2ApO1xuXHRcdC8vIGV4ZWNTeW5jKGBvc2FzY3JpcHQgLWUgJ2RlbGF5IDAuMDUnYCk7XG5cdFx0Ly8gZXhlY1N5bmMoYG9zYXNjcmlwdCAtZSAndGVsbCBhcHBsaWNhdGlvbiBcIlN5c3RlbSBFdmVudHNcIiB0byBrZXkgdXAgc2hpZnQnYCk7XG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIFx1NTNFNlx1NEUwMFx1NzlDRFx1ODlFM1x1NTFCM1x1NjVCOVx1Njg0OFx1RkYwQ1x1NEUwRFx1NEYxQVx1OEMwM1x1NTFGQUZpbmRlclx1RkYwQ1x1NEY0Nlx1NjYyRlx1NTkwRFx1NTIzNlx1NzY4NFx1NjU4N1x1NEVGNlx1NjVFMFx1NkNENVx1N0M5OFx1OEQzNFx1NTIzMHdvcmRcdTYyMTZcdTgwMDVcdTVGQUVcdTRGRTFcdTRFMkRcblx0XHQvLyBjb25zdCBhcHBsZVNjcmlwdCA9IGBcblx0XHQvLyBcdG9uIHJ1biBhcmdzXG5cdFx0Ly8gXHRcdHNldCB0aGUgY2xpcGJvYXJkIHRvIFBPU0lYIGZpbGUgKGZpcnN0IGl0ZW0gb2YgYXJncylcblx0XHQvLyBcdGVuZFxuXHRcdC8vIFx0YDtcblx0XHQvLyBleGVjKGBvc2FzY3JpcHQgLWUgJyR7YXBwbGVTY3JpcHR9JyBcIiR7ZmlsZVBhdGh9XCJgLCBjYWxsYmFjayk7XG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnbGludXgnKSB7XG5cdFx0Ly8gXHU3NkVFXHU1MjREXHU2NUI5XHU2ODQ4XG5cdFx0Ly8geGNsaXAgLXNlbGVjdGlvbiBjbGlwYm9hcmQgLXQgJChmaWxlIC0tbWltZS10eXBlIC1iIC9wYXRoL3RvL3lvdXIvZmlsZSkgLWkgL3BhdGgvdG8veW91ci9maWxlXG4gICAgICAgIC8vIGV4ZWMoYHhjbGlwIC1zZWxlY3Rpb24gYyA8ICR7ZmlsZVBhdGh9YCwgY2FsbGJhY2spO1xuXHRcdC8vIGV4ZWMoYHhjbGlwIC1zZWxlY3Rpb24gY2xpcGJvYXJkIC10ICQoZmlsZSAtLW1pbWUtdHlwZSAtYiBcIiR7ZmlsZVBhdGh9XCIpIC1pIFwiJHtmaWxlUGF0aH1cImAsIGNhbGxiYWNrKTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicpIHtcblx0XHQvLyBcdTVGNTNcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcdTUzMDVcdTU0MkIgJ1xuXHRcdC8vIFx1NTcyOFBvd2VyU2hlbGxcdTRFMkRcdUZGMENcdTUzNTVcdTVGMTVcdTUzRjdcdTVCNTdcdTdCMjZcdTRFMzJcdTY2MkZcdTc2RjRcdTYzQTVcdTc2ODRcdTVCNTdcdTdCMjZcdTRFMzJcdUZGMENcdTUxODVcdTkwRThcdTc2ODRcdTUzNTVcdTVGMTVcdTUzRjdcdTY1RTBcdTZDRDVcdTkwMUFcdThGQzdcdTUzQ0RcdTY1OUNcdTdFQkZcdTY3NjVcdThGNkNcdTRFNDlcdUZGMENcdTRGNDZcdTY2MkZcdTUzRUZcdTRFRTVcdTkwMUFcdThGQzdcdTU3MjhcdTUzNTVcdTVGMTVcdTUzRjdcdTUyNERcdTUxOERcdTUyQTBcdTRFMDBcdTRFMkFcdTUzNTVcdTVGMTVcdTUzRjdcdTY3NjVcdThGREJcdTg4NENcdThGNkNcdTRFNDlcdTMwMDJcblx0XHRsZXQgc2FmZUZpbGVQYXRoID0gZmlsZVBhdGgucmVwbGFjZSgvJy9nLCBcIicnXCIpO1xuICAgICAgICBleGVjKGBwb3dlcnNoZWxsIC1jb21tYW5kIFwiU2V0LUNsaXBib2FyZCAtUGF0aCAnJHtzYWZlRmlsZVBhdGh9J1wiYCwgY2FsbGJhY2spO1xuICAgIH1cbn1cblxuY29uc3QgZmluZExpbmtJbkxpbmUgPSAoZmlsZV9uYW1lOiBzdHJpbmcsIGxpbmVfdGV4dDogc3RyaW5nKSA9Pntcblx0Y29uc3QgZmlsZV9uYW1lX21kbGluayA9IGZpbGVfbmFtZS5yZXBsYWNlKC8gL2csICclMjAnKTtcblx0bGV0IHJlZ1dpa2lMaW5rID0gL1xcIVxcW1xcW1teXFxbXFxdXSo/XFxdXFxdL2c7XG4gICAgbGV0IHJlZ01kTGluayA9IC9cXCFcXFtbXlxcW1xcXV0qP1xcXVxcKFteXFxzXFwpXFwoXFxbXFxdXFx7XFx9J10qXFwpL2c7XG5cdHByaW50KCd0YXJnZXRfbmFtZSAoV0lLSS9NRCk6JywgZmlsZV9uYW1lLCBmaWxlX25hbWVfbWRsaW5rKVxuXG5cdC8vIGNvbnNvbGUubG9nKCdzZWFyY2ggaW4gbGluZV90ZXh0OicsIGxpbmVfdGV4dClcblx0bGV0IHNlYXJjaF9yZXN1bHQ6IFtmcm9tOm51bWJlciwgdG86bnVtYmVyXVtdID0gW11cblx0aWYgKGxpbmVfdGV4dC5pbmNsdWRlcyhmaWxlX25hbWUpKXtcblx0XHR3aGlsZSh0cnVlKXtcblx0XHRcdGxldCBtYXRjaCA9IHJlZ1dpa2lMaW5rLmV4ZWMobGluZV90ZXh0KTtcblx0XHRcdGlmKCFtYXRjaCkgYnJlYWs7XG5cdFx0XHRsZXQgbWF0Y2hlZF9saW5rID0gbWF0Y2hbMF07XG5cdFx0XHRwcmludCgnbWF0Y2hlZF9saW5rOicsIG1hdGNoZWRfbGluaylcblx0XHRcdHByaW50KCdtYXRjaGVkX2xpbmsuaW5jbHVkZXMoZmlsZV9uYW1lKScsIG1hdGNoZWRfbGluay5pbmNsdWRlcyhmaWxlX25hbWUpKVxuXHRcdFx0aWYgKG1hdGNoZWRfbGluay5pbmNsdWRlcyhmaWxlX25hbWUpKXtcblx0XHRcdFx0c2VhcmNoX3Jlc3VsdC5wdXNoKFttYXRjaC5pbmRleCwgbWF0Y2guaW5kZXgrbWF0Y2hlZF9saW5rLmxlbmd0aF0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmIChsaW5lX3RleHQuaW5jbHVkZXMoZmlsZV9uYW1lX21kbGluaykpe1xuXHRcdHdoaWxlKHRydWUpe1xuXHRcdFx0bGV0IG1hdGNoID0gcmVnTWRMaW5rLmV4ZWMobGluZV90ZXh0KTtcblx0XHRcdGlmKCFtYXRjaCkgYnJlYWs7XG5cdFx0XHRsZXQgbWF0Y2hlZF9saW5rID0gbWF0Y2hbMF07XG5cdFx0XHRwcmludCgnbWF0Y2hlZF9saW5rOicsIG1hdGNoZWRfbGluaylcblx0XHRcdHByaW50KCdtYXRjaGVkX2xpbmsuaW5jbHVkZXMoZmlsZV9uYW1lX21kbGluayknLCBtYXRjaGVkX2xpbmsuaW5jbHVkZXMoZmlsZV9uYW1lX21kbGluaykpXG5cdFx0XHRpZiAobWF0Y2hlZF9saW5rLmluY2x1ZGVzKGZpbGVfbmFtZV9tZGxpbmspKXtcblx0XHRcdFx0c2VhcmNoX3Jlc3VsdC5wdXNoKFttYXRjaC5pbmRleCwgbWF0Y2guaW5kZXgrbWF0Y2hlZF9saW5rLmxlbmd0aF0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gc2VhcmNoX3Jlc3VsdDtcbn1cblxuXG5leHBvcnQgY29uc3QgaGFuZGxlclJlbmFtZUZpbGUgPSAoXG5cdEZpbGVCYXNlTmFtZTogc3RyaW5nLFxuXHRjdXJyZW50TWQ6IFRGaWxlLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW5cbikgPT4ge1xuXHRjb25zdCB0YXJnZXRfZmlsZSA9IGdldEZpbGVCeUJhc2VOYW1lKGN1cnJlbnRNZCwgRmlsZUJhc2VOYW1lKSBhcyBURmlsZTtcblx0bGV0IHBhdGggPSB0YXJnZXRfZmlsZS5wYXRoO1xuXHRsZXQgbmFtZSA9IHRhcmdldF9maWxlLm5hbWU7XG5cdGxldCB0YXJnZXRfZm9sZGVyID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sZW5ndGgtbmFtZS5sZW5ndGgpO1xuXHRsZXQgZmlsZV90eXBlID0gbmFtZS5zcGxpdCgnLicpLnBvcCgpIGFzIHN0cmluZztcblx0bmV3IFJlbmFtZU1vZGFsKHBsdWdpbi5hcHAsIFxuXHRcdHRhcmdldF9mb2xkZXIsIFxuXHRcdG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUubGVuZ3RoLWZpbGVfdHlwZS5sZW5ndGgtMSksIFxuXHRcdGZpbGVfdHlwZSwgXG5cdFx0KHJlc3VsdCkgPT4ge1xuXHRcdGlmICghcmVzdWx0KSByZXR1cm47XG5cdFx0aWYocmVzdWx0PT1wYXRoKSByZXR1cm47XG5cdFx0YXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHJlc3VsdClcblx0XHQudGhlbigoZXhpc3RzKSA9PiB7XG5cdFx0XHRpZihleGlzdHMpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRmFpbCB0byByZW5hbWUgZm9yIHRoZXJlIGFscmVheSBleGlzdCBmaWxlICR7cmVzdWx0fWApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cGx1Z2luLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKHRhcmdldF9maWxlLCBgJHtyZXN1bHR9YCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pLm9wZW4oKTtcbn1cblxuXG5cbmV4cG9ydCBjbGFzcyBSZW5hbWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cmVzdWx0OiBzdHJpbmc7XG5cdGZvbGRlcjogc3RyaW5nO1xuXHRuYW1lOiBzdHJpbmc7XG5cdGZpbGV0eXBlOiBzdHJpbmc7XG5cdG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQ7XG4gIFxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZm9sZGVyOnN0cmluZywgbmFtZTpzdHJpbmcsIGZpbGV0eXBlOnN0cmluZywgb25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZCkge1xuXHQgIHN1cGVyKGFwcCk7XG5cdCAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHQgIHRoaXMuZm9sZGVyID0gZm9sZGVyO1xuXHQgIHRoaXMubmFtZSA9IG5hbWU7XG5cdCAgdGhpcy5maWxldHlwZSA9IGZpbGV0eXBlO1xuXHR9XG4gIFxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0bGV0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIlJlbmFtZTpcIilcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5uYW1lKVxuXHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5yZXN1bHQgPSBgJHt0aGlzLmZvbGRlcn0ke3ZhbHVlfS4ke3RoaXMuZmlsZXR5cGV9YDtcblx0XHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Ly8gXHU0RjdGIERPTSBcdTY3MDlcdThEQjNcdTU5MUZcdTc2ODRcdTY1RjZcdTk1RjRcdTZFMzJcdTY3RDNcdTg4NjhcdTUzNTVcdTUxNDNcdTdEMjBcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdGxldCBpbnB1dEJveCA9IHNldHRpbmcuc2V0dGluZ0VsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJyk7XG5cdFx0XHRpZiAoaW5wdXRCb3ggJiYgaW5wdXRCb3gucGFyZW50RWxlbWVudCkge1xuXHRcdFx0XHRsZXQgZm9sZGVyX2luZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG5cdFx0XHRcdGZvbGRlcl9pbmRpY2F0b3IuaW5uZXJUZXh0ID0gYCR7dGhpcy5mb2xkZXJ9YDtcblx0XHRcdFx0Zm9sZGVyX2luZGljYXRvci5zdHlsZS5tYXJnaW5SaWdodCA9ICc0cHgnOyAgLy8gXHU1M0VGXHU0RUU1XHU2ODM5XHU2MzZFXHU5NzAwXHU4OTgxXHU4QzAzXHU2NTc0XHU5NUY0XHU4REREXG5cdFx0XHRcdGlucHV0Qm94LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGZvbGRlcl9pbmRpY2F0b3IsIGlucHV0Qm94KTtcblxuXHRcdFx0XHRsZXQgZmlsZV90eXBlX2luZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG5cdFx0XHRcdGZpbGVfdHlwZV9pbmRpY2F0b3IuaW5uZXJUZXh0ID0gYC4ke3RoaXMuZmlsZXR5cGV9YDtcblx0XHRcdFx0ZmlsZV90eXBlX2luZGljYXRvci5zdHlsZS5tYXJnaW5MZWZ0ID0gJzRweCc7ICAvLyBcdTUzRUZcdTRFRTVcdTY4MzlcdTYzNkVcdTk3MDBcdTg5ODFcdThDMDNcdTY1NzRcdTk1RjRcdThERERcblx0XHRcdFx0aW5wdXRCb3guYWZ0ZXIoZmlsZV90eXBlX2luZGljYXRvcik7XG5cblx0XHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU4QkJFXHU3RjZFXHU3NTRDXHU5NzYyXHU3Njg0XHU0RTBBXHU3RUE3XHU1MTQzXHU3RDIwIFxuXHRcdFx0XHRsZXQgcGFyZW50RWwgPSBzZXR0aW5nLnNldHRpbmdFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRpZiAocGFyZW50RWwpIHtcblx0XHRcdFx0XHQvLyBcdTRGN0ZcdTUxNzZcdTVCNTBcdTUxNDNcdTdEMjBcdTVDNDVcdTRFMkRcdTY2M0VcdTc5M0Fcblx0XHRcdFx0XHRwYXJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdFx0XHRcdHBhcmVudEVsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gXHU4RjZDXHU2MzYyaW5wdXRCb3hcdTdDN0JcdTU3OEJcdTVFNzZcdTkwMDlcdTYyRTlcdThGOTNcdTUxNjVcdTY4NDZcdTc2ODRcdTY1ODdcdTY3MkNcblx0XHRcdFx0bGV0IGlucHV0RWxlbSA9IGlucHV0Qm94IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cdFx0XHRcdGlucHV0RWxlbS5zZWxlY3QoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJcdTY1RTBcdTZDRDVcdTYyN0VcdTUyMzBcdTY1ODdcdTY3MkNcdThGOTNcdTUxNjVcdTY4NDZcIik7XG5cdFx0XHR9XG5cdFx0fSwgMCk7XG5cblx0XHQvLyBFbnRlciB0byBzdWJtaXRcblx0XHR0aGlzLnNjb3BlLnJlZ2lzdGVyKFtdLCBcIkVudGVyXCIsIChldnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdGlmIChldnQuaXNDb21wb3NpbmcpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0dGhpcy5vblN1Ym1pdCh0aGlzLnJlc3VsdCk7XG5cdFx0fSk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5cblxuY2xhc3MgbW92ZUZpbGVUb0ZvbGRlclN1Z2dlc3RlciBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xuXHRwcml2YXRlIGZvbGRlckxpc3Q6IFNldDxzdHJpbmc+O1xuXHR0YXJnZXRfZmlsZTogVEZpbGU7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGU6IFRGaWxlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLmZvbGRlckxpc3QgPSB0aGlzLmdldEFsbEZvbGRlcnModGhpcy5hcHAudmF1bHQpO1xuXHRcdHRoaXMudGFyZ2V0X2ZpbGUgPSBmaWxlO1xuXHR9XG5cblx0Z2V0QWxsRm9sZGVycyh2YXVsdDogVmF1bHQpOiBTZXQ8c3RyaW5nPiB7XG5cdFx0Y29uc3QgZm9sZGVycyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRcdHZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZm9yRWFjaChmaWxlID0+IHtcblx0XHRcdC8vIFx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1NjYyRiBURm9sZGVyIFx1N0M3Qlx1NTc4QlxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdGZvbGRlcnMuYWRkKGZpbGUucGF0aCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGZvbGRlcnM7XG5cdH1cblxuXHRnZXRJdGVtcygpOiBzdHJpbmdbXSB7XG5cdFx0cmV0dXJuIEFycmF5LmZyb20odGhpcy5mb2xkZXJMaXN0KS5zb3J0KCk7XG5cdH1cblxuXHRnZXRJdGVtVGV4dChpdGVtOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdHJldHVybiBpdGVtO1xuXHR9XG5cblx0YXN5bmMgb25DaG9vc2VJdGVtKGl0ZW06IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICh0aGlzLnRhcmdldF9maWxlLnBhcmVudD8ucGF0aCA9PT0gaXRlbSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlRoZSBmaWxlIGlzIGFscmVhZHkgaW4gdGhlIGZvbGRlciFcIiwgMzAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGxldCBjaG9vc2VkX2ZvbGRlciA9IGl0ZW0uZW5kc1dpdGgoJy8nKSA/IGl0ZW0gOiBpdGVtICsgJy8nO1xuXHRcdGxldCBuZXdfcGF0aCA9IGNob29zZWRfZm9sZGVyICsgdGhpcy50YXJnZXRfZmlsZS5uYW1lO1xuXHRcdHByaW50KG5ld19wYXRoKVxuXHRcdGFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhuZXdfcGF0aClcblx0XHQudGhlbigoZXhpc3RzKSA9PiB7XG5cdFx0XHRpZihleGlzdHMpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRmFpbCB0byBtb3ZlIGZvciB0aGVyZSBhbHJlYXkgZXhpc3QgZmlsZSAke25ld19wYXRofWApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZSh0aGlzLnRhcmdldF9maWxlLCBgJHtuZXdfcGF0aH1gKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHJlbmRlclN1Z2dlc3Rpb24oaXRlbTogRnV6enlNYXRjaDxzdHJpbmc+LCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgZWwuaW5uZXJUZXh0ID0gaXRlbS5pdGVtO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgQXR0YWNoRmxvd1BsdWdpbiBmcm9tIFwic3JjL21haW5cIjtcbmNvbnN0IFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQgPSAxODAwO1xuLyoqXG4gKiBEZWxldGUgYXR0YWNobWVudFxuICogQHBhcmFtIGZpbGVcbiAqL1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUZpbGUgPSBhc3luYyAoXG5cdGZpbGU6IFRGaWxlIHwgVEZvbGRlcixcblx0cGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luXG4pID0+IHtcblx0Y29uc3QgZGVsZXRlT3B0aW9uID0gcGx1Z2luLnNldHRpbmdzLmRlbGV0ZU9wdGlvbjtcblx0dHJ5IHtcblx0XHRpZiAoZGVsZXRlT3B0aW9uID09PSBcIi50cmFzaFwiKSB7XG5cdFx0XHRhd2FpdCBhcHAudmF1bHQudHJhc2goZmlsZSwgZmFsc2UpO1xuXHRcdH0gZWxzZSBpZiAoZGVsZXRlT3B0aW9uID09PSBcInN5c3RlbS10cmFzaFwiKSB7XG5cdFx0XHRhd2FpdCBhcHAudmF1bHQudHJhc2goZmlsZSwgdHJ1ZSk7XG5cdFx0fSBlbHNlIGlmIChkZWxldGVPcHRpb24gPT09IFwicGVybWFuZW50XCIpIHtcblx0XHRcdGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZmlsZSk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdG5ldyBOb3RpY2UoXCJGYWlsZCB0byBkZWxldGUgdGhlIGZpbGUvZm9sZGVyICFcIiwgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCk7XG5cdH1cbn07XG4vKipcbiAqIERlbGV0ZSBub3RlXG4gKiBAcGFyYW0gZmlsZVxuICovXG4vKiBleHBvcnQgY29uc3QgZGVsZXRlTm90ZSA9IChmaWxlOiBURmlsZSkgPT4ge1xuXHQvLyBAdHMtaWdub3JlXG5cdGFwcC5maWxlTWFuYWdlci5wcm9tcHRGb3JEZWxldGlvbihmaWxlKTtcbn07ICovXG4iLCAiaW1wb3J0IEF0dGFjaEZsb3dQbHVnaW4gZnJvbSBcInNyYy9tYWluXCI7XG5pbXBvcnQgeyBkZWxldGVBbGxBdHRhY2hzIH0gZnJvbSBcInNyYy9vcHRpb25zL2RlbGVsZUFsbEF0dGFjaHNJblRoZU5vdGVcIjtcblxuZXhwb3J0IGNvbnN0IGFkZENvbW1hbmQgPSAobXlQbHVnaW46IEF0dGFjaEZsb3dQbHVnaW4pID0+IHtcblx0bXlQbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwiY2xlYXItYWxsLWF0dGFjaG1lbnRzLWluLWN1cnJlbnQtZmlsZVwiLFxuXHRcdG5hbWU6IFwiY2xlYXIgYWxsIGF0dGFjaG1lbnRzIGluIGN1cnJlbnQgZmlsZVwiLFxuXHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRkZWxldGVBbGxBdHRhY2hzKG15UGx1Z2luKTtcblx0XHR9LFxuXHR9KTtcbn07XG4iLCAiaW1wb3J0IEF0dGFjaEZsb3dQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc2V0RGVidWcgfSBmcm9tICcuL3V0aWwnO1xuXG5cblxuZXhwb3J0IGludGVyZmFjZSBBdHRhY2hGbG93U2V0dGluZ3Mge1xuICAgIGRlbGV0ZU9wdGlvbjogc3RyaW5nO1xuICAgIGxvZ3NNb2RhbDogYm9vbGVhbjtcbiAgICBkcmFnUmVzaXplOiBib29sZWFuO1xuICAgIHJlc2l6ZUludGVydmFsOiBudW1iZXI7XG4gICAgY2xpY2tWaWV3OiBib29sZWFuO1xuICAgIGFkYXB0aXZlUmF0aW86IG51bWJlcjtcbiAgICBtb3ZlRmlsZU1lbnU6IGJvb2xlYW47XG4gICAgZGVidWc6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBBdHRhY2hGbG93U2V0dGluZ3MgPSB7XG4gICAgZGVsZXRlT3B0aW9uOiAnLnRyYXNoJyxcbiAgICBsb2dzTW9kYWw6IHRydWUsXG4gICAgZHJhZ1Jlc2l6ZTogdHJ1ZSxcbiAgICByZXNpemVJbnRlcnZhbDogMCxcbiAgICBjbGlja1ZpZXc6IGZhbHNlLFxuICAgIGFkYXB0aXZlUmF0aW86IDAuOSxcbiAgICBtb3ZlRmlsZU1lbnU6IGZhbHNlLFxuICAgIGRlYnVnOiBmYWxzZSxcbn07XG5cblxuZXhwb3J0IGNsYXNzIEF0dGFjaEZsb3dTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXG4gICAgcGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luO1xuXG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKCdSaWdodC1jbGljayBtZW51IGZvciBhdHRhY2htZW50cycpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVsZXRlZCBhdHRhY2htZW50IGRlc3RpbmF0aW9uJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZWxlY3Qgd2hlcmUgeW91IHdhbnQgQXR0YWNobWVudHMgdG8gYmUgbW92ZWQgb25jZSB0aGV5IGFyZSBkZWxldGVkJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ3Blcm1hbmVudCcsICdEZWxldGUgUGVybWFuZW50bHknKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJy50cmFzaCcsICdNb3ZlIHRvIE9ic2lkaWFuIFRyYXNoJyk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdzeXN0ZW0tdHJhc2gnLCAnTW92ZSB0byBTeXN0ZW0gVHJhc2gnKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVPcHRpb24pO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlT3B0aW9uID0gb3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ01vdmUgZmlsZSB0by4uLicpXG4gICAgICAgICAgICAuc2V0RGVzYygnQWRkIGEgXCJNb3ZlIHRvLi4uXCIgb3B0aW9uIHRvIHRoZSByaWdodC1jbGljayBtZW51IGZvciBhdHRhY2htZW50cycpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW92ZUZpbGVNZW51KVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb3ZlRmlsZU1lbnUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKCdDbGljayB0byB2aWV3IGltYWdlcycpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkNsaWNrIHRvIHZpZXcgaW1hZ2VzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkNsaWNrIHRoZSByaWdodCBoYWxmIG9mIHRoZSBpbWFnZSB0byB2aWV3IHRoZSBpbWFnZSBpbiBkZXRhaWwuXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpY2tWaWV3KVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGlja1ZpZXcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQWRhcHRpdmUgaW1hZ2UgZGlzcGxheSByYXRpbyBiYXNlZCBvbiB3aW5kb3cgc2l6ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnV2hlbiB0aGUgaW1hZ2UgZXhjZWVkcyB0aGUgd2luZG93IHNpemUsIHRoZSBpbWFnZSBpcyBkaXNwbGF5ZWQgYWRhcHRpdmVseSBhY2NvcmRpbmcgdG8gdGhlIHdpbmRvdyBzaXplLicpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKChzbGlkZXIpID0+IHtcbiAgICAgICAgICAgICAgICBzbGlkZXIuc2V0TGltaXRzKDAuMSwgMSwgMC4wNSk7XG4gICAgICAgICAgICAgICAgc2xpZGVyLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFkYXB0aXZlUmF0aW8pO1xuICAgICAgICAgICAgICAgIHNsaWRlci5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWRhcHRpdmVSYXRpbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBBZGFwdGl2ZSByYXRpbzogJHt2YWx1ZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2xpZGVyLnNldER5bmFtaWNUb29sdGlwKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZSgnRHJhZyB0byByZXNpemUgaW1hZ2VzJykuc2V0SGVhZGluZygpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRHJhZyB0byByZXNpemUgaW1hZ2VzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlR1cm4gb24gdG8gZW5hYmxlIGRyYWcgdG8gcmVzaXplIGltYWdlcy5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kcmFnUmVzaXplKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kcmFnUmVzaXplID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiUmVzaXplIGludGVydmFsXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlx1NjJENlx1NjJGRFx1OEMwM1x1ODI4Mlx1NjcwMFx1NUMwRlx1NTIzQlx1NUVBNlx1RkYwOFx1OUVEOFx1OEJBNFx1NTAzQ1x1NEUzQSAwIFx1NTM3M1x1NEUwRFx1NUJGOVx1OUY1MFx1NTIzQlx1NUVBNlx1RkYwOVwiKVxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc2l6ZUludGVydmFsLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTIyNFx1NjVBRFx1OEY5M1x1NTE2NVx1NTAzQ1x1NjYyRlx1NTQyNlx1NEUzQVx1NkI2M1x1NjU3NFx1NjU3MFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElucHV0IGlzIGVtcHR5LiBTZXQgdG8gZGVmYXVsdCB2YWx1ZSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVzaXplSW50ZXJ2YWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKC9eXFxkKyQvLnRlc3QodmFsdWUpICYmIE51bWJlcih2YWx1ZSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc2l6ZUludGVydmFsID0gcGFyc2VJbnQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTRFMERcdTdCMjZcdTU0MDhcdTg5ODFcdTZDNDJcdTY1RjZcdUZGMENcdTUzRUZcdTRFRTVcdTdFRDlcdTUxRkFcdTYzRDBcdTc5M0FcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRjdcdThGOTNcdTUxNjVcdTZCNjNcdTY1NzRcdTY1NzAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc2l6ZUludGVydmFsLnRvU3RyaW5nKCkpOyAvLyBcdTkxQ0RcdTY1QjBcdThCQkVcdTdGNkVcdTRFM0FcdTUzOUZcdTY3NjVcdTc2ODRcdTUwM0NcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZSgnRGVidWcnKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJEZWJ1ZyBtb2RlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlByaW50IGRlYnVnIGluZm9ybWF0aW9uIGluIGNvbnNvbGVcIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1ZylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldERlYnVnKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1cbiIsICIvKipcbiAqIGdldCBtb3VzZSBldmVudCB0YXJnZXRcbiAqIEBwYXJhbSBldmVudCBcbiAqL1xuZXhwb3J0IGNvbnN0IGdldE1vdXNlRXZlbnRUYXJnZXQgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiBIVE1MRWxlbWVudCA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbiIsICJpbXBvcnQgeyBNb2RhbCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBBdHRhY2hGbG93UGx1Z2luIGZyb20gXCJzcmMvbWFpblwiO1xuaW1wb3J0IHtcblx0ZGVsZXRlQWxsQXR0YWNocyxcblx0Z2V0UmVmZW5jZWRMaW5rQ291bnQsXG59IGZyb20gXCJzcmMvb3B0aW9ucy9kZWxlbGVBbGxBdHRhY2hzSW5UaGVOb3RlXCI7XG5pbXBvcnQgeyBkZWxldGVGaWxlIH0gZnJvbSBcInNyYy91dGlscy9kZWxldGVGaWxlXCI7XG5cbmV4cG9ydCBjbGFzcyBEZWxldGVBbGxMb2dzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdG5vdGU6IFRGaWxlO1xuXHRteVBsdWdpbjogQXR0YWNoRmxvd1BsdWdpbjtcblx0Y29uc3RydWN0b3Iobm90ZTogVEZpbGUsIG15UGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm5vdGUgPSBub3RlO1xuXHRcdHRoaXMubXlQbHVnaW4gPSBteVBsdWdpbjtcblx0fVxuXHRnZXRMb2coKTogc3RyaW5nIHtcblx0XHRjb25zdCByZWZlcmVuY2VNZXNzYWdlID0gYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIke3RoaXMubm90ZS5iYXNlbmFtZX0ubWRcIj9cXG5cXG5JdCB3aWxsIGJlIG1vdmVkIHRvIHlvdXIgJHt0aGlzLm15UGx1Z2luLnNldHRpbmdzLmRlbGV0ZU9wdGlvbn0uYDtcblx0XHRyZXR1cm4gcmVmZXJlbmNlTWVzc2FnZTtcblx0fVxuXHRzaG93TG9ncygpIHtcblx0XHRjb25zdCBsb2dzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIik7XG5cdFx0bG9ncy5hZGRDbGFzcyhcImF0dGFjaG1lbnQtZmxvdy1sb2dcIik7XG5cdFx0bG9ncy5zZXRUZXh0KHRoaXMuZ2V0TG9nKCkpO1xuXHR9XG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb25zdCBteU1vZGFsID0gdGhpcztcblx0XHRjb25zdCBoZWFkZXJXcmFwcGVyID0gY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIpO1xuXHRcdGhlYWRlcldyYXBwZXIuYWRkQ2xhc3MoXCJhdHRhY2htZW50LWZsb3ctY2VudGVyLXdyYXBwZXJcIik7XG5cdFx0dGhpcy5zaG93TG9ncygpO1xuXHRcdGNvbnN0IHJlZmVyZW5jZWRNZXNzYWdlV3JhcHBlciA9IGNvbnRlbnRFbC5jcmVhdGVFbChcInNwYW5cIik7XG5cdFx0cmVmZXJlbmNlZE1lc3NhZ2VXcmFwcGVyLnN0eWxlLmNvbG9yID0gXCJyZWRcIjtcblx0XHRjb25zdCByZWZlcmVuY2VkTWVzc2FnZSA9IGBUaGVyZSBhcmUoaXMpIGN1cnJlbnRseSAgWyR7Z2V0UmVmZW5jZWRMaW5rQ291bnQoKX1dICBub24tbXVsdGktcmVmZXJlbmNlZCBsaW5rKHMpIHBvaW50aW5nIHRvIHRoaXMgbm90ZS5gO1xuXHRcdHJlZmVyZW5jZWRNZXNzYWdlV3JhcHBlci5hcHBlbmQocmVmZXJlbmNlZE1lc3NhZ2UpO1xuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdGNvbnN0IGJ1dHRvbldyYXBwZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiKSBhcyBIVE1MRGl2RWxlbWVudDtcblx0XHRidXR0b25XcmFwcGVyLmFkZENsYXNzKFwiYXR0YWNobWVudC1mbG93LWNlbnRlci13cmFwcGVyXCIpO1xuXHRcdGNvbnN0IGhlYWRlckVsID0gaGVhZGVyV3JhcHBlci5jcmVhdGVFbChcImgxXCIsIHtcblx0XHRcdHRleHQ6IFwiRGVsZXRlIHRoZSBmaWxlIGFuZCBpdHMgYWxsIGF0dGFjaG1lbnRzIC0gbG9ncyBcIixcblx0XHR9KTtcblx0XHRoZWFkZXJFbC5hZGRDbGFzcyhcIm1vZGFsLXRpdGxlXCIpO1xuXHRcdHRoaXMuc2hvd0NvbmZpcm1CdXR0b24oYnV0dG9uV3JhcHBlciwgbXlNb2RhbCk7XG5cdFx0dGhpcy5zaG93Q2FuY2VsQnRuKGJ1dHRvbldyYXBwZXIsIG15TW9kYWwpO1xuXHR9XG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0c2hvd0NhbmNlbEJ0bihidXR0b25XcmFwcGVyOiBIVE1MRGl2RWxlbWVudCwgbXlNb2RhbDogTW9kYWwpIHtcblx0XHQvLyAtLS0tLS0tLWNsb3NlQnV0dG9uLS0tLS0tLS1cblx0XHRjb25zdCBjbG9zZUJ1dHRvbiA9IGJ1dHRvbldyYXBwZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDYW5jZWxcIixcblx0XHR9KTtcblx0XHRjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiQ2FuY2VsIHRoZSBvcGVyYXRpb25cIik7XG5cdFx0Y2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdG15TW9kYWwuY2xvc2UoKTtcblx0XHR9KTtcblx0fVxuXHRzaG93Q29uZmlybUJ1dHRvbihidXR0b25XcmFwcGVyOiBIVE1MRGl2RWxlbWVudCwgbXlNb2RhbDogTW9kYWwpIHtcblx0XHRjb25zdCByZW1vdmVMaW5rQnV0dG9uID0gYnV0dG9uV3JhcHBlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNvbmZpcm1cIixcblx0XHR9KTtcblx0XHRyZW1vdmVMaW5rQnV0dG9uLnNldEF0dHJpYnV0ZShcblx0XHRcdFwiYXJpYS1sYWJlbFwiLFxuXHRcdFx0XCJDb250aW51ZSB0byBkZWxldGUgY3VycmVudCBmaWxlIGFuZCBpdHMgYWxsIG5vbi1tdWx0aS1yZWZlcmVuY2VkIGF0dGFjaG1lbnRzXCJcblx0XHQpO1xuXHRcdHJlbW92ZUxpbmtCdXR0b24uYWRkQ2xhc3MoXCJtb2Qtd2FybmluZ1wiKTtcblx0XHRyZW1vdmVMaW5rQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRkZWxldGVGaWxlKHRoaXMubm90ZSwgdGhpcy5teVBsdWdpbik7XG5cdFx0XHRkZWxldGVBbGxBdHRhY2hzKHRoaXMubXlQbHVnaW4pO1xuXHRcdFx0bXlNb2RhbC5jbG9zZSgpO1xuXHRcdH0pO1xuXHR9XG59XG4iLCAiLy8gVGhpcyBmaWxlIGlzIGNvcGllZCBmcm9tIHJlcG86IGh0dHBzOi8vZ2l0aHViLmNvbS9Ob21hckN1Yi9vYnNpZGlhbi1jb3B5LXVybC1pbi1wcmV2aWV3XG5cbi8vIE1JVCBMaWNlbnNlXG4vLyBDb3B5cmlnaHQgKGMpIDIwMjIgTm9tYXJDdWJcblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbi8vIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbi8vIFNPRlRXQVJFLlxuXG5pbXBvcnQgeyBBcHAsIEVkaXRvciwgRWRpdG9yUG9zaXRpb24sIEZpbGVTeXN0ZW1BZGFwdGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmNvbnN0IGxvYWRJbWFnZUJsb2JUaW1lb3V0ID0gMzAwMDtcblxuZXhwb3J0IGludGVyZmFjZSBFbGVjdHJvbldpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgV0VCVklFV19TRVJWRVJfVVJMOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0b3JJbnRlcm5hbEFwaSBleHRlbmRzIEVkaXRvciB7XG4gICAgcG9zQXRNb3VzZShldmVudDogTW91c2VFdmVudCk6IEVkaXRvclBvc2l0aW9uO1xuICAgIGdldENsaWNrYWJsZVRva2VuQXQocG9zaXRpb246IEVkaXRvclBvc2l0aW9uKToge1xuICAgICAgICB0ZXh0OiBzdHJpbmdcbiAgICB9IHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlU3lzdGVtQWRhcHRlcldpdGhJbnRlcm5hbEFwaSBleHRlbmRzIEZpbGVTeXN0ZW1BZGFwdGVyIHtcbiAgICBvcGVuKHBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHBXaXRoRGVza3RvcEludGVybmFsQXBpIGV4dGVuZHMgQXBwIHtcbiAgICBvcGVuV2l0aERlZmF1bHRBcHAocGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBzaG93SW5Gb2xkZXIocGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaXN0ZW5lciB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAodGhpczogRG9jdW1lbnQsIGV2OiBFdmVudCk6IGFueTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhUaW1lb3V0PFQ+KG1zOiBudW1iZXIsIHByb21pc2U6IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCB0aW1lb3V0ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgICAgICAgIHJlamVjdChgdGltZWQgb3V0IGFmdGVyICR7bXN9IG1zYClcbiAgICAgICAgfSwgbXMpXG4gICAgfSlcbiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgcHJvbWlzZSxcbiAgICAgICAgdGltZW91dFxuICAgIF0pIGFzIFByb21pc2U8VD5cbn1cblxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2Vcbi8vIG9wdGlvbj86IGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2h0bWwtdG8taW1hZ2VcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkSW1hZ2VCbG9iKGltZ1NyYzogc3RyaW5nLCByZXRyeUNvdW50ID0gMCk6IFByb21pc2U8QmxvYj4ge1xuICAgIGNvbnN0IGxvYWRJbWFnZUJsb2JDb3JlID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8QmxvYj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltYWdlLmNyb3NzT3JpZ2luID0gXCJhbm9ueW1vdXNcIjtcbiAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSE7XG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgY2FudmFzLnRvQmxvYigoYmxvYjogQmxvYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJsb2IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltYWdlLm9uZXJyb3IgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPCAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaChpbWFnZS5zcmMsIHsgXCJtb2RlXCI6IFwibm8tY29yc1wiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IGxvYWRJbWFnZUJsb2IoYGh0dHBzOi8vYXBpLmFsbG9yaWdpbnMud2luL3Jhdz91cmw9JHtlbmNvZGVVUklDb21wb25lbnQoaW1nU3JjKX1gLCByZXRyeUNvdW50ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignVW5hYmxlIHRvIHJldHJpZXZlIHRoZSBpbWFnZSBkYXRhIGFmdGVyIDMgcmV0cmllcy4nKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltYWdlLnNyYyA9IGltZ1NyYztcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gd2l0aFRpbWVvdXQobG9hZEltYWdlQmxvYlRpbWVvdXQsIGxvYWRJbWFnZUJsb2JDb3JlKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb25FbGVtZW50KFxuICAgIGVsOiBEb2N1bWVudCxcbiAgICBldmVudDoga2V5b2YgSFRNTEVsZW1lbnRFdmVudE1hcCxcbiAgICBzZWxlY3Rvcjogc3RyaW5nLFxuICAgIGxpc3RlbmVyOiBMaXN0ZW5lcixcbiAgICBvcHRpb25zPzogeyBjYXB0dXJlPzogYm9vbGVhbjsgfVxuKSB7XG4gICAgZWwub24oZXZlbnQsIHNlbGVjdG9yLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IGVsLm9mZihldmVudCwgc2VsZWN0b3IsIGxpc3RlbmVyLCBvcHRpb25zKTtcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBc0Y7OztBQ0F0Rix1QkFBdUM7OztBQ0N2QyxzQkFBNEQ7QUFJNUQsMkJBQStCO0FBQy9CLGdCQUEyQjtBQUszQix1QkFBMEU7QUFFbkUsSUFBSSxRQUFnQjtBQUMzQixJQUFNLHlCQUF5QjtBQUV4QixJQUFNLFFBQU0sQ0FBQyxZQUFrQixtQkFBeUI7QUFDM0QsTUFBSSxPQUFPO0FBQ1AsWUFBUSxJQUFJLFNBQVMsR0FBRyxjQUFjO0FBQUEsRUFDMUM7QUFDSjtBQUVPLGtCQUFrQixPQUFnQjtBQUNyQyxVQUFRO0FBQ1o7QUFRTyxJQUFNLHFCQUFxQixDQUNqQyxhQUNBLGNBQ3lDO0FBRXpDLFFBQU0sZ0JBQWdCLElBQUksY0FBYztBQUN4QyxNQUFJO0FBRUosTUFBSSxTQUF5QjtBQUFBLElBQzVCLE9BQU87QUFBQSxJQUNQLFFBQVEsQ0FBQztBQUFBLEVBQ1Y7QUFDQSxNQUFJLFNBQVM7QUFDYixhQUFXLENBQUMsUUFBUSxVQUFVLE9BQU8sUUFBUSxhQUFhLEdBQUc7QUFDNUQsUUFBSSxVQUFVLFNBQVMsUUFBUTtBQUM5QixrQkFBWSxVQUFVO0FBQ3RCLGFBQU8sT0FBTyxRQUFRLFNBQVM7QUFBQSxJQUNoQztBQUNBLGVBQVcsQ0FBQyxVQUFVLE9BQU8sT0FBTyxRQUFRLEtBQUssR0FBRztBQUNuRCxVQUFJLDRDQUFhLFVBQVMsVUFBVTtBQUNuQztBQUVBLFlBQUksS0FBSyxH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
