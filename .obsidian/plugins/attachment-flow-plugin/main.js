/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AttachFlowPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/options/deleleAllAttachsInTheNote.ts
var import_obsidian4 = require("obsidian");

// src/util.ts
var import_obsidian = require("obsidian");
var import_child_process = require("child_process");
var import_fs = require("fs");
var import_obsidian2 = require("obsidian");
var DEBUG = false;
var SUCCESS_NOTICE_TIMEOUT = 1800;
var print = (message, ...optionalParams) => {
  if (DEBUG) {
    console.log(message, ...optionalParams);
  }
};
function setDebug(value) {
  DEBUG = value;
}
var checkReferenceInfo = (target_file, currentMd) => {
  const resolvedLinks = app.metadataCache.resolvedLinks;
  let CurMDPath;
  let result = {
    state: 0,
    mdPath: []
  };
  let refNum = 0;
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if (currentMd.path === mdFile) {
      CurMDPath = currentMd.path;
      result.mdPath.unshift(CurMDPath);
    }
    for (const [filePath, nr] of Object.entries(links)) {
      if ((target_file == null ? void 0 : target_file.path) === filePath) {
        refNum++;
        if (nr > 1) {
          result.state = 2 /* MORE */;
          result.mdPath.push(mdFile);
          return result;
        }
        result.mdPath.push(mdFile);
      }
    }
  }
  if (refNum > 1) {
    result.state = 1 /* MUTIPLE */;
  } else {
    result.state = 0 /* ONCE */;
  }
  return result;
};
var getFileByBaseName = (currentMd, FileBaseName) => {
  const resolvedLinks = app.metadataCache.resolvedLinks;
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if (currentMd.path === mdFile) {
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath.includes(FileBaseName)) {
          try {
            const AttachFile = app.vault.getAbstractFileByPath(filePath);
            if (AttachFile instanceof import_obsidian.TFile) {
              return AttachFile;
            }
          } catch (error) {
            new import_obsidian.Notice(` cannot get the image file`);
            console.error(error);
          }
        }
      }
    }
  }
};
var PureClearAttachment = (file, target_type, plugin) => __async(void 0, null, function* () {
  const deleteOption = plugin.settings.deleteOption;
  const delFileFolder = onlyOneFileExists(file);
  const fileFolder = getFileParentFolder(file);
  let name = target_type == "img" ? "Image" : "File";
  try {
    if (deleteOption === ".trash") {
      yield app.vault.trash(file, false);
      new import_obsidian.Notice(name + " moved to Obsidian Trash !", SUCCESS_NOTICE_TIMEOUT);
      if (delFileFolder) {
        yield app.vault.trash(fileFolder, false);
        new import_obsidian.Notice("Attachment folder have been deleted!", 3e3);
      }
    } else if (deleteOption === "system-trash") {
      yield app.vault.trash(file, true);
      new import_obsidian.Notice(name + " moved to System Trash !", SUCCESS_NOTICE_TIMEOUT);
      if (delFileFolder) {
        yield app.vault.trash(fileFolder, true);
        new import_obsidian.Notice("Attachment folder have been deleted!", 3e3);
      }
    } else if (deleteOption === "permanent") {
      yield app.vault.delete(file);
      new import_obsidian.Notice(name + " deleted Permanently !", SUCCESS_NOTICE_TIMEOUT);
      if (delFileFolder) {
        yield app.vault.delete(fileFolder, true);
        new import_obsidian.Notice("Attachment folder have been deleted!", 3e3);
      }
    }
  } catch (error) {
    console.error(error);
    new import_obsidian.Notice("Faild to delelte the " + name + "!", SUCCESS_NOTICE_TIMEOUT);
  }
});
var handlerDelFileNew = (FileBaseName, currentMd, plugin, target_type, target_pos, in_table, in_callout) => {
  let logs;
  let modal;
  const target_file = getFileByBaseName(currentMd, FileBaseName);
  const refInfo = checkReferenceInfo(target_file, currentMd);
  let state = refInfo.state;
  switch (state) {
    case 0:
      deleteCurTargetLink(FileBaseName, plugin, target_type, target_pos, in_table, in_callout);
      PureClearAttachment(target_file, target_type, plugin);
      break;
    case 1:
    case 2:
      deleteCurTargetLink(FileBaseName, plugin, target_type, target_pos, in_table, in_callout);
      logs = refInfo.mdPath;
      new import_obsidian.Notice("As other references of current file exist, just deleted the current reference link without deleting the actual file.", 3500);
    default:
      break;
  }
};
var deleteCurTargetLink = (file_base_name, plugin, target_type, target_pos, in_table, in_callout) => {
  file_base_name = file_base_name.startsWith("/") ? file_base_name.substring(1) : file_base_name;
  const activeView = plugin.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
  const editor = activeView.editor;
  const editorView = editor.cm;
  let target_line = editorView.state.doc.lineAt(target_pos);
  let line_text = target_line.text;
  if (!in_table && !in_callout) {
    let finds = findLinkInLine(file_base_name, line_text);
    if (finds.length == 0) {
      new import_obsidian.Notice("Fail to find the link-text, please delete it manually!", 0);
      return;
    } else if (finds.length != 1) {
      new import_obsidian.Notice("Find multiple same Link in current line, please delete it manually!", 0);
      return;
    } else {
      editor.replaceRange("", { line: target_line.number - 1, ch: finds[0][0] }, { line: target_line.number - 1, ch: finds[0][1] });
      return;
    }
  }
  let startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  let mode = in_table ? "table" : "callout";
  let finds_lines = [];
  let finds_all = [];
  for (let i = target_line.number; i <= editor.lineCount(); i++) {
    let line_text2 = editor.getLine(i - 1);
    if (!startReg[mode].test(line_text2))
      break;
    print(`line_${i}_text:`, line_text2);
    let finds = findLinkInLine(file_base_name, line_text2);
    if (finds.length > 0) {
      finds_lines.push(...new Array(finds.length).fill(i));
      finds_all.push(...finds);
    }
  }
  for (let i = target_line.number - 1; i >= 1; i--) {
    let line_text2 = editor.getLine(i - 1);
    if (!startReg[mode].test(line_text2))
      break;
    print(`line_${i}_text:`, line_text2);
    let finds = findLinkInLine(file_base_name, line_text2);
    if (finds.length > 0) {
      finds_lines.push(...new Array(finds.length).fill(i));
      finds_all.push(...finds);
    }
  }
  if (finds_all.length == 0) {
    new import_obsidian.Notice(`Fail to find the link-text (for links in ${mode}), please delete it manually!`, 0);
    return;
  } else if (finds_all.length != 1) {
    new import_obsidian.Notice(`Find multiple same Link in current ${mode}, please delete it manually!`, 0);
    return;
  } else {
    editor.replaceRange("", { line: finds_lines[0] - 1, ch: finds_all[0][0] }, { line: finds_lines[0] - 1, ch: finds_all[0][1] });
  }
  editor.focus();
};
var handlerCopyFile = (FileBaseName, currentMd, plugin) => __async(void 0, null, function* () {
  const file = getFileByBaseName(currentMd, FileBaseName);
  const basePath = file.vault.adapter.basePath;
  const file_ab_path = basePath + "/" + file.path;
  try {
    copyFileToClipboardCMD(file_ab_path);
    new import_obsidian.Notice("Copied to clipboard !", SUCCESS_NOTICE_TIMEOUT);
  } catch (error) {
    console.error(error);
    new import_obsidian.Notice("Faild to copy the file !", SUCCESS_NOTICE_TIMEOUT);
  }
});
var getFileParentFolder = (file) => {
  if (file instanceof import_obsidian.TFile) {
    if (file.parent instanceof import_obsidian.TFolder) {
      return file.parent;
    }
  }
  return;
};
var onlyOneFileExists = (file) => {
  const fileFolder = getFileParentFolder(file);
  return fileFolder.children.length === 1;
};
function copyFileToClipboardCMD(filePath) {
  if (!(0, import_fs.existsSync)(filePath)) {
    console.error(`File ${filePath} does not exist`);
    return;
  }
  const callback = (error, stdout, stderr) => {
    if (error) {
      new import_obsidian.Notice(`Error executing command: ${error.message}`, SUCCESS_NOTICE_TIMEOUT);
      console.error(`Error executing command: ${error.message}`);
      return;
    }
  };
  if (process.platform === "darwin") {
    (0, import_child_process.execSync)(`open -R "${filePath}"`);
    (0, import_child_process.execSync)(`osascript -e 'tell application "System Events" to keystroke "c" using command down'`);
    (0, import_child_process.execSync)(`osascript -e 'tell application "System Events" to keystroke "w" using command down'`);
    (0, import_child_process.execSync)(`open -a "Obsidian.app"`);
  } else if (process.platform === "linux") {
  } else if (process.platform === "win32") {
    (0, import_child_process.exec)(`powershell -command "Set-Clipboard -Path '${filePath}'"`, callback);
  }
}
var findLinkInLine = (file_name, line_text) => {
  const file_name_mdlink = file_name.replace(/ /g, "%20");
  let regWikiLink = /\!\[\[[^\[\]]*?\]\]/g;
  let regMdLink = /\!\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  print("target_name (WIKI/MD):", file_name, file_name_mdlink);
  let search_result = [];
  if (line_text.includes(file_name)) {
    while (true) {
      let match = regWikiLink.exec(line_text);
      if (!match)
        break;
      let matched_link = match[0];
      print("matched_link:", matched_link);
      print("matched_link.includes(file_name)", matched_link.includes(file_name));
      if (matched_link.includes(file_name)) {
        search_result.push([match.index, match.index + matched_link.length]);
      }
    }
  }
  if (line_text.includes(file_name_mdlink)) {
    while (true) {
      let match = regMdLink.exec(line_text);
      if (!match)
        break;
      let matched_link = match[0];
      print("matched_link:", matched_link);
      print("matched_link.includes(file_name_mdlink)", matched_link.includes(file_name_mdlink));
      if (matched_link.includes(file_name_mdlink)) {
        search_result.push([match.index, match.index + matched_link.length]);
      }
    }
  }
  return search_result;
};
var handlerRenameFile = (FileBaseName, currentMd, plugin) => {
  const target_file = getFileByBaseName(currentMd, FileBaseName);
  let path = target_file.path;
  let name = target_file.name;
  let target_folder = path.substring(0, path.length - name.length);
  let file_type = name.split(".").pop();
  new RenameModal(plugin.app, target_folder, name.substring(0, name.length - file_type.length - 1), file_type, (result) => {
    if (!result)
      return;
    if (result == path)
      return;
    app.vault.adapter.exists(result).then((exists) => {
      if (exists) {
        new import_obsidian.Notice(`Fail to rename for there alreay exist file ${result}`);
      } else {
        plugin.app.fileManager.renameFile(target_file, `${result}`);
      }
    });
  }).open();
};
var RenameModal = class extends import_obsidian2.Modal {
  constructor(app2, folder, name, filetype, onSubmit) {
    super(app2);
    this.onSubmit = onSubmit;
    this.folder = folder;
    this.name = name;
    this.filetype = filetype;
  }
  onOpen() {
    const { contentEl } = this;
    let setting = new import_obsidian2.Setting(contentEl).setName("Rename:").addText((text) => text.setValue(this.name).onChange((value) => {
      this.result = `${this.folder}${value}.${this.filetype}`;
    }));
    setTimeout(() => {
      let inputBox = setting.settingEl.querySelector('input[type="text"]');
      if (inputBox && inputBox.parentElement) {
        let folder_indicator = document.createElement("label");
        folder_indicator.innerText = `${this.folder}`;
        folder_indicator.style.marginRight = "4px";
        inputBox.parentElement.insertBefore(folder_indicator, inputBox);
        let file_type_indicator = document.createElement("label");
        file_type_indicator.innerText = `.${this.filetype}`;
        file_type_indicator.style.marginLeft = "4px";
        inputBox.after(file_type_indicator);
        let parentEl = setting.settingEl.parentElement;
        if (parentEl) {
          parentEl.style.display = "flex";
          parentEl.style.justifyContent = "center";
        }
        let inputElem = inputBox;
        inputElem.select();
      } else {
        console.error("\u65E0\u6CD5\u627E\u5230\u6587\u672C\u8F93\u5165\u6846");
      }
    }, 0);
    this.scope.register([], "Enter", (evt) => {
      if (evt.isComposing) {
        return;
      }
      this.close();
      this.onSubmit(this.result);
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/deleteFile.ts
var import_obsidian3 = require("obsidian");
var SUCCESS_NOTICE_TIMEOUT2 = 1800;
var deleteFile = (file, plugin) => __async(void 0, null, function* () {
  const deleteOption = plugin.settings.deleteOption;
  try {
    if (deleteOption === ".trash") {
      yield app.vault.trash(file, false);
    } else if (deleteOption === "system-trash") {
      yield app.vault.trash(file, true);
    } else if (deleteOption === "permanent") {
      yield app.vault.delete(file);
    }
  } catch (error) {
    console.error(error);
    new import_obsidian3.Notice("Faild to delete the file/folder !", SUCCESS_NOTICE_TIMEOUT2);
  }
});

// src/options/deleleAllAttachsInTheNote.ts
var deleteAllAttachs = (plugin) => __async(void 0, null, function* () {
  const activeMd = app.workspace.getActiveFile();
  const resolvedLinks = app.metadataCache.resolvedLinks;
  const attachsPaths = [];
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if ((activeMd == null ? void 0 : activeMd.path) === mdFile) {
      let fileCount = 0;
      let flag = false;
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath.match(/.*\.md$/m))
          continue;
        if (isReferencedByOtherNotes(filePath, activeMd))
          continue;
        attachsPaths.push(filePath);
        try {
          const AttachFile = app.vault.getAbstractFileByPath(filePath);
          if (AttachFile instanceof import_obsidian4.TFile) {
            deleteFile(AttachFile, plugin);
          }
          const parentFolder = getFileParentFolder(AttachFile);
          if (!flag) {
            fileCount = parentFolder.children.length;
            flag = !flag;
          }
          fileCount = fileCount - 1;
          if (!fileCount) {
            yield deleteFile(parentFolder, plugin);
            new import_obsidian4.Notice("All attachments and its parent folder deleted!", 3e3);
          }
        } catch (error) {
          console.warn(error);
        }
      }
    }
  }
});
var isReferencedByOtherNotes = (attachPath, currentMd) => {
  const resolvedLinks = app.metadataCache.resolvedLinks;
  let flag = false;
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if (mdFile !== currentMd.path) {
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath === attachPath) {
          flag = true;
        }
      }
    }
  }
  return flag;
};
var getRefencedLinkCount = () => {
  const activeMd = app.workspace.getActiveFile();
  const resolvedLinks = app.metadataCache.resolvedLinks;
  const attachsPaths = [];
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if ((activeMd == null ? void 0 : activeMd.path) === mdFile) {
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath.match(/.*\.md$/m))
          continue;
        if (isReferencedByOtherNotes(filePath, activeMd))
          continue;
        attachsPaths.push(filePath);
      }
    }
  }
  return attachsPaths.length;
};

// src/config/addCommand-config.ts
var addCommand = (myPlugin) => {
  myPlugin.addCommand({
    id: "clear-all-attachments-in-current-file",
    name: "clear all attachments in current file",
    callback: () => __async(void 0, null, function* () {
      deleteAllAttachs(myPlugin);
    })
  });
};

// src/settings.ts
var import_obsidian5 = require("obsidian");
var DEFAULT_SETTINGS = {
  deleteOption: ".trash",
  logsModal: true,
  dragResize: false,
  debug: false
};
var AttachFlowSettingsTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "AttachFlow plugin Settings" });
    new import_obsidian5.Setting(containerEl).setName("Deleted Attachment Destination").setDesc("Select where you want Attachments to be moved once they are deleted").addDropdown((dropdown) => {
      dropdown.addOption("permanent", "Delete Permanently");
      dropdown.addOption(".trash", "Move to Obsidian Trash");
      dropdown.addOption("system-trash", "Move to System Trash");
      dropdown.setValue(this.plugin.settings.deleteOption);
      dropdown.onChange((option) => {
        this.plugin.settings.deleteOption = option;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian5.Setting(containerEl).setName("Drag To Resize Images").setDesc("\u62D6\u62FD\u8C03\u6574\u56FE\u7247\u5927\u5C0F").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.dragResize).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.dragResize = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian5.Setting(containerEl).setName("Print Debug Information").setDesc("\u63A7\u5236\u53F0\u8F93\u51FA\u8C03\u8BD5\u4FE1\u606F").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.debug).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.debug = value;
        setDebug(value);
        yield this.plugin.saveSettings();
      }));
    });
  }
};

// src/utils/handlerEvent.ts
var getMouseEventTarget = (event) => {
  event.preventDefault();
  const target = event.target;
  return target;
};

// src/modals/deletionPrompt.ts
var import_obsidian6 = require("obsidian");
var DeleteAllLogsModal = class extends import_obsidian6.Modal {
  constructor(note, myPlugin) {
    super(app);
    this.note = note;
    this.myPlugin = myPlugin;
  }
  getLog() {
    const referenceMessage = `Are you sure you want to delete "${this.note.basename}.md"?

It will be moved to your ${this.myPlugin.settings.deleteOption}.`;
    return referenceMessage;
  }
  showLogs() {
    const logs = this.contentEl.createEl("div");
    logs.addClass("attachment-flow-log");
    logs.setText(this.getLog());
  }
  onOpen() {
    const { contentEl } = this;
    const myModal = this;
    const headerWrapper = contentEl.createEl("div");
    headerWrapper.addClass("attachment-flow-center-wrapper");
    this.showLogs();
    const referencedMessageWrapper = contentEl.createEl("span");
    referencedMessageWrapper.style.color = "red";
    const referencedMessage = `There are(is) currently  [${getRefencedLinkCount()}]  non-multi-referenced link(s) pointing to this note.`;
    referencedMessageWrapper.append(referencedMessage);
    const buttonWrapper = this.contentEl.createEl("div");
    buttonWrapper.addClass("attachment-flow-center-wrapper");
    const headerEl = headerWrapper.createEl("h1", {
      text: "Delete the file and its all attachments - logs "
    });
    headerEl.addClass("modal-title");
    this.showConfirmButton(buttonWrapper, myModal);
    this.showCancelBtn(buttonWrapper, myModal);
  }
  showCancelBtn(buttonWrapper, myModal) {
    const closeButton = buttonWrapper.createEl("button", {
      text: "Cancel"
    });
    closeButton.setAttribute("aria-label", "Cancel the operation");
    closeButton.addEventListener("click", () => {
      myModal.close();
    });
  }
  showConfirmButton(buttonWrapper, myModal) {
    const removeLinkButton = buttonWrapper.createEl("button", {
      text: "Confirm"
    });
    removeLinkButton.setAttribute("aria-label", "Continue to delete current file and its all non-multi-referenced attachments");
    removeLinkButton.addClass("mod-warning");
    removeLinkButton.addEventListener("click", () => __async(this, null, function* () {
      deleteFile(this.note, this.myPlugin);
      deleteAllAttachs(this.myPlugin);
      myModal.close();
    }));
  }
};

// src/helpers.ts
function onElement(el, event, selector, listener, options) {
  el.on(event, selector, listener, options);
  return () => el.off(event, selector, listener, options);
}

// src/main.ts
var AttachFlowPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.addMenuExtendedSourceMode = (menu, FileBaseName, currentMd, target_type, target_pos, inTable, inCallout) => {
      this.addMenuExtendedPreviewMode(menu, FileBaseName, currentMd);
      menu.addItem((item) => item.setIcon("pencil").setTitle("Rename").onClick(() => __async(this, null, function* () {
        try {
          print("test rename");
          handlerRenameFile(FileBaseName, currentMd, this);
        } catch (e) {
          new import_obsidian7.Notice("Error, could not rename the file!");
        }
      })));
      menu.addItem((item) => item.setIcon("trash-2").setTitle("Clear file and associated link").onClick(() => __async(this, null, function* () {
        try {
          handlerDelFileNew(FileBaseName, currentMd, this, target_type, target_pos, inTable, inCallout);
        } catch (e) {
          new import_obsidian7.Notice("Error, could not clear the file!");
        }
      })));
    };
    this.addMenuExtendedPreviewMode = (menu, FileBaseName, currentMd) => {
      const file = getFileByBaseName(currentMd, FileBaseName);
      if (process.platform != "linux") {
        menu.addItem((item) => item.setIcon("copy").setTitle("Copy file to clipboard").onClick(() => __async(this, null, function* () {
          try {
            handlerCopyFile(FileBaseName, currentMd, this);
          } catch (e) {
            new import_obsidian7.Notice("Error, could not copy the file!");
          }
        })));
      }
      menu.addItem((item) => item.setIcon("arrow-up-right").setTitle("Open in default app").onClick(() => this.app.openWithDefaultApp(file.path)));
      menu.addItem((item) => item.setIcon("arrow-up-right").setTitle(import_obsidian7.Platform.isMacOS ? "Reveal in finder" : "Show in system explorer").onClick(() => {
        this.app.showInFolder(file.path);
      }));
      menu.addItem((item) => item.setIcon("folder").setTitle("Reveal file in navigation").onClick(() => {
        const abstractFilePath = this.app.vault.getAbstractFileByPath(file.path);
        this.app.internalPlugins.getEnabledPluginById("file-explorer").revealInFolder(abstractFilePath);
      }));
    };
  }
  onload() {
    return __async(this, null, function* () {
      console.log("AttachFlow plugin loaded...");
      this.AllowZoom = true;
      this.addSettingTab(new AttachFlowSettingsTab(this.app, this));
      yield this.loadSettings();
      this.registerDocument(document);
      app.workspace.on("window-open", (workspaceWindow, window) => {
        this.registerDocument(window.document);
      });
      this.registerEvent(this.app.workspace.on("file-menu", (menu, file) => {
        if (file instanceof import_obsidian7.TFile) {
          if (!file.path.endsWith(".md"))
            return;
          const addMenuItem = (item) => {
            item.setTitle("Delete file and its attachments").setIcon("trash-2").setSection("danger");
            item.onClick(() => __async(this, null, function* () {
              const modal = new DeleteAllLogsModal(file, this);
              modal.open();
            }));
          };
          menu.addItem(addMenuItem);
        }
      }));
      addCommand(this);
      this.registerDomEvent(document, "click", (evt) => {
        const target = evt.target;
        if (!this.AllowZoom) {
          evt.preventDefault();
          return;
        }
        if (target.tagName === "IMG") {
          const rect = target.getBoundingClientRect();
          const imageCenter = rect.left + rect.width / 2;
          if (evt.clientX > imageCenter && !document.getElementById("af-zoomed-image")) {
            const mask = document.createElement("div");
            mask.id = "af-mask";
            mask.style.position = "fixed";
            mask.style.top = "0";
            mask.style.left = "0";
            mask.style.width = "100%";
            mask.style.height = "100%";
            mask.style.background = "rgba(0, 0, 0, 0.5)";
            mask.style.zIndex = "9998";
            document.body.appendChild(mask);
            const zoomedImage = document.createElement("img");
            zoomedImage.id = "af-zoomed-image";
            zoomedImage.src = evt.target.src;
            const realImage = new Image();
            realImage.onload = function() {
              zoomedImage.style.width = `${realImage.naturalWidth}px`;
              zoomedImage.style.height = `${realImage.naturalHeight}px`;
            };
            realImage.src = evt.target.src;
            zoomedImage.style.position = "fixed";
            zoomedImage.style.zIndex = "9999";
            zoomedImage.style.top = "50%";
            zoomedImage.style.left = "50%";
            zoomedImage.style.transform = "translate(-50%, -50%)";
            document.body.appendChild(zoomedImage);
            const originalWidth = zoomedImage.offsetWidth;
            const originalHeight = zoomedImage.offsetHeight;
            const scaleDiv = document.createElement("div");
            scaleDiv.id = "af-scale-div";
            scaleDiv.style.position = "fixed";
            scaleDiv.style.zIndex = "10000";
            scaleDiv.style.bottom = "0";
            scaleDiv.style.left = "50%";
            scaleDiv.style.transform = "translateX(-50%)";
            scaleDiv.style.color = "#fff";
            scaleDiv.style.fontSize = "20px";
            scaleDiv.style.background = "rgba(0, 0, 0, 0.5)";
            scaleDiv.style.padding = "5px";
            scaleDiv.innerText = "100%";
            document.body.appendChild(scaleDiv);
            zoomedImage.addEventListener("wheel", function(e) {
              e.preventDefault();
              const scale = e.deltaY > 0 ? 0.95 : 1.05;
              const width = zoomedImage.offsetWidth;
              const height = zoomedImage.offsetHeight;
              const newWidth = width * scale;
              const newHeight = height * scale;
              zoomedImage.style.width = `${newWidth}px`;
              zoomedImage.style.height = `${newHeight}px`;
              const scalePercent = newWidth / originalWidth * 100;
              scaleDiv.innerText = `${scalePercent.toFixed(1)}%`;
            });
            zoomedImage.addEventListener("contextmenu", function(e) {
              e.preventDefault();
              zoomedImage.style.width = `${originalWidth}px`;
              zoomedImage.style.height = `${originalHeight}px`;
              scaleDiv.innerText = `100%`;
            });
          }
        } else {
          this.removeZoomedImage();
        }
      });
      this.registerDomEvent(document, "keydown", (evt) => {
        if (evt.key === "Escape") {
          this.removeZoomedImage();
        }
      });
      setDebug(this.settings.debug);
    });
  }
  onunload() {
    console.log("AttachFlow plugin unloaded...");
  }
  removeZoomedImage() {
    if (document.getElementById("af-zoomed-image")) {
      const zoomedImage = document.getElementById("af-zoomed-image");
      if (zoomedImage)
        document.body.removeChild(zoomedImage);
      const scaleDiv = document.getElementById("af-scale-div");
      if (scaleDiv)
        document.body.removeChild(scaleDiv);
      const mask = document.getElementById("af-mask");
      if (mask)
        document.body.removeChild(mask);
    }
  }
  registerDocument(document2) {
    this.register(onElement(document2, "contextmenu", "img, iframe, video, div.file-embed-title, audio", this.onClick.bind(this)));
    this.register(onElement(document2, "mousedown", "img, video", (event) => {
      var _a, _b;
      if (!this.settings.dragResize)
        return;
      const currentMd = app.workspace.getActiveFile();
      if (currentMd.name.endsWith(".canvas"))
        return;
      const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
      if (inPreview)
        return;
      if (event.button === 0) {
        event.preventDefault();
      }
      const img = event.target;
      if (img.id == "af-zoomed-image")
        return;
      const editor = (_b = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _b.editor;
      const editorView = editor.cm;
      const target_pos = editorView.posAtDOM(img);
      let target_line = editorView.state.doc.lineAt(target_pos);
      const inTable = img.closest("table") != null;
      const inCallout = img.closest(".callout") != null;
      const isExcalidraw = img.classList.contains("excalidraw-embedded-img");
      print("InTable", inTable);
      print("Target Element", img);
      const rect = img.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;
      const edgeSize = 30;
      if (x < edgeSize || y < edgeSize || x > rect.width - edgeSize || y > rect.height - edgeSize) {
        const startX = event.clientX;
        const startY = event.clientY;
        const startWidth = img.clientWidth;
        const startHeight = img.clientHeight;
        let lastUpdateX = startX;
        let lastUpdateY = startY;
        const updateThreshold = 5;
        const onMouseMove = (event2) => {
          var _a2;
          this.AllowZoom = false;
          const currentX = event2.clientX;
          let newWidth = startWidth + (currentX - startX);
          const aspectRatio = startWidth / startHeight;
          newWidth = Math.max(newWidth, 50);
          let newHeight = newWidth / aspectRatio;
          newWidth = Math.round(newWidth);
          newHeight = Math.round(newHeight);
          if (img instanceof HTMLImageElement) {
            img.style.border = "solid";
            img.style.borderWidth = "2px";
            img.style.borderColor = "blue";
            img.style.boxSizing = "border-box";
            img.style.width = `${newWidth}px`;
          } else if (img instanceof HTMLVideoElement) {
            img.style.border = "solid";
            img.style.borderWidth = "2px";
            img.style.borderColor = "blue";
            img.style.boxSizing = "border-box";
            if (img.parentElement) {
              const containerWidth = img.parentElement.clientWidth;
              const newWidthPercentage = newWidth / containerWidth * 100;
              img.style.width = `${newWidthPercentage}%`;
            }
          }
          if (Math.abs(event2.clientX - lastUpdateX) > updateThreshold) {
            const activeView = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
            if (activeView) {
              print("update new Width", newWidth);
              let imageName = img.getAttribute("src");
              if (imageName == null ? void 0 : imageName.startsWith("http")) {
                updateExternalLink(activeView, img, target_pos, newWidth, newHeight, inTable, inCallout);
              } else if (isExcalidraw) {
                let target_name = img.getAttribute("filesource");
                let draw_base_name = target_name;
                if (draw_base_name.includes("/")) {
                  let temp_arr = draw_base_name.split("/");
                  draw_base_name = temp_arr[temp_arr.length - 1];
                } else if (draw_base_name.includes("\\")) {
                  let temp_arr = draw_base_name.split("\\");
                  draw_base_name = temp_arr[temp_arr.length - 1];
                }
                draw_base_name = draw_base_name.endsWith(".md") ? draw_base_name.substring(0, draw_base_name.length - 3) : draw_base_name;
                print(target_name);
                print("excalidraw file:", draw_base_name);
                img.style.maxWidth = "none";
                updateInternalLink(activeView, img, target_pos, draw_base_name, newWidth, newHeight, inTable, inCallout);
              } else {
                imageName = (_a2 = img.parentElement) == null ? void 0 : _a2.getAttribute("src");
                updateInternalLink(activeView, img, target_pos, imageName, newWidth, newHeight, inTable, inCallout);
              }
            }
            lastUpdateX = event2.clientX;
            lastUpdateY = event2.clientY;
          }
        };
        const allowZoomFunc = () => {
          this.AllowZoom = true;
        };
        const onMouseUp = (event2) => {
          setTimeout(allowZoomFunc, 100);
          event2.preventDefault();
          img.style.borderStyle = "none";
          img.style.outline = "none";
          img.style.cursor = "default";
          document2.removeEventListener("mousemove", onMouseMove);
          document2.removeEventListener("mouseup", onMouseUp);
        };
        document2.addEventListener("mousemove", onMouseMove);
        document2.addEventListener("mouseup", onMouseUp);
      }
    }));
    this.register(onElement(document2, "mouseover", "img, video", (event) => {
      var _a;
      if (!this.settings.dragResize)
        return;
      const currentMd = app.workspace.getActiveFile();
      if (currentMd.name.endsWith(".canvas"))
        return;
      const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
      if (inPreview)
        return;
      const img = event.target;
      const rect = img.getBoundingClientRect();
      const edgeSize = 30;
      if (img.id == "af-zoomed-image")
        return;
      const isExcalidraw = img.classList.contains("excalidraw-embedded-img");
      let lastMove = 0;
      const mouseOverHandler = (event2) => {
        if (!this.settings.dragResize)
          return;
        const now = Date.now();
        if (now - lastMove < 100)
          return;
        lastMove = now;
        const x = event2.clientX - rect.left;
        const y = event2.clientY - rect.top;
        if (x >= rect.width - edgeSize || x <= edgeSize || (y >= rect.height - edgeSize || y <= edgeSize)) {
          img.style.cursor = "nwse-resize";
          img.style.outline = "solid";
          img.style.outlineWidth = "6px";
          img.style.outlineColor = "#dfb0f283";
        } else if (x > rect.width / 2) {
          img.style.cursor = "zoom-in";
        } else {
          img.style.cursor = "default";
          img.style.outline = "none";
        }
      };
      this.registerDomEvent(img, "mousemove", mouseOverHandler);
    }));
    this.register(onElement(document2, "mouseout", "img, video", (event) => {
      var _a;
      if (!this.settings.dragResize)
        return;
      const currentMd = app.workspace.getActiveFile();
      if (currentMd.name.endsWith(".canvas"))
        return;
      const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
      if (inPreview)
        return;
      const img = event.target;
      img.style.borderStyle = "none";
      img.style.cursor = "default";
      img.style.outline = "none";
    }));
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  registerEscapeButton(menu, document2 = activeDocument) {
    menu.register(onElement(document2, "keydown", "*", (e) => {
      if (e.key === "Escape") {
        e.preventDefault();
        e.stopPropagation();
        menu.hide();
      }
    }));
  }
  onClick(event) {
    var _a, _b, _c, _d, _e;
    const target = getMouseEventTarget(event);
    const curTargetType = target.localName;
    if (target.id == "af-zoomed-image")
      return;
    const currentMd = app.workspace.getActiveFile();
    const inCanvas = currentMd.name.endsWith(".canvas");
    const SupportedTargetType = ["img", "iframe", "video", "div", "audio"];
    const menu = new import_obsidian7.Menu();
    if (!SupportedTargetType.includes(curTargetType))
      return;
    const inTable = target.closest("table") != null;
    const inCallout = target.closest(".callout") != null;
    const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
    const isExcalidraw = target.classList.contains("excalidraw-embedded-img");
    let target_name = target.getAttribute("src");
    if (target_name && target_name.startsWith("http"))
      return;
    if (inCanvas) {
      if ((_b = target.parentElement) == null ? void 0 : _b.classList.contains("canvas-node-content"))
        return;
      let file_name = (_c = target.parentElement) == null ? void 0 : _c.getAttribute("src");
      return;
    }
    if (isExcalidraw) {
      target_name = target.getAttribute("filesource");
      let file_base_name = target_name;
      if (file_base_name.includes("/")) {
        let temp_arr = file_base_name.split("/");
        file_base_name = temp_arr[temp_arr.length - 1];
      } else if (file_base_name.includes("\\")) {
        let temp_arr = file_base_name.split("\\");
        file_base_name = temp_arr[temp_arr.length - 1];
      }
      file_base_name = file_base_name.endsWith(".md") ? file_base_name.substring(0, file_base_name.length - 3) : file_base_name;
      target_name = file_base_name;
    } else {
      target_name = (_d = target.parentElement) == null ? void 0 : _d.getAttribute("src");
      target_name = target_name.replace(/^(\.\.\/)+/g, "");
      let pdf_match = target_name.match(/.*\.pdf/);
      target_name = pdf_match ? pdf_match[0] : target_name;
      if (curTargetType == "img" && pdf_match)
        return;
    }
    if (inPreview) {
      if (SupportedTargetType.includes(curTargetType)) {
        this.addMenuExtendedPreviewMode(menu, target_name, currentMd);
      }
    } else {
      const editor = (_e = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _e.editor;
      const editorView = editor.cm;
      const target_pos = editorView.posAtDOM(target);
      let target_line = editorView.state.doc.lineAt(target_pos);
      print("target line information: line-content, line-number(1-based), target.ch");
      print(target_line.text, target_line.number, target_pos - target_line.from);
      if (SupportedTargetType.includes(curTargetType)) {
        this.addMenuExtendedSourceMode(menu, target_name, currentMd, curTargetType, target_pos, inTable, inCallout);
      }
    }
    this.registerEscapeButton(menu);
    let offset = -163;
    let linux_offset = -138;
    offset = process.platform == "linux" ? linux_offset : offset;
    if (inTable && !inPreview) {
      menu.showAtPosition({ x: event.pageX, y: event.pageY + offset });
    } else {
      menu.showAtPosition({ x: event.pageX, y: event.pageY });
    }
    this.app.workspace.trigger("AttachFlow:contextmenu", menu);
  }
};
function updateInternalLink(activeView, target, target_pos, imageName, newWidth, newHeight, inTable, inCallout) {
  const editor = activeView.editor;
  const editorView = editor.cm;
  let target_line = editorView.state.doc.lineAt(target_pos);
  if (!inCallout && !inTable) {
    let matched = matchLineWithInternalLink(target_line.text, imageName, newWidth, inTable);
    if (matched.length == 1) {
      editorView.dispatch({
        changes: {
          from: target_line.from + matched[0].from_ch,
          to: target_line.from + matched[0].to_ch,
          insert: matched[0].new_link
        }
      });
    } else if (matched.length == 0) {
    } else {
      new import_obsidian7.Notice("Find multiple same image-link in line, please zoom manually!");
    }
    return;
  }
  let startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  let mode = inTable ? "table" : "callout";
  print("mode", mode);
  const start_reg = startReg[mode];
  let start_line_number = target_line.number;
  let matched_results = [];
  let matched_lines = [];
  for (let i = start_line_number; i <= editor.lineCount(); i++) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithInternalLink(line.text, imageName, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  for (let i = start_line_number - 1; i >= 1; i--) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithInternalLink(line.text, imageName, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  if (matched_results.length == 1) {
    let target_line2 = editorView.state.doc.line(matched_lines[0]);
    if (mode == "table") {
      let old_text = target_line2.text;
      let new_line_text = old_text.substring(0, matched_results[0].from_ch) + matched_results[0].new_link + old_text.substring(matched_results[0].to_ch);
      editorView.dispatch({
        changes: {
          from: target_line2.from,
          to: target_line2.from + old_text.length,
          insert: new_line_text
        }
      });
    } else {
      editorView.dispatch({
        changes: {
          from: target_line2.from + matched_results[0].from_ch,
          to: target_line2.from + matched_results[0].to_ch,
          insert: matched_results[0].new_link
        }
      });
    }
  } else if (matched_results.length == 0) {
    new import_obsidian7.Notice(`Fail to find current image-link in ${mode}, please zoom manually!`);
  } else {
    new import_obsidian7.Notice(`Find multiple same image-link in ${mode}, please zoom manually!`);
  }
  return;
}
function updateExternalLink(activeView, target, target_pos, newWidth, newHeight, inTable, inCallout) {
  const editor = activeView.editor;
  const editorView = editor.cm;
  let target_line = editorView.state.doc.lineAt(target_pos);
  const link = target.getAttribute("src");
  const altText = target.getAttribute("alt");
  if (!inCallout && !inTable) {
    let matched = matchLineWithExternalLink(target_line.text, link, altText, newWidth, inTable);
    if (matched.length == 1) {
      editorView.dispatch({
        changes: {
          from: target_line.from + matched[0].from_ch,
          to: target_line.from + matched[0].to_ch,
          insert: matched[0].new_link
        }
      });
    } else if (matched.length == 0) {
    } else {
      new import_obsidian7.Notice("Find multiple same image-link in line, please zoom manually!");
    }
    return;
  }
  let startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  let mode = inTable ? "table" : "callout";
  print("mode", mode);
  const start_reg = startReg[mode];
  let start_line_number = target_line.number;
  let matched_results = [];
  let matched_lines = [];
  for (let i = start_line_number; i <= editor.lineCount(); i++) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithExternalLink(line.text, link, altText, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  for (let i = start_line_number - 1; i >= 1; i--) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithExternalLink(line.text, link, altText, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  print(matched_results);
  print(matched_lines);
  if (matched_results.length == 1) {
    let target_line2 = editorView.state.doc.line(matched_lines[0]);
    if (mode == "table") {
      let old_text = target_line2.text;
      let new_line_text = old_text.substring(0, matched_results[0].from_ch) + matched_results[0].new_link + old_text.substring(matched_results[0].to_ch);
      editorView.dispatch({
        changes: {
          from: target_line2.from,
          to: target_line2.from + old_text.length,
          insert: new_line_text
        }
      });
    } else {
      editorView.dispatch({
        changes: {
          from: target_line2.from + matched_results[0].from_ch,
          to: target_line2.from + matched_results[0].to_ch,
          insert: matched_results[0].new_link
        }
      });
    }
  } else if (matched_results.length == 0) {
    new import_obsidian7.Notice(`Fail to find current image-link in ${mode}, please zoom manually!`);
  } else {
    new import_obsidian7.Notice(`Find multiple same image-link in ${mode}, please zoom manually!`);
  }
  return;
}
function matchLineWithInternalLink(line_text, target_name, new_width, intable) {
  let regWikiLink = /\!\[\[[^\[\]]*?\]\]/g;
  let regMdLink = /\!\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  const target_name_mdlink = target_name.replace(/ /g, "%20");
  if (!line_text.includes(target_name) && !line_text.includes(target_name_mdlink))
    return [];
  let result = [];
  while (true) {
    let wiki_match = regWikiLink.exec(line_text);
    if (!wiki_match)
      break;
    const matched_link = wiki_match[0];
    if (matched_link.includes(target_name)) {
      let normal_link = intable ? matched_link.replace(/\\\|/g, "|") : matched_link;
      let link_match = normal_link.match(/!\[\[(.*?)(\||\]\])/);
      let link_text = link_match ? link_match[1] : "";
      let alt_match = matched_link.match(/!\[\[.*?(\|(.*?))\]\]/);
      let alt_text = alt_match ? alt_match[1] : "";
      let alt_text_list = alt_text.split("|");
      let alt_text_wo_size = "";
      let new_alt_text = "";
      for (let alt of alt_text_list) {
        if (!/^\d+$/.test(alt) && !/^\s*$/.test(alt)) {
          alt_text_wo_size = alt_text_wo_size + "|" + alt;
        }
      }
      new_alt_text = new_width != 0 ? `${alt_text_wo_size}|${new_width}` : alt_text_wo_size;
      new_alt_text = intable ? new_alt_text.replace(/\|/g, "\\|") : new_alt_text;
      let newWikiLink = link_match ? `![[${link_text}${new_alt_text}]]` : `![[${target_name}${new_alt_text}]]`;
      result.push({
        old_link: matched_link,
        new_link: newWikiLink,
        from_ch: wiki_match.index,
        to_ch: wiki_match.index + matched_link.length
      });
    }
  }
  while (true) {
    let match = regMdLink.exec(line_text);
    if (!match)
      break;
    const matched_link = match[0];
    if (matched_link.includes(target_name_mdlink)) {
      let alt_text_match = matched_link.match(/\[.*?\]/g);
      let alt_text = alt_text_match[0].substring(1, alt_text_match[0].length - 1);
      let pure_alt = alt_text.replace(/\|\d+(\|\d+)?$/g, "");
      if (intable) {
        pure_alt = alt_text.replace(/\\\|\d+(\|\d+)?$/g, "");
      }
      let link_text = matched_link.substring(alt_text_match[0].length + 2, matched_link.length - 1);
      let newMDLink = intable ? `![${pure_alt}\\|${new_width}](${link_text})` : `![${pure_alt}|${new_width}](${link_text})`;
      if (/^\d*$/.test(alt_text)) {
        newMDLink = `![${new_width}](${link_text})`;
      }
      result.push({
        old_link: matched_link,
        new_link: newMDLink,
        from_ch: match.index,
        to_ch: match.index + matched_link.length
      });
    }
  }
  print("Line Text: ", line_text);
  print("MatchedInfo:", result);
  return result;
}
function matchLineWithExternalLink(line_text, link, alt_text, new_width, intable) {
  let result = [];
  let regMdLink = /\!\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  if (!line_text.includes(link) || !line_text.includes(alt_text))
    return [];
  let newExternalLink = intable ? `![${alt_text}\\|${new_width}](${link})` : `![${alt_text}|${new_width}](${link})`;
  if (/^\d*$/.test(alt_text) || /^\s*$/.test(alt_text)) {
    newExternalLink = `![${new_width}](${link})`;
  }
  while (true) {
    let match = regMdLink.exec(line_text);
    if (!match)
      break;
    let matched_link = match[0];
    if (matched_link.includes(link) && matched_link.includes(alt_text)) {
      result.push({
        old_link: matched_link,
        new_link: newExternalLink,
        from_ch: match.index,
        to_ch: match.index + matched_link.length
      });
    }
  }
  print("Line Text: ", line_text);
  print("MatchedInfo:", result);
  return result;
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL29wdGlvbnMvZGVsZWxlQWxsQXR0YWNoc0luVGhlTm90ZS50cyIsICJzcmMvdXRpbC50cyIsICJzcmMvdXRpbHMvZGVsZXRlRmlsZS50cyIsICJzcmMvY29uZmlnL2FkZENvbW1hbmQtY29uZmlnLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvdXRpbHMvaGFuZGxlckV2ZW50LnRzIiwgInNyYy9tb2RhbHMvZGVsZXRpb25Qcm9tcHQudHMiLCAic3JjL2hlbHBlcnMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IE1lbnUsIE1lbnVJdGVtLCBOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIE1hcmtkb3duVmlldywgUGxhdGZvcm0gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGFkZENvbW1hbmQgfSBmcm9tIFwiLi9jb25maWcvYWRkQ29tbWFuZC1jb25maWdcIjtcbmltcG9ydCB7IEF0dGFjaEZsb3dTZXR0aW5nc1RhYiB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBBdHRhY2hGbG93U2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuaW1wb3J0ICogYXMgVXRpbCBmcm9tIFwiLi91dGlsXCI7XG5pbXBvcnQgeyBwcmludCwgc2V0RGVidWcgfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgeyBnZXRNb3VzZUV2ZW50VGFyZ2V0IH0gZnJvbSBcIi4vdXRpbHMvaGFuZGxlckV2ZW50XCI7XG5pbXBvcnQgeyBEZWxldGVBbGxMb2dzTW9kYWwgfSBmcm9tIFwiLi9tb2RhbHMvZGVsZXRpb25Qcm9tcHRcIjtcbmltcG9ydCB7IEVkaXRvclZpZXcsIGtleW1hcCwgVmlld1VwZGF0ZSB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHtcblx0RWxlY3Ryb25XaW5kb3csIEZpbGVTeXN0ZW1BZGFwdGVyV2l0aEludGVybmFsQXBpLFxuXHRsb2FkSW1hZ2VCbG9iLCBBcHBXaXRoRGVza3RvcEludGVybmFsQXBpLCBFZGl0b3JJbnRlcm5hbEFwaSwgb25FbGVtZW50XG59IGZyb20gXCIuL2hlbHBlcnNcIlxuaW1wb3J0IHsgcGxhdGZvcm0gfSBmcm9tIFwib3NcIjtcbmltcG9ydCB7IG9mZiB9IGZyb20gXCJwcm9jZXNzXCI7XG5cbmludGVyZmFjZSBNYXRjaGVkTGlua0luTGluZSB7XG5cdG9sZF9saW5rOiBzdHJpbmcsXG5cdG5ld19saW5rOiBzdHJpbmcsXG5cdGZyb21fY2g6IG51bWJlcixcblx0dG9fY2g6IG51bWJlclxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdHRhY2hGbG93UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IEF0dGFjaEZsb3dTZXR0aW5ncztcblx0QWxsb3dab29tOiBib29sZWFuO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRjb25zb2xlLmxvZyhcIkF0dGFjaEZsb3cgcGx1Z2luIGxvYWRlZC4uLlwiKTtcblxuXHRcdHRoaXMuQWxsb3dab29tID0gdHJ1ZTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQXR0YWNoRmxvd1NldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXHRcdHRoaXMucmVnaXN0ZXJEb2N1bWVudChkb2N1bWVudCk7XG5cdFx0YXBwLndvcmtzcGFjZS5vbihcIndpbmRvdy1vcGVuXCIsICh3b3Jrc3BhY2VXaW5kb3csIHdpbmRvdykgPT4ge1xuXHRcdFx0dGhpcy5yZWdpc3RlckRvY3VtZW50KHdpbmRvdy5kb2N1bWVudCk7XG5cdFx0fSk7XG5cdFx0Ly8gYWRkIGNvbnRleHRtZW51IG9uIGZpbGUgY29udGV4dFxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImZpbGUtbWVudVwiLCAobWVudSwgZmlsZSkgPT4ge1xuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdFx0aWYgKCFmaWxlLnBhdGguZW5kc1dpdGgoXCIubWRcIikpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBhZGRNZW51SXRlbSA9IChpdGVtOiBNZW51SXRlbSkgPT4ge1xuXHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZShcIkRlbGV0ZSBmaWxlIGFuZCBpdHMgYXR0YWNobWVudHNcIilcblx0XHRcdFx0XHRcdFx0LnNldEljb24oXCJ0cmFzaC0yXCIpXG5cdFx0XHRcdFx0XHRcdC5zZXRTZWN0aW9uKFwiZGFuZ2VyXCIpO1xuXHRcdFx0XHRcdFx0aXRlbS5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgRGVsZXRlQWxsTG9nc01vZGFsKGZpbGUsIHRoaXMpO1xuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdG1lbnUuYWRkSXRlbShhZGRNZW51SXRlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0KTtcblx0XHQvLyByZWdpc3RlciBhbGwgY29tbWFuZHMgaW4gYWRkQ29tbWFuZCBmdW5jdGlvblxuXHRcdGFkZENvbW1hbmQodGhpcyk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRpZiAoIXRoaXMuQWxsb3dab29tKSB7XG5cdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAodGFyZ2V0LnRhZ05hbWUgPT09ICdJTUcnKSB7XG5cdFx0XHRcdC8vIFx1OEJBMVx1N0I5N1x1NTZGRVx1NTBDRlx1NzY4NFx1NURFNlx1OEZCOVx1NzU0Q1x1NzY4NFx1NEY0RFx1N0Y2RVx1NTNDQVx1NEUyRFx1NUZDM1x1NzY4NFx1NEY0RFx1N0Y2RVxuXHRcdFx0XHRjb25zdCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0XHRjb25zdCBpbWFnZUNlbnRlciA9IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyO1xuXHRcdFx0XHRpZiAoZXZ0LmNsaWVudFggPiBpbWFnZUNlbnRlciAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FmLXpvb21lZC1pbWFnZScpKSB7XG5cdFx0XHRcdFx0Ly8gZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0Y29uc3QgbWFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdG1hc2suaWQgPSAnYWYtbWFzayc7XG5cdFx0XHRcdFx0bWFzay5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG5cdFx0XHRcdFx0bWFzay5zdHlsZS50b3AgPSAnMCc7XG5cdFx0XHRcdFx0bWFzay5zdHlsZS5sZWZ0ID0gJzAnO1xuXHRcdFx0XHRcdG1hc2suc3R5bGUud2lkdGggPSAnMTAwJSc7XG5cdFx0XHRcdFx0bWFzay5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG5cdFx0XHRcdFx0bWFzay5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMCwgMCwgMCwgMC41KSc7ICAvLyBcdTUzNEFcdTkwMEZcdTY2MEVcdTlFRDFcdTgyNzJcdTgwQ0NcdTY2NkZcblx0XHRcdFx0XHRtYXNrLnN0eWxlLnpJbmRleCA9ICc5OTk4JzsgIC8vIFx1NEY3Rlx1OTA2RVx1N0Y2OVx1NEY0RFx1NEU4RVx1NTE3Nlx1NEVENlx1NTE4NVx1NUJCOVx1NEU0Qlx1NEUwQlx1RkYwQ1x1NEY0Nlx1NTcyOFx1NTkyN1x1NTZGRVx1NEU0Qlx1NEUwQVxuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWFzayk7XG5cblx0XHRcdFx0XHRjb25zdCB6b29tZWRJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRcdFx0XHRcdHpvb21lZEltYWdlLmlkID0gJ2FmLXpvb21lZC1pbWFnZSc7XG5cdFx0XHRcdFx0em9vbWVkSW1hZ2Uuc3JjID0gKGV2dC50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudCkuc3JjO1xuXHRcdFx0XHRcdGNvbnN0IHJlYWxJbWFnZSA9IG5ldyBJbWFnZSgpO1xuXHRcdFx0XHRcdHJlYWxJbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHR6b29tZWRJbWFnZS5zdHlsZS53aWR0aCA9IGAke3JlYWxJbWFnZS5uYXR1cmFsV2lkdGh9cHhgO1xuXHRcdFx0XHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gYCR7cmVhbEltYWdlLm5hdHVyYWxIZWlnaHR9cHhgO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZWFsSW1hZ2Uuc3JjID0gKGV2dC50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudCkuc3JjO1xuXHRcdFx0XHRcdHpvb21lZEltYWdlLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcblx0XHRcdFx0XHR6b29tZWRJbWFnZS5zdHlsZS56SW5kZXggPSAnOTk5OSc7XG5cdFx0XHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUudG9wID0gJzUwJSc7XG5cdFx0XHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUubGVmdCA9ICc1MCUnO1xuXHRcdFx0XHRcdHpvb21lZEltYWdlLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknO1xuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoem9vbWVkSW1hZ2UpO1xuXHRcdFx0XHRcdGNvbnN0IG9yaWdpbmFsV2lkdGggPSB6b29tZWRJbWFnZS5vZmZzZXRXaWR0aDtcblx0XHRcdFx0XHRjb25zdCBvcmlnaW5hbEhlaWdodCA9IHpvb21lZEltYWdlLm9mZnNldEhlaWdodDtcblxuXHRcdFx0XHRcdGNvbnN0IHNjYWxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdFx0c2NhbGVEaXYuaWQgPSAnYWYtc2NhbGUtZGl2Jztcblx0XHRcdFx0XHRzY2FsZURpdi5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG5cdFx0XHRcdFx0c2NhbGVEaXYuc3R5bGUuekluZGV4ID0gJzEwMDAwJzsgIC8vIFx1Nzg2RVx1NEZERFx1NUI4M1x1NTcyOCB6b29tZWRJbWFnZSBcdTc2ODRcdTRFMEFcdTY1Qjlcblx0XHRcdFx0XHRzY2FsZURpdi5zdHlsZS5ib3R0b20gPSAnMCc7XG5cdFx0XHRcdFx0c2NhbGVEaXYuc3R5bGUubGVmdCA9ICc1MCUnO1xuXHRcdFx0XHRcdHNjYWxlRGl2LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC01MCUpJztcblx0XHRcdFx0XHRzY2FsZURpdi5zdHlsZS5jb2xvciA9ICcjZmZmJztcblx0XHRcdFx0XHRzY2FsZURpdi5zdHlsZS5mb250U2l6ZSA9ICcyMHB4Jztcblx0XHRcdFx0XHRzY2FsZURpdi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMCwgMCwgMCwgMC41KSc7ICAvLyBcdTUzNEFcdTkwMEZcdTY2MEVcdTgwQ0NcdTY2NkZcdTRGN0ZcdTUxNzZcdTU3MjhcdTU0MDRcdTc5Q0RcdTU2RkVcdTUwQ0ZcdTRFMEFcdTkwRkRcdTZFMDVcdTY2NzBcdTUzRUZcdTg5QzFcblx0XHRcdFx0XHRzY2FsZURpdi5zdHlsZS5wYWRkaW5nID0gJzVweCc7XG5cdFx0XHRcdFx0c2NhbGVEaXYuaW5uZXJUZXh0ID0gJzEwMCUnOyAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU0RTNBIDEwMCVcblx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjYWxlRGl2KTtcblxuXHRcdFx0XHRcdHpvb21lZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdC8vIFx1OEJBMVx1N0I5N1x1N0YyOVx1NjUzRVx1NkJENFx1NEY4Qlx1RkYwQ1x1OEZEOVx1OTFDQ1x1NjIxMVx1NEVFQ1x1OEJCRVx1NUI5QVx1NEUzQVx1NkJDRlx1NkIyMVx1NkVEQVx1NTJBOFx1NjVGNlx1NjUzRVx1NTkyN1x1NjIxNlx1N0YyOVx1NUMwRjUlXG5cdFx0XHRcdFx0XHRjb25zdCBzY2FsZSA9IGUuZGVsdGFZID4gMCA/IDAuOTUgOiAxLjA1O1xuXHRcdFx0XHRcdFx0Ly8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU3Njg0XHU1QkJEXHU1RUE2XHU1NDhDXHU5QUQ4XHU1RUE2XG5cdFx0XHRcdFx0XHRjb25zdCB3aWR0aCA9IHpvb21lZEltYWdlLm9mZnNldFdpZHRoO1xuXHRcdFx0XHRcdFx0Y29uc3QgaGVpZ2h0ID0gem9vbWVkSW1hZ2Uub2Zmc2V0SGVpZ2h0O1xuXHRcdFx0XHRcdFx0Ly8gXHU4QkExXHU3Qjk3XHU2NUIwXHU3Njg0XHU1QkJEXHU1RUE2XHU1NDhDXHU5QUQ4XHU1RUE2XG5cdFx0XHRcdFx0XHRjb25zdCBuZXdXaWR0aCA9IHdpZHRoICogc2NhbGU7XG5cdFx0XHRcdFx0XHRjb25zdCBuZXdIZWlnaHQgPSBoZWlnaHQgKiBzY2FsZTtcblx0XHRcdFx0XHRcdC8vIFx1OEJCRVx1N0Y2RVx1NjVCMFx1NzY4NFx1NUJCRFx1NUVBNlx1NTQ4Q1x1OUFEOFx1NUVBNlxuXHRcdFx0XHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUud2lkdGggPSBgJHtuZXdXaWR0aH1weGA7XG5cdFx0XHRcdFx0XHR6b29tZWRJbWFnZS5zdHlsZS5oZWlnaHQgPSBgJHtuZXdIZWlnaHR9cHhgO1xuXG5cdFx0XHRcdFx0XHQvLyBcdTY2RjRcdTY1QjBcdTdGMjlcdTY1M0VcdTc2N0VcdTUyMDZcdTZCRDRcdTc2ODRcdTY2M0VcdTc5M0Fcblx0XHRcdFx0XHRcdGNvbnN0IHNjYWxlUGVyY2VudCA9IChuZXdXaWR0aCAvIG9yaWdpbmFsV2lkdGgpICogMTAwO1xuXHRcdFx0XHRcdFx0c2NhbGVEaXYuaW5uZXJUZXh0ID0gYCR7c2NhbGVQZXJjZW50LnRvRml4ZWQoMSl9JWA7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHR6b29tZWRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7ICAvLyBcdTk2M0JcdTZCNjJcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcdTY2M0VcdTc5M0FcblxuXHRcdFx0XHRcdFx0Ly8gXHU2MDYyXHU1OTBEXHU1MzlGXHU2NzY1XHU3Njg0XHU1QzNBXHU1QkY4XG5cdFx0XHRcdFx0XHR6b29tZWRJbWFnZS5zdHlsZS53aWR0aCA9IGAke29yaWdpbmFsV2lkdGh9cHhgO1xuXHRcdFx0XHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gYCR7b3JpZ2luYWxIZWlnaHR9cHhgO1xuXHRcdFx0XHRcdFx0c2NhbGVEaXYuaW5uZXJUZXh0ID0gYDEwMCVgO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnJlbW92ZVpvb21lZEltYWdlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXlkb3duJywgKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG5cdFx0XHRcdHRoaXMucmVtb3ZlWm9vbWVkSW1hZ2UoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHNldERlYnVnKHRoaXMuc2V0dGluZ3MuZGVidWcpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJBdHRhY2hGbG93IHBsdWdpbiB1bmxvYWRlZC4uLlwiKTtcblx0fVxuXG5cdHJlbW92ZVpvb21lZEltYWdlKCkge1xuXHRcdGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWYtem9vbWVkLWltYWdlJykpIHtcblx0XHRcdGNvbnN0IHpvb21lZEltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FmLXpvb21lZC1pbWFnZScpO1xuXHRcdFx0aWYgKHpvb21lZEltYWdlKSBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHpvb21lZEltYWdlKTtcblx0XHRcdGNvbnN0IHNjYWxlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FmLXNjYWxlLWRpdicpO1xuXHRcdFx0aWYgKHNjYWxlRGl2KSBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjYWxlRGl2KTtcblx0XHRcdGNvbnN0IG1hc2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWYtbWFzaycpO1xuXHRcdFx0aWYgKG1hc2spIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobWFzayk7XG5cdFx0fVxuXHR9XG5cblx0cmVnaXN0ZXJEb2N1bWVudChkb2N1bWVudDogRG9jdW1lbnQpIHtcblx0XHR0aGlzLnJlZ2lzdGVyKFxuXHRcdFx0b25FbGVtZW50KFxuXHRcdFx0XHRkb2N1bWVudCxcblx0XHRcdFx0XCJjb250ZXh0bWVudVwiIGFzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXAsXG5cdFx0XHRcdFwiaW1nLCBpZnJhbWUsIHZpZGVvLCBkaXYuZmlsZS1lbWJlZC10aXRsZSwgYXVkaW9cIixcblx0XHRcdFx0dGhpcy5vbkNsaWNrLmJpbmQodGhpcylcblx0XHRcdClcblx0XHQpO1xuXG5cdFx0Ly8gXHU0RUU1XHU0RTBCXHU0RTA5XHU0RTJBXHU0RThCXHU0RUY2XHU2NjJGXHU0RTNBXHU0RTg2XHU1QjlFXHU3M0IwXHU2MkQ2XHU2MkZEXHU2NTM5XHU1M0Q4XHU1NkZFXHU3MjQ3XHU1OTI3XHU1QzBGXHU3Njg0XHU1MjlGXHU4MEZEXHVGRjBDXHU0RkVFXHU2NTM5XHU4MUVBIGh0dHBzOi8vZ2l0aHViLmNvbS94Unl1bC9vYnNpZGlhbi1pbWFnZS1jb252ZXJ0ZXJcblx0XHQvLyBcdTk2NDRcdTRFMEFcdTUxNzYgTUlUIExpY2Vuc2Vcblx0XHQvLyBNSVQgTGljZW5zZVxuXHRcdC8vIENvcHlyaWdodCAoYykgMjAyMyB4Unl1bFxuXHRcdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcblx0XHQvLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG5cdFx0Ly8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuXHRcdC8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcblx0XHQvLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcblx0XHQvLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5cdFx0Ly8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG5cdFx0Ly8gY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuXHRcdC8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcblx0XHQvLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcblx0XHQvLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcblx0XHQvLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5cdFx0Ly8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcblx0XHQvLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuXHRcdC8vIFNPRlRXQVJFLlxuXG5cdFx0dGhpcy5yZWdpc3Rlcihcblx0XHRcdG9uRWxlbWVudChcblx0XHRcdFx0ZG9jdW1lbnQsXG5cdFx0XHRcdFwibW91c2Vkb3duXCIsXG5cdFx0XHRcdFwiaW1nLCB2aWRlb1wiLFxuXHRcdFx0XHQoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZHJhZ1Jlc2l6ZSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRNZCA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpIGFzIFRGaWxlO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50TWQubmFtZS5lbmRzV2l0aCgnLmNhbnZhcycpKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3QgaW5QcmV2aWV3OiBib29sZWFuID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZ2V0TW9kZSgpID09IFwicHJldmlld1wiO1xuXHRcdFx0XHRcdGlmIChpblByZXZpZXcpIHJldHVybjtcblxuXHRcdFx0XHRcdGlmIChldmVudC5idXR0b24gPT09IDApIHtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IGltZyA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTFZpZGVvRWxlbWVudDtcblx0XHRcdFx0XHRpZiAoaW1nLmlkID09ICdhZi16b29tZWQtaW1hZ2UnKSByZXR1cm47XG5cblx0XHRcdFx0XHRjb25zdCBlZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3I7XG5cdFx0XHRcdFx0Ly8gIEB0cy1leHBlY3QtZXJyb3IsIG5vdCB0eXBlZFxuXHRcdFx0XHRcdGNvbnN0IGVkaXRvclZpZXcgPSBlZGl0b3IuY20gYXMgRWRpdG9yVmlldztcblx0XHRcdFx0XHRjb25zdCB0YXJnZXRfcG9zID0gZWRpdG9yVmlldy5wb3NBdERPTShpbWcpO1xuXHRcdFx0XHRcdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0YXJnZXRfcG9zKTtcblxuXHRcdFx0XHRcdGNvbnN0IGluVGFibGU6IGJvb2xlYW4gPSBpbWcuY2xvc2VzdCgndGFibGUnKSAhPSBudWxsO1xuXHRcdFx0XHRcdGNvbnN0IGluQ2FsbG91dDogYm9vbGVhbiA9IGltZy5jbG9zZXN0KCcuY2FsbG91dCcpICE9IG51bGw7XG5cdFx0XHRcdFx0Y29uc3QgaXNFeGNhbGlkcmF3ID0gaW1nLmNsYXNzTGlzdC5jb250YWlucygnZXhjYWxpZHJhdy1lbWJlZGRlZC1pbWcnKTtcblx0XHRcdFx0XHRwcmludCgnSW5UYWJsZScsIGluVGFibGUpXG5cdFx0XHRcdFx0cHJpbnQoJ1RhcmdldCBFbGVtZW50JywgaW1nKVxuXG5cdFx0XHRcdFx0Ly8gcHJpbnQoXCJpbWcucGFyZW50XCIsIGltZy5wYXJlbnRFbGVtZW50P2ltZy5wYXJlbnRFbGVtZW50OidOVUxMJylcblxuXHRcdFx0XHRcdGNvbnN0IHJlY3QgPSBpbWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRcdFx0Y29uc3QgeCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XG5cdFx0XHRcdFx0Y29uc3QgeSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcDtcblx0XHRcdFx0XHRjb25zdCBlZGdlU2l6ZSA9IDMwOyAvLyBzaXplIG9mIHRoZSBlZGdlIGluIHBpeGVsc1xuXHRcdFx0XHRcdGlmICh4IDwgZWRnZVNpemUgfHwgeSA8IGVkZ2VTaXplIHx8IHggPiByZWN0LndpZHRoIC0gZWRnZVNpemUgfHwgeSA+IHJlY3QuaGVpZ2h0IC0gZWRnZVNpemUpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHN0YXJ0WCA9IGV2ZW50LmNsaWVudFg7XG5cdFx0XHRcdFx0XHRjb25zdCBzdGFydFkgPSBldmVudC5jbGllbnRZO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RhcnRXaWR0aCA9IGltZy5jbGllbnRXaWR0aDtcblx0XHRcdFx0XHRcdGNvbnN0IHN0YXJ0SGVpZ2h0ID0gaW1nLmNsaWVudEhlaWdodDtcblx0XHRcdFx0XHRcdGxldCBsYXN0VXBkYXRlWCA9IHN0YXJ0WDtcblx0XHRcdFx0XHRcdGxldCBsYXN0VXBkYXRlWSA9IHN0YXJ0WTtcblx0XHRcdFx0XHRcdGNvbnN0IHVwZGF0ZVRocmVzaG9sZCA9IDU7IC8vIFRoZSBtb3VzZSBtdXN0IG1vdmUgYXQgbGVhc3QgNSBwaXhlbHMgYmVmb3JlIGFuIHVwZGF0ZVxuXG5cdFx0XHRcdFx0XHRjb25zdCBvbk1vdXNlTW92ZSA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLkFsbG93Wm9vbSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBjdXJyZW50WCA9IGV2ZW50LmNsaWVudFg7XG5cdFx0XHRcdFx0XHRcdGxldCBuZXdXaWR0aCA9IHN0YXJ0V2lkdGggKyAoY3VycmVudFggLSBzdGFydFgpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBhc3BlY3RSYXRpbyA9IHN0YXJ0V2lkdGggLyBzdGFydEhlaWdodDtcblxuXHRcdFx0XHRcdFx0XHQvLyBFbnN1cmUgdGhlIGltYWdlIGRvZXNuJ3QgZ2V0IHRvbyBzbWFsbFxuXHRcdFx0XHRcdFx0XHRuZXdXaWR0aCA9IE1hdGgubWF4KG5ld1dpZHRoLCA1MCk7XG5cblx0XHRcdFx0XHRcdFx0bGV0IG5ld0hlaWdodCA9IG5ld1dpZHRoIC8gYXNwZWN0UmF0aW87XG5cdFx0XHRcdFx0XHRcdC8vIFJvdW5kIHRoZSB2YWx1ZXMgdG8gdGhlIG5lYXJlc3Qgd2hvbGUgbnVtYmVyXG5cdFx0XHRcdFx0XHRcdG5ld1dpZHRoID0gTWF0aC5yb3VuZChuZXdXaWR0aCk7XG5cdFx0XHRcdFx0XHRcdG5ld0hlaWdodCA9IE1hdGgucm91bmQobmV3SGVpZ2h0KTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBcHBseSB0aGUgbmV3IGRpbWVuc2lvbnMgdG8gdGhlIGltYWdlIG9yIHZpZGVvXG5cdFx0XHRcdFx0XHRcdGlmIChpbWcgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJvcmRlciA9ICdzb2xpZCc7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJvcmRlcldpZHRoID0gJzJweCc7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJvcmRlckNvbG9yID0gJ2JsdWUnO1xuXHRcdFx0XHRcdFx0XHRcdGltZy5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLndpZHRoID0gYCR7bmV3V2lkdGh9cHhgO1xuXHRcdFx0XHRcdFx0XHRcdC8vIGltZy5zdHlsZS5oZWlnaHQgPSBgJHtuZXdIZWlnaHR9cHhgO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGltZyBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUuYm9yZGVyID0gJ3NvbGlkJztcblx0XHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUuYm9yZGVyV2lkdGggPSAnMnB4Jztcblx0XHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUuYm9yZGVyQ29sb3IgPSAnYmx1ZSc7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94Jztcblx0XHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBpbWcucGFyZW50RWxlbWVudCBpcyBub3QgbnVsbCBiZWZvcmUgdHJ5aW5nIHRvIGFjY2VzcyBpdHMgY2xpZW50V2lkdGggcHJvcGVydHlcblx0XHRcdFx0XHRcdFx0XHRpZiAoaW1nLnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRhaW5lcldpZHRoID0gaW1nLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXdXaWR0aFBlcmNlbnRhZ2UgPSAobmV3V2lkdGggLyBjb250YWluZXJXaWR0aCkgKiAxMDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUud2lkdGggPSBgJHtuZXdXaWR0aFBlcmNlbnRhZ2V9JWA7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIG1vdXNlIGhhcyBtb3ZlZCBtb3JlIHRoYW4gdGhlIHVwZGF0ZSB0aHJlc2hvbGRcblx0XHRcdFx0XHRcdFx0aWYgKE1hdGguYWJzKGV2ZW50LmNsaWVudFggLSBsYXN0VXBkYXRlWCkgPiB1cGRhdGVUaHJlc2hvbGQpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoYWN0aXZlVmlldykge1xuXHRcdFx0XHRcdFx0XHRcdFx0cHJpbnQoXCJ1cGRhdGUgbmV3IFdpZHRoXCIsIG5ld1dpZHRoKTtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCBpbWFnZU5hbWUgPSBpbWcuZ2V0QXR0cmlidXRlKCdzcmMnKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpbWFnZU5hbWU/LnN0YXJ0c1dpdGgoJ2h0dHAnKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVFeHRlcm5hbExpbmsoYWN0aXZlVmlldywgaW1nLCB0YXJnZXRfcG9zLCBuZXdXaWR0aCwgbmV3SGVpZ2h0LCBpblRhYmxlLCBpbkNhbGxvdXQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoaXNFeGNhbGlkcmF3KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCB0YXJnZXRfbmFtZSA9IGltZy5nZXRBdHRyaWJ1dGUoJ2ZpbGVzb3VyY2UnKSBhcyBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCBkcmF3X2Jhc2VfbmFtZSA9IHRhcmdldF9uYW1lXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChkcmF3X2Jhc2VfbmFtZS5pbmNsdWRlcygnLycpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IHRlbXBfYXJyID0gZHJhd19iYXNlX25hbWUuc3BsaXQoJy8nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkcmF3X2Jhc2VfbmFtZSA9IHRlbXBfYXJyW3RlbXBfYXJyLmxlbmd0aCAtIDFdXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZHJhd19iYXNlX25hbWUuaW5jbHVkZXMoJ1xcXFwnKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxldCB0ZW1wX2FyciA9IGRyYXdfYmFzZV9uYW1lLnNwbGl0KCdcXFxcJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZHJhd19iYXNlX25hbWUgPSB0ZW1wX2Fyclt0ZW1wX2Fyci5sZW5ndGggLSAxXVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRyYXdfYmFzZV9uYW1lID0gZHJhd19iYXNlX25hbWUuZW5kc1dpdGgoJy5tZCcpID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkcmF3X2Jhc2VfbmFtZS5zdWJzdHJpbmcoMCwgZHJhd19iYXNlX25hbWUubGVuZ3RoIC0gMykgOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRyYXdfYmFzZV9uYW1lO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwcmludCh0YXJnZXRfbmFtZSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0cHJpbnQoJ2V4Y2FsaWRyYXcgZmlsZTonLCBkcmF3X2Jhc2VfbmFtZSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLm1heFdpZHRoID0gJ25vbmUnO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVJbnRlcm5hbExpbmsoYWN0aXZlVmlldywgaW1nLCB0YXJnZXRfcG9zLCBkcmF3X2Jhc2VfbmFtZSwgbmV3V2lkdGgsIG5ld0hlaWdodCwgaW5UYWJsZSwgaW5DYWxsb3V0KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpbWFnZU5hbWUgPSBpbWcucGFyZW50RWxlbWVudD8uZ2V0QXR0cmlidXRlKCdzcmMnKSBhcyBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHVwZGF0ZUludGVybmFsTGluayhhY3RpdmVWaWV3LCBpbWcsIHRhcmdldF9wb3MsIGltYWdlTmFtZSwgbmV3V2lkdGgsIG5ld0hlaWdodCwgaW5UYWJsZSwgaW5DYWxsb3V0KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIGxhc3QgdXBkYXRlIGNvb3JkaW5hdGVzXG5cdFx0XHRcdFx0XHRcdFx0bGFzdFVwZGF0ZVggPSBldmVudC5jbGllbnRYO1xuXHRcdFx0XHRcdFx0XHRcdGxhc3RVcGRhdGVZID0gZXZlbnQuY2xpZW50WTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb25zdCBhbGxvd1pvb21GdW5jID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLkFsbG93Wm9vbSA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvbnN0IG9uTW91c2VVcCA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGFsbG93Wm9vbUZ1bmMsIDEwMCk7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KClcblx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJvcmRlclN0eWxlID0gJ25vbmUnXG5cdFx0XHRcdFx0XHRcdGltZy5zdHlsZS5vdXRsaW5lID0gJ25vbmUnO1xuXHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuXHRcdFx0XHRcdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uTW91c2VNb3ZlKTtcblx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25Nb3VzZVVwKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uTW91c2VNb3ZlKTtcblx0XHRcdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG9uTW91c2VVcCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHQpXG5cdFx0KVxuXHRcdHRoaXMucmVnaXN0ZXIoXG5cdFx0XHRvbkVsZW1lbnQoXG5cdFx0XHRcdGRvY3VtZW50LFxuXHRcdFx0XHRcIm1vdXNlb3ZlclwiLFxuXHRcdFx0XHRcImltZywgdmlkZW9cIixcblx0XHRcdFx0KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmRyYWdSZXNpemUpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50TWQgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSBhcyBURmlsZTtcblx0XHRcdFx0XHRpZiAoY3VycmVudE1kLm5hbWUuZW5kc1dpdGgoJy5jYW52YXMnKSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGluUHJldmlldzogYm9vbGVhbiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmdldE1vZGUoKSA9PSBcInByZXZpZXdcIjtcblx0XHRcdFx0XHRpZiAoaW5QcmV2aWV3KSByZXR1cm47XG5cblx0XHRcdFx0XHRjb25zdCBpbWcgPSBldmVudC50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudCB8IEhUTUxWaWRlb0VsZW1lbnQ7XG5cdFx0XHRcdFx0Y29uc3QgcmVjdCA9IGltZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgLy8gQ2FjaGUgdGhpc1xuXHRcdFx0XHRcdGNvbnN0IGVkZ2VTaXplID0gMzA7IC8vIHNpemUgb2YgdGhlIGVkZ2UgaW4gcGl4ZWxzXG5cblx0XHRcdFx0XHRpZiAoaW1nLmlkID09ICdhZi16b29tZWQtaW1hZ2UnKSByZXR1cm47XG5cblx0XHRcdFx0XHRjb25zdCBpc0V4Y2FsaWRyYXcgPSBpbWcuY2xhc3NMaXN0LmNvbnRhaW5zKCdleGNhbGlkcmF3LWVtYmVkZGVkLWltZycpO1xuXHRcdFx0XHRcdC8vIGlmIChpc0V4Y2FsaWRyYXcpIHJldHVybjtcblxuXHRcdFx0XHRcdC8vIFRocm90dGxlIG1vdXNlbW92ZSBldmVudHNcblx0XHRcdFx0XHRsZXQgbGFzdE1vdmUgPSAwO1xuXHRcdFx0XHRcdGNvbnN0IG1vdXNlT3ZlckhhbmRsZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5kcmFnUmVzaXplKSByZXR1cm47XG5cdFx0XHRcdFx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdFx0XHRcdFx0aWYgKG5vdyAtIGxhc3RNb3ZlIDwgMTAwKSByZXR1cm47IC8vIE9ubHkgZXhlY3V0ZSBvbmNlIGV2ZXJ5IDEwMG1zXG5cdFx0XHRcdFx0XHRsYXN0TW92ZSA9IG5vdztcblxuXHRcdFx0XHRcdFx0Y29uc3QgeCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XG5cdFx0XHRcdFx0XHRjb25zdCB5ID0gZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wO1xuXG5cdFx0XHRcdFx0XHRpZiAoKHggPj0gcmVjdC53aWR0aCAtIGVkZ2VTaXplIHx8IHggPD0gZWRnZVNpemUpIHx8ICh5ID49IHJlY3QuaGVpZ2h0IC0gZWRnZVNpemUgfHwgeSA8PSBlZGdlU2l6ZSkpIHtcblx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmN1cnNvciA9ICdud3NlLXJlc2l6ZSc7XG5cdFx0XHRcdFx0XHRcdGltZy5zdHlsZS5vdXRsaW5lID0gJ3NvbGlkJztcblx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLm91dGxpbmVXaWR0aCA9ICc2cHgnO1xuXHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUub3V0bGluZUNvbG9yID0gJyNkZmIwZjI4Myc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIGlmICh4ID4gcmVjdC53aWR0aCAvIDIpIHtcblx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmN1cnNvciA9ICd6b29tLWluJztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuXHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUub3V0bGluZSA9ICdub25lJztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChpbWcsICdtb3VzZW1vdmUnLCBtb3VzZU92ZXJIYW5kbGVyKTtcblx0XHRcdFx0fVxuXHRcdFx0KVxuXHRcdCk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyKFxuXHRcdFx0b25FbGVtZW50KFxuXHRcdFx0XHRkb2N1bWVudCxcblx0XHRcdFx0XCJtb3VzZW91dFwiLFxuXHRcdFx0XHRcImltZywgdmlkZW9cIixcblx0XHRcdFx0KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmRyYWdSZXNpemUpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50TWQgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSBhcyBURmlsZTtcblx0XHRcdFx0XHRpZiAoY3VycmVudE1kLm5hbWUuZW5kc1dpdGgoJy5jYW52YXMnKSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGluUHJldmlldzogYm9vbGVhbiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmdldE1vZGUoKSA9PSBcInByZXZpZXdcIjtcblx0XHRcdFx0XHRpZiAoaW5QcmV2aWV3KSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3QgaW1nID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbWFnZUVsZW1lbnQgfCBIVE1MVmlkZW9FbGVtZW50O1xuXHRcdFx0XHRcdGltZy5zdHlsZS5ib3JkZXJTdHlsZSA9ICdub25lJztcblx0XHRcdFx0XHRpbWcuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuXHRcdFx0XHRcdGltZy5zdHlsZS5vdXRsaW5lID0gJ25vbmUnO1xuXHRcdFx0XHR9XG5cdFx0XHQpXG5cdFx0KTtcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxuXHRcdCk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXHRyZWdpc3RlckVzY2FwZUJ1dHRvbihtZW51OiBNZW51LCBkb2N1bWVudDogRG9jdW1lbnQgPSBhY3RpdmVEb2N1bWVudCkge1xuXHRcdG1lbnUucmVnaXN0ZXIoXG5cdFx0XHRvbkVsZW1lbnQoXG5cdFx0XHRcdGRvY3VtZW50LFxuXHRcdFx0XHRcImtleWRvd25cIiBhcyBrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwLFxuXHRcdFx0XHRcIipcIixcblx0XHRcdFx0KGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdFx0XHRpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRtZW51LmhpZGUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdClcblx0XHQpO1xuXHR9XG5cblxuXHQvKipcblx0ICogXHU4QkJFXHU3RjZFXHU4M0RDXHU1MzU1XHU2MzA5XHU5NEFFXHVGRjBDXHU1RTc2XHU4QkJFXHU3RjZFXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XG5cdCAqXG5cdCAqIEBwYXJhbSBtZW51XG5cdCAqIEBwYXJhbSBGaWxlQmFzZU5hbWVcblx0ICogQHBhcmFtIGN1cnJlbnRNZFxuXHQgKi9cblx0YWRkTWVudUV4dGVuZGVkU291cmNlTW9kZSA9IChtZW51OiBNZW51LCBGaWxlQmFzZU5hbWU6IHN0cmluZywgY3VycmVudE1kOiBURmlsZSwgdGFyZ2V0X3R5cGU6IHN0cmluZywgdGFyZ2V0X3BvczogbnVtYmVyLCBpblRhYmxlOiBib29sZWFuLCBpbkNhbGxvdXQ6IGJvb2xlYW4pID0+IHtcblx0XHR0aGlzLmFkZE1lbnVFeHRlbmRlZFByZXZpZXdNb2RlKG1lbnUsIEZpbGVCYXNlTmFtZSwgY3VycmVudE1kKTtcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxuXHRcdFx0aXRlbVxuXHRcdFx0XHQuc2V0SWNvbihcInBlbmNpbFwiKVxuXHRcdFx0XHQuc2V0VGl0bGUoXCJSZW5hbWVcIilcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRwcmludChcInRlc3QgcmVuYW1lXCIpXG5cdFx0XHRcdFx0XHRVdGlsLmhhbmRsZXJSZW5hbWVGaWxlKEZpbGVCYXNlTmFtZSwgY3VycmVudE1kLCB0aGlzKTtcblx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJFcnJvciwgY291bGQgbm90IHJlbmFtZSB0aGUgZmlsZSFcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdClcblxuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XG5cdFx0XHRpdGVtXG5cdFx0XHRcdC5zZXRJY29uKFwidHJhc2gtMlwiKVxuXHRcdFx0XHQuc2V0VGl0bGUoXCJDbGVhciBmaWxlIGFuZCBhc3NvY2lhdGVkIGxpbmtcIilcblx0XHRcdFx0Ly8gLnNldFNlY3Rpb24oXCJhdHRhY2gtZmxvd1wiKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdC8vIFV0aWwuaGFuZGxlckRlbEZpbGUoRmlsZUJhc2VOYW1lLCBjdXJyZW50TWQsIHRoaXMpO1xuXHRcdFx0XHRcdFx0VXRpbC5oYW5kbGVyRGVsRmlsZU5ldyhGaWxlQmFzZU5hbWUsIGN1cnJlbnRNZCwgdGhpcywgdGFyZ2V0X3R5cGUsIHRhcmdldF9wb3MsIGluVGFibGUsIGluQ2FsbG91dCk7XG5cdFx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRXJyb3IsIGNvdWxkIG5vdCBjbGVhciB0aGUgZmlsZSFcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdCk7XG5cdH07XG5cblxuXHQvKipcblx0ICogXHU4QkJFXHU3RjZFXHU4M0RDXHU1MzU1XHU2MzA5XHU5NEFFXHVGRjBDXHU1RTc2XHU4QkJFXHU3RjZFXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XG5cdCAqXG5cdCAqIEBwYXJhbSBtZW51XG5cdCAqIEBwYXJhbSBGaWxlQmFzZU5hbWVcblx0ICogQHBhcmFtIGN1cnJlbnRNZFxuXHQgKi9cblx0YWRkTWVudUV4dGVuZGVkUHJldmlld01vZGUgPSAobWVudTogTWVudSwgRmlsZUJhc2VOYW1lOiBzdHJpbmcsIGN1cnJlbnRNZDogVEZpbGUpID0+IHtcblx0XHRjb25zdCBmaWxlID0gVXRpbC5nZXRGaWxlQnlCYXNlTmFtZShjdXJyZW50TWQsIEZpbGVCYXNlTmFtZSkgYXMgVEZpbGU7XG5cdFx0Ly8gY29uc3QgYmFzZVBhdGggPSAoZmlsZS52YXVsdC5hZGFwdGVyIGFzIGFueSkuYmFzZVBhdGg7XG5cdFx0Ly8gY29uc3QgcmVsYXRpdmVGaWxlUGF0aCA9IGZpbGUucGF0aDtcblx0XHRpZiAocHJvY2Vzcy5wbGF0Zm9ybSAhPSAnbGludXgnKSB7XG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxuXHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0LnNldEljb24oXCJjb3B5XCIpXG5cdFx0XHRcdFx0LnNldFRpdGxlKFwiQ29weSBmaWxlIHRvIGNsaXBib2FyZFwiKVxuXHRcdFx0XHRcdC8vIC5zZXRDaGVja2VkKHRydWUpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0VXRpbC5oYW5kbGVyQ29weUZpbGUoRmlsZUJhc2VOYW1lLCBjdXJyZW50TWQsIHRoaXMpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJFcnJvciwgY291bGQgbm90IGNvcHkgdGhlIGZpbGUhXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+IGl0ZW1cblx0XHRcdC5zZXRJY29uKFwiYXJyb3ctdXAtcmlnaHRcIilcblx0XHRcdC5zZXRUaXRsZShcIk9wZW4gaW4gZGVmYXVsdCBhcHBcIilcblx0XHRcdC5vbkNsaWNrKCgpID0+ICh0aGlzLmFwcCBhcyBBcHBXaXRoRGVza3RvcEludGVybmFsQXBpKS5vcGVuV2l0aERlZmF1bHRBcHAoZmlsZS5wYXRoKSlcblx0XHQpO1xuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+IGl0ZW1cblx0XHRcdC5zZXRJY29uKFwiYXJyb3ctdXAtcmlnaHRcIilcblx0XHRcdC5zZXRUaXRsZShQbGF0Zm9ybS5pc01hY09TID8gXCJSZXZlYWwgaW4gZmluZGVyXCIgOiBcIlNob3cgaW4gc3lzdGVtIGV4cGxvcmVyXCIpXG5cdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdCh0aGlzLmFwcCBhcyBBcHBXaXRoRGVza3RvcEludGVybmFsQXBpKS5zaG93SW5Gb2xkZXIoZmlsZS5wYXRoKTtcblx0XHRcdH0pXG5cdFx0KTtcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PiBpdGVtXG5cdFx0XHQuc2V0SWNvbihcImZvbGRlclwiKVxuXHRcdFx0LnNldFRpdGxlKFwiUmV2ZWFsIGZpbGUgaW4gbmF2aWdhdGlvblwiKVxuXHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBhYnN0cmFjdEZpbGVQYXRoID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUucGF0aCk7XG5cdFx0XHRcdCh0aGlzLmFwcCBhcyBhbnkpLmludGVybmFsUGx1Z2lucy5nZXRFbmFibGVkUGx1Z2luQnlJZChcImZpbGUtZXhwbG9yZXJcIikucmV2ZWFsSW5Gb2xkZXIoYWJzdHJhY3RGaWxlUGF0aCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cdH07XG5cblxuXHQvKipcblx0ICogXHU5RjIwXHU2ODA3XHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XHU0RThCXHU0RUY2XG5cdCAqL1xuXHRvbkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG5cdFx0Y29uc3QgdGFyZ2V0ID0gZ2V0TW91c2VFdmVudFRhcmdldChldmVudCk7XG5cdFx0Y29uc3QgY3VyVGFyZ2V0VHlwZSA9IHRhcmdldC5sb2NhbE5hbWU7XG5cdFx0aWYgKHRhcmdldC5pZCA9PSAnYWYtem9vbWVkLWltYWdlJykgcmV0dXJuO1xuXG5cdFx0Y29uc3QgY3VycmVudE1kID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkgYXMgVEZpbGU7XG5cdFx0Y29uc3QgaW5DYW52YXMgPSBjdXJyZW50TWQubmFtZS5lbmRzV2l0aCgnLmNhbnZhcycpO1xuXHRcdGNvbnN0IFN1cHBvcnRlZFRhcmdldFR5cGUgPSBbXCJpbWdcIiwgXCJpZnJhbWVcIiwgXCJ2aWRlb1wiLCBcImRpdlwiLCBcImF1ZGlvXCJdO1xuXG5cdFx0Y29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG5cblx0XHRpZiAoIVN1cHBvcnRlZFRhcmdldFR5cGUuaW5jbHVkZXMoY3VyVGFyZ2V0VHlwZSkpIHJldHVybjtcblxuXHRcdC8vIFx1NTIyNFx1NjVBRFx1NUY1M1x1NTI0RFx1NzBCOVx1NTFGQlx1NzY4NFx1NTczMFx1NjVCOVx1NjYyRlx1NTQyNlx1NEUzQVx1ODg2OFx1NjgzQ1xuXHRcdC8vIGNvbnN0IGluVGFibGU6Ym9vbGVhbiA9IHRhcmdldC5wYXJlbnRFbGVtZW50Py5wYXJlbnRFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyk9PSd0YWJsZS1jZWxsLXdyYXBwZXInO1xuXHRcdGNvbnN0IGluVGFibGU6IGJvb2xlYW4gPSB0YXJnZXQuY2xvc2VzdCgndGFibGUnKSAhPSBudWxsO1xuXHRcdGNvbnN0IGluQ2FsbG91dDogYm9vbGVhbiA9IHRhcmdldC5jbG9zZXN0KCcuY2FsbG91dCcpICE9IG51bGw7XG5cdFx0Y29uc3QgaW5QcmV2aWV3OiBib29sZWFuID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZ2V0TW9kZSgpID09IFwicHJldmlld1wiO1xuXHRcdGNvbnN0IGlzRXhjYWxpZHJhdzogYm9vbGVhbiA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2V4Y2FsaWRyYXctZW1iZWRkZWQtaW1nJyk7XG5cblx0XHRsZXQgdGFyZ2V0X25hbWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwic3JjXCIpIGFzIHN0cmluZztcblx0XHQvLyBcdTVCRjlcdTRFOEUgQ2FsbG91dCBcdTU0OEMgVGFibGUgXHU0RTJEXHU3Njg0XHU3RjUxXHU3RURDXHU1NkZFXHU3MjQ3XHVGRjBDXHU2Q0ExXHU2NzA5XHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XG5cdFx0aWYgKHRhcmdldF9uYW1lICYmIHRhcmdldF9uYW1lLnN0YXJ0c1dpdGgoJ2h0dHAnKSkgcmV0dXJuO1xuXG5cdFx0aWYgKGluQ2FudmFzKSB7XG5cdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTU2RkVcdTUwQ0ZcdTgyODJcdTcwQjlcdUZGMENcdThGRDRcdTU2REVcblx0XHRcdGlmICh0YXJnZXQucGFyZW50RWxlbWVudD8uY2xhc3NMaXN0LmNvbnRhaW5zKCdjYW52YXMtbm9kZS1jb250ZW50JykpIHJldHVybjtcblx0XHRcdGxldCBmaWxlX25hbWUgPSB0YXJnZXQucGFyZW50RWxlbWVudD8uZ2V0QXR0cmlidXRlKCdzcmMnKTtcblx0XHRcdC8vIHByaW50KFwiVGFyZ2V0IE5hbWU6XCIsIGZpbGVfbmFtZSk7XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoaXNFeGNhbGlkcmF3KSB7XG5cdFx0XHR0YXJnZXRfbmFtZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2ZpbGVzb3VyY2UnKSBhcyBzdHJpbmc7XG5cdFx0XHRsZXQgZmlsZV9iYXNlX25hbWUgPSB0YXJnZXRfbmFtZVxuXHRcdFx0aWYgKGZpbGVfYmFzZV9uYW1lLmluY2x1ZGVzKCcvJykpIHtcblx0XHRcdFx0bGV0IHRlbXBfYXJyID0gZmlsZV9iYXNlX25hbWUuc3BsaXQoJy8nKTtcblx0XHRcdFx0ZmlsZV9iYXNlX25hbWUgPSB0ZW1wX2Fyclt0ZW1wX2Fyci5sZW5ndGggLSAxXVxuXHRcdFx0fSBlbHNlIGlmIChmaWxlX2Jhc2VfbmFtZS5pbmNsdWRlcygnXFxcXCcpKSB7XG5cdFx0XHRcdGxldCB0ZW1wX2FyciA9IGZpbGVfYmFzZV9uYW1lLnNwbGl0KCdcXFxcJyk7XG5cdFx0XHRcdGZpbGVfYmFzZV9uYW1lID0gdGVtcF9hcnJbdGVtcF9hcnIubGVuZ3RoIC0gMV1cblx0XHRcdH1cblx0XHRcdGZpbGVfYmFzZV9uYW1lID0gZmlsZV9iYXNlX25hbWUuZW5kc1dpdGgoJy5tZCcpID9cblx0XHRcdFx0ZmlsZV9iYXNlX25hbWUuc3Vic3RyaW5nKDAsIGZpbGVfYmFzZV9uYW1lLmxlbmd0aCAtIDMpIDpcblx0XHRcdFx0ZmlsZV9iYXNlX25hbWU7XG5cdFx0XHR0YXJnZXRfbmFtZSA9IGZpbGVfYmFzZV9uYW1lO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRhcmdldF9uYW1lID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ/LmdldEF0dHJpYnV0ZShcInNyY1wiKSBhcyBzdHJpbmc7XG5cdFx0XHQvLyBcdTUyMjBcdTk2NjQgdGFyZ2V0X25hbWUgXHU1M0VGXHU4MEZEXHU1MjREXHU3RjAwXHU3Njg0XHU1OTFBXHU0RTJBICcuLi8nXHVGRjBDXHU2NTJGXHU2MzAxXHU5NEZFXHU2M0E1XHU4REVGXHU1Rjg0XHU0RTNBXHU1RjUzXHU1MjREXHU3QjE0XHU4QkIwXHU3Njg0XHU3NkY4XHU1QkY5XHU4REVGXHU1Rjg0XG5cdFx0XHR0YXJnZXRfbmFtZSA9IHRhcmdldF9uYW1lLnJlcGxhY2UoL14oXFwuXFwuXFwvKSsvZywgJycpO1xuXHRcdFx0bGV0IHBkZl9tYXRjaCA9IHRhcmdldF9uYW1lLm1hdGNoKC8uKlxcLnBkZi8pO1xuXHRcdFx0dGFyZ2V0X25hbWUgPSBwZGZfbWF0Y2ggPyBwZGZfbWF0Y2hbMF0gOiB0YXJnZXRfbmFtZTtcblx0XHRcdGlmIChjdXJUYXJnZXRUeXBlID09ICdpbWcnICYmIHBkZl9tYXRjaCkgcmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChpblByZXZpZXcpIHtcblx0XHRcdGlmIChTdXBwb3J0ZWRUYXJnZXRUeXBlLmluY2x1ZGVzKGN1clRhcmdldFR5cGUpKSB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiRmlsZUJhc2VOYW1lXCIsIEZpbGVCYXNlTmFtZSk7XG5cdFx0XHRcdHRoaXMuYWRkTWVudUV4dGVuZGVkUHJldmlld01vZGUobWVudSwgdGFyZ2V0X25hbWUsIGN1cnJlbnRNZCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3QgZWRpdG9yID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZWRpdG9yO1xuXHRcdFx0Ly8gIEB0cy1leHBlY3QtZXJyb3IsIG5vdCB0eXBlZFxuXHRcdFx0Y29uc3QgZWRpdG9yVmlldyA9IGVkaXRvci5jbSBhcyBFZGl0b3JWaWV3O1xuXHRcdFx0Y29uc3QgdGFyZ2V0X3BvcyA9IGVkaXRvclZpZXcucG9zQXRET00odGFyZ2V0KTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCd0YXJnZXQnLCB0YXJnZXQpXG5cdFx0XHQvLyBjb25zb2xlLmxvZygndGFyZ2V0LnBhcmVudEVsZW1lbnQnLCB0YXJnZXQucGFyZW50RWxlbWVudClcblx0XHRcdC8vIGNvbnN0IHByZXZfcG9zID0gZWRpdG9yVmlldy5wb3NBdERPTSh0YXJnZXQucGFyZW50RWxlbWVudD8ucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudCk7XG5cdFx0XHQvLyBjb25zdCBuZXh0X3BvcyA9IGVkaXRvclZpZXcucG9zQXRET00odGFyZ2V0LnBhcmVudEVsZW1lbnQ/Lm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudCk7XG5cdFx0XHQvLyBsZXQgcHJldl90YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdChwcmV2X3Bvcyk7XG5cdFx0XHQvLyBsZXQgbmV4dF90YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdChuZXh0X3Bvcyk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygncHJldiB0YXJnZXQgbGluZSBpbmZvcm1hdGlvbjogbGluZS1jb250ZW50LCBsaW5lLW51bWJlcigxLWJhc2VkKSwgdGFyZ2V0LmNoJyk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhwcmV2X3RhcmdldF9saW5lLnRleHQsIHByZXZfdGFyZ2V0X2xpbmUubnVtYmVyLCBwcmV2X3Bvcy1wcmV2X3RhcmdldF9saW5lLmZyb20pXG5cblx0XHRcdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0YXJnZXRfcG9zKTtcblx0XHRcdHByaW50KCd0YXJnZXQgbGluZSBpbmZvcm1hdGlvbjogbGluZS1jb250ZW50LCBsaW5lLW51bWJlcigxLWJhc2VkKSwgdGFyZ2V0LmNoJyk7XG5cdFx0XHRwcmludCh0YXJnZXRfbGluZS50ZXh0LCB0YXJnZXRfbGluZS5udW1iZXIsIHRhcmdldF9wb3MgLSB0YXJnZXRfbGluZS5mcm9tKTtcblxuXHRcdFx0Ly8gLS0tLS0tLS0tLSBFZGl0b3JJbnRlcm5hbEFwaS5wb3NBdE1vdXNlIFx1NEUwRFx1NjYyRlx1NUY4OFx1NTFDNlx1Nzg2RVx1RkYwQ1x1NEUwRFx1NzdFNVx1OTA1M1x1NEUzQVx1NEVDMFx1NEU0OFx1RkYwQ1x1ODg0Q1x1NTNGN1x1NTQ4Q2NoXHU5MEZEXHU0RTBEXHU1MUM2XHU3ODZFIC0tLS0tLS0tLS1cblx0XHRcdC8vIGNvbnN0IGVkaXRvcjIgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3IgYXMgRWRpdG9ySW50ZXJuYWxBcGk7XG5cdFx0XHQvLyBjb25zdCBwb3NpdGlvbiA9IGVkaXRvcjIucG9zQXRNb3VzZShldmVudCk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygnSW50ZXJBUElQb3MgbGluZSBpbmZvcm1hdGlvbjogbGluZS1jb250ZW50LCBsaW5lLW51bWJlcigxLWJhc2VkKSwgdGFyZ2V0LmNoJylcblx0XHRcdC8vIGNvbnNvbGUubG9nKGVkaXRvcj8uZ2V0TGluZShwb3NpdGlvbi5saW5lKSwgcG9zaXRpb24ubGluZSsxLCBwb3NpdGlvbi5jaClcblx0XHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0XHQvLyBjb25zb2xlLmxvZygnbmV4dCB0YXJnZXQgbGluZSBpbmZvcm1hdGlvbjogbGluZS1jb250ZW50LCBsaW5lLW51bWJlcigxLWJhc2VkKSwgdGFyZ2V0LmNoJyk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhuZXh0X3RhcmdldF9saW5lLnRleHQsIG5leHRfdGFyZ2V0X2xpbmUubnVtYmVyLCBuZXh0X3Bvcy1uZXh0X3RhcmdldF9saW5lLmZyb20pXG5cblx0XHRcdGlmIChTdXBwb3J0ZWRUYXJnZXRUeXBlLmluY2x1ZGVzKGN1clRhcmdldFR5cGUpKSB7XG5cdFx0XHRcdHRoaXMuYWRkTWVudUV4dGVuZGVkU291cmNlTW9kZShtZW51LCB0YXJnZXRfbmFtZSwgY3VycmVudE1kLCBjdXJUYXJnZXRUeXBlLCB0YXJnZXRfcG9zLCBpblRhYmxlLCBpbkNhbGxvdXQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMucmVnaXN0ZXJFc2NhcGVCdXR0b24obWVudSk7XG5cblx0XHRsZXQgb2Zmc2V0ID0gLTE2Mztcblx0XHRsZXQgbGludXhfb2Zmc2V0ID0gLTEzODtcblx0XHRvZmZzZXQgPSBwcm9jZXNzLnBsYXRmb3JtID09ICdsaW51eCcgPyBsaW51eF9vZmZzZXQgOiBvZmZzZXQ7XG5cblx0XHRpZiAoaW5UYWJsZSAmJiAhaW5QcmV2aWV3KSB7XG5cdFx0XHRtZW51LnNob3dBdFBvc2l0aW9uKHsgeDogZXZlbnQucGFnZVgsIHk6IGV2ZW50LnBhZ2VZICsgb2Zmc2V0IH0pO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgfSk7XG5cdFx0fVxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwiQXR0YWNoRmxvdzpjb250ZXh0bWVudVwiLCBtZW51KTtcblx0fVxuXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUludGVybmFsTGluayhhY3RpdmVWaWV3OiBNYXJrZG93blZpZXcsIHRhcmdldDogSFRNTEltYWdlRWxlbWVudCB8IEhUTUxWaWRlb0VsZW1lbnQsIHRhcmdldF9wb3M6IG51bWJlciwgaW1hZ2VOYW1lOiBzdHJpbmcsIG5ld1dpZHRoOiBudW1iZXIsIG5ld0hlaWdodDogbnVtYmVyLCBpblRhYmxlOiBib29sZWFuLCBpbkNhbGxvdXQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0Y29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG5cdC8vICBAdHMtZXhwZWN0LWVycm9yLCBub3QgdHlwZWRcblx0Y29uc3QgZWRpdG9yVmlldyA9IGVkaXRvci5jbSBhcyBFZGl0b3JWaWV3O1xuXHRsZXQgdGFyZ2V0X2xpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lQXQodGFyZ2V0X3Bvcyk7XG5cdC8vIHByaW50KCd0YXJnZXQgbGluZSBpbmZvcm1hdGlvbjogbGluZS1jb250ZW50LCBsaW5lLW51bWJlcigxLWJhc2VkKSwgdGFyZ2V0LmNoJyk7XG5cdC8vIHByaW50KHRhcmdldF9saW5lLnRleHQsIHRhcmdldF9saW5lLm51bWJlciwgdGFyZ2V0X3BvcyAtIHRhcmdldF9saW5lLmZyb20pO1xuXG5cblx0aWYgKCFpbkNhbGxvdXQgJiYgIWluVGFibGUpIHtcblx0XHRsZXQgbWF0Y2hlZCA9IG1hdGNoTGluZVdpdGhJbnRlcm5hbExpbmsodGFyZ2V0X2xpbmUudGV4dCwgaW1hZ2VOYW1lLCBuZXdXaWR0aCwgaW5UYWJsZSk7XG5cdFx0aWYgKG1hdGNoZWQubGVuZ3RoID09IDEpIHtcblx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goe1xuXHRcdFx0XHRjaGFuZ2VzOiB7XG5cdFx0XHRcdFx0ZnJvbTogdGFyZ2V0X2xpbmUuZnJvbSArIG1hdGNoZWRbMF0uZnJvbV9jaCxcblx0XHRcdFx0XHR0bzogdGFyZ2V0X2xpbmUuZnJvbSArIG1hdGNoZWRbMF0udG9fY2gsXG5cdFx0XHRcdFx0aW5zZXJ0OiBtYXRjaGVkWzBdLm5ld19saW5rXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Ly8gZWRpdG9yLnJlcGxhY2VSYW5nZShtYXRjaGVkWzBdLm5ld19saW5rLCBcblx0XHRcdC8vIFx0e2xpbmU6dGFyZ2V0X2xpbmUubnVtYmVyLTEsIGNoOm1hdGNoZWRbMF0uZnJvbV9jaH0sIFxuXHRcdFx0Ly8gXHR7bGluZTp0YXJnZXRfbGluZS5udW1iZXItMSwgY2g6bWF0Y2hlZFswXS50b19jaH1cblx0XHRcdC8vIFx0KTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAobWF0Y2hlZC5sZW5ndGggPT0gMCkge1xuXHRcdFx0Ly8gbmV3IE5vdGljZSgnRmFpbCB0byBmaW5kIGN1cnJlbnQgaW1hZ2UtbGluaywgcGxlYXNlIHpvb20gbWFudWFsbHkhJylcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRuZXcgTm90aWNlKCdGaW5kIG11bHRpcGxlIHNhbWUgaW1hZ2UtbGluayBpbiBsaW5lLCBwbGVhc2Ugem9vbSBtYW51YWxseSEnKVxuXHRcdH1cblx0XHRyZXR1cm47XG5cdH1cblxuXHR0eXBlIFJlZ0RpY3Rpb25hcnkgPSB7XG5cdFx0W2tleTogc3RyaW5nXTogUmVnRXhwO1xuXHR9O1xuXG5cdGxldCBzdGFydFJlZzogUmVnRGljdGlvbmFyeSA9IHtcblx0XHQndGFibGUnOiAvXlxccypcXHwvLFxuXHRcdCdjYWxsb3V0JzogL14+Lyxcblx0fTtcblxuXHRsZXQgbW9kZSA9IGluVGFibGUgPyAndGFibGUnIDogJ2NhbGxvdXQnO1xuXHRwcmludCgnbW9kZScsIG1vZGUpXG5cdC8vIHByaW50KFwiaW1hZ2VOYW1lXCIsIGltYWdlTmFtZSlcblxuXHRjb25zdCBzdGFydF9yZWcgPSBzdGFydFJlZ1ttb2RlXTtcblx0bGV0IHN0YXJ0X2xpbmVfbnVtYmVyID0gdGFyZ2V0X2xpbmUubnVtYmVyO1xuXHRsZXQgbWF0Y2hlZF9yZXN1bHRzOiBNYXRjaGVkTGlua0luTGluZVtdID0gW107XG5cdGxldCBtYXRjaGVkX2xpbmVzOiBudW1iZXJbXSA9IFtdOyAgLy8xLWJhc2VkXG5cdGZvciAobGV0IGkgPSBzdGFydF9saW5lX251bWJlcjsgaSA8PSBlZGl0b3IubGluZUNvdW50KCk7IGkrKykge1xuXHRcdGxldCBsaW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZShpKTtcblx0XHQvLyBjb25zb2xlLmxvZygnbGluZS50ZXh0JywgbGluZS50ZXh0KVxuXHRcdC8vIGNvbnNvbGUubG9nKCdzdGFydF9yZWcnLCBzdGFydF9yZWcpXG5cdFx0Ly8gY29uc29sZS5sb2coJ3N0YXJ0X3JlZy50ZXN0KGxpbmUudGV4dCknLCBzdGFydF9yZWcudGVzdChsaW5lLnRleHQpKVxuXHRcdGlmICghc3RhcnRfcmVnLnRlc3QobGluZS50ZXh0KSkgYnJlYWs7XG5cdFx0bGV0IG1hdGNoZWQgPSBtYXRjaExpbmVXaXRoSW50ZXJuYWxMaW5rKGxpbmUudGV4dCwgaW1hZ2VOYW1lLCBuZXdXaWR0aCwgaW5UYWJsZSk7XG5cdFx0bWF0Y2hlZF9yZXN1bHRzLnB1c2goLi4ubWF0Y2hlZCk7XG5cdFx0bWF0Y2hlZF9saW5lcy5wdXNoKC4uLm5ldyBBcnJheShtYXRjaGVkLmxlbmd0aCkuZmlsbChpKSk7XG5cdH1cblxuXHRmb3IgKGxldCBpID0gc3RhcnRfbGluZV9udW1iZXIgLSAxOyBpID49IDE7IGktLSkge1xuXHRcdGxldCBsaW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZShpKTtcblx0XHRpZiAoIXN0YXJ0X3JlZy50ZXN0KGxpbmUudGV4dCkpIGJyZWFrO1xuXHRcdGxldCBtYXRjaGVkID0gbWF0Y2hMaW5lV2l0aEludGVybmFsTGluayhsaW5lLnRleHQsIGltYWdlTmFtZSwgbmV3V2lkdGgsIGluVGFibGUpO1xuXHRcdG1hdGNoZWRfcmVzdWx0cy5wdXNoKC4uLm1hdGNoZWQpO1xuXHRcdG1hdGNoZWRfbGluZXMucHVzaCguLi5uZXcgQXJyYXkobWF0Y2hlZC5sZW5ndGgpLmZpbGwoaSkpO1xuXHR9XG5cblx0Ly8gcHJpbnQoXCJNYXRjaGVkIEluZm9ybWF0aW9uXCIpXG5cdC8vIHByaW50KG1hdGNoZWRfcmVzdWx0cylcblx0Ly8gcHJpbnQobWF0Y2hlZF9saW5lcylcblxuXHRpZiAobWF0Y2hlZF9yZXN1bHRzLmxlbmd0aCA9PSAxKSB7XG5cdFx0bGV0IHRhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZShtYXRjaGVkX2xpbmVzWzBdKTtcblx0XHRpZiAobW9kZSA9PSAndGFibGUnKSB7XG5cdFx0XHRsZXQgb2xkX3RleHQgPSB0YXJnZXRfbGluZS50ZXh0O1xuXHRcdFx0bGV0IG5ld19saW5lX3RleHQgPSBvbGRfdGV4dC5zdWJzdHJpbmcoMCwgbWF0Y2hlZF9yZXN1bHRzWzBdLmZyb21fY2gpICtcblx0XHRcdFx0bWF0Y2hlZF9yZXN1bHRzWzBdLm5ld19saW5rICtcblx0XHRcdFx0b2xkX3RleHQuc3Vic3RyaW5nKG1hdGNoZWRfcmVzdWx0c1swXS50b19jaCk7XG5cdFx0XHRlZGl0b3JWaWV3LmRpc3BhdGNoKHtcblx0XHRcdFx0Y2hhbmdlczoge1xuXHRcdFx0XHRcdGZyb206IHRhcmdldF9saW5lLmZyb20sXG5cdFx0XHRcdFx0dG86IHRhcmdldF9saW5lLmZyb20gKyBvbGRfdGV4dC5sZW5ndGgsXG5cdFx0XHRcdFx0aW5zZXJ0OiBuZXdfbGluZV90ZXh0XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlZGl0b3JWaWV3LmRpc3BhdGNoKHtcblx0XHRcdFx0Y2hhbmdlczoge1xuXHRcdFx0XHRcdGZyb206IHRhcmdldF9saW5lLmZyb20gKyBtYXRjaGVkX3Jlc3VsdHNbMF0uZnJvbV9jaCxcblx0XHRcdFx0XHR0bzogdGFyZ2V0X2xpbmUuZnJvbSArIG1hdGNoZWRfcmVzdWx0c1swXS50b19jaCxcblx0XHRcdFx0XHRpbnNlcnQ6IG1hdGNoZWRfcmVzdWx0c1swXS5uZXdfbGlua1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0ZWxzZSBpZiAobWF0Y2hlZF9yZXN1bHRzLmxlbmd0aCA9PSAwKSB7XG5cdFx0bmV3IE5vdGljZShgRmFpbCB0byBmaW5kIGN1cnJlbnQgaW1hZ2UtbGluayBpbiAke21vZGV9LCBwbGVhc2Ugem9vbSBtYW51YWxseSFgKVxuXHR9XG5cdGVsc2Uge1xuXHRcdG5ldyBOb3RpY2UoYEZpbmQgbXVsdGlwbGUgc2FtZSBpbWFnZS1saW5rIGluICR7bW9kZX0sIHBsZWFzZSB6b29tIG1hbnVhbGx5IWApXG5cdH1cblx0cmV0dXJuO1xufVxuXG5cbmZ1bmN0aW9uIHVwZGF0ZUV4dGVybmFsTGluayhhY3RpdmVWaWV3OiBNYXJrZG93blZpZXcsIHRhcmdldDogSFRNTEltYWdlRWxlbWVudCB8IEhUTUxWaWRlb0VsZW1lbnQsIHRhcmdldF9wb3M6IG51bWJlciwgbmV3V2lkdGg6IG51bWJlciwgbmV3SGVpZ2h0OiBudW1iZXIsIGluVGFibGU6IGJvb2xlYW4sIGluQ2FsbG91dDogYm9vbGVhbik6IHZvaWQge1xuXHRjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcblx0Ly8gIEB0cy1leHBlY3QtZXJyb3IsIG5vdCB0eXBlZFxuXHRjb25zdCBlZGl0b3JWaWV3ID0gZWRpdG9yLmNtIGFzIEVkaXRvclZpZXc7XG5cdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0YXJnZXRfcG9zKTtcblxuXHRjb25zdCBsaW5rID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnc3JjJykgYXMgc3RyaW5nO1xuXHRjb25zdCBhbHRUZXh0ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZShcImFsdFwiKSBhcyBzdHJpbmc7XG5cblx0aWYgKCFpbkNhbGxvdXQgJiYgIWluVGFibGUpIHtcblx0XHRsZXQgbWF0Y2hlZCA9IG1hdGNoTGluZVdpdGhFeHRlcm5hbExpbmsodGFyZ2V0X2xpbmUudGV4dCwgbGluaywgYWx0VGV4dCwgbmV3V2lkdGgsIGluVGFibGUpO1xuXHRcdGlmIChtYXRjaGVkLmxlbmd0aCA9PSAxKSB7XG5cdFx0XHRlZGl0b3JWaWV3LmRpc3BhdGNoKHtcblx0XHRcdFx0Y2hhbmdlczoge1xuXHRcdFx0XHRcdGZyb206IHRhcmdldF9saW5lLmZyb20gKyBtYXRjaGVkWzBdLmZyb21fY2gsXG5cdFx0XHRcdFx0dG86IHRhcmdldF9saW5lLmZyb20gKyBtYXRjaGVkWzBdLnRvX2NoLFxuXHRcdFx0XHRcdGluc2VydDogbWF0Y2hlZFswXS5uZXdfbGlua1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAobWF0Y2hlZC5sZW5ndGggPT0gMCkge1xuXHRcdFx0Ly8gbmV3IE5vdGljZSgnRmFpbCB0byBmaW5kIGN1cnJlbnQgaW1hZ2UtbGluaywgcGxlYXNlIHpvb20gbWFudWFsbHkhJylcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRuZXcgTm90aWNlKCdGaW5kIG11bHRpcGxlIHNhbWUgaW1hZ2UtbGluayBpbiBsaW5lLCBwbGVhc2Ugem9vbSBtYW51YWxseSEnKVxuXHRcdH1cblx0XHRyZXR1cm47XG5cdH1cblxuXHR0eXBlIFJlZ0RpY3Rpb25hcnkgPSB7XG5cdFx0W2tleTogc3RyaW5nXTogUmVnRXhwO1xuXHR9O1xuXG5cdGxldCBzdGFydFJlZzogUmVnRGljdGlvbmFyeSA9IHtcblx0XHQndGFibGUnOiAvXlxccypcXHwvLFxuXHRcdCdjYWxsb3V0JzogL14+Lyxcblx0fTtcblxuXHRsZXQgbW9kZSA9IGluVGFibGUgPyAndGFibGUnIDogJ2NhbGxvdXQnO1xuXHRwcmludCgnbW9kZScsIG1vZGUpXG5cblx0Y29uc3Qgc3RhcnRfcmVnID0gc3RhcnRSZWdbbW9kZV07XG5cdGxldCBzdGFydF9saW5lX251bWJlciA9IHRhcmdldF9saW5lLm51bWJlcjtcblx0bGV0IG1hdGNoZWRfcmVzdWx0czogTWF0Y2hlZExpbmtJbkxpbmVbXSA9IFtdO1xuXHRsZXQgbWF0Y2hlZF9saW5lczogbnVtYmVyW10gPSBbXTsgIC8vMS1iYXNlZFxuXHRmb3IgKGxldCBpID0gc3RhcnRfbGluZV9udW1iZXI7IGkgPD0gZWRpdG9yLmxpbmVDb3VudCgpOyBpKyspIHtcblx0XHRsZXQgbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmUoaSk7XG5cdFx0aWYgKCFzdGFydF9yZWcudGVzdChsaW5lLnRleHQpKSBicmVhaztcblx0XHRsZXQgbWF0Y2hlZCA9IG1hdGNoTGluZVdpdGhFeHRlcm5hbExpbmsobGluZS50ZXh0LCBsaW5rLCBhbHRUZXh0LCBuZXdXaWR0aCwgaW5UYWJsZSk7XG5cdFx0bWF0Y2hlZF9yZXN1bHRzLnB1c2goLi4ubWF0Y2hlZCk7XG5cdFx0bWF0Y2hlZF9saW5lcy5wdXNoKC4uLm5ldyBBcnJheShtYXRjaGVkLmxlbmd0aCkuZmlsbChpKSk7XG5cdH1cblxuXHRmb3IgKGxldCBpID0gc3RhcnRfbGluZV9udW1iZXIgLSAxOyBpID49IDE7IGktLSkge1xuXHRcdGxldCBsaW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZShpKTtcblx0XHRpZiAoIXN0YXJ0X3JlZy50ZXN0KGxpbmUudGV4dCkpIGJyZWFrO1xuXHRcdGxldCBtYXRjaGVkID0gbWF0Y2hMaW5lV2l0aEV4dGVybmFsTGluayhsaW5lLnRleHQsIGxpbmssIGFsdFRleHQsIG5ld1dpZHRoLCBpblRhYmxlKTtcblx0XHRtYXRjaGVkX3Jlc3VsdHMucHVzaCguLi5tYXRjaGVkKTtcblx0XHRtYXRjaGVkX2xpbmVzLnB1c2goLi4ubmV3IEFycmF5KG1hdGNoZWQubGVuZ3RoKS5maWxsKGkpKTtcblx0fVxuXG5cdHByaW50KG1hdGNoZWRfcmVzdWx0cylcblx0cHJpbnQobWF0Y2hlZF9saW5lcylcblxuXHRpZiAobWF0Y2hlZF9yZXN1bHRzLmxlbmd0aCA9PSAxKSB7XG5cdFx0bGV0IHRhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZShtYXRjaGVkX2xpbmVzWzBdKTtcblx0XHRpZiAobW9kZSA9PSAndGFibGUnKSB7XG5cdFx0XHRsZXQgb2xkX3RleHQgPSB0YXJnZXRfbGluZS50ZXh0O1xuXHRcdFx0bGV0IG5ld19saW5lX3RleHQgPSBvbGRfdGV4dC5zdWJzdHJpbmcoMCwgbWF0Y2hlZF9yZXN1bHRzWzBdLmZyb21fY2gpICtcblx0XHRcdFx0bWF0Y2hlZF9yZXN1bHRzWzBdLm5ld19saW5rICtcblx0XHRcdFx0b2xkX3RleHQuc3Vic3RyaW5nKG1hdGNoZWRfcmVzdWx0c1swXS50b19jaCk7XG5cdFx0XHRlZGl0b3JWaWV3LmRpc3BhdGNoKHtcblx0XHRcdFx0Y2hhbmdlczoge1xuXHRcdFx0XHRcdGZyb206IHRhcmdldF9saW5lLmZyb20sXG5cdFx0XHRcdFx0dG86IHRhcmdldF9saW5lLmZyb20gKyBvbGRfdGV4dC5sZW5ndGgsXG5cdFx0XHRcdFx0aW5zZXJ0OiBuZXdfbGluZV90ZXh0XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlZGl0b3JWaWV3LmRpc3BhdGNoKHtcblx0XHRcdFx0Y2hhbmdlczoge1xuXHRcdFx0XHRcdGZyb206IHRhcmdldF9saW5lLmZyb20gKyBtYXRjaGVkX3Jlc3VsdHNbMF0uZnJvbV9jaCxcblx0XHRcdFx0XHR0bzogdGFyZ2V0X2xpbmUuZnJvbSArIG1hdGNoZWRfcmVzdWx0c1swXS50b19jaCxcblx0XHRcdFx0XHRpbnNlcnQ6IG1hdGNoZWRfcmVzdWx0c1swXS5uZXdfbGlua1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0ZWxzZSBpZiAobWF0Y2hlZF9yZXN1bHRzLmxlbmd0aCA9PSAwKSB7XG5cdFx0bmV3IE5vdGljZShgRmFpbCB0byBmaW5kIGN1cnJlbnQgaW1hZ2UtbGluayBpbiAke21vZGV9LCBwbGVhc2Ugem9vbSBtYW51YWxseSFgKVxuXHR9XG5cdGVsc2Uge1xuXHRcdG5ldyBOb3RpY2UoYEZpbmQgbXVsdGlwbGUgc2FtZSBpbWFnZS1saW5rIGluICR7bW9kZX0sIHBsZWFzZSB6b29tIG1hbnVhbGx5IWApXG5cdH1cblx0cmV0dXJuO1xuXG59XG5cblxuZnVuY3Rpb24gbWF0Y2hMaW5lV2l0aEludGVybmFsTGluayhsaW5lX3RleHQ6IHN0cmluZywgdGFyZ2V0X25hbWU6IHN0cmluZywgbmV3X3dpZHRoOiBudW1iZXIsIGludGFibGU6IGJvb2xlYW4pOiBNYXRjaGVkTGlua0luTGluZVtdIHtcblx0bGV0IHJlZ1dpa2lMaW5rID0gL1xcIVxcW1xcW1teXFxbXFxdXSo/XFxdXFxdL2c7XG5cdGxldCByZWdNZExpbmsgPSAvXFwhXFxbW15cXFtcXF1dKj9cXF1cXChbXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKlxcKS9nO1xuXHRjb25zdCB0YXJnZXRfbmFtZV9tZGxpbmsgPSB0YXJnZXRfbmFtZS5yZXBsYWNlKC8gL2csICclMjAnKTtcblx0aWYgKCFsaW5lX3RleHQuaW5jbHVkZXModGFyZ2V0X25hbWUpICYmICFsaW5lX3RleHQuaW5jbHVkZXModGFyZ2V0X25hbWVfbWRsaW5rKSkgcmV0dXJuIFtdO1xuXG5cdC8vIHByaW50KGxpbmVfdGV4dClcblx0bGV0IHJlc3VsdDogTWF0Y2hlZExpbmtJbkxpbmVbXSA9IFtdO1xuXHQvLyBjb25zdCBuZXdXaWtpTGluayA9IGludGFibGUgPyBgIVtbJHt0YXJnZXRfbmFtZX1cXFxcfCR7bmV3X3dpZHRofV1dYDpgIVtbJHt0YXJnZXRfbmFtZX18JHtuZXdfd2lkdGh9XV1gO1xuXHR3aGlsZSAodHJ1ZSkge1xuXHRcdGxldCB3aWtpX21hdGNoID0gcmVnV2lraUxpbmsuZXhlYyhsaW5lX3RleHQpO1xuXHRcdGlmICghd2lraV9tYXRjaCkgYnJlYWs7XG5cdFx0Y29uc3QgbWF0Y2hlZF9saW5rID0gd2lraV9tYXRjaFswXTtcblx0XHQvLyBwcmludCgnbWF0Y2hlZF9saW5rOicsIG1hdGNoZWRfbGluaylcblx0XHRpZiAobWF0Y2hlZF9saW5rLmluY2x1ZGVzKHRhcmdldF9uYW1lKSkge1xuXHRcdFx0bGV0IG5vcm1hbF9saW5rID0gaW50YWJsZSA/IG1hdGNoZWRfbGluay5yZXBsYWNlKC9cXFxcXFx8L2csICd8JykgOiBtYXRjaGVkX2xpbms7XG5cdFx0XHRsZXQgbGlua19tYXRjaCA9IG5vcm1hbF9saW5rLm1hdGNoKC8hXFxbXFxbKC4qPykoXFx8fFxcXVxcXSkvKTtcblx0XHRcdGxldCBsaW5rX3RleHQgPSBsaW5rX21hdGNoID8gbGlua19tYXRjaFsxXSA6ICcnO1xuXG5cdFx0XHRsZXQgYWx0X21hdGNoID0gbWF0Y2hlZF9saW5rLm1hdGNoKC8hXFxbXFxbLio/KFxcfCguKj8pKVxcXVxcXS8pO1xuXHRcdFx0bGV0IGFsdF90ZXh0ID0gYWx0X21hdGNoID8gYWx0X21hdGNoWzFdIDogJyc7XG5cdFx0XHRsZXQgYWx0X3RleHRfbGlzdCA9IGFsdF90ZXh0LnNwbGl0KCd8Jyk7XG5cdFx0XHRsZXQgYWx0X3RleHRfd29fc2l6ZSA9ICcnO1xuXHRcdFx0bGV0IG5ld19hbHRfdGV4dCA9ICcnXG5cdFx0XHRmb3IgKGxldCBhbHQgb2YgYWx0X3RleHRfbGlzdCkge1xuXHRcdFx0XHRpZiAoIS9eXFxkKyQvLnRlc3QoYWx0KSAmJiAhL15cXHMqJC8udGVzdChhbHQpKSB7XG5cdFx0XHRcdFx0YWx0X3RleHRfd29fc2l6ZSA9IGFsdF90ZXh0X3dvX3NpemUgKyAnfCcgKyBhbHQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG5ld19hbHRfdGV4dCA9IG5ld193aWR0aCAhPSAwID8gYCR7YWx0X3RleHRfd29fc2l6ZX18JHtuZXdfd2lkdGh9YCA6IGFsdF90ZXh0X3dvX3NpemU7XG5cdFx0XHRuZXdfYWx0X3RleHQgPSBpbnRhYmxlID8gbmV3X2FsdF90ZXh0LnJlcGxhY2UoL1xcfC9nLCAnXFxcXHwnKSA6IG5ld19hbHRfdGV4dDtcblx0XHRcdGxldCBuZXdXaWtpTGluayA9IGxpbmtfbWF0Y2ggPyBgIVtbJHtsaW5rX3RleHR9JHtuZXdfYWx0X3RleHR9XV1gIDogYCFbWyR7dGFyZ2V0X25hbWV9JHtuZXdfYWx0X3RleHR9XV1gO1xuXG5cdFx0XHRyZXN1bHQucHVzaCh7XG5cdFx0XHRcdG9sZF9saW5rOiBtYXRjaGVkX2xpbmssXG5cdFx0XHRcdG5ld19saW5rOiBuZXdXaWtpTGluayxcblx0XHRcdFx0ZnJvbV9jaDogd2lraV9tYXRjaC5pbmRleCxcblx0XHRcdFx0dG9fY2g6IHdpa2lfbWF0Y2guaW5kZXggKyBtYXRjaGVkX2xpbmsubGVuZ3RoXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHR3aGlsZSAodHJ1ZSkge1xuXHRcdGxldCBtYXRjaCA9IHJlZ01kTGluay5leGVjKGxpbmVfdGV4dCk7XG5cdFx0aWYgKCFtYXRjaCkgYnJlYWs7XG5cdFx0Y29uc3QgbWF0Y2hlZF9saW5rID0gbWF0Y2hbMF07XG5cdFx0aWYgKG1hdGNoZWRfbGluay5pbmNsdWRlcyh0YXJnZXRfbmFtZV9tZGxpbmspKSB7XG5cdFx0XHQvLyBcdTYyN0VcdTUyMzAgbWF0Y2hlZF9saW5rIFx1NEUyRFx1NzY4NCBhbHRUZXh0XG5cdFx0XHRsZXQgYWx0X3RleHRfbWF0Y2ggPSBtYXRjaGVkX2xpbmsubWF0Y2goL1xcWy4qP1xcXS9nKSBhcyBzdHJpbmdbXTtcblx0XHRcdGxldCBhbHRfdGV4dCA9IGFsdF90ZXh0X21hdGNoWzBdLnN1YnN0cmluZygxLCBhbHRfdGV4dF9tYXRjaFswXS5sZW5ndGggLSAxKTtcblx0XHRcdGxldCBwdXJlX2FsdCA9IGFsdF90ZXh0LnJlcGxhY2UoL1xcfFxcZCsoXFx8XFxkKyk/JC9nLCAnJyk7XG5cdFx0XHRpZiAoaW50YWJsZSkge1xuXHRcdFx0XHRwdXJlX2FsdCA9IGFsdF90ZXh0LnJlcGxhY2UoL1xcXFxcXHxcXGQrKFxcfFxcZCspPyQvZywgJycpXG5cdFx0XHR9XG5cdFx0XHRsZXQgbGlua190ZXh0ID0gbWF0Y2hlZF9saW5rLnN1YnN0cmluZyhhbHRfdGV4dF9tYXRjaFswXS5sZW5ndGggKyAyLCBtYXRjaGVkX2xpbmsubGVuZ3RoIC0gMSlcblx0XHRcdGxldCBuZXdNRExpbmsgPSBpbnRhYmxlID8gYCFbJHtwdXJlX2FsdH1cXFxcfCR7bmV3X3dpZHRofV0oJHtsaW5rX3RleHR9KWAgOiBgIVske3B1cmVfYWx0fXwke25ld193aWR0aH1dKCR7bGlua190ZXh0fSlgO1xuXHRcdFx0aWYgKC9eXFxkKiQvLnRlc3QoYWx0X3RleHQpKSB7XG5cdFx0XHRcdG5ld01ETGluayA9IGAhWyR7bmV3X3dpZHRofV0oJHtsaW5rX3RleHR9KWA7XG5cdFx0XHR9XG5cdFx0XHQvLyBsZXQgbmV3TGluZVRleHQgPSBsaW5lX3RleHQuc3Vic3RyaW5nKDAsIG1hdGNoLmluZGV4KSArIFxuXHRcdFx0Ly8gXHRcdFx0XHRcdG5ld01ETGluayArIFxuXHRcdFx0Ly8gXHRcdFx0XHRcdGxpbmVfdGV4dC5zdWJzdHJpbmcobWF0Y2guaW5kZXgrbWF0Y2hlZF9saW5rLmxlbmd0aCk7XG5cdFx0XHRyZXN1bHQucHVzaCh7XG5cdFx0XHRcdG9sZF9saW5rOiBtYXRjaGVkX2xpbmssXG5cdFx0XHRcdG5ld19saW5rOiBuZXdNRExpbmssXG5cdFx0XHRcdGZyb21fY2g6IG1hdGNoLmluZGV4LFxuXHRcdFx0XHR0b19jaDogbWF0Y2guaW5kZXggKyBtYXRjaGVkX2xpbmsubGVuZ3RoXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0cHJpbnQoXCJMaW5lIFRleHQ6IFwiLCBsaW5lX3RleHQpXG5cdHByaW50KFwiTWF0Y2hlZEluZm86XCIsIHJlc3VsdCk7XG5cdHJldHVybiByZXN1bHQ7XG59XG5cblxuZnVuY3Rpb24gbWF0Y2hMaW5lV2l0aEV4dGVybmFsTGluayhsaW5lX3RleHQ6IHN0cmluZywgbGluazogc3RyaW5nLCBhbHRfdGV4dDogc3RyaW5nLCBuZXdfd2lkdGg6IG51bWJlciwgaW50YWJsZTogYm9vbGVhbik6IE1hdGNoZWRMaW5rSW5MaW5lW10ge1xuXHRsZXQgcmVzdWx0OiBNYXRjaGVkTGlua0luTGluZVtdID0gW11cblx0bGV0IHJlZ01kTGluayA9IC9cXCFcXFtbXlxcW1xcXV0qP1xcXVxcKFteXFxzXFwpXFwoXFxbXFxdXFx7XFx9J10qXFwpL2c7XG5cdGlmICghbGluZV90ZXh0LmluY2x1ZGVzKGxpbmspIHx8ICFsaW5lX3RleHQuaW5jbHVkZXMoYWx0X3RleHQpKSByZXR1cm4gW107XG5cdGxldCBuZXdFeHRlcm5hbExpbmsgPSBpbnRhYmxlID9cblx0XHRgIVske2FsdF90ZXh0fVxcXFx8JHtuZXdfd2lkdGh9XSgke2xpbmt9KWAgOlxuXHRcdGAhWyR7YWx0X3RleHR9fCR7bmV3X3dpZHRofV0oJHtsaW5rfSlgO1xuXHRpZiAoL15cXGQqJC8udGVzdChhbHRfdGV4dCkgfHwgL15cXHMqJC8udGVzdChhbHRfdGV4dCkpIHtcblx0XHRuZXdFeHRlcm5hbExpbmsgPSBgIVske25ld193aWR0aH1dKCR7bGlua30pYDtcblx0fVxuXHR3aGlsZSAodHJ1ZSkge1xuXHRcdGxldCBtYXRjaCA9IHJlZ01kTGluay5leGVjKGxpbmVfdGV4dCk7XG5cdFx0aWYgKCFtYXRjaCkgYnJlYWs7XG5cdFx0bGV0IG1hdGNoZWRfbGluayA9IG1hdGNoWzBdO1xuXHRcdGlmIChtYXRjaGVkX2xpbmsuaW5jbHVkZXMobGluaykgJiYgbWF0Y2hlZF9saW5rLmluY2x1ZGVzKGFsdF90ZXh0KSkge1xuXHRcdFx0Ly8gbGV0IG5ld0xpbmVUZXh0ID0gbGluZV90ZXh0LnN1YnN0cmluZygwLCBtYXRjaC5pbmRleCkgKyBcblx0XHRcdC8vIFx0XHRcdFx0XHRuZXdFeHRlcm5hbExpbmsgKyBcblx0XHRcdC8vIFx0XHRcdFx0XHRsaW5lX3RleHQuc3Vic3RyaW5nKG1hdGNoLmluZGV4K21hdGNoZWRfbGluay5sZW5ndGgpO1xuXHRcdFx0cmVzdWx0LnB1c2goe1xuXHRcdFx0XHRvbGRfbGluazogbWF0Y2hlZF9saW5rLFxuXHRcdFx0XHRuZXdfbGluazogbmV3RXh0ZXJuYWxMaW5rLFxuXHRcdFx0XHRmcm9tX2NoOiBtYXRjaC5pbmRleCxcblx0XHRcdFx0dG9fY2g6IG1hdGNoLmluZGV4ICsgbWF0Y2hlZF9saW5rLmxlbmd0aFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdHByaW50KFwiTGluZSBUZXh0OiBcIiwgbGluZV90ZXh0KVxuXHRwcmludChcIk1hdGNoZWRJbmZvOlwiLCByZXN1bHQpO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuIiwgImltcG9ydCB7IE5vdGljZSwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGdldEZpbGVQYXJlbnRGb2xkZXIgfSBmcm9tIFwic3JjL3V0aWxcIjtcbmltcG9ydCB7IGRlbGV0ZUZpbGUgfSBmcm9tIFwic3JjL3V0aWxzL2RlbGV0ZUZpbGVcIjtcbmltcG9ydCBBdHRhY2hGbG93UGx1Z2luIGZyb20gXCIuLi8uLi9zcmMvbWFpblwiO1xuLyoqXG4gKiBkZWxBbGxBdHRhY2hzQnlDb21tYW5kXG4gKlxuICogMS4gZ2V0IGN1cnJlbnQgZmlsZVxuICogMi4gZ2V0IFRGaWxlIG9mIHRoZSBhdHRhY2htZW50IHJlZmVyZW5jZWQgYnkgZmlsZVxuICovXG5leHBvcnQgY29uc3QgZGVsZXRlQWxsQXR0YWNocyA9IGFzeW5jIChwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW4pID0+IHtcblx0Ly8gMS4gZ2V0IGN1cnJlbnQgZmlsZVxuXHRjb25zdCBhY3RpdmVNZDogVEZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSBhcyBURmlsZTtcblx0Y29uc3QgcmVzb2x2ZWRMaW5rcyA9IGFwcC5tZXRhZGF0YUNhY2hlLnJlc29sdmVkTGlua3M7XG5cdGNvbnN0IGF0dGFjaHNQYXRoczogc3RyaW5nW10gPSBbXTtcblx0Zm9yIChjb25zdCBbbWRGaWxlLCBsaW5rc10gb2YgT2JqZWN0LmVudHJpZXMocmVzb2x2ZWRMaW5rcykpIHtcblx0XHRpZiAoYWN0aXZlTWQ/LnBhdGggPT09IG1kRmlsZSkge1xuXHRcdFx0bGV0IGZpbGVDb3VudCA9IDA7XG5cdFx0XHRsZXQgZmxhZyA9IGZhbHNlO1xuXHRcdFx0Zm9yIChjb25zdCBbZmlsZVBhdGgsIG5yXSBvZiBPYmplY3QuZW50cmllcyhsaW5rcykpIHtcblx0XHRcdFx0Ly8gSWYgdGhlIGZpbGVQYXRoIGVuZHMgd2l0aCAnLm1kJyAsd2hpY2ggaW5kaWNhdGVzIHRoZSBmaWxlIGlzIG1hcmtkb3duIGZpbGUsIGFuZCBkbyBub3QgZGVsZXRlIGl0XG5cdFx0XHRcdGlmIChmaWxlUGF0aC5tYXRjaCgvLipcXC5tZCQvbSkpIGNvbnRpbnVlO1xuXHRcdFx0XHQvLyBpZiB0aGUgYXR0YWNobWVudCBpbiB0aGUgbm90ZSBoYXMgYmVlbiByZWZlcmVuY2VkIGJ5IG90aGVyIG5vdGVzICBzaW11bHRhbmVvdXNseSBza2lwIGl0LlxuXHRcdFx0XHRpZiAoaXNSZWZlcmVuY2VkQnlPdGhlck5vdGVzKGZpbGVQYXRoLCBhY3RpdmVNZCkpIGNvbnRpbnVlO1xuXHRcdFx0XHRhdHRhY2hzUGF0aHMucHVzaChmaWxlUGF0aCk7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gMi4gZ2V0IFRGaWxlIG9mIHRoZSBhdHRhY2htZW50IHJlZmVyZW5jZWQgYnkgZmlsZVxuXHRcdFx0XHRcdGNvbnN0IEF0dGFjaEZpbGU6IFRGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcblx0XHRcdFx0XHRcdGZpbGVQYXRoXG5cdFx0XHRcdFx0KSBhcyBURmlsZTtcblx0XHRcdFx0XHRpZiAoQXR0YWNoRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdFx0XHRkZWxldGVGaWxlKEF0dGFjaEZpbGUsIHBsdWdpbik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IHBhcmVudEZvbGRlciA9IGdldEZpbGVQYXJlbnRGb2xkZXIoXG5cdFx0XHRcdFx0XHRBdHRhY2hGaWxlXG5cdFx0XHRcdFx0KSBhcyBURm9sZGVyO1xuXHRcdFx0XHRcdGlmICghZmxhZykge1xuXHRcdFx0XHRcdFx0ZmlsZUNvdW50ID0gcGFyZW50Rm9sZGVyLmNoaWxkcmVuLmxlbmd0aDtcblx0XHRcdFx0XHRcdGZsYWcgPSAhZmxhZztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZmlsZUNvdW50ID0gZmlsZUNvdW50IC0gMTtcblx0XHRcdFx0XHRpZiAoIWZpbGVDb3VudCkge1xuXHRcdFx0XHRcdFx0YXdhaXQgZGVsZXRlRmlsZShwYXJlbnRGb2xkZXIsIHBsdWdpbik7XG5cdFx0XHRcdFx0XHQvLyBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKHBhcmVudEZvbGRlciwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFxuXHRcdFx0XHRcdFx0XHRcIkFsbCBhdHRhY2htZW50cyBhbmQgaXRzIHBhcmVudCBmb2xkZXIgZGVsZXRlZCFcIixcblx0XHRcdFx0XHRcdFx0MzAwMFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHQvLyByZW1vdmVBbGxVbnVzZWRSZWZlcmVuY2VMaW5rcyhhY3RpdmVNZCwgYXR0YWNoc1BhdGhzKTtcbn07XG4vKipcbiAqXG4gKiBAcGFyYW0gYXR0YWNoUGF0aFxuICogQHBhcmFtIGN1cnJlbnRNZFxuICogQHJldHVybnNcbiAqL1xuY29uc3QgaXNSZWZlcmVuY2VkQnlPdGhlck5vdGVzID0gKFxuXHRhdHRhY2hQYXRoOiBzdHJpbmcsXG5cdGN1cnJlbnRNZDogVEZpbGVcbik6IGJvb2xlYW4gPT4ge1xuXHRjb25zdCByZXNvbHZlZExpbmtzID0gYXBwLm1ldGFkYXRhQ2FjaGUucmVzb2x2ZWRMaW5rcztcblx0bGV0IGZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcblxuXHRmb3IgKGNvbnN0IFttZEZpbGUsIGxpbmtzXSBvZiBPYmplY3QuZW50cmllcyhyZXNvbHZlZExpbmtzKSkge1xuXHRcdGlmIChtZEZpbGUgIT09IGN1cnJlbnRNZC5wYXRoKSB7XG5cdFx0XHRmb3IgKGNvbnN0IFtmaWxlUGF0aCwgbnJdIG9mIE9iamVjdC5lbnRyaWVzKGxpbmtzKSkge1xuXHRcdFx0XHRpZiAoZmlsZVBhdGggPT09IGF0dGFjaFBhdGgpIHtcblx0XHRcdFx0XHRmbGFnID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gZmxhZztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFsbCByZWZlcmVuY2UgbGlua3NcbiAqXG4gKiBAcGFyYW0gaW1hZ2VQYXRocyAgcGF0aCAgbGlzdCAgb2YgdGhlIGN1cnJlbnQgZGVsZXRlZCBpbWFnZSB3aXRob3V0IHN1YnBhdGgsZm9ybWF0IGFzICBuYW1lLmV4dGVuc2lvblxuICogQHBhcmFtIG1kRmlsZSAgdGhlIG1hcmtkb3duIGZpbGUgY29udGFpbmluZyB0aGUgZGVsZXRlZCBpbWFnZVxuICovXG5leHBvcnQgY29uc3QgcmVtb3ZlQWxsVW51c2VkUmVmZXJlbmNlTGlua3MgPSBhc3luYyAoXG5cdGFjdGl2ZU1kOiBURmlsZSxcblx0YXR0YWNoc1BhdGhzOiBzdHJpbmdbXVxuKSA9PiB7XG5cdC8vIDEuZ2V0IHBhdGggbGlzdCBvZiBhbGwgdW51c2VkIGF0dGFjaG1lbnRzXG5cdGNvbnN0IG9yaWdpbkNvbnRlbnRzID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoYWN0aXZlTWQpO1xuXHRjb25zdCBsaW5lcyA9IG9yaWdpbkNvbnRlbnRzLnNwbGl0KFwiXFxuXCIpO1xuXHRjb25zdCBuZXdDb250ZW50czogc3RyaW5nW10gPSBbXTtcblx0bGV0IGlzTm90VGFyZ2V0TGluZTogYm9vbGVhbiA9IHRydWU7XG5cblx0Ly8gMi4gY2xlYXIgYWxsIHVudXNlZCBhdHRhY2htZW50cyBsaW5rcyBpbiB0aGUgbm90ZVxuXHQvLyBFc2NhcGUgLiB0byBcXC4gZm9yIHJlZ3VsYXIgZXhwcmVzaW9uXG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdGZvciAoY29uc3QgaW5kZXggaW4gYXR0YWNoc1BhdGhzKSB7XG5cdFx0XHRjb25zdCByZWdNZFJlZkxpbmsgPSBuZXcgUmVnRXhwKFxuXHRcdFx0XHRcIiFcXFxcWyguKik/XFxcXF1cXFxcKCgoLipcXFxcLykrKT9cIiArIGF0dGFjaHNQYXRoc1tpbmRleF0gKyBcIlxcXFwpXCIsXG5cdFx0XHRcdFwiZ21cIlxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IHJlZ1dpa2lSZWZMaW5rMiA9IG5ldyBSZWdFeHAoXG5cdFx0XHRcdFwiIVxcXFxbXFxcXFsuKj9cIiArIGF0dGFjaHNQYXRoc1tpbmRleF0gKyBcIihcXFxcfFxcXFxkKik/XFxcXF1cXFxcXVwiLFxuXHRcdFx0XHRcImdtXCJcblx0XHRcdCk7XG5cdFx0XHRjb25zdCBkZWNvZGVMaW5lID0gZGVjb2RlVVJJKGxpbmUpO1xuXHRcdFx0Y29uc3QgaXNJbmNsdWRlSW1hZ2UgPSBkZWNvZGVMaW5lLmluY2x1ZGVzKGF0dGFjaHNQYXRoc1tpbmRleF0pO1xuXHRcdFx0Y29uc3QgaXNNYXJrZG93blN0eWxlID0gZGVjb2RlTGluZS5tYXRjaChyZWdNZFJlZkxpbmspICE9IG51bGw7XG5cdFx0XHRjb25zdCBpc1dpa2lTdHlsZSA9IGRlY29kZUxpbmUubWF0Y2gocmVnV2lraVJlZkxpbmsyKSAhPSBudWxsO1xuXHRcdFx0aWYgKGlzSW5jbHVkZUltYWdlICYmIGlzTWFya2Rvd25TdHlsZSkge1xuXHRcdFx0XHRpc05vdFRhcmdldExpbmUgPSBmYWxzZTtcblx0XHRcdFx0bmV3Q29udGVudHMucHVzaChkZWNvZGVMaW5lLnJlcGxhY2UocmVnTWRSZWZMaW5rLCBcIlwiKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fSBlbHNlIGlmIChpc0luY2x1ZGVJbWFnZSAmJiBpc1dpa2lTdHlsZSkge1xuXHRcdFx0XHRpc05vdFRhcmdldExpbmUgPSBmYWxzZTtcblx0XHRcdFx0bmV3Q29udGVudHMucHVzaChkZWNvZGVMaW5lLnJlcGxhY2UocmVnV2lraVJlZkxpbmsyLCBcIlwiKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChpc05vdFRhcmdldExpbmUpIG5ld0NvbnRlbnRzLnB1c2gobGluZSk7XG5cdH1cblx0YXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoYWN0aXZlTWQucGF0aCwgbmV3Q29udGVudHMuam9pbihcIlxcblwiKSk7XG59O1xuZXhwb3J0IGNvbnN0IGdldFJlZmVuY2VkTGlua0NvdW50ID0gKCk6IG51bWJlciA9PiB7XG5cdGNvbnN0IGFjdGl2ZU1kOiBURmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpIGFzIFRGaWxlO1xuXHRjb25zdCByZXNvbHZlZExpbmtzID0gYXBwLm1ldGFkYXRhQ2FjaGUucmVzb2x2ZWRMaW5rcztcblx0Y29uc3QgYXR0YWNoc1BhdGhzOiBzdHJpbmdbXSA9IFtdO1xuXHRmb3IgKGNvbnN0IFttZEZpbGUsIGxpbmtzXSBvZiBPYmplY3QuZW50cmllcyhyZXNvbHZlZExpbmtzKSkge1xuXHRcdGlmIChhY3RpdmVNZD8ucGF0aCA9PT0gbWRGaWxlKSB7XG5cdFx0XHRmb3IgKGNvbnN0IFtmaWxlUGF0aCwgbnJdIG9mIE9iamVjdC5lbnRyaWVzKGxpbmtzKSkge1xuXHRcdFx0XHRpZiAoZmlsZVBhdGgubWF0Y2goLy4qXFwubWQkL20pKSBjb250aW51ZTtcblx0XHRcdFx0aWYgKGlzUmVmZXJlbmNlZEJ5T3RoZXJOb3RlcyhmaWxlUGF0aCwgYWN0aXZlTWQpKSBjb250aW51ZTtcblx0XHRcdFx0YXR0YWNoc1BhdGhzLnB1c2goZmlsZVBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gYXR0YWNoc1BhdGhzLmxlbmd0aDtcbn07XG4iLCAiaW1wb3J0IEF0dGFjaEZsb3dQbHVnaW4gZnJvbSBcInNyYy9tYWluXCI7XG5pbXBvcnQgeyBURmlsZSwgTm90aWNlLCBURm9sZGVyLCBNYXJrZG93blZpZXcsIEVkaXRvcn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBpbWFnZVJlZmVyZW5jZWRTdGF0ZSB9IGZyb20gXCIuL2VudW0vaW1hZ2VSZWZlcmVuY2VkU3RhdGVcIjtcbmltcG9ydCB7IHJlc3VsdERldGVybWluZUltYWdlRGVsZXRpb24gYXMgZGVsZXRpb25SZXN1bHQgfSBmcm9tIFwiLi9pbnRlcmZhY2UvcmVzdWx0RGV0ZXJtaW5lSW1hZ2VEZWxldGlvblwiO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHsgZXhlYywgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQge1xuXHRFbGVjdHJvbldpbmRvdywgRmlsZVN5c3RlbUFkYXB0ZXJXaXRoSW50ZXJuYWxBcGksXG5cdGxvYWRJbWFnZUJsb2IsIEFwcFdpdGhEZXNrdG9wSW50ZXJuYWxBcGksIEVkaXRvckludGVybmFsQXBpXG4gIH0gZnJvbSBcIi4vaGVscGVyc1wiXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBsZXQgREVCVUc6Ym9vbGVhbiA9IGZhbHNlO1xuY29uc3QgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCA9IDE4MDA7XG5cbmV4cG9ydCBjb25zdCBwcmludD0obWVzc2FnZT86IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKSA9PntcbiAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERlYnVnKHZhbHVlOiBib29sZWFuKSB7XG4gICAgREVCVUcgPSB2YWx1ZTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHRhcmdldF9maWxlIFx1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1NzZFRVx1NjgwN1x1NjU4N1x1NEVGNlxuICogQHBhcmFtIGN1cnJlbnRNZFx0XHU1RjUzXHU1MjREXHU2MjQwXHU1NzI4XHU3Njg0IG1hcmtkb3duIFx1NjU4N1x1NEVGNlxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGNvbnN0IGNoZWNrUmVmZXJlbmNlSW5mbyA9IChcblx0dGFyZ2V0X2ZpbGU6IFRGaWxlLFxuXHRjdXJyZW50TWQ6IFRGaWxlXG4pOiB7IHN0YXRlOiBudW1iZXI7IG1kUGF0aDogc3RyaW5nW10gfSA9PiB7XG5cblx0Y29uc3QgcmVzb2x2ZWRMaW5rcyA9IGFwcC5tZXRhZGF0YUNhY2hlLnJlc29sdmVkTGlua3M7XG5cdGxldCBDdXJNRFBhdGg6IHN0cmluZztcblx0Ly8gLy8gcmVjb3JkIHRoZSBzdGF0ZSBvZiBpbWFnZSByZWZlcmVuY2VkIGFuZCBhbGwgcGF0aHMgb2YgbWFya2Rvd24gcmVmZXJlbmNpbmcgdG8gdGhlIGltYWdlXG5cdGxldCByZXN1bHQ6IGRlbGV0aW9uUmVzdWx0ID0ge1xuXHRcdHN0YXRlOiAwLFxuXHRcdG1kUGF0aDogW10sXG5cdH07XG5cdGxldCByZWZOdW0gPSAwOyAvLyByZWNvcmQgdGhlIG51bWJlciBvZiBub3RlIHJlZmVyZW5jaW5nIHRvIHRoZSBpbWFnZS5cblx0Zm9yIChjb25zdCBbbWRGaWxlLCBsaW5rc10gb2YgT2JqZWN0LmVudHJpZXMocmVzb2x2ZWRMaW5rcykpIHtcblx0XHRpZiAoY3VycmVudE1kLnBhdGggPT09IG1kRmlsZSkge1xuXHRcdFx0Q3VyTURQYXRoID0gY3VycmVudE1kLnBhdGg7XG5cdFx0XHRyZXN1bHQubWRQYXRoLnVuc2hpZnQoQ3VyTURQYXRoKTtcblx0XHR9XG5cdFx0Zm9yIChjb25zdCBbZmlsZVBhdGgsIG5yXSBvZiBPYmplY3QuZW50cmllcyhsaW5rcykpIHtcblx0XHRcdGlmICh0YXJnZXRfZmlsZT8ucGF0aCA9PT0gZmlsZVBhdGgpIHtcblx0XHRcdFx0cmVmTnVtKys7XG5cdFx0XHRcdC8vIGlmIHRoZSBkZWxldGVkIHRhcmdldCBpbWFnZSByZWZlcmVuY2VkIGJ5IGN1cnJlbnQgbm90ZSBtb3JlIHRoYW4gb25jZVxuXHRcdFx0XHRpZiAobnIgPiAxKSB7XG5cdFx0XHRcdFx0cmVzdWx0LnN0YXRlID0gaW1hZ2VSZWZlcmVuY2VkU3RhdGUuTU9SRTtcblx0XHRcdFx0XHRyZXN1bHQubWRQYXRoLnB1c2gobWRGaWxlKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJlc3VsdC5tZFBhdGgucHVzaChtZEZpbGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRpZiAocmVmTnVtID4gMSkge1xuXHRcdHJlc3VsdC5zdGF0ZSA9IGltYWdlUmVmZXJlbmNlZFN0YXRlLk1VVElQTEU7XG5cdH0gZWxzZSB7XG5cdFx0cmVzdWx0LnN0YXRlID0gaW1hZ2VSZWZlcmVuY2VkU3RhdGUuT05DRTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTtcblxuXG4vKipcbiAqIFx0XHU5MDFBXHU4RkM3XHU1RjUzXHU1MjREbWRcdTY1ODdcdTRFRjZcdTU0OENcdTU2RkVcdTcyNDdcdTU0MEQgXHU4M0I3XHU1M0Q2IFx1NTZGRVx1NzI0N1x1NjU4N1x1NEVGNlx1NUJGOVx1OEM2MSAgIFx1RkYwQ1x1N0M3Qlx1NTc4Qlx1NEUzQVRGaWxlXG4gKiBcblx0QHBhcmFtIGN1cnJlbnRNZCAgXHU1RjUzXHU1MjREXHU5NzAwXHU4OTgxXHU4OEFCXHU1MjIwXHU5NjY0XHU3Njg0Y3VyTWRcdTYyNDBcdTU3MjhcdTc2ODRtYXJrZG93blx1NjU4N1x1NEVGNlxuXHRAcGFyYW0gRmlsZUJhc2VOYW1lICBcdTVGNTNcdTUyNERcdTk3MDBcdTg5ODFcdTg4QUJcdTUyMjBcdTk2NjRcdTc2ODRjdXJNZFx1NTQwRCBuYW1lLmV4dGVuc2lvblxuICogIEByZXR1cm5zICBBdHRhY2hGaWxlXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRGaWxlQnlCYXNlTmFtZSA9IChcblx0Y3VycmVudE1kOiBURmlsZSxcblx0RmlsZUJhc2VOYW1lOiBzdHJpbmdcbik6IFRGaWxlIHwgdW5kZWZpbmVkID0+IHtcblx0Y29uc3QgcmVzb2x2ZWRMaW5rcyA9IGFwcC5tZXRhZGF0YUNhY2hlLnJlc29sdmVkTGlua3M7XG5cdGZvciAoY29uc3QgW21kRmlsZSwgbGlua3NdIG9mIE9iamVjdC5lbnRyaWVzKHJlc29sdmVkTGlua3MpKSB7XG5cdFx0aWYgKGN1cnJlbnRNZC5wYXRoID09PSBtZEZpbGUpIHtcblx0XHRcdGZvciAoY29uc3QgW2ZpbGVQYXRoLCBucl0gb2YgT2JqZWN0LmVudHJpZXMobGlua3MpKSB7XG5cdFx0XHRcdC8vIHByaW50KCdmaWxlUGF0aCcsIGZpbGVQYXRoKVxuXHRcdFx0XHQvLyBwcmludChGaWxlQmFzZU5hbWUpXG5cdFx0XHRcdGlmIChmaWxlUGF0aC5pbmNsdWRlcyhGaWxlQmFzZU5hbWUpKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IEF0dGFjaEZpbGU6IFRGaWxlID1cblx0XHRcdFx0XHRcdFx0YXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCkgYXMgVEZpbGU7XG5cdFx0XHRcdFx0XHRpZiAoQXR0YWNoRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBBdHRhY2hGaWxlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGAgY2Fubm90IGdldCB0aGUgaW1hZ2UgZmlsZWApO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vKipcbiAqIFx1NTIyMFx1OTY2NFx1NjMwN1x1NUI5QVx1OTY0NFx1NEVGNlx1NjU4N1x1NEVGNlxuICpcbiAqIEBwYXJhbSBmaWxlICBcdTYzMDdcdTVCOUFcdTc2ODRcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcbiAqIEBwYXJhbSBwbHVnaW4gXHU1RjUzXHU1MjREXHU2M0QyXHU0RUY2XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgY29uc3QgUHVyZUNsZWFyQXR0YWNobWVudCA9IGFzeW5jIChcblx0ZmlsZTogVEZpbGUsXG5cdHRhcmdldF90eXBlOiBzdHJpbmcsXG5cdHBsdWdpbjogQXR0YWNoRmxvd1BsdWdpblxuKSA9PiB7XG5cdGNvbnN0IGRlbGV0ZU9wdGlvbiA9IHBsdWdpbi5zZXR0aW5ncy5kZWxldGVPcHRpb247XG5cdGNvbnN0IGRlbEZpbGVGb2xkZXIgPSBvbmx5T25lRmlsZUV4aXN0cyhmaWxlKTtcblx0Y29uc3QgZmlsZUZvbGRlciA9IGdldEZpbGVQYXJlbnRGb2xkZXIoZmlsZSkgYXMgVEZvbGRlcjtcblx0bGV0IG5hbWUgPSB0YXJnZXRfdHlwZT09J2ltZycgPyAnSW1hZ2UnIDogJ0ZpbGUnO1xuXHR0cnkge1xuXHRcdGlmIChkZWxldGVPcHRpb24gPT09IFwiLnRyYXNoXCIpIHtcblx0XHRcdGF3YWl0IGFwcC52YXVsdC50cmFzaChmaWxlLCBmYWxzZSk7XG5cdFx0XHRuZXcgTm90aWNlKFxuXHRcdFx0XHRuYW1lICsgXCIgbW92ZWQgdG8gT2JzaWRpYW4gVHJhc2ggIVwiLFxuXHRcdFx0XHRTVUNDRVNTX05PVElDRV9USU1FT1VUXG5cdFx0XHQpO1xuXHRcdFx0aWYgKGRlbEZpbGVGb2xkZXIpIHtcblx0XHRcdFx0YXdhaXQgYXBwLnZhdWx0LnRyYXNoKGZpbGVGb2xkZXIsIGZhbHNlKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkF0dGFjaG1lbnQgZm9sZGVyIGhhdmUgYmVlbiBkZWxldGVkIVwiLCAzMDAwKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGRlbGV0ZU9wdGlvbiA9PT0gXCJzeXN0ZW0tdHJhc2hcIikge1xuXHRcdFx0YXdhaXQgYXBwLnZhdWx0LnRyYXNoKGZpbGUsIHRydWUpO1xuXHRcdFx0bmV3IE5vdGljZShuYW1lICsgXCIgbW92ZWQgdG8gU3lzdGVtIFRyYXNoICFcIiwgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCk7XG5cdFx0XHRpZiAoZGVsRmlsZUZvbGRlcikge1xuXHRcdFx0XHRhd2FpdCBhcHAudmF1bHQudHJhc2goZmlsZUZvbGRlciwgdHJ1ZSk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJBdHRhY2htZW50IGZvbGRlciBoYXZlIGJlZW4gZGVsZXRlZCFcIiwgMzAwMCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChkZWxldGVPcHRpb24gPT09IFwicGVybWFuZW50XCIpIHtcblx0XHRcdGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZmlsZSk7XG5cdFx0XHRuZXcgTm90aWNlKG5hbWUgKyBcIiBkZWxldGVkIFBlcm1hbmVudGx5ICFcIiwgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCk7XG5cdFx0XHRpZiAoZGVsRmlsZUZvbGRlcikge1xuXHRcdFx0XHRhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGZpbGVGb2xkZXIsIHRydWUpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQXR0YWNobWVudCBmb2xkZXIgaGF2ZSBiZWVuIGRlbGV0ZWQhXCIsIDMwMDApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRuZXcgTm90aWNlKFwiRmFpbGQgdG8gZGVsZWx0ZSB0aGUgXCIgKyBuYW1lICsgXCIhXCIsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHR9XG59O1xuXG5cbmV4cG9ydCBjb25zdCBoYW5kbGVyRGVsRmlsZU5ldyA9IChcblx0RmlsZUJhc2VOYW1lOiBzdHJpbmcsXG5cdGN1cnJlbnRNZDogVEZpbGUsXG5cdHBsdWdpbjogQXR0YWNoRmxvd1BsdWdpbixcblx0dGFyZ2V0X3R5cGU6IHN0cmluZyxcblx0dGFyZ2V0X3BvczogbnVtYmVyLFxuXHRpbl90YWJsZTogYm9vbGVhbixcblx0aW5fY2FsbG91dDogYm9vbGVhblxuKSA9PiB7XG5cdGxldCBsb2dzOiBzdHJpbmdbXTtcblx0bGV0IG1vZGFsO1xuXHRjb25zdCB0YXJnZXRfZmlsZSA9IGdldEZpbGVCeUJhc2VOYW1lKGN1cnJlbnRNZCwgRmlsZUJhc2VOYW1lKSBhcyBURmlsZTtcblx0Y29uc3QgcmVmSW5mbyA9IGNoZWNrUmVmZXJlbmNlSW5mbyh0YXJnZXRfZmlsZSwgY3VycmVudE1kKTtcblx0bGV0IHN0YXRlID0gcmVmSW5mby5zdGF0ZTtcblx0c3dpdGNoIChzdGF0ZSkge1xuXHRcdGNhc2UgMDpcblx0XHRcdC8vIGNsZWFyIGF0dGFjaG1lbnQgZGlyZWN0bHlcblx0XHRcdGRlbGV0ZUN1clRhcmdldExpbmsoRmlsZUJhc2VOYW1lLCBwbHVnaW4sIHRhcmdldF90eXBlLCB0YXJnZXRfcG9zLCBpbl90YWJsZSwgaW5fY2FsbG91dCk7XG5cdFx0XHRQdXJlQ2xlYXJBdHRhY2htZW50KHRhcmdldF9maWxlLCB0YXJnZXRfdHlwZSwgcGx1Z2luKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgMTpcblx0XHRjYXNlIDI6XG5cdFx0XHRkZWxldGVDdXJUYXJnZXRMaW5rKEZpbGVCYXNlTmFtZSwgcGx1Z2luLCB0YXJnZXRfdHlwZSwgdGFyZ2V0X3BvcywgaW5fdGFibGUsIGluX2NhbGxvdXQpO1xuXHRcdFx0Ly8gcmVmZXJlbmNlZCBieSBlaXRob3Igb25seSBub3RlIG9yIG90aGVyIG11dGlwbGUgbm90ZXMgbW9yZSB0aGFuIG9uY2Vcblx0XHRcdGxvZ3MgPSByZWZJbmZvLm1kUGF0aCBhcyBzdHJpbmdbXTtcblx0XHRcdC8vIFx1NzUzMVx1NEU4RVx1NjcwOVx1NTIyQlx1NzY4NFx1NUYxNVx1NzUyOFx1RkYwQ1x1NjI0MFx1NEVFNVx1NTNFQVx1NTIyMFx1OTY2NFx1NUY1M1x1NTI0RFx1NzY4NFx1NUYxNVx1NzUyOFx1OTRGRVx1NjNBNVx1ODAwQ1x1NEUwRFx1NTIyMFx1OTY2NFx1NjU4N1x1NEVGNlxuXHRcdFx0bmV3IE5vdGljZShcIkFzIG90aGVyIHJlZmVyZW5jZXMgb2YgY3VycmVudCBmaWxlIGV4aXN0LCBcIiArIFxuXHRcdFx0XHRcImp1c3QgZGVsZXRlZCB0aGUgY3VycmVudCByZWZlcmVuY2UgbGluayB3aXRob3V0IGRlbGV0aW5nIHRoZSBhY3R1YWwgZmlsZS5cIiwgXG5cdFx0XHRcdDM1MDApO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRicmVhaztcblx0fVxufVxuXG4vLyBcdTU5ODJcdTY3OUNcdTY2MkYgdHlwZSBcdTY2MkYgXCJpbWdcIlx1RkYwQ1x1NUMzMVx1NTFDNlx1Nzg2RVx1NTIyMFx1OTY2NFx1NTZGRVx1NzI0N1x1NUYxNVx1NzUyOFx1OTRGRVx1NjNBNVx1NzY4NFx1OTBFOFx1NTIwNlx1RkYwQ1x1NTk4Mlx1Njc5Q1x1NjYyRlx1NTE3Nlx1NEVENlx1N0M3Qlx1NTc4Qlx1RkYwQ1x1NzZGNFx1NjNBNVx1NTIyMFx1OTY2NFx1NjU3NFx1ODg0Q1xuLy8gdGFyZ2V0X2xpbmUgXHVGRjA4MS1iYXNlZFx1RkYwOSBcdTU0OEMgdGFyZ2V0X2NoIFx1NjYyRlx1NjMwN1x1NzkzQVx1OTY0NFx1NEVGNlx1NjI0MFx1NTcyOFx1NzY4NFx1NEY0RFx1N0Y2RVxuZXhwb3J0IGNvbnN0IGRlbGV0ZUN1clRhcmdldExpbmsgPSAoXG5cdGZpbGVfYmFzZV9uYW1lOiBzdHJpbmcsXG5cdHBsdWdpbjogQXR0YWNoRmxvd1BsdWdpbixcblx0dGFyZ2V0X3R5cGU6IHN0cmluZyxcblx0dGFyZ2V0X3BvczogbnVtYmVyLFxuXHRpbl90YWJsZTogYm9vbGVhbixcblx0aW5fY2FsbG91dDogYm9vbGVhblxuKSA9PiB7XG5cdGZpbGVfYmFzZV9uYW1lID0gZmlsZV9iYXNlX25hbWUuc3RhcnRzV2l0aCgnLycpID8gZmlsZV9iYXNlX25hbWUuc3Vic3RyaW5nKDEpOmZpbGVfYmFzZV9uYW1lO1xuXHRjb25zdCBhY3RpdmVWaWV3ID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpIGFzIE1hcmtkb3duVmlldztcblx0Y29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG5cdC8vICBAdHMtZXhwZWN0LWVycm9yLCBub3QgdHlwZWRcblx0Y29uc3QgZWRpdG9yVmlldyA9IGVkaXRvci5jbSBhcyBFZGl0b3JWaWV3O1xuXG5cdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0YXJnZXRfcG9zKTtcblx0bGV0IGxpbmVfdGV4dCA9IHRhcmdldF9saW5lLnRleHQ7XG5cblx0aWYgKCFpbl90YWJsZSAmJiAhaW5fY2FsbG91dCl7XG5cdFx0bGV0IGZpbmRzID0gZmluZExpbmtJbkxpbmUoZmlsZV9iYXNlX25hbWUsIGxpbmVfdGV4dCk7XG5cdFx0aWYgKGZpbmRzLmxlbmd0aCA9PSAwKXtcblx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsIHRvIGZpbmQgdGhlIGxpbmstdGV4dCwgcGxlYXNlIGRlbGV0ZSBpdCBtYW51YWxseSFcIiwgMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGVsc2UgaWYoZmluZHMubGVuZ3RoICE9IDEpe1xuXHRcdFx0bmV3IE5vdGljZShcIkZpbmQgbXVsdGlwbGUgc2FtZSBMaW5rIGluIGN1cnJlbnQgbGluZSwgcGxlYXNlIGRlbGV0ZSBpdCBtYW51YWxseSFcIiwgMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGVsc2V7XG5cdFx0XHQvLyBlZGl0b3JWaWV3LmRpc3BhdGNoKHtjaGFuZ2VzOiB7ZnJvbTogdGFyZ2V0X2xpbmUuZnJvbSArIGZpbmRzWzBdWzBdLCB0bzogdGFyZ2V0X2xpbmUuZnJvbSArIGZpbmRzWzBdWzFdLCBpbnNlcnQ6ICcnfX0pO1xuXHRcdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZSgnJywge2xpbmU6IHRhcmdldF9saW5lLm51bWJlci0xLCBjaDogZmluZHNbMF1bMF19LCB7bGluZTogdGFyZ2V0X2xpbmUubnVtYmVyLTEsIGNoOiBmaW5kc1swXVsxXX0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fVxuXG5cdHR5cGUgUmVnRGljdGlvbmFyeSA9IHtcblx0XHRba2V5OiBzdHJpbmddOiBSZWdFeHA7XG5cdH07XG5cdFxuXHRsZXQgc3RhcnRSZWc6IFJlZ0RpY3Rpb25hcnkgPSB7XG5cdFx0J3RhYmxlJzogL15cXHMqXFx8Lyxcblx0XHQnY2FsbG91dCc6IC9ePi8sXG5cdH07XG5cblx0bGV0IG1vZGUgPSBpbl90YWJsZSA/ICd0YWJsZScgOiAnY2FsbG91dCc7XG5cdGxldCBmaW5kc19saW5lczogbnVtYmVyW10gPSBbXTtcblx0bGV0IGZpbmRzX2FsbDogW2Zyb206bnVtYmVyLCB0bzpudW1iZXJdW10gPSBbXTtcblx0Zm9yIChsZXQgaT10YXJnZXRfbGluZS5udW1iZXI7IGk8PWVkaXRvci5saW5lQ291bnQoKTsgaSsrKXtcblx0XHRsZXQgbGluZV90ZXh0ID0gZWRpdG9yLmdldExpbmUoaS0xKTtcblx0XHRpZiAoIXN0YXJ0UmVnW21vZGVdLnRlc3QobGluZV90ZXh0KSkgYnJlYWs7XG5cdFx0cHJpbnQoYGxpbmVfJHtpfV90ZXh0OmAsIGxpbmVfdGV4dClcblx0XHRsZXQgZmluZHMgPSBmaW5kTGlua0luTGluZShmaWxlX2Jhc2VfbmFtZSwgbGluZV90ZXh0KTtcblx0XHRpZiAoZmluZHMubGVuZ3RoID4gMCl7XG5cdFx0XHRmaW5kc19saW5lcy5wdXNoKC4uLm5ldyBBcnJheShmaW5kcy5sZW5ndGgpLmZpbGwoaSkpO1xuXHRcdFx0ZmluZHNfYWxsLnB1c2goLi4uZmluZHMpO1xuXHRcdH1cblx0fVxuXG5cdGZvciAobGV0IGk9dGFyZ2V0X2xpbmUubnVtYmVyLTE7IGk+PTE7IGktLSl7XG5cdFx0bGV0IGxpbmVfdGV4dCA9IGVkaXRvci5nZXRMaW5lKGktMSk7XG5cdFx0aWYgKCFzdGFydFJlZ1ttb2RlXS50ZXN0KGxpbmVfdGV4dCkpIGJyZWFrO1xuXHRcdHByaW50KGBsaW5lXyR7aX1fdGV4dDpgLCBsaW5lX3RleHQpXG5cdFx0bGV0IGZpbmRzID0gZmluZExpbmtJbkxpbmUoZmlsZV9iYXNlX25hbWUsIGxpbmVfdGV4dCk7XG5cdFx0aWYgKGZpbmRzLmxlbmd0aCA+IDApe1xuXHRcdFx0ZmluZHNfbGluZXMucHVzaCguLi5uZXcgQXJyYXkoZmluZHMubGVuZ3RoKS5maWxsKGkpKTtcblx0XHRcdGZpbmRzX2FsbC5wdXNoKC4uLmZpbmRzKTtcblx0XHR9XG5cdH1cblxuXHRpZiAoZmluZHNfYWxsLmxlbmd0aCA9PSAwKXtcblx0XHRuZXcgTm90aWNlKGBGYWlsIHRvIGZpbmQgdGhlIGxpbmstdGV4dCAoZm9yIGxpbmtzIGluICR7bW9kZX0pLCBwbGVhc2UgZGVsZXRlIGl0IG1hbnVhbGx5IWAsIDApO1xuXHRcdHJldHVybjtcblx0fVxuXHRlbHNlIGlmKGZpbmRzX2FsbC5sZW5ndGggIT0gMSl7XG5cdFx0bmV3IE5vdGljZShgRmluZCBtdWx0aXBsZSBzYW1lIExpbmsgaW4gY3VycmVudCAke21vZGV9LCBwbGVhc2UgZGVsZXRlIGl0IG1hbnVhbGx5IWAsIDApO1xuXHRcdHJldHVybjtcblx0fVxuXHRlbHNle1xuXHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoJycsIHtsaW5lOiBmaW5kc19saW5lc1swXS0xLCBjaDogZmluZHNfYWxsWzBdWzBdfSwge2xpbmU6IGZpbmRzX2xpbmVzWzBdLTEsIGNoOiBmaW5kc19hbGxbMF1bMV19KTtcblx0fVxuXG5cdGVkaXRvci5mb2N1cygpO1xufVxuXG4vLyBjb3B5IGltZyBmaWxlIHRvIGNsaXBib2FyZFxuZXhwb3J0IGNvbnN0IGhhbmRsZXJDb3B5RmlsZSA9IGFzeW5jIChcblx0RmlsZUJhc2VOYW1lOiBzdHJpbmcsXG5cdGN1cnJlbnRNZDogVEZpbGUsXG5cdHBsdWdpbjogQXR0YWNoRmxvd1BsdWdpblxuKSA9PiB7XG5cdGNvbnN0IGZpbGUgPSBnZXRGaWxlQnlCYXNlTmFtZShjdXJyZW50TWQsIEZpbGVCYXNlTmFtZSkgYXMgVEZpbGU7XG5cdGNvbnN0IGJhc2VQYXRoID0gKGZpbGUudmF1bHQuYWRhcHRlciBhcyBhbnkpLmJhc2VQYXRoXG5cdGNvbnN0IGZpbGVfYWJfcGF0aCA9IGJhc2VQYXRoICsgJy8nICsgZmlsZS5wYXRoXG5cblx0dHJ5e1xuXHRcdGNvcHlGaWxlVG9DbGlwYm9hcmRDTUQoZmlsZV9hYl9wYXRoKTtcblx0XHRuZXcgTm90aWNlKFwiQ29waWVkIHRvIGNsaXBib2FyZCAhXCIsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHR9XG5cdGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdG5ldyBOb3RpY2UoXCJGYWlsZCB0byBjb3B5IHRoZSBmaWxlICFcIiwgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCk7XG5cdH1cblxuXHQvLyBjb3B5IGZpbGUgdG8gY2xpcGJvYXJkXG5cdC8vIHRyeSB7XG5cdFx0Ly8gY29uc29sZS5sb2coZmlsZV9hYl9wYXRoKVxuXG5cdFx0Ly8gXHU1MTQ4XHU2N0U1XHU3NzBCXHU1MjZBXHU4RDM0XHU2NzdGXHU1MTg1XHU1QkI5XG5cdFx0Ly8gY29uc3QgY2xpcGJvYXJkSXRlbXMgPSBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWQoKTtcblx0XHQvLyBjb25zb2xlLmxvZyhjbGlwYm9hcmRJdGVtc1swXSlcblx0XHQvLyBsZXQgdHAgPSBjbGlwYm9hcmRJdGVtc1swXS50eXBlc1swXVxuXHRcdC8vIGNvbnNvbGUubG9nKHRwLCBjbGlwYm9hcmRJdGVtc1swXS5nZXRUeXBlKHRwKSlcblxuXHRcdC8vIFx1NTkwRFx1NTIzNlx1NTZGRVx1NzI0N1x1RkYwQ1x1NEY0Nlx1NjYyRlx1NTNFQVx1ODBGRFx1NEVFNVBOR1x1NUY2Mlx1NUYwRlx1N0M5OFx1OEQzNFx1RkYwQ1x1NTM3M1x1NEY3Rlx1NTkwRFx1NTIzNlx1NzY4NFx1NjYyRkdJRlx1NjIxNlx1ODAwNUpQR1xuXHRcdC8vIGNvbnN0IGltYWdlID0gZnMucmVhZEZpbGVTeW5jKGZpbGVfYWJfcGF0aCk7XG5cdFx0Ly8gbGV0IGZpbGVfdHlwZTogc3RyaW5nID0gJ2ltYWdlL3BuZyc7XG5cdFx0Ly8gY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtpbWFnZV0sIHsgdHlwZTogZmlsZV90eXBlIH0pO1xuXHRcdC8vIGNvbnN0IGl0ZW0gPSBuZXcgQ2xpcGJvYXJkSXRlbSh7IFtmaWxlX3R5cGVdOiBibG9iIH0pO1xuXHRcdC8vIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGUoW2l0ZW1dKTtcblxuXHQvLyBcdGNvcHlGaWxlVG9DbGlwYm9hcmRDTUQoZmlsZV9hYl9wYXRoKTtcblxuXHQvLyBcdG5ldyBOb3RpY2UoXCJDb3BpZWQgdG8gY2xpcGJvYXJkICFcIiwgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCk7XG5cdC8vIH1cblx0Ly8gY2F0Y2ggKGVycm9yKSB7XG5cdC8vIFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdC8vIFx0bmV3IE5vdGljZShcIkZhaWxkIHRvIGNvcHkgdGhlIGZpbGUgIVwiLCBTVUNDRVNTX05PVElDRV9USU1FT1VUKTtcblx0Ly8gfVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gZmlsZSB0YXJnZXQgZGVsZXRlZCBmaWxlXG4gKiBAcmV0dXJucyBwYXJlbnQgZm9sZGVyIG9yIHVuZGVmaWVuZFxuICovXG5leHBvcnQgY29uc3QgZ2V0RmlsZVBhcmVudEZvbGRlciA9IChmaWxlOiBURmlsZSk6IFRGb2xkZXIgfCB1bmRlZmluZWQgPT4ge1xuXHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0aWYgKGZpbGUucGFyZW50IGluc3RhbmNlb2YgVEZvbGRlcikge1xuXHRcdFx0cmV0dXJuIGZpbGUucGFyZW50O1xuXHRcdH1cblx0fVxuXHRyZXR1cm47XG59O1xuLyoqXG4gKlxuICogQHBhcmFtIGZpbGVcbiAqIEByZXR1cm5zXG4gKi9cbmNvbnN0IG9ubHlPbmVGaWxlRXhpc3RzID0gKGZpbGU6IFRGaWxlKTogYm9vbGVhbiA9PiB7XG5cdGNvbnN0IGZpbGVGb2xkZXIgPSBnZXRGaWxlUGFyZW50Rm9sZGVyKGZpbGUpIGFzIFRGb2xkZXI7XG5cdHJldHVybiBmaWxlRm9sZGVyLmNoaWxkcmVuLmxlbmd0aCA9PT0gMTtcbn07XG5cblxuLy8gXHU4QzAzXHU3NTI4XHU3Q0ZCXHU3RURGXHU1NDdEXHU0RUU0XHU1OTBEXHU1MjM2XHU2NTg3XHU0RUY2XHU1MjMwXHU3Q0ZCXHU3RURGXHU1MjZBXHU4RDM0XHU2NzdGXG5mdW5jdGlvbiBjb3B5RmlsZVRvQ2xpcGJvYXJkQ01EKGZpbGVQYXRoOiBzdHJpbmcpIHtcblxuXHRpZiAoIWV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZpbGUgJHtmaWxlUGF0aH0gZG9lcyBub3QgZXhpc3RgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNhbGxiYWNrID0gKGVycm9yOiBFcnJvciB8IG51bGwsIHN0ZG91dDogc3RyaW5nLCBzdGRlcnI6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIGV4ZWN1dGluZyBjb21tYW5kOiAke2Vycm9yLm1lc3NhZ2V9YCwgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCk7XG5cdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBleGVjdXRpbmcgY29tbWFuZDogJHtlcnJvci5tZXNzYWdlfWApO1xuXHRcdFx0cmV0dXJuO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnZGFyd2luJykge1xuXHRcdC8vIFx1ODlFM1x1NTFCM1x1NjVCOVx1Njg0ODE6IFx1NEYxQVx1OEMwM1x1NTFGQUZpbmRlclx1RkYwQ1x1NEVBN1x1NzUxRlx1NzdBQ1x1OTVGNFx1NzY4NFx1N0E5N1x1NTNFM1x1RkYwQ1x1NEY0Nlx1NjYyRlx1OEJFNVx1NTkwRFx1NTIzNlx1NjRDRFx1NEY1Q1x1NUI4Q1x1NTE2OFx1NjYyRlx1N0NGQlx1N0VERlx1N0VBN1x1NTIyQlx1NzY4NFx1RkYwQ1x1NkNBMVx1NjcwOVx1NEVGQlx1NEY1NVx1OTY1MFx1NTIzNlxuXHRcdGV4ZWNTeW5jKGBvcGVuIC1SIFwiJHtmaWxlUGF0aH1cImApO1xuICAgICAgICBleGVjU3luYyhgb3Nhc2NyaXB0IC1lICd0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiIHRvIGtleXN0cm9rZSBcImNcIiB1c2luZyBjb21tYW5kIGRvd24nYCk7XG4gICAgICAgIGV4ZWNTeW5jKGBvc2FzY3JpcHQgLWUgJ3RlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCIgdG8ga2V5c3Ryb2tlIFwid1wiIHVzaW5nIGNvbW1hbmQgZG93bidgKTtcblx0XHRleGVjU3luYyhgb3BlbiAtYSBcIk9ic2lkaWFuLmFwcFwiYCk7XG5cblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gXHU2RDRCXHU4QkQ1XHU1MjA3XHU2MzYyXHU4RjkzXHU1MTY1XHU2Q0Q1XHU2NUI5XHU2ODQ4OiBcdTZBMjFcdTYyREZTaGlmdFx1OTUyRVx1NjMwOVx1NEUwQlx1RkYwQ1x1NEY0Nlx1NjYyRlx1NTkzMVx1OEQyNVx1NEU4NlxuXHRcdC8vIGV4ZWNTeW5jKGBvc2FzY3JpcHQgLWUgJ3RlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCIgdG8ga2V5IGRvd24gc2hpZnQnYCk7XG5cdFx0Ly8gZXhlY1N5bmMoYG9zYXNjcmlwdCAtZSAnZGVsYXkgMC4wNSdgKTtcblx0XHQvLyBleGVjU3luYyhgb3Nhc2NyaXB0IC1lICd0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiIHRvIGtleSB1cCBzaGlmdCdgKTtcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gXHU1M0U2XHU0RTAwXHU3OUNEXHU4OUUzXHU1MUIzXHU2NUI5XHU2ODQ4XHVGRjBDXHU0RTBEXHU0RjFBXHU4QzAzXHU1MUZBRmluZGVyXHVGRjBDXHU0RjQ2XHU2NjJGXHU1OTBEXHU1MjM2XHU3Njg0XHU2NTg3XHU0RUY2XHU2NUUwXHU2Q0Q1XHU3Qzk4XHU4RDM0XHU1MjMwd29yZFx1NjIxNlx1ODAwNVx1NUZBRVx1NEZFMVx1NEUyRFxuXHRcdC8vIGNvbnN0IGFwcGxlU2NyaXB0ID0gYFxuXHRcdC8vIFx0b24gcnVuIGFyZ3Ncblx0XHQvLyBcdFx0c2V0IHRoZSBjbGlwYm9hcmQgdG8gUE9TSVggZmlsZSAoZmlyc3QgaXRlbSBvZiBhcmdzKVxuXHRcdC8vIFx0ZW5kXG5cdFx0Ly8gXHRgO1xuXHRcdC8vIGV4ZWMoYG9zYXNjcmlwdCAtZSAnJHthcHBsZVNjcmlwdH0nIFwiJHtmaWxlUGF0aH1cImAsIGNhbGxiYWNrKTtcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICdsaW51eCcpIHtcblx0XHQvLyBcdTc2RUVcdTUyNERcdTY1QjlcdTY4NDhcblx0XHQvLyB4Y2xpcCAtc2VsZWN0aW9uIGNsaXBib2FyZCAtdCAkKGZpbGUgLS1taW1lLXR5cGUgLWIgL3BhdGgvdG8veW91ci9maWxlKSAtaSAvcGF0aC90by95b3VyL2ZpbGVcbiAgICAgICAgLy8gZXhlYyhgeGNsaXAgLXNlbGVjdGlvbiBjIDwgJHtmaWxlUGF0aH1gLCBjYWxsYmFjayk7XG5cdFx0Ly8gZXhlYyhgeGNsaXAgLXNlbGVjdGlvbiBjbGlwYm9hcmQgLXQgJChmaWxlIC0tbWltZS10eXBlIC1iIFwiJHtmaWxlUGF0aH1cIikgLWkgXCIke2ZpbGVQYXRofVwiYCwgY2FsbGJhY2spO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xuICAgICAgICBleGVjKGBwb3dlcnNoZWxsIC1jb21tYW5kIFwiU2V0LUNsaXBib2FyZCAtUGF0aCAnJHtmaWxlUGF0aH0nXCJgLCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5jb25zdCBmaW5kTGlua0luTGluZSA9IChmaWxlX25hbWU6IHN0cmluZywgbGluZV90ZXh0OiBzdHJpbmcpID0+e1xuXHRjb25zdCBmaWxlX25hbWVfbWRsaW5rID0gZmlsZV9uYW1lLnJlcGxhY2UoLyAvZywgJyUyMCcpO1xuXHRsZXQgcmVnV2lraUxpbmsgPSAvXFwhXFxbXFxbW15cXFtcXF1dKj9cXF1cXF0vZztcbiAgICBsZXQgcmVnTWRMaW5rID0gL1xcIVxcW1teXFxbXFxdXSo/XFxdXFwoW15cXHNcXClcXChcXFtcXF1cXHtcXH0nXSpcXCkvZztcblx0cHJpbnQoJ3RhcmdldF9uYW1lIChXSUtJL01EKTonLCBmaWxlX25hbWUsIGZpbGVfbmFtZV9tZGxpbmspXG5cblx0Ly8gY29uc29sZS5sb2coJ3NlYXJjaCBpbiBsaW5lX3RleHQ6JywgbGluZV90ZXh0KVxuXHRsZXQgc2VhcmNoX3Jlc3VsdDogW2Zyb206bnVtYmVyLCB0bzpudW1iZXJdW10gPSBbXVxuXHRpZiAobGluZV90ZXh0LmluY2x1ZGVzKGZpbGVfbmFtZSkpe1xuXHRcdHdoaWxlKHRydWUpe1xuXHRcdFx0bGV0IG1hdGNoID0gcmVnV2lraUxpbmsuZXhlYyhsaW5lX3RleHQpO1xuXHRcdFx0aWYoIW1hdGNoKSBicmVhaztcblx0XHRcdGxldCBtYXRjaGVkX2xpbmsgPSBtYXRjaFswXTtcblx0XHRcdHByaW50KCdtYXRjaGVkX2xpbms6JywgbWF0Y2hlZF9saW5rKVxuXHRcdFx0cHJpbnQoJ21hdGNoZWRfbGluay5pbmNsdWRlcyhmaWxlX25hbWUpJywgbWF0Y2hlZF9saW5rLmluY2x1ZGVzKGZpbGVfbmFtZSkpXG5cdFx0XHRpZiAobWF0Y2hlZF9saW5rLmluY2x1ZGVzKGZpbGVfbmFtZSkpe1xuXHRcdFx0XHRzZWFyY2hfcmVzdWx0LnB1c2goW21hdGNoLmluZGV4LCBtYXRjaC5pbmRleCttYXRjaGVkX2xpbmsubGVuZ3RoXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKGxpbmVfdGV4dC5pbmNsdWRlcyhmaWxlX25hbWVfbWRsaW5rKSl7XG5cdFx0d2hpbGUodHJ1ZSl7XG5cdFx0XHRsZXQgbWF0Y2ggPSByZWdNZExpbmsuZXhlYyhsaW5lX3RleHQpO1xuXHRcdFx0aWYoIW1hdGNoKSBicmVhaztcblx0XHRcdGxldCBtYXRjaGVkX2xpbmsgPSBtYXRjaFswXTtcblx0XHRcdHByaW50KCdtYXRjaGVkX2xpbms6JywgbWF0Y2hlZF9saW5rKVxuXHRcdFx0cHJpbnQoJ21hdGNoZWRfbGluay5pbmNsdWRlcyhmaWxlX25hbWVfbWRsaW5rKScsIG1hdGNoZWRfbGluay5pbmNsdWRlcyhmaWxlX25hbWVfbWRsaW5rKSlcblx0XHRcdGlmIChtYXRjaGVkX2xpbmsuaW5jbHVkZXMoZmlsZV9uYW1lX21kbGluaykpe1xuXHRcdFx0XHRzZWFyY2hfcmVzdWx0LnB1c2goW21hdGNoLmluZGV4LCBtYXRjaC5pbmRleCttYXRjaGVkX2xpbmsubGVuZ3RoXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBzZWFyY2hfcmVzdWx0O1xufVxuXG5cbmV4cG9ydCBjb25zdCBoYW5kbGVyUmVuYW1lRmlsZSA9IChcblx0RmlsZUJhc2VOYW1lOiBzdHJpbmcsXG5cdGN1cnJlbnRNZDogVEZpbGUsXG5cdHBsdWdpbjogQXR0YWNoRmxvd1BsdWdpblxuKSA9PiB7XG5cdGNvbnN0IHRhcmdldF9maWxlID0gZ2V0RmlsZUJ5QmFzZU5hbWUoY3VycmVudE1kLCBGaWxlQmFzZU5hbWUpIGFzIFRGaWxlO1xuXHRsZXQgcGF0aCA9IHRhcmdldF9maWxlLnBhdGg7XG5cdGxldCBuYW1lID0gdGFyZ2V0X2ZpbGUubmFtZTtcblx0bGV0IHRhcmdldF9mb2xkZXIgPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0aC1uYW1lLmxlbmd0aCk7XG5cdGxldCBmaWxlX3R5cGUgPSBuYW1lLnNwbGl0KCcuJykucG9wKCkgYXMgc3RyaW5nO1xuXHRuZXcgUmVuYW1lTW9kYWwocGx1Z2luLmFwcCwgXG5cdFx0dGFyZ2V0X2ZvbGRlciwgXG5cdFx0bmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5sZW5ndGgtZmlsZV90eXBlLmxlbmd0aC0xKSwgXG5cdFx0ZmlsZV90eXBlLCBcblx0XHQocmVzdWx0KSA9PiB7XG5cdFx0aWYgKCFyZXN1bHQpIHJldHVybjtcblx0XHRpZihyZXN1bHQ9PXBhdGgpIHJldHVybjtcblx0XHRhcHAudmF1bHQuYWRhcHRlci5leGlzdHMocmVzdWx0KVxuXHRcdC50aGVuKChleGlzdHMpID0+IHtcblx0XHRcdGlmKGV4aXN0cykge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBGYWlsIHRvIHJlbmFtZSBmb3IgdGhlcmUgYWxyZWF5IGV4aXN0IGZpbGUgJHtyZXN1bHR9YCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwbHVnaW4uYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUodGFyZ2V0X2ZpbGUsIGAke3Jlc3VsdH1gKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSkub3BlbigpO1xufVxuXG5cblxuZXhwb3J0IGNsYXNzIFJlbmFtZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRyZXN1bHQ6IHN0cmluZztcblx0Zm9sZGVyOiBzdHJpbmc7XG5cdG5hbWU6IHN0cmluZztcblx0ZmlsZXR5cGU6IHN0cmluZztcblx0b25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZDtcbiAgXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmb2xkZXI6c3RyaW5nLCBuYW1lOnN0cmluZywgZmlsZXR5cGU6c3RyaW5nLCBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkKSB7XG5cdCAgc3VwZXIoYXBwKTtcblx0ICB0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG5cdCAgdGhpcy5mb2xkZXIgPSBmb2xkZXI7XG5cdCAgdGhpcy5uYW1lID0gbmFtZTtcblx0ICB0aGlzLmZpbGV0eXBlID0gZmlsZXR5cGU7XG5cdH1cbiAgXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRsZXQgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiUmVuYW1lOlwiKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLm5hbWUpXG5cdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnJlc3VsdCA9IGAke3RoaXMuZm9sZGVyfSR7dmFsdWV9LiR7dGhpcy5maWxldHlwZX1gO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIFx1NEY3RiBET00gXHU2NzA5XHU4REIzXHU1OTFGXHU3Njg0XHU2NUY2XHU5NUY0XHU2RTMyXHU2N0QzXHU4ODY4XHU1MzU1XHU1MTQzXHU3RDIwXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRsZXQgaW5wdXRCb3ggPSBzZXR0aW5nLnNldHRpbmdFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwidGV4dFwiXScpO1xuXHRcdFx0aWYgKGlucHV0Qm94ICYmIGlucHV0Qm94LnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0bGV0IGZvbGRlcl9pbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuXHRcdFx0XHRmb2xkZXJfaW5kaWNhdG9yLmlubmVyVGV4dCA9IGAke3RoaXMuZm9sZGVyfWA7XG5cdFx0XHRcdGZvbGRlcl9pbmRpY2F0b3Iuc3R5bGUubWFyZ2luUmlnaHQgPSAnNHB4JzsgIC8vIFx1NTNFRlx1NEVFNVx1NjgzOVx1NjM2RVx1OTcwMFx1ODk4MVx1OEMwM1x1NjU3NFx1OTVGNFx1OERERFxuXHRcdFx0XHRpbnB1dEJveC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShmb2xkZXJfaW5kaWNhdG9yLCBpbnB1dEJveCk7XG5cblx0XHRcdFx0bGV0IGZpbGVfdHlwZV9pbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuXHRcdFx0XHRmaWxlX3R5cGVfaW5kaWNhdG9yLmlubmVyVGV4dCA9IGAuJHt0aGlzLmZpbGV0eXBlfWA7XG5cdFx0XHRcdGZpbGVfdHlwZV9pbmRpY2F0b3Iuc3R5bGUubWFyZ2luTGVmdCA9ICc0cHgnOyAgLy8gXHU1M0VGXHU0RUU1XHU2ODM5XHU2MzZFXHU5NzAwXHU4OTgxXHU4QzAzXHU2NTc0XHU5NUY0XHU4REREXG5cdFx0XHRcdGlucHV0Qm94LmFmdGVyKGZpbGVfdHlwZV9pbmRpY2F0b3IpO1xuXG5cdFx0XHRcdC8vIFx1ODNCN1x1NTNENlx1OEJCRVx1N0Y2RVx1NzU0Q1x1OTc2Mlx1NzY4NFx1NEUwQVx1N0VBN1x1NTE0M1x1N0QyMCBcblx0XHRcdFx0bGV0IHBhcmVudEVsID0gc2V0dGluZy5zZXR0aW5nRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0aWYgKHBhcmVudEVsKSB7XG5cdFx0XHRcdFx0Ly8gXHU0RjdGXHU1MTc2XHU1QjUwXHU1MTQzXHU3RDIwXHU1QzQ1XHU0RTJEXHU2NjNFXHU3OTNBXG5cdFx0XHRcdFx0cGFyZW50RWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRcdFx0XHRwYXJlbnRFbC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIFx1OEY2Q1x1NjM2MmlucHV0Qm94XHU3QzdCXHU1NzhCXHU1RTc2XHU5MDA5XHU2MkU5XHU4RjkzXHU1MTY1XHU2ODQ2XHU3Njg0XHU2NTg3XHU2NzJDXG5cdFx0XHRcdGxldCBpbnB1dEVsZW0gPSBpbnB1dEJveCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXHRcdFx0XHRpbnB1dEVsZW0uc2VsZWN0KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiXHU2NUUwXHU2Q0Q1XHU2MjdFXHU1MjMwXHU2NTg3XHU2NzJDXHU4RjkzXHU1MTY1XHU2ODQ2XCIpO1xuXHRcdFx0fVxuXHRcdH0sIDApO1xuXG5cdFx0Ly8gRW50ZXIgdG8gc3VibWl0XG5cdFx0dGhpcy5zY29wZS5yZWdpc3RlcihbXSwgXCJFbnRlclwiLCAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZ0LmlzQ29tcG9zaW5nKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdHRoaXMub25TdWJtaXQodGhpcy5yZXN1bHQpO1xuXHRcdH0pO1xuXHR9XG4gIFxuXHRvbkNsb3NlKCkge1xuXHQgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0ICBjb250ZW50RWwuZW1wdHkoKTtcblx0fVxuICB9IiwgImltcG9ydCB7IE5vdGljZSwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBBdHRhY2hGbG93UGx1Z2luIGZyb20gXCJzcmMvbWFpblwiO1xuY29uc3QgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCA9IDE4MDA7XG4vKipcbiAqIERlbGV0ZSBhdHRhY2htZW50XG4gKiBAcGFyYW0gZmlsZVxuICovXG5leHBvcnQgY29uc3QgZGVsZXRlRmlsZSA9IGFzeW5jIChcblx0ZmlsZTogVEZpbGUgfCBURm9sZGVyLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW5cbikgPT4ge1xuXHRjb25zdCBkZWxldGVPcHRpb24gPSBwbHVnaW4uc2V0dGluZ3MuZGVsZXRlT3B0aW9uO1xuXHR0cnkge1xuXHRcdGlmIChkZWxldGVPcHRpb24gPT09IFwiLnRyYXNoXCIpIHtcblx0XHRcdGF3YWl0IGFwcC52YXVsdC50cmFzaChmaWxlLCBmYWxzZSk7XG5cdFx0fSBlbHNlIGlmIChkZWxldGVPcHRpb24gPT09IFwic3lzdGVtLXRyYXNoXCIpIHtcblx0XHRcdGF3YWl0IGFwcC52YXVsdC50cmFzaChmaWxlLCB0cnVlKTtcblx0XHR9IGVsc2UgaWYgKGRlbGV0ZU9wdGlvbiA9PT0gXCJwZXJtYW5lbnRcIikge1xuXHRcdFx0YXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShmaWxlKTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0bmV3IE5vdGljZShcIkZhaWxkIHRvIGRlbGV0ZSB0aGUgZmlsZS9mb2xkZXIgIVwiLCBTVUNDRVNTX05PVElDRV9USU1FT1VUKTtcblx0fVxufTtcbi8qKlxuICogRGVsZXRlIG5vdGVcbiAqIEBwYXJhbSBmaWxlXG4gKi9cbi8qIGV4cG9ydCBjb25zdCBkZWxldGVOb3RlID0gKGZpbGU6IFRGaWxlKSA9PiB7XG5cdC8vIEB0cy1pZ25vcmVcblx0YXBwLmZpbGVNYW5hZ2VyLnByb21wdEZvckRlbGV0aW9uKGZpbGUpO1xufTsgKi9cbiIsICJpbXBvcnQgQXR0YWNoRmxvd1BsdWdpbiBmcm9tIFwic3JjL21haW5cIjtcbmltcG9ydCB7IGRlbGV0ZUFsbEF0dGFjaHMgfSBmcm9tIFwic3JjL29wdGlvbnMvZGVsZWxlQWxsQXR0YWNoc0luVGhlTm90ZVwiO1xuXG5leHBvcnQgY29uc3QgYWRkQ29tbWFuZCA9IChteVBsdWdpbjogQXR0YWNoRmxvd1BsdWdpbikgPT4ge1xuXHRteVBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRpZDogXCJjbGVhci1hbGwtYXR0YWNobWVudHMtaW4tY3VycmVudC1maWxlXCIsXG5cdFx0bmFtZTogXCJjbGVhciBhbGwgYXR0YWNobWVudHMgaW4gY3VycmVudCBmaWxlXCIsXG5cdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdGRlbGV0ZUFsbEF0dGFjaHMobXlQbHVnaW4pO1xuXHRcdH0sXG5cdH0pO1xufTtcbiIsICJpbXBvcnQgQXR0YWNoRmxvd1BsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgc2V0RGVidWcgfSBmcm9tICcuL3V0aWwnO1xuXG5cblxuZXhwb3J0IGludGVyZmFjZSBBdHRhY2hGbG93U2V0dGluZ3Mge1xuICAgIGRlbGV0ZU9wdGlvbjogc3RyaW5nO1xuICAgIGxvZ3NNb2RhbDogYm9vbGVhbjtcbiAgICBkcmFnUmVzaXplOiBib29sZWFuO1xuICAgIGRlYnVnOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQXR0YWNoRmxvd1NldHRpbmdzID0ge1xuICAgIGRlbGV0ZU9wdGlvbjogJy50cmFzaCcsXG4gICAgbG9nc01vZGFsOiB0cnVlLFxuICAgIGRyYWdSZXNpemU6IGZhbHNlLFxuICAgIGRlYnVnOiBmYWxzZSxcbn07XG5cblxuZXhwb3J0IGNsYXNzIEF0dGFjaEZsb3dTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXG4gICAgcGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luO1xuXG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdBdHRhY2hGbG93IHBsdWdpbiBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVsZXRlZCBBdHRhY2htZW50IERlc3RpbmF0aW9uJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZWxlY3Qgd2hlcmUgeW91IHdhbnQgQXR0YWNobWVudHMgdG8gYmUgbW92ZWQgb25jZSB0aGV5IGFyZSBkZWxldGVkJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ3Blcm1hbmVudCcsICdEZWxldGUgUGVybWFuZW50bHknKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJy50cmFzaCcsICdNb3ZlIHRvIE9ic2lkaWFuIFRyYXNoJyk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdzeXN0ZW0tdHJhc2gnLCAnTW92ZSB0byBTeXN0ZW0gVHJhc2gnKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVPcHRpb24pO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlT3B0aW9uID0gb3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJEcmFnIFRvIFJlc2l6ZSBJbWFnZXNcIilcblx0XHRcdC5zZXREZXNjKFwiXHU2MkQ2XHU2MkZEXHU4QzAzXHU2NTc0XHU1NkZFXHU3MjQ3XHU1OTI3XHU1QzBGXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRyYWdSZXNpemUpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZHJhZ1Jlc2l6ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJQcmludCBEZWJ1ZyBJbmZvcm1hdGlvblwiKVxuXHRcdFx0LnNldERlc2MoXCJcdTYzQTdcdTUyMzZcdTUzRjBcdThGOTNcdTUxRkFcdThDMDNcdThCRDVcdTRGRTFcdTYwNkZcIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWcpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldERlYnVnKHZhbHVlKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG4gICAgfVxufVxuIiwgIi8qKlxuICogZ2V0IG1vdXNlIGV2ZW50IHRhcmdldFxuICogQHBhcmFtIGV2ZW50IFxuICovXG5leHBvcnQgY29uc3QgZ2V0TW91c2VFdmVudFRhcmdldCA9IChldmVudDogTW91c2VFdmVudCk6IEhUTUxFbGVtZW50ID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuIiwgImltcG9ydCB7IE1vZGFsLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEF0dGFjaEZsb3dQbHVnaW4gZnJvbSBcInNyYy9tYWluXCI7XG5pbXBvcnQge1xuXHRkZWxldGVBbGxBdHRhY2hzLFxuXHRnZXRSZWZlbmNlZExpbmtDb3VudCxcbn0gZnJvbSBcInNyYy9vcHRpb25zL2RlbGVsZUFsbEF0dGFjaHNJblRoZU5vdGVcIjtcbmltcG9ydCB7IGRlbGV0ZUZpbGUgfSBmcm9tIFwic3JjL3V0aWxzL2RlbGV0ZUZpbGVcIjtcblxuZXhwb3J0IGNsYXNzIERlbGV0ZUFsbExvZ3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0bm90ZTogVEZpbGU7XG5cdG15UGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luO1xuXHRjb25zdHJ1Y3Rvcihub3RlOiBURmlsZSwgbXlQbHVnaW46IEF0dGFjaEZsb3dQbHVnaW4pIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMubm90ZSA9IG5vdGU7XG5cdFx0dGhpcy5teVBsdWdpbiA9IG15UGx1Z2luO1xuXHR9XG5cdGdldExvZygpOiBzdHJpbmcge1xuXHRcdGNvbnN0IHJlZmVyZW5jZU1lc3NhZ2UgPSBgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiR7dGhpcy5ub3RlLmJhc2VuYW1lfS5tZFwiP1xcblxcbkl0IHdpbGwgYmUgbW92ZWQgdG8geW91ciAke3RoaXMubXlQbHVnaW4uc2V0dGluZ3MuZGVsZXRlT3B0aW9ufS5gO1xuXHRcdHJldHVybiByZWZlcmVuY2VNZXNzYWdlO1xuXHR9XG5cdHNob3dMb2dzKCkge1xuXHRcdGNvbnN0IGxvZ3MgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiKTtcblx0XHRsb2dzLmFkZENsYXNzKFwiYXR0YWNobWVudC1mbG93LWxvZ1wiKTtcblx0XHRsb2dzLnNldFRleHQodGhpcy5nZXRMb2coKSk7XG5cdH1cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnN0IG15TW9kYWwgPSB0aGlzO1xuXHRcdGNvbnN0IGhlYWRlcldyYXBwZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIik7XG5cdFx0aGVhZGVyV3JhcHBlci5hZGRDbGFzcyhcImF0dGFjaG1lbnQtZmxvdy1jZW50ZXItd3JhcHBlclwiKTtcblx0XHR0aGlzLnNob3dMb2dzKCk7XG5cdFx0Y29uc3QgcmVmZXJlbmNlZE1lc3NhZ2VXcmFwcGVyID0gY29udGVudEVsLmNyZWF0ZUVsKFwic3BhblwiKTtcblx0XHRyZWZlcmVuY2VkTWVzc2FnZVdyYXBwZXIuc3R5bGUuY29sb3IgPSBcInJlZFwiO1xuXHRcdGNvbnN0IHJlZmVyZW5jZWRNZXNzYWdlID0gYFRoZXJlIGFyZShpcykgY3VycmVudGx5ICBbJHtnZXRSZWZlbmNlZExpbmtDb3VudCgpfV0gIG5vbi1tdWx0aS1yZWZlcmVuY2VkIGxpbmsocykgcG9pbnRpbmcgdG8gdGhpcyBub3RlLmA7XG5cdFx0cmVmZXJlbmNlZE1lc3NhZ2VXcmFwcGVyLmFwcGVuZChyZWZlcmVuY2VkTWVzc2FnZSk7XG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Y29uc3QgYnV0dG9uV3JhcHBlciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIpIGFzIEhUTUxEaXZFbGVtZW50O1xuXHRcdGJ1dHRvbldyYXBwZXIuYWRkQ2xhc3MoXCJhdHRhY2htZW50LWZsb3ctY2VudGVyLXdyYXBwZXJcIik7XG5cdFx0Y29uc3QgaGVhZGVyRWwgPSBoZWFkZXJXcmFwcGVyLmNyZWF0ZUVsKFwiaDFcIiwge1xuXHRcdFx0dGV4dDogXCJEZWxldGUgdGhlIGZpbGUgYW5kIGl0cyBhbGwgYXR0YWNobWVudHMgLSBsb2dzIFwiLFxuXHRcdH0pO1xuXHRcdGhlYWRlckVsLmFkZENsYXNzKFwibW9kYWwtdGl0bGVcIik7XG5cdFx0dGhpcy5zaG93Q29uZmlybUJ1dHRvbihidXR0b25XcmFwcGVyLCBteU1vZGFsKTtcblx0XHR0aGlzLnNob3dDYW5jZWxCdG4oYnV0dG9uV3JhcHBlciwgbXlNb2RhbCk7XG5cdH1cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRzaG93Q2FuY2VsQnRuKGJ1dHRvbldyYXBwZXI6IEhUTUxEaXZFbGVtZW50LCBteU1vZGFsOiBNb2RhbCkge1xuXHRcdC8vIC0tLS0tLS0tY2xvc2VCdXR0b24tLS0tLS0tLVxuXHRcdGNvbnN0IGNsb3NlQnV0dG9uID0gYnV0dG9uV3JhcHBlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNsb3NlQnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgXCJDYW5jZWwgdGhlIG9wZXJhdGlvblwiKTtcblx0XHRjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0bXlNb2RhbC5jbG9zZSgpO1xuXHRcdH0pO1xuXHR9XG5cdHNob3dDb25maXJtQnV0dG9uKGJ1dHRvbldyYXBwZXI6IEhUTUxEaXZFbGVtZW50LCBteU1vZGFsOiBNb2RhbCkge1xuXHRcdGNvbnN0IHJlbW92ZUxpbmtCdXR0b24gPSBidXR0b25XcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ29uZmlybVwiLFxuXHRcdH0pO1xuXHRcdHJlbW92ZUxpbmtCdXR0b24uc2V0QXR0cmlidXRlKFxuXHRcdFx0XCJhcmlhLWxhYmVsXCIsXG5cdFx0XHRcIkNvbnRpbnVlIHRvIGRlbGV0ZSBjdXJyZW50IGZpbGUgYW5kIGl0cyBhbGwgbm9uLW11bHRpLXJlZmVyZW5jZWQgYXR0YWNobWVudHNcIlxuXHRcdCk7XG5cdFx0cmVtb3ZlTGlua0J1dHRvbi5hZGRDbGFzcyhcIm1vZC13YXJuaW5nXCIpO1xuXHRcdHJlbW92ZUxpbmtCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcblx0XHRcdGRlbGV0ZUZpbGUodGhpcy5ub3RlLCB0aGlzLm15UGx1Z2luKTtcblx0XHRcdGRlbGV0ZUFsbEF0dGFjaHModGhpcy5teVBsdWdpbik7XG5cdFx0XHRteU1vZGFsLmNsb3NlKCk7XG5cdFx0fSk7XG5cdH1cbn1cbiIsICIvLyBUaGlzIGZpbGUgaXMgY29waWVkIGZyb20gcmVwbzogaHR0cHM6Ly9naXRodWIuY29tL05vbWFyQ3ViL29ic2lkaWFuLWNvcHktdXJsLWluLXByZXZpZXdcblxuLy8gTUlUIExpY2Vuc2Vcbi8vIENvcHlyaWdodCAoYykgMjAyMiBOb21hckN1YlxuXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuLy8gY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuLy8gU09GVFdBUkUuXG5cbmltcG9ydCB7IEFwcCwgRWRpdG9yLCBFZGl0b3JQb3NpdGlvbiwgRmlsZVN5c3RlbUFkYXB0ZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuY29uc3QgbG9hZEltYWdlQmxvYlRpbWVvdXQgPSA1MDAwO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVsZWN0cm9uV2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBXRUJWSUVXX1NFUlZFUl9VUkw6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckludGVybmFsQXBpIGV4dGVuZHMgRWRpdG9yIHtcbiAgICBwb3NBdE1vdXNlKGV2ZW50OiBNb3VzZUV2ZW50KTogRWRpdG9yUG9zaXRpb247XG4gICAgZ2V0Q2xpY2thYmxlVG9rZW5BdChwb3NpdGlvbjogRWRpdG9yUG9zaXRpb24pOiB7XG4gICAgICAgIHRleHQ6IHN0cmluZ1xuICAgIH0gfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVTeXN0ZW1BZGFwdGVyV2l0aEludGVybmFsQXBpIGV4dGVuZHMgRmlsZVN5c3RlbUFkYXB0ZXIge1xuICAgIG9wZW4ocGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFwcFdpdGhEZXNrdG9wSW50ZXJuYWxBcGkgZXh0ZW5kcyBBcHAge1xuICAgIG9wZW5XaXRoRGVmYXVsdEFwcChwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIHNob3dJbkZvbGRlcihwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExpc3RlbmVyIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICh0aGlzOiBEb2N1bWVudCwgZXY6IEV2ZW50KTogYW55O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2l0aFRpbWVvdXQ8VD4obXM6IG51bWJlciwgcHJvbWlzZTogUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xuICAgIGNvbnN0IHRpbWVvdXQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgICAgICAgICAgcmVqZWN0KGB0aW1lZCBvdXQgYWZ0ZXIgJHttc30gbXNgKVxuICAgICAgICB9LCBtcylcbiAgICB9KVxuICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICBwcm9taXNlLFxuICAgICAgICB0aW1lb3V0XG4gICAgXSkgYXMgUHJvbWlzZTxUPlxufVxuXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZVxuLy8gb3B0aW9uPzogaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaHRtbC10by1pbWFnZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRJbWFnZUJsb2IoaW1nU3JjOiBzdHJpbmcpOiBQcm9taXNlPEJsb2I+IHtcbiAgICBjb25zdCBsb2FkSW1hZ2VCbG9iQ29yZSA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEJsb2I+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWFnZS5jcm9zc09yaWdpbiA9IFwiYW5vbnltb3VzXCI7XG4gICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDtcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikhO1xuICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xuICAgICAgICAgICAgICAgIGNhbnZhcy50b0Jsb2IoKGJsb2I6IEJsb2IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShibG9iKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbWFnZS5vbmVycm9yID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKGltYWdlLnNyYywgeyBcIm1vZGVcIjogXCJuby1jb3JzXCIgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJwb3NzaWJsZSBDT1JTIHZpb2xhdGlvbiwgZmFsbGluZyBiYWNrIHRvIGFsbE9yaWdpbnMgcHJveHlcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nbnVucy9hbGxPcmlnaW5zXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBsb2FkSW1hZ2VCbG9iKGBodHRwczovL2FwaS5hbGxvcmlnaW5zLndpbi9yYXc/dXJsPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGltZ1NyYyl9YCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmxvYik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGltYWdlLnNyYyA9IGltZ1NyYztcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gd2l0aFRpbWVvdXQobG9hZEltYWdlQmxvYlRpbWVvdXQsIGxvYWRJbWFnZUJsb2JDb3JlKCkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvbkVsZW1lbnQoXG4gICAgZWw6IERvY3VtZW50LFxuICAgIGV2ZW50OiBrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwLFxuICAgIHNlbGVjdG9yOiBzdHJpbmcsXG4gICAgbGlzdGVuZXI6IExpc3RlbmVyLFxuICAgIG9wdGlvbnM/OiB7IGNhcHR1cmU/OiBib29sZWFuOyB9XG4pIHtcbiAgICBlbC5vbihldmVudCwgc2VsZWN0b3IsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4gZWwub2ZmKGV2ZW50LCBzZWxlY3RvciwgbGlzdGVuZXIsIG9wdGlvbnMpO1xufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUE4RTs7O0FDQTlFLHVCQUF1Qzs7O0FDQ3ZDLHNCQUE0RDtBQUk1RCwyQkFBK0I7QUFDL0IsZ0JBQTJCO0FBSzNCLHVCQUFvQztBQUU3QixJQUFJLFFBQWdCO0FBQzNCLElBQU0seUJBQXlCO0FBRXhCLElBQU0sUUFBTSxDQUFDLFlBQWtCLG1CQUF5QjtBQUMzRCxNQUFJLE9BQU87QUFDUCxZQUFRLElBQUksU0FBUyxHQUFHLGNBQWM7QUFBQSxFQUMxQztBQUNKO0FBRU8sa0JBQWtCLE9BQWdCO0FBQ3JDLFVBQVE7QUFDWjtBQVFPLElBQU0scUJBQXFCLENBQ2pDLGFBQ0EsY0FDeUM7QUFFekMsUUFBTSxnQkFBZ0IsSUFBSSxjQUFjO0FBQ3hDLE1BQUk7QUFFSixNQUFJLFNBQXlCO0FBQUEsSUFDNUIsT0FBTztBQUFBLElBQ1AsUUFBUSxDQUFDO0FBQUEsRUFDVjtBQUNBLE1BQUksU0FBUztBQUNiLGFBQVcsQ0FBQyxRQUFRLFVBQVUsT0FBTyxRQUFRLGFBQWEsR0FBRztBQUM1RCxRQUFJLFVBQVUsU0FBUyxRQUFRO0FBQzlCLGtCQUFZLFVBQVU7QUFDdEIsYUFBTyxPQUFPLFFBQVEsU0FBUztBQUFBLElBQ2hDO0FBQ0EsZUFBVyxDQUFDLFVBQVUsT0FBTyxPQUFPLFFBQVEsS0FBSyxHQUFHO0FBQ25ELFVBQUksNENBQWEsVUFBUyxVQUFVO0FBQ25DO0FBRUEsWUFBSSxLQUFLLEdBQUc7QUFDWCxpQkFBTyxRQUFRO0FBQ2YsaUJBQU8sT0FBTyxLQUFLLE1BQU07QUFDekIsaUJBQU87QUFBQSxRQUNSO0FBQ0EsZUFBTyxPQUFPLEtBQUssTUFBTTtBQUFBLE1BQzFCO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFDQSxNQUFJLFNBQVMsR0FBRztBQUNmLFdBQU8sUUFBUTtBQUFBLEVBQ2hCLE9BQU87QUFDTixXQUFPLFFBQVE7QUFBQSxFQUNoQjtBQUNBLFNBQU87QUFDUjtBQVVPLElBQU0sb0JBQW9CLENBQ2hDLFdBQ0EsaUJBQ3VCO0FBQ3ZCLFFBQU0sZ0JBQWdCLElBQUksY0FBYztBQUN4QyxhQUFXLENBQUMsUUFBUSxVQUFVLE9BQU8sUUFBUSxhQUFhLEdBQUc7QUFDNUQsUUFBSSxVQUFVLFNBQVMsUUFBUTtBQUM5QixpQkFBVyxDQUFDLFVBQVUsT0FBTyxPQUFPLFFBQVEsS0FBSyxHQUFHO0FBR25ELFlBQUksU0FBUyxTQUFTLFlBQVksR0FBRztBQUNwQyxjQUFJO0FBQ0gsa0JBQU0sYUFDTCxJQUFJLE1BQU0sc0JBQXNCLFFBQVE7QUFDekMsZ0JBQUksc0JBQXNCLHVCQUFPO0FBQ2hDLHFCQUFPO0FBQUEsWUFDUjtBQUFBLFVBQ0QsU0FBUyxPQUFQO0FBQ0QsZ0JBQUksdUJBQU8sNEJBQTRCO0FBQ3ZDLG9CQUFRLE1BQU0sS0FBSztBQUFBLFVBQ3BCO0FBQUEsUUFDRDtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUNEO0FBU08sSUFBTSxzQkFBc0IsQ0FDbEMsTUFDQSxhQUNBLFdBQ0k7QUFDSixRQUFNLGVBQWUsT0FBTyxTQUFTO0FBQ3JDLFFBQU0sZ0JBQWdCLGtCQUFrQixJQUFJO0FBQzVDLFFBQU0sYUFBYSxvQkFBb0IsSUFBSTtBQUMzQyxNQUFJLE9BQU8sZUFBYSxRQUFRLFVBQVU7QUFDMUMsTUFBSTtBQUNILFFBQUksaUJBQWlCLFVBQVU7QUFDOUIsWUFBTSxJQUFJLE1BQU0sTUFBTSxNQUFNLEtBQUs7QUFDakMsVUFBSSx1QkFDSCxPQUFPLDhCQUNQLHNCQUNEO0FBQ0EsVUFBSSxlQUFlO0FBQ2xCLGNBQU0sSUFBSSxNQUFNLE1BQU0sWUFBWSxLQUFLO0FBQ3ZDLFlBQUksdUJBQU8sd0NBQXdDLEdBQUk7QUFBQSxNQUN4RDtBQUFBLElBQ0QsV0FBVyxpQkFBaUIsZ0JBQWdCO0FBQzNDLFlBQU0sSUFBSSxNQUFNLE1BQU0sTUFBTSxJQUFJO0FBQ2hDLFVBQUksdUJBQU8sT0FBTyw0QkFBNEIsc0JBQXNCO0FBQ3BFLFVBQUksZUFBZTtBQUNsQixjQUFNLElBQUksTUFBTSxNQUFNLFlBQVksSUFBSTtBQUN0QyxZQUFJLHVCQUFPLHdDQUF3QyxHQUFJO0FBQUEsTUFDeEQ7QUFBQSxJQUNELFdBQVcsaUJBQWlCLGFBQWE7QUFDeEMsWUFBTSxJQUFJLE1BQU0sT0FBTyxJQUFJO0FBQzNCLFVBQUksdUJBQU8sT0FBTywwQkFBMEIsc0JBQXNCO0FBQ2xFLFVBQUksZUFBZTtBQUNsQixjQUFNLElBQUksTUFBTSxPQUFPLFlBQVksSUFBSTtBQUN2QyxZQUFJLHVCQUFPLHdDQUF3QyxHQUFJO0FBQUEsTUFDeEQ7QUFBQSxJQUNEO0FBQUEsRUFDRCxTQUFTLE9BQVA7QUFDRCxZQUFRLE1BQU0sS0FBSztBQUNuQixRQUFJLHVCQUFPLDBCQUEwQixPQUFPLEtBQUssc0JBQXNCO0FBQUEsRUFDeEU7QUFDRDtBQUdPLElBQU0sb0JBQW9CLENBQ2hDLGNBQ0EsV0FDQSxRQUNBLGFBQ0EsWUFDQSxVQUNBLGVBQ0k7QUFDSixNQUFJO0FBQ0osTUFBSTtBQUNKLFFBQU0sY0FBYyxrQkFBa0IsV0FBVyxZQUFZO0FBQzdELFFBQU0sVUFBVSxtQkFBbUIsYUFBYSxTQUFTO0FBQ3pELE1BQUksUUFBUSxRQUFRO0FBQ3BCLFVBQVE7QUFBQSxTQUNGO0FBRUosMEJBQW9CLGNBQWMsUUFBUSxhQUFhLFlBQVksVUFBVSxVQUFVO0FBQ3ZGLDBCQUFvQixhQUFhLGFBQWEsTUFBTTtBQUNwRDtBQUFBLFNBQ0k7QUFBQSxTQUNBO0FBQ0osMEJBQW9CLGNBQWMsUUFBUSxhQUFhLFlBQVksVUFBVSxVQUFVO0FBRXZGLGFBQU8sUUFBUTtBQUVmLFVBQUksdUJBQU8sd0hBRVYsSUFBSTtBQUFBO0FBRUw7QUFBQTtBQUVIO0FBSU8sSUFBTSxzQkFBc0IsQ0FDbEMsZ0JBQ0EsUUFDQSxhQUNBLFlBQ0EsVUFDQSxlQUNJO0FBQ0osbUJBQWlCLGVBQWUsV0FBVyxHQUFHLElBQUksZUFBZSxVQUFVLENBQUMsSUFBRTtBQUM5RSxRQUFNLGFBQWEsT0FBTyxJQUFJLFVBQVUsb0JBQW9CLDRCQUFZO0FBQ3hFLFFBQU0sU0FBUyxXQUFXO0FBRTFCLFFBQU0sYUFBYSxPQUFPO0FBRTFCLE1BQUksY0FBYyxXQUFXLE1BQU0sSUFBSSxPQUFPLFVBQVU7QUFDeEQsTUFBSSxZQUFZLFlBQVk7QUFFNUIsTUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFXO0FBQzVCLFFBQUksUUFBUSxlQUFlLGdCQUFnQixTQUFTO0FBQ3BELFFBQUksTUFBTSxVQUFVLEdBQUU7QUFDckIsVUFBSSx1QkFBTywwREFBMEQsQ0FBQztBQUN0RTtBQUFBLElBQ0QsV0FDUSxNQUFNLFVBQVUsR0FBRTtBQUN6QixVQUFJLHVCQUFPLHVFQUF1RSxDQUFDO0FBQ25GO0FBQUEsSUFDRCxPQUNJO0FBRUgsYUFBTyxhQUFhLElBQUksRUFBQyxNQUFNLFlBQVksU0FBTyxHQUFHLElBQUksTUFBTSxHQUFHLEdBQUUsR0FBRyxFQUFDLE1BQU0sWUFBWSxTQUFPLEdBQUcsSUFBSSxNQUFNLEdBQUcsR0FBRSxDQUFDO0FBQ3BIO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFNQSxNQUFJLFdBQTBCO0FBQUEsSUFDN0IsU0FBUztBQUFBLElBQ1QsV0FBVztBQUFBLEVBQ1o7QUFFQSxNQUFJLE9BQU8sV0FBVyxVQUFVO0FBQ2hDLE1BQUksY0FBd0IsQ0FBQztBQUM3QixNQUFJLFlBQXdDLENBQUM7QUFDN0MsV0FBUyxJQUFFLFlBQVksUUFBUSxLQUFHLE9BQU8sVUFBVSxHQUFHLEtBQUk7QUFDekQsUUFBSSxhQUFZLE9BQU8sUUFBUSxJQUFFLENBQUM7QUFDbEMsUUFBSSxDQUFDLFNBQVMsTUFBTSxLQUFLLFVBQVM7QUFBRztBQUNyQyxVQUFNLFFBQVEsV0FBVyxVQUFTO0FBQ2xDLFFBQUksUUFBUSxlQUFlLGdCQUFnQixVQUFTO0FBQ3BELFFBQUksTUFBTSxTQUFTLEdBQUU7QUFDcEIsa0JBQVksS0FBSyxHQUFHLElBQUksTUFBTSxNQUFNLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNuRCxnQkFBVSxLQUFLLEdBQUcsS0FBSztBQUFBLElBQ3hCO0FBQUEsRUFDRDtBQUVBLFdBQVMsSUFBRSxZQUFZLFNBQU8sR0FBRyxLQUFHLEdBQUcsS0FBSTtBQUMxQyxRQUFJLGFBQVksT0FBTyxRQUFRLElBQUUsQ0FBQztBQUNsQyxRQUFJLENBQUMsU0FBUyxNQUFNLEtBQUssVUFBUztBQUFHO0FBQ3JDLFVBQU0sUUFBUSxXQUFXLFVBQVM7QUFDbEMsUUFBSSxRQUFRLGVBQWUsZ0JBQWdCLFVBQVM7QUFDcEQsUUFBSSxNQUFNLFNBQVMsR0FBRTtBQUNwQixrQkFBWSxLQUFLLEdBQUcsSUFBSSxNQUFNLE1BQU0sTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ25ELGdCQUFVLEtBQUssR0FBRyxLQUFLO0FBQUEsSUFDeEI7QUFBQSxFQUNEO0FBRUEsTUFBSSxVQUFVLFVBQVUsR0FBRTtBQUN6QixRQUFJLHVCQUFPLDRDQUE0QyxxQ0FBcUMsQ0FBQztBQUM3RjtBQUFBLEVBQ0QsV0FDUSxVQUFVLFVBQVUsR0FBRTtBQUM3QixRQUFJLHVCQUFPLHNDQUFzQyxvQ0FBb0MsQ0FBQztBQUN0RjtBQUFBLEVBQ0QsT0FDSTtBQUNILFdBQU8sYUFBYSxJQUFJLEVBQUMsTUFBTSxZQUFZLEtBQUcsR0FBRyxJQUFJLFVBQVUsR0FBRyxHQUFFLEdBQUcsRUFBQyxNQUFNLFlBQVksS0FBRyxHQUFHLElBQUksVUFBVSxHQUFHLEdBQUUsQ0FBQztBQUFBLEVBQ3JIO0FBRUEsU0FBTyxNQUFNO0FBQ2Q7QUFHTyxJQUFNLGtCQUFrQixDQUM5QixjQUNBLFdBQ0EsV0FDSTtBQUNKLFFBQU0sT0FBTyxrQkFBa0IsV0FBVyxZQUFZO0FBQ3RELFFBQU0sV0FBWSxLQUFLLE1BQU0sUUFBZ0I7QUFDN0MsUUFBTSxlQUFlLFdBQVcsTUFBTSxLQUFLO0FBRTNDLE1BQUc7QUFDRiwyQkFBdUIsWUFBWTtBQUNuQyxRQUFJLHVCQUFPLHlCQUF5QixzQkFBc0I7QUFBQSxFQUMzRCxTQUNPLE9BQVA7QUFDQyxZQUFRLE1BQU0sS0FBSztBQUNuQixRQUFJLHVCQUFPLDRCQUE0QixzQkFBc0I7QUFBQSxFQUM5RDtBQTJCRDtBQU9PLElBQU0sc0JBQXNCLENBQUMsU0FBcUM7QUFDeEUsTUFBSSxnQkFBZ0IsdUJBQU87QUFDMUIsUUFBSSxLQUFLLGtCQUFrQix5QkFBUztBQUNuQyxhQUFPLEtBQUs7QUFBQSxJQUNiO0FBQUEsRUFDRDtBQUNBO0FBQ0Q7QUFNQSxJQUFNLG9CQUFvQixDQUFDLFNBQXlCO0FBQ25ELFFBQU0sYUFBYSxvQkFBb0IsSUFBSTtBQUMzQyxTQUFPLFdBQVcsU0FBUyxXQUFXO0FBQ3ZDO0FBSUEsZ0NBQWdDLFVBQWtCO0FBRWpELE1BQUksQ0FBQywwQkFBVyxRQUFRLEdBQUc7QUFDcEIsWUFBUSxNQUFNLFFBQVEseUJBQXlCO0FBQy9DO0FBQUEsRUFDSjtBQUVBLFFBQU0sV0FBVyxDQUFDLE9BQXFCLFFBQWdCLFdBQW1CO0FBQ3RFLFFBQUksT0FBTztBQUNoQixVQUFJLHVCQUFPLDRCQUE0QixNQUFNLFdBQVcsc0JBQXNCO0FBQzlFLGNBQVEsTUFBTSw0QkFBNEIsTUFBTSxTQUFTO0FBQ3pEO0FBQUEsSUFDSztBQUFBLEVBQ0o7QUFFQSxNQUFJLFFBQVEsYUFBYSxVQUFVO0FBRXJDLHVDQUFTLFlBQVksV0FBVztBQUMxQix1Q0FBUyxxRkFBcUY7QUFDOUYsdUNBQVMscUZBQXFGO0FBQ3BHLHVDQUFTLHdCQUF3QjtBQUFBLEVBbUIvQixXQUFXLFFBQVEsYUFBYSxTQUFTO0FBQUEsRUFLekMsV0FBVyxRQUFRLGFBQWEsU0FBUztBQUNyQyxtQ0FBSyw2Q0FBNkMsY0FBYyxRQUFRO0FBQUEsRUFDNUU7QUFDSjtBQUVBLElBQU0saUJBQWlCLENBQUMsV0FBbUIsY0FBcUI7QUFDL0QsUUFBTSxtQkFBbUIsVUFBVSxRQUFRLE1BQU0sS0FBSztBQUN0RCxNQUFJLGNBQWM7QUFDZixNQUFJLFlBQVk7QUFDbkIsUUFBTSwwQkFBMEIsV0FBVyxnQkFBZ0I7QUFHM0QsTUFBSSxnQkFBNEMsQ0FBQztBQUNqRCxNQUFJLFVBQVUsU0FBUyxTQUFTLEdBQUU7QUFDakMsV0FBTSxNQUFLO0FBQ1YsVUFBSSxRQUFRLFlBQVksS0FBSyxTQUFTO0FBQ3RDLFVBQUcsQ0FBQztBQUFPO0FBQ1gsVUFBSSxlQUFlLE1BQU07QUFDekIsWUFBTSxpQkFBaUIsWUFBWTtBQUNuQyxZQUFNLG9DQUFvQyxhQUFhLFNBQVMsU0FBUyxDQUFDO0FBQzFFLFVBQUksYUFBYSxTQUFTLFNBQVMsR0FBRTtBQUNwQyxzQkFBYyxLQUFLLENBQUMsTUFBTSxPQUFPLE1BQU0sUUFBTSxhQUFhLE1BQU0sQ0FBQztBQUFBLE1BQ2xFO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFFQSxNQUFJLFVBQVUsU0FBUyxnQkFBZ0IsR0FBRTtBQUN4QyxXQUFNLE1BQUs7QUFDVixVQUFJLFFBQVEsVUFBVSxLQUFLLFNBQVM7QUFDcEMsVUFBRyxDQUFDO0FBQU87QUFDWCxVQUFJLGVBQWUsTUFBTTtBQUN6QixZQUFNLGlCQUFpQixZQUFZO0FBQ25DLFlBQU0sMkNBQTJDLGFBQWEsU0FBUyxnQkFBZ0IsQ0FBQztBQUN4RixVQUFJLGFBQWEsU0FBUyxnQkFBZ0IsR0FBRTtBQUMzQyxzQkFBYyxLQUFLLENBQUMsTUFBTSxPQUFPLE1BQU0sUUFBTSxhQUFhLE1BQU0sQ0FBQztBQUFBLE1BQ2xFO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFDQSxTQUFPO0FBQ1I7QUFHTyxJQUFNLG9CQUFvQixDQUNoQyxjQUNBLFdBQ0EsV0FDSTtBQUNKLFFBQU0sY0FBYyxrQkFBa0IsV0FBVyxZQUFZO0FBQzdELE1BQUksT0FBTyxZQUFZO0FBQ3ZCLE1BQUksT0FBTyxZQUFZO0FBQ3ZCLE1BQUksZ0JBQWdCLEtBQUssVUFBVSxHQUFHLEtBQUssU0FBTyxLQUFLLE1BQU07QUFDN0QsTUFBSSxZQUFZLEtBQUssTUFBTSxHQUFHLEVBQUUsSUFBSTtBQUNwQyxNQUFJLFlBQVksT0FBTyxLQUN0QixlQUNBLEtBQUssVUFBVSxHQUFHLEtBQUssU0FBTyxVQUFVLFNBQU8sQ0FBQyxHQUNoRCxXQUNBLENBQUMsV0FBVztBQUNaLFFBQUksQ0FBQztBQUFRO0FBQ2IsUUFBRyxVQUFRO0FBQU07QUFDakIsUUFBSSxNQUFNLFFBQVEsT0FBTyxNQUFNLEVBQzlCLEtBQUssQ0FBQyxXQUFXO0FBQ2pCLFVBQUcsUUFBUTtBQUNWLFlBQUksdUJBQU8sOENBQThDLFFBQVE7QUFBQSxNQUNsRSxPQUFPO0FBQ04sZUFBTyxJQUFJLFlBQVksV0FBVyxhQUFhLEdBQUcsUUFBUTtBQUFBLE1BQzNEO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFDRixDQUFDLEVBQUUsS0FBSztBQUNUO0FBSU8sSUFBTSxjQUFOLGNBQTBCLHVCQUFNO0FBQUEsRUFPdEMsWUFBWSxNQUFVLFFBQWUsTUFBYSxVQUFpQixVQUFvQztBQUNyRyxVQUFNLElBQUc7QUFDVCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxTQUFTO0FBQ2QsU0FBSyxPQUFPO0FBQ1osU0FBSyxXQUFXO0FBQUEsRUFDbEI7QUFBQSxFQUVBLFNBQVM7QUFDUixVQUFNLEVBQUUsY0FBYztBQUN0QixRQUFJLFVBQVUsSUFBSSx5QkFBUSxTQUFTLEVBQ2pDLFFBQVEsU0FBUyxFQUNqQixRQUFRLFVBQVEsS0FDZixTQUFTLEtBQUssSUFBSSxFQUNsQixTQUFTLENBQUMsVUFBVTtBQUNwQixXQUFLLFNBQVMsR0FBRyxLQUFLLFNBQVMsU0FBUyxLQUFLO0FBQUEsSUFDOUMsQ0FBQyxDQUNGO0FBR0QsZUFBVyxNQUFNO0FBQ2hCLFVBQUksV0FBVyxRQUFRLFVBQVUsY0FBYyxvQkFBb0I7QUFDbkUsVUFBSSxZQUFZLFNBQVMsZUFBZTtBQUN2QyxZQUFJLG1CQUFtQixTQUFTLGNBQWMsT0FBTztBQUNyRCx5QkFBaUIsWUFBWSxHQUFHLEtBQUs7QUFDckMseUJBQWlCLE1BQU0sY0FBYztBQUNyQyxpQkFBUyxjQUFjLGFBQWEsa0JBQWtCLFFBQVE7QUFFOUQsWUFBSSxzQkFBc0IsU0FBUyxjQUFjLE9BQU87QUFDeEQsNEJBQW9CLFlBQVksSUFBSSxLQUFLO0FBQ3pDLDRCQUFvQixNQUFNLGFBQWE7QUFDdkMsaUJBQVMsTUFBTSxtQkFBbUI7QUFHbEMsWUFBSSxXQUFXLFFBQVEsVUFBVTtBQUNqQyxZQUFJLFVBQVU7QUFFYixtQkFBUyxNQUFNLFVBQVU7QUFDekIsbUJBQVMsTUFBTSxpQkFBaUI7QUFBQSxRQUNqQztBQUVBLFlBQUksWUFBWTtBQUNoQixrQkFBVSxPQUFPO0FBQUEsTUFDbEIsT0FBTztBQUNOLGdCQUFRLE1BQU0sd0RBQVc7QUFBQSxNQUMxQjtBQUFBLElBQ0QsR0FBRyxDQUFDO0FBR0osU0FBSyxNQUFNLFNBQVMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxRQUF1QjtBQUN4RCxVQUFJLElBQUksYUFBYTtBQUNwQjtBQUFBLE1BQ0Q7QUFDQSxXQUFLLE1BQU07QUFDWCxXQUFLLFNBQVMsS0FBSyxNQUFNO0FBQUEsSUFDMUIsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLFVBQVU7QUFDUixRQUFJLEVBQUUsY0FBYztBQUNwQixjQUFVLE1BQU07QUFBQSxFQUNsQjtBQUNDOzs7QUNsaEJGLHVCQUF1QztBQUV2QyxJQUFNLDBCQUF5QjtBQUt4QixJQUFNLGFBQWEsQ0FDekIsTUFDQSxXQUNJO0FBQ0osUUFBTSxlQUFlLE9BQU8sU0FBUztBQUNyQyxNQUFJO0FBQ0gsUUFBSSxpQkFBaUIsVUFBVTtBQUM5QixZQUFNLElBQUksTUFBTSxNQUFNLE1BQU0sS0FBSztBQUFBLElBQ2xDLFdBQVcsaUJBQWlCLGdCQUFnQjtBQUMzQyxZQUFNLElBQUksTUFBTSxNQUFNLE1BQU0sSUFBSTtBQUFBLElBQ2pDLFdBQVcsaUJBQWlCLGFBQWE7QUFDeEMsWUFBTSxJQUFJLE1BQU0sT0FBTyxJQUFJO0FBQUEsSUFDNUI7QUFBQSxFQUNELFNBQVMsT0FBUDtBQUNELFlBQVEsTUFBTSxLQUFLO0FBQ25CLFFBQUksd0JBQU8scUNBQXFDLHVCQUFzQjtBQUFBLEVBQ3ZFO0FBQ0Q7OztBRmRPLElBQU0sbUJBQW1CLENBQU8sV0FBNkI7QUFFbkUsUUFBTSxXQUFrQixJQUFJLFVBQVUsY0FBYztBQUNwRCxRQUFNLGdCQUFnQixJQUFJLGNBQWM7QUFDeEMsUUFBTSxlQUF5QixDQUFDO0FBQ2hDLGFBQVcsQ0FBQyxRQUFRLFVBQVUsT0FBTyxRQUFRLGFBQWEsR0FBRztBQUM1RCxRQUFJLHNDQUFVLFVBQVMsUUFBUTtBQUM5QixVQUFJLFlBQVk7QUFDaEIsVUFBSSxPQUFPO0FBQ1gsaUJBQVcsQ0FBQyxVQUFVLE9BQU8sT0FBTyxRQUFRLEtBQUssR0FBRztBQUVuRCxZQUFJLFNBQVMsTUFBTSxVQUFVO0FBQUc7QUFFaEMsWUFBSSx5QkFBeUIsVUFBVSxRQUFRO0FBQUc7QUFDbEQscUJBQWEsS0FBSyxRQUFRO0FBQzFCLFlBQUk7QUFFSCxnQkFBTSxhQUFvQixJQUFJLE1BQU0sc0JBQ25DLFFBQ0Q7QUFDQSxjQUFJLHNCQUFzQix3QkFBTztBQUNoQyx1QkFBVyxZQUFZLE1BQU07QUFBQSxVQUM5QjtBQUNBLGdCQUFNLGVBQWUsb0JBQ3BCLFVBQ0Q7QUFDQSxjQUFJLENBQUMsTUFBTTtBQUNWLHdCQUFZLGFBQWEsU0FBUztBQUNsQyxtQkFBTyxDQUFDO0FBQUEsVUFDVDtBQUNBLHNCQUFZLFlBQVk7QUFDeEIsY0FBSSxDQUFDLFdBQVc7QUFDZixrQkFBTSxXQUFXLGNBQWMsTUFBTTtBQUVyQyxnQkFBSSx3QkFDSCxrREFDQSxHQUNEO0FBQUEsVUFDRDtBQUFBLFFBQ0QsU0FBUyxPQUFQO0FBQ0Qsa0JBQVEsS0FBSyxLQUFLO0FBQUEsUUFDbkI7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFFRDtBQU9BLElBQU0sMkJBQTJCLENBQ2hDLFlBQ0EsY0FDYTtBQUNiLFFBQU0sZ0JBQWdCLElBQUksY0FBYztBQUN4QyxNQUFJLE9BQWdCO0FBRXBCLGFBQVcsQ0FBQyxRQUFRLFVBQVUsT0FBTyxRQUFRLGFBQWEsR0FBRztBQUM1RCxRQUFJLFdBQVcsVUFBVSxNQUFNO0FBQzlCLGlCQUFXLENBQUMsVUFBVSxPQUFPLE9BQU8sUUFBUSxLQUFLLEdBQUc7QUFDbkQsWUFBSSxhQUFhLFlBQVk7QUFDNUIsaUJBQU87QUFBQSxRQUNSO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQ0EsU0FBTztBQUNSO0FBa0RPLElBQU0sdUJBQXVCLE1BQWM7QUFDakQsUUFBTSxXQUFrQixJQUFJLFVBQVUsY0FBYztBQUNwRCxRQUFNLGdCQUFnQixJQUFJLGNBQWM7QUFDeEMsUUFBTSxlQUF5QixDQUFDO0FBQ2hDLGFBQVcsQ0FBQyxRQUFRLFVBQVUsT0FBTyxRQUFRLGFBQWEsR0FBRztBQUM1RCxRQUFJLHNDQUFVLFVBQVMsUUFBUTtBQUM5QixpQkFBVyxDQUFDLFVBQVUsT0FBTyxPQUFPLFFBQVEsS0FBSyxHQUFHO0FBQ25ELFlBQUksU0FBUyxNQUFNLFVBQVU7QUFBRztBQUNoQyxZQUFJLHlCQUF5QixVQUFVLFFBQVE7QUFBRztBQUNsRCxxQkFBYSxLQUFLLFFBQVE7QUFBQSxNQUMzQjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQ0EsU0FBTyxhQUFhO0FBQ3JCOzs7QUc3SU8sSUFBTSxhQUFhLENBQUMsYUFBK0I7QUFDekQsV0FBUyxXQUFXO0FBQUEsSUFDbkIsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sVUFBVSxNQUFZO0FBQ3JCLHVCQUFpQixRQUFRO0FBQUEsSUFDMUI7QUFBQSxFQUNELENBQUM7QUFDRjs7O0FDVkEsdUJBQStDO0FBWXhDLElBQU0sbUJBQXVDO0FBQUEsRUFDaEQsY0FBYztBQUFBLEVBQ2QsV0FBVztBQUFBLEVBQ1gsWUFBWTtBQUFBLEVBQ1osT0FBTztBQUNYO0FBR08sSUFBTSx3QkFBTixjQUFvQyxrQ0FBaUI7QUFBQSxFQUt4RCxZQUFZLE1BQVUsUUFBMEI7QUFDNUMsVUFBTSxNQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDbEI7QUFBQSxFQUdBLFVBQWdCO0FBQ1osVUFBTSxFQUFFLGdCQUFnQjtBQUN4QixnQkFBWSxNQUFNO0FBQ2xCLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFakUsUUFBSSx5QkFBUSxXQUFXLEVBQ2xCLFFBQVEsZ0NBQWdDLEVBQ3hDLFFBQVEscUVBQXFFLEVBQzdFLFlBQVksQ0FBQyxhQUFhO0FBQ3ZCLGVBQVMsVUFBVSxhQUFhLG9CQUFvQjtBQUNwRCxlQUFTLFVBQVUsVUFBVSx3QkFBd0I7QUFDckQsZUFBUyxVQUFVLGdCQUFnQixzQkFBc0I7QUFDekQsZUFBUyxTQUFTLEtBQUssT0FBTyxTQUFTLFlBQVk7QUFDbkQsZUFBUyxTQUFTLENBQUMsV0FBVztBQUMxQixhQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ3BDLGFBQUssT0FBTyxhQUFhO0FBQUEsTUFDN0IsQ0FBQztBQUFBLElBQ0wsQ0FBQztBQUVMLFFBQUkseUJBQVEsV0FBVyxFQUMzQixRQUFRLHVCQUF1QixFQUMvQixRQUFRLGtEQUFVLEVBQ2xCLFVBQVUsQ0FBQyxXQUFXO0FBQ3RCLGFBQU8sU0FBUyxLQUFLLE9BQU8sU0FBUyxVQUFVLEVBQzdDLFNBQVMsQ0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLGFBQWE7QUFDbEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLEVBQUM7QUFBQSxJQUNILENBQUM7QUFFSSxRQUFJLHlCQUFRLFdBQVcsRUFDM0IsUUFBUSx5QkFBeUIsRUFDakMsUUFBUSx3REFBVyxFQUNuQixVQUFVLENBQUMsV0FBVztBQUN0QixhQUFPLFNBQVMsS0FBSyxPQUFPLFNBQVMsS0FBSyxFQUN4QyxTQUFTLENBQU8sVUFBVTtBQUMxQixhQUFLLE9BQU8sU0FBUyxRQUFRO0FBQ1gsaUJBQVMsS0FBSztBQUNoQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsRUFBQztBQUFBLElBQ0gsQ0FBQztBQUFBLEVBQ0E7QUFDSjs7O0FDdEVPLElBQU0sc0JBQXNCLENBQUMsVUFBbUM7QUFDbkUsUUFBTSxlQUFlO0FBQ3JCLFFBQU0sU0FBUyxNQUFNO0FBQ3JCLFNBQU87QUFDWDs7O0FDUkEsdUJBQTZCO0FBUXRCLElBQU0scUJBQU4sY0FBaUMsdUJBQU07QUFBQSxFQUc3QyxZQUFZLE1BQWEsVUFBNEI7QUFDcEQsVUFBTSxHQUFHO0FBQ1QsU0FBSyxPQUFPO0FBQ1osU0FBSyxXQUFXO0FBQUEsRUFDakI7QUFBQSxFQUNBLFNBQWlCO0FBQ2hCLFVBQU0sbUJBQW1CLG9DQUFvQyxLQUFLLEtBQUs7QUFBQTtBQUFBLDJCQUE2QyxLQUFLLFNBQVMsU0FBUztBQUMzSSxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBQ0EsV0FBVztBQUNWLFVBQU0sT0FBTyxLQUFLLFVBQVUsU0FBUyxLQUFLO0FBQzFDLFNBQUssU0FBUyxxQkFBcUI7QUFDbkMsU0FBSyxRQUFRLEtBQUssT0FBTyxDQUFDO0FBQUEsRUFDM0I7QUFBQSxFQUNBLFNBQVM7QUFDUixVQUFNLEVBQUUsY0FBYztBQUN0QixVQUFNLFVBQVU7QUFDaEIsVUFBTSxnQkFBZ0IsVUFBVSxTQUFTLEtBQUs7QUFDOUMsa0JBQWMsU0FBUyxnQ0FBZ0M7QUFDdkQsU0FBSyxTQUFTO0FBQ2QsVUFBTSwyQkFBMkIsVUFBVSxTQUFTLE1BQU07QUFDMUQsNkJBQXlCLE1BQU0sUUFBUTtBQUN2QyxVQUFNLG9CQUFvQiw2QkFBNkIscUJBQXFCO0FBQzVFLDZCQUF5QixPQUFPLGlCQUFpQjtBQUVqRCxVQUFNLGdCQUFnQixLQUFLLFVBQVUsU0FBUyxLQUFLO0FBQ25ELGtCQUFjLFNBQVMsZ0NBQWdDO0FBQ3ZELFVBQU0sV0FBVyxjQUFjLFNBQVMsTUFBTTtBQUFBLE1BQzdDLE1BQU07QUFBQSxJQUNQLENBQUM7QUFDRCxhQUFTLFNBQVMsYUFBYTtBQUMvQixTQUFLLGtCQUFrQixlQUFlLE9BQU87QUFDN0MsU0FBSyxjQUFjLGVBQWUsT0FBTztBQUFBLEVBQzFDO0FBQUEsRUFFQSxjQUFjLGVBQStCLFNBQWdCO0FBRTVELFVBQU0sY0FBYyxjQUFjLFNBQVMsVUFBVTtBQUFBLE1BQ3BELE1BQU07QUFBQSxJQUNQLENBQUM7QUFDRCxnQkFBWSxhQUFhLGNBQWMsc0JBQXNCO0FBQzdELGdCQUFZLGlCQUFpQixTQUFTLE1BQU07QUFDM0MsY0FBUSxNQUFNO0FBQUEsSUFDZixDQUFDO0FBQUEsRUFDRjtBQUFBLEVBQ0Esa0JBQWtCLGVBQStCLFNBQWdCO0FBQ2hFLFVBQU0sbUJBQW1CLGNBQWMsU0FBUyxVQUFVO0FBQUEsTUFDekQsTUFBTTtBQUFBLElBQ1AsQ0FBQztBQUNELHFCQUFpQixhQUNoQixjQUNBLDhFQUNEO0FBQ0EscUJBQWlCLFNBQVMsYUFBYTtBQUN2QyxxQkFBaUIsaUJBQWlCLFNBQVMsTUFBWTtBQUN0RCxpQkFBVyxLQUFLLE1BQU0sS0FBSyxRQUFRO0FBQ25DLHVCQUFpQixLQUFLLFFBQVE7QUFDOUIsY0FBUSxNQUFNO0FBQUEsSUFDZixFQUFDO0FBQUEsRUFDRjtBQUNEOzs7QUM2Qk8sbUJBQ0gsSUFDQSxPQUNBLFVBQ0EsVUFDQSxTQUNGO0FBQ0UsS0FBRyxHQUFHLE9BQU8sVUFBVSxVQUFVLE9BQU87QUFDeEMsU0FBTyxNQUFNLEdBQUcsSUFBSSxPQUFPLFVBQVUsVUFBVSxPQUFPO0FBQzFEOzs7QVJ0RkEsSUFBcUIsbUJBQXJCLGNBQThDLHdCQUFPO0FBQUEsRUFBckQ7QUFBQTtBQTBhQyxxQ0FBNEIsQ0FBQyxNQUFZLGNBQXNCLFdBQWtCLGFBQXFCLFlBQW9CLFNBQWtCLGNBQXVCO0FBQ2xLLFdBQUssMkJBQTJCLE1BQU0sY0FBYyxTQUFTO0FBQzdELFdBQUssUUFBUSxDQUFDLFNBQ2IsS0FDRSxRQUFRLFFBQVEsRUFDaEIsU0FBUyxRQUFRLEVBQ2pCLFFBQVEsTUFBWTtBQUNwQixZQUFJO0FBQ0gsZ0JBQU0sYUFBYTtBQUNuQixVQUFLLGtCQUFrQixjQUFjLFdBQVcsSUFBSTtBQUFBLFFBQ3JELFNBQVEsR0FBTjtBQUNELGNBQUksd0JBQU8sbUNBQW1DO0FBQUEsUUFDL0M7QUFBQSxNQUNELEVBQUMsQ0FDSDtBQUVBLFdBQUssUUFBUSxDQUFDLFNBQ2IsS0FDRSxRQUFRLFNBQVMsRUFDakIsU0FBUyxnQ0FBZ0MsRUFFekMsUUFBUSxNQUFZO0FBQ3BCLFlBQUk7QUFFSCxVQUFLLGtCQUFrQixjQUFjLFdBQVcsTUFBTSxhQUFhLFlBQVksU0FBUyxTQUFTO0FBQUEsUUFDbEcsU0FBUSxHQUFOO0FBQ0QsY0FBSSx3QkFBTyxrQ0FBa0M7QUFBQSxRQUM5QztBQUFBLE1BQ0QsRUFBQyxDQUNIO0FBQUEsSUFDRDtBQVVBLHNDQUE2QixDQUFDLE1BQVksY0FBc0IsY0FBcUI7QUFDcEYsWUFBTSxPQUFPLEFBQUssa0JBQWtCLFdBQVcsWUFBWTtBQUczRCxVQUFJLFFBQVEsWUFBWSxTQUFTO0FBQ2hDLGFBQUssUUFBUSxDQUFDLFNBQ2IsS0FDRSxRQUFRLE1BQU0sRUFDZCxTQUFTLHdCQUF3QixFQUVqQyxRQUFRLE1BQVk7QUFDcEIsY0FBSTtBQUNILFlBQUssZ0JBQWdCLGNBQWMsV0FBVyxJQUFJO0FBQUEsVUFDbkQsU0FBUSxHQUFOO0FBQ0QsZ0JBQUksd0JBQU8saUNBQWlDO0FBQUEsVUFDN0M7QUFBQSxRQUNELEVBQUMsQ0FDSDtBQUFBLE1BQ0Q7QUFFQSxXQUFLLFFBQVEsQ0FBQyxTQUFtQixLQUMvQixRQUFRLGdCQUFnQixFQUN4QixTQUFTLHFCQUFxQixFQUM5QixRQUFRLE1BQU8sS0FBSyxJQUFrQyxtQkFBbUIsS0FBSyxJQUFJLENBQUMsQ0FDckY7QUFDQSxXQUFLLFFBQVEsQ0FBQyxTQUFtQixLQUMvQixRQUFRLGdCQUFnQixFQUN4QixTQUFTLDBCQUFTLFVBQVUscUJBQXFCLHlCQUF5QixFQUMxRSxRQUFRLE1BQU07QUFDZCxRQUFDLEtBQUssSUFBa0MsYUFBYSxLQUFLLElBQUk7QUFBQSxNQUMvRCxDQUFDLENBQ0Y7QUFDQSxXQUFLLFFBQVEsQ0FBQyxTQUFtQixLQUMvQixRQUFRLFFBQVEsRUFDaEIsU0FBUywyQkFBMkIsRUFDcEMsUUFBUSxNQUFNO0FBQ2QsY0FBTSxtQkFBbUIsS0FBSyxJQUFJLE1BQU0sc0JBQXNCLEtBQUssSUFBSTtBQUN2RSxRQUFDLEtBQUssSUFBWSxnQkFBZ0IscUJBQXFCLGVBQWUsRUFBRSxlQUFlLGdCQUFnQjtBQUFBLE1BQ3hHLENBQUMsQ0FDRjtBQUFBLElBQ0Q7QUFBQTtBQUFBLEVBdGZBLEFBQU0sU0FBUztBQUFBO0FBQ2QsY0FBUSxJQUFJLDZCQUE2QjtBQUV6QyxXQUFLLFlBQVk7QUFFakIsV0FBSyxjQUFjLElBQUksc0JBQXNCLEtBQUssS0FBSyxJQUFJLENBQUM7QUFFNUQsWUFBTSxLQUFLLGFBQWE7QUFDeEIsV0FBSyxpQkFBaUIsUUFBUTtBQUM5QixVQUFJLFVBQVUsR0FBRyxlQUFlLENBQUMsaUJBQWlCLFdBQVc7QUFDNUQsYUFBSyxpQkFBaUIsT0FBTyxRQUFRO0FBQUEsTUFDdEMsQ0FBQztBQUVELFdBQUssY0FDSixLQUFLLElBQUksVUFBVSxHQUFHLGFBQWEsQ0FBQyxNQUFNLFNBQVM7QUFDbEQsWUFBSSxnQkFBZ0Isd0JBQU87QUFDMUIsY0FBSSxDQUFDLEtBQUssS0FBSyxTQUFTLEtBQUs7QUFBRztBQUNoQyxnQkFBTSxjQUFjLENBQUMsU0FBbUI7QUFDdkMsaUJBQUssU0FBUyxpQ0FBaUMsRUFDN0MsUUFBUSxTQUFTLEVBQ2pCLFdBQVcsUUFBUTtBQUNyQixpQkFBSyxRQUFRLE1BQVk7QUFDeEIsb0JBQU0sUUFBUSxJQUFJLG1CQUFtQixNQUFNLElBQUk7QUFDL0Msb0JBQU0sS0FBSztBQUFBLFlBQ1osRUFBQztBQUFBLFVBQ0Y7QUFDQSxlQUFLLFFBQVEsV0FBVztBQUFBLFFBQ3pCO0FBQUEsTUFDRCxDQUFDLENBQ0Y7QUFFQSxpQkFBVyxJQUFJO0FBRWYsV0FBSyxpQkFBaUIsVUFBVSxTQUFTLENBQUMsUUFBb0I7QUFDN0QsY0FBTSxTQUFTLElBQUk7QUFDbkIsWUFBSSxDQUFDLEtBQUssV0FBVztBQUNwQixjQUFJLGVBQWU7QUFDbkI7QUFBQSxRQUNEO0FBQ0EsWUFBSSxPQUFPLFlBQVksT0FBTztBQUU3QixnQkFBTSxPQUFPLE9BQU8sc0JBQXNCO0FBQzFDLGdCQUFNLGNBQWMsS0FBSyxPQUFPLEtBQUssUUFBUTtBQUM3QyxjQUFJLElBQUksVUFBVSxlQUFlLENBQUMsU0FBUyxlQUFlLGlCQUFpQixHQUFHO0FBRTdFLGtCQUFNLE9BQU8sU0FBUyxjQUFjLEtBQUs7QUFDekMsaUJBQUssS0FBSztBQUNWLGlCQUFLLE1BQU0sV0FBVztBQUN0QixpQkFBSyxNQUFNLE1BQU07QUFDakIsaUJBQUssTUFBTSxPQUFPO0FBQ2xCLGlCQUFLLE1BQU0sUUFBUTtBQUNuQixpQkFBSyxNQUFNLFNBQVM7QUFDcEIsaUJBQUssTUFBTSxhQUFhO0FBQ3hCLGlCQUFLLE1BQU0sU0FBUztBQUNwQixxQkFBUyxLQUFLLFlBQVksSUFBSTtBQUU5QixrQkFBTSxjQUFjLFNBQVMsY0FBYyxLQUFLO0FBQ2hELHdCQUFZLEtBQUs7QUFDakIsd0JBQVksTUFBTyxJQUFJLE9BQTRCO0FBQ25ELGtCQUFNLFlBQVksSUFBSSxNQUFNO0FBQzVCLHNCQUFVLFNBQVMsV0FBWTtBQUM5QiwwQkFBWSxNQUFNLFFBQVEsR0FBRyxVQUFVO0FBQ3ZDLDBCQUFZLE1BQU0sU0FBUyxHQUFHLFVBQVU7QUFBQSxZQUN6QztBQUNBLHNCQUFVLE1BQU8sSUFBSSxPQUE0QjtBQUNqRCx3QkFBWSxNQUFNLFdBQVc7QUFDN0Isd0JBQVksTUFBTSxTQUFTO0FBQzNCLHdCQUFZLE1BQU0sTUFBTTtBQUN4Qix3QkFBWSxNQUFNLE9BQU87QUFDekIsd0JBQVksTUFBTSxZQUFZO0FBQzlCLHFCQUFTLEtBQUssWUFBWSxXQUFXO0FBQ3JDLGtCQUFNLGdCQUFnQixZQUFZO0FBQ2xDLGtCQUFNLGlCQUFpQixZQUFZO0FBRW5DLGtCQUFNLFdBQVcsU0FBUyxjQUFjLEtBQUs7QUFDN0MscUJBQVMsS0FBSztBQUNkLHFCQUFTLE1BQU0sV0FBVztBQUMxQixxQkFBUyxNQUFNLFNBQVM7QUFDeEIscUJBQVMsTUFBTSxTQUFTO0FBQ3hCLHFCQUFTLE1BQU0sT0FBTztBQUN0QixxQkFBUyxNQUFNLFlBQVk7QUFDM0IscUJBQVMsTUFBTSxRQUFRO0FBQ3ZCLHFCQUFTLE1BQU0sV0FBVztBQUMxQixxQkFBUyxNQUFNLGFBQWE7QUFDNUIscUJBQVMsTUFBTSxVQUFVO0FBQ3pCLHFCQUFTLFlBQVk7QUFDckIscUJBQVMsS0FBSyxZQUFZLFFBQVE7QUFFbEMsd0JBQVksaUJBQWlCLFNBQVMsU0FBVSxHQUFHO0FBQ2xELGdCQUFFLGVBQWU7QUFFakIsb0JBQU0sUUFBUSxFQUFFLFNBQVMsSUFBSSxPQUFPO0FBRXBDLG9CQUFNLFFBQVEsWUFBWTtBQUMxQixvQkFBTSxTQUFTLFlBQVk7QUFFM0Isb0JBQU0sV0FBVyxRQUFRO0FBQ3pCLG9CQUFNLFlBQVksU0FBUztBQUUzQiwwQkFBWSxNQUFNLFFBQVEsR0FBRztBQUM3QiwwQkFBWSxNQUFNLFNBQVMsR0FBRztBQUc5QixvQkFBTSxlQUFnQixXQUFXLGdCQUFpQjtBQUNsRCx1QkFBUyxZQUFZLEdBQUcsYUFBYSxRQUFRLENBQUM7QUFBQSxZQUMvQyxDQUFDO0FBRUQsd0JBQVksaUJBQWlCLGVBQWUsU0FBVSxHQUFHO0FBQ3hELGdCQUFFLGVBQWU7QUFHakIsMEJBQVksTUFBTSxRQUFRLEdBQUc7QUFDN0IsMEJBQVksTUFBTSxTQUFTLEdBQUc7QUFDOUIsdUJBQVMsWUFBWTtBQUFBLFlBQ3RCLENBQUM7QUFBQSxVQUNGO0FBQUEsUUFDRCxPQUFPO0FBQ04sZUFBSyxrQkFBa0I7QUFBQSxRQUN4QjtBQUFBLE1BQ0QsQ0FBQztBQUVELFdBQUssaUJBQWlCLFVBQVUsV0FBVyxDQUFDLFFBQXVCO0FBQ2xFLFlBQUksSUFBSSxRQUFRLFVBQVU7QUFDekIsZUFBSyxrQkFBa0I7QUFBQSxRQUN4QjtBQUFBLE1BQ0QsQ0FBQztBQUVELGVBQVMsS0FBSyxTQUFTLEtBQUs7QUFBQSxJQUM3QjtBQUFBO0FBQUEsRUFFQSxXQUFXO0FBQ1YsWUFBUSxJQUFJLCtCQUErQjtBQUFBLEVBQzVDO0FBQUEsRUFFQSxvQkFBb0I7QUFDbkIsUUFBSSxTQUFTLGVBQWUsaUJBQWlCLEdBQUc7QUFDL0MsWUFBTSxjQUFjLFNBQVMsZUFBZSxpQkFBaUI7QUFDN0QsVUFBSTtBQUFhLGlCQUFTLEtBQUssWUFBWSxXQUFXO0FBQ3RELFlBQU0sV0FBVyxTQUFTLGVBQWUsY0FBYztBQUN2RCxVQUFJO0FBQVUsaUJBQVMsS0FBSyxZQUFZLFFBQVE7QUFDaEQsWUFBTSxPQUFPLFNBQVMsZUFBZSxTQUFTO0FBQzlDLFVBQUk7QUFBTSxpQkFBUyxLQUFLLFlBQVksSUFBSTtBQUFBLElBQ3pDO0FBQUEsRUFDRDtBQUFBLEVBRUEsaUJBQWlCLFdBQW9CO0FBQ3BDLFNBQUssU0FDSixVQUNDLFdBQ0EsZUFDQSxtREFDQSxLQUFLLFFBQVEsS0FBSyxJQUFJLENBQ3ZCLENBQ0Q7QUF3QkEsU0FBSyxTQUNKLFVBQ0MsV0FDQSxhQUNBLGNBQ0EsQ0FBQyxVQUFzQjtBQWpOM0I7QUFrTkssVUFBSSxDQUFDLEtBQUssU0FBUztBQUFZO0FBQy9CLFlBQU0sWUFBWSxJQUFJLFVBQVUsY0FBYztBQUM5QyxVQUFJLFVBQVUsS0FBSyxTQUFTLFNBQVM7QUFBRztBQUN4QyxZQUFNLFlBQXFCLFlBQUssSUFBSSxVQUFVLG9CQUFvQiw2QkFBWSxNQUFuRCxtQkFBc0QsY0FBYTtBQUM5RixVQUFJO0FBQVc7QUFFZixVQUFJLE1BQU0sV0FBVyxHQUFHO0FBQ3ZCLGNBQU0sZUFBZTtBQUFBLE1BQ3RCO0FBQ0EsWUFBTSxNQUFNLE1BQU07QUFDbEIsVUFBSSxJQUFJLE1BQU07QUFBbUI7QUFFakMsWUFBTSxTQUFTLFdBQUssSUFBSSxVQUFVLG9CQUFvQiw2QkFBWSxNQUFuRCxtQkFBc0Q7QUFFckUsWUFBTSxhQUFhLE9BQU87QUFDMUIsWUFBTSxhQUFhLFdBQVcsU0FBUyxHQUFHO0FBQzFDLFVBQUksY0FBYyxXQUFXLE1BQU0sSUFBSSxPQUFPLFVBQVU7QUFFeEQsWUFBTSxVQUFtQixJQUFJLFFBQVEsT0FBTyxLQUFLO0FBQ2pELFlBQU0sWUFBcUIsSUFBSSxRQUFRLFVBQVUsS0FBSztBQUN0RCxZQUFNLGVBQWUsSUFBSSxVQUFVLFNBQVMseUJBQXlCO0FBQ3JFLFlBQU0sV0FBVyxPQUFPO0FBQ3hCLFlBQU0sa0JBQWtCLEdBQUc7QUFJM0IsWUFBTSxPQUFPLElBQUksc0JBQXNCO0FBQ3ZDLFlBQU0sSUFBSSxNQUFNLFVBQVUsS0FBSztBQUMvQixZQUFNLElBQUksTUFBTSxVQUFVLEtBQUs7QUFDL0IsWUFBTSxXQUFXO0FBQ2pCLFVBQUksSUFBSSxZQUFZLElBQUksWUFBWSxJQUFJLEtBQUssUUFBUSxZQUFZLElBQUksS0FBSyxTQUFTLFVBQVU7QUFDNUYsY0FBTSxTQUFTLE1BQU07QUFDckIsY0FBTSxTQUFTLE1BQU07QUFDckIsY0FBTSxhQUFhLElBQUk7QUFDdkIsY0FBTSxjQUFjLElBQUk7QUFDeEIsWUFBSSxjQUFjO0FBQ2xCLFlBQUksY0FBYztBQUNsQixjQUFNLGtCQUFrQjtBQUV4QixjQUFNLGNBQWMsQ0FBQyxXQUFzQjtBQXpQakQ7QUEwUE8sZUFBSyxZQUFZO0FBQ2pCLGdCQUFNLFdBQVcsT0FBTTtBQUN2QixjQUFJLFdBQVcsYUFBYyxZQUFXO0FBQ3hDLGdCQUFNLGNBQWMsYUFBYTtBQUdqQyxxQkFBVyxLQUFLLElBQUksVUFBVSxFQUFFO0FBRWhDLGNBQUksWUFBWSxXQUFXO0FBRTNCLHFCQUFXLEtBQUssTUFBTSxRQUFRO0FBQzlCLHNCQUFZLEtBQUssTUFBTSxTQUFTO0FBR2hDLGNBQUksZUFBZSxrQkFBa0I7QUFDcEMsZ0JBQUksTUFBTSxTQUFTO0FBQ25CLGdCQUFJLE1BQU0sY0FBYztBQUN4QixnQkFBSSxNQUFNLGNBQWM7QUFDeEIsZ0JBQUksTUFBTSxZQUFZO0FBQ3RCLGdCQUFJLE1BQU0sUUFBUSxHQUFHO0FBQUEsVUFFdEIsV0FBVyxlQUFlLGtCQUFrQjtBQUMzQyxnQkFBSSxNQUFNLFNBQVM7QUFDbkIsZ0JBQUksTUFBTSxjQUFjO0FBQ3hCLGdCQUFJLE1BQU0sY0FBYztBQUN4QixnQkFBSSxNQUFNLFlBQVk7QUFFdEIsZ0JBQUksSUFBSSxlQUFlO0FBQ3RCLG9CQUFNLGlCQUFpQixJQUFJLGNBQWM7QUFDekMsb0JBQU0scUJBQXNCLFdBQVcsaUJBQWtCO0FBQ3pELGtCQUFJLE1BQU0sUUFBUSxHQUFHO0FBQUEsWUFDdEI7QUFBQSxVQUNEO0FBR0EsY0FBSSxLQUFLLElBQUksT0FBTSxVQUFVLFdBQVcsSUFBSSxpQkFBaUI7QUFDNUQsa0JBQU0sYUFBYSxLQUFLLElBQUksVUFBVSxvQkFBb0IsNkJBQVk7QUFDdEUsZ0JBQUksWUFBWTtBQUNmLG9CQUFNLG9CQUFvQixRQUFRO0FBQ2xDLGtCQUFJLFlBQVksSUFBSSxhQUFhLEtBQUs7QUFDdEMsa0JBQUksdUNBQVcsV0FBVyxTQUFTO0FBQ2xDLG1DQUFtQixZQUFZLEtBQUssWUFBWSxVQUFVLFdBQVcsU0FBUyxTQUFTO0FBQUEsY0FDeEYsV0FDUyxjQUFjO0FBQ3RCLG9CQUFJLGNBQWMsSUFBSSxhQUFhLFlBQVk7QUFDL0Msb0JBQUksaUJBQWlCO0FBQ3JCLG9CQUFJLGVBQWUsU0FBUyxHQUFHLEdBQUc7QUFDakMsc0JBQUksV0FBVyxlQUFlLE1BQU0sR0FBRztBQUN2QyxtQ0FBaUIsU0FBUyxTQUFTLFNBQVM7QUFBQSxnQkFDN0MsV0FBVyxlQUFlLFNBQVMsSUFBSSxHQUFHO0FBQ3pDLHNCQUFJLFdBQVcsZUFBZSxNQUFNLElBQUk7QUFDeEMsbUNBQWlCLFNBQVMsU0FBUyxTQUFTO0FBQUEsZ0JBQzdDO0FBQ0EsaUNBQWlCLGVBQWUsU0FBUyxLQUFLLElBQzdDLGVBQWUsVUFBVSxHQUFHLGVBQWUsU0FBUyxDQUFDLElBQ3JEO0FBQ0Qsc0JBQU0sV0FBVztBQUNqQixzQkFBTSxvQkFBb0IsY0FBYztBQUN4QyxvQkFBSSxNQUFNLFdBQVc7QUFDckIsbUNBQW1CLFlBQVksS0FBSyxZQUFZLGdCQUFnQixVQUFVLFdBQVcsU0FBUyxTQUFTO0FBQUEsY0FDeEcsT0FDSztBQUNKLDRCQUFZLFdBQUksa0JBQUosb0JBQW1CLGFBQWE7QUFDNUMsbUNBQW1CLFlBQVksS0FBSyxZQUFZLFdBQVcsVUFBVSxXQUFXLFNBQVMsU0FBUztBQUFBLGNBQ25HO0FBQUEsWUFDRDtBQUdBLDBCQUFjLE9BQU07QUFDcEIsMEJBQWMsT0FBTTtBQUFBLFVBQ3JCO0FBQUEsUUFDRDtBQUVBLGNBQU0sZ0JBQWdCLE1BQU07QUFDM0IsZUFBSyxZQUFZO0FBQUEsUUFDbEI7QUFFQSxjQUFNLFlBQVksQ0FBQyxXQUFzQjtBQUN4QyxxQkFBVyxlQUFlLEdBQUc7QUFDN0IsaUJBQU0sZUFBZTtBQUNyQixjQUFJLE1BQU0sY0FBYztBQUN4QixjQUFJLE1BQU0sVUFBVTtBQUNwQixjQUFJLE1BQU0sU0FBUztBQUNuQixvQkFBUyxvQkFBb0IsYUFBYSxXQUFXO0FBQ3JELG9CQUFTLG9CQUFvQixXQUFXLFNBQVM7QUFBQSxRQUNsRDtBQUNBLGtCQUFTLGlCQUFpQixhQUFhLFdBQVc7QUFDbEQsa0JBQVMsaUJBQWlCLFdBQVcsU0FBUztBQUFBLE1BQy9DO0FBQUEsSUFDRCxDQUNELENBQ0Q7QUFDQSxTQUFLLFNBQ0osVUFDQyxXQUNBLGFBQ0EsY0FDQSxDQUFDLFVBQXNCO0FBM1YzQjtBQTRWSyxVQUFJLENBQUMsS0FBSyxTQUFTO0FBQVk7QUFDL0IsWUFBTSxZQUFZLElBQUksVUFBVSxjQUFjO0FBQzlDLFVBQUksVUFBVSxLQUFLLFNBQVMsU0FBUztBQUFHO0FBQ3hDLFlBQU0sWUFBcUIsWUFBSyxJQUFJLFVBQVUsb0JBQW9CLDZCQUFZLE1BQW5ELG1CQUFzRCxjQUFhO0FBQzlGLFVBQUk7QUFBVztBQUVmLFlBQU0sTUFBTSxNQUFNO0FBQ2xCLFlBQU0sT0FBTyxJQUFJLHNCQUFzQjtBQUN2QyxZQUFNLFdBQVc7QUFFakIsVUFBSSxJQUFJLE1BQU07QUFBbUI7QUFFakMsWUFBTSxlQUFlLElBQUksVUFBVSxTQUFTLHlCQUF5QjtBQUlyRSxVQUFJLFdBQVc7QUFDZixZQUFNLG1CQUFtQixDQUFDLFdBQXNCO0FBQy9DLFlBQUksQ0FBQyxLQUFLLFNBQVM7QUFBWTtBQUMvQixjQUFNLE1BQU0sS0FBSyxJQUFJO0FBQ3JCLFlBQUksTUFBTSxXQUFXO0FBQUs7QUFDMUIsbUJBQVc7QUFFWCxjQUFNLElBQUksT0FBTSxVQUFVLEtBQUs7QUFDL0IsY0FBTSxJQUFJLE9BQU0sVUFBVSxLQUFLO0FBRS9CLFlBQUssS0FBSyxLQUFLLFFBQVEsWUFBWSxLQUFLLFlBQWMsTUFBSyxLQUFLLFNBQVMsWUFBWSxLQUFLLFdBQVc7QUFDcEcsY0FBSSxNQUFNLFNBQVM7QUFDbkIsY0FBSSxNQUFNLFVBQVU7QUFDcEIsY0FBSSxNQUFNLGVBQWU7QUFDekIsY0FBSSxNQUFNLGVBQWU7QUFBQSxRQUMxQixXQUNTLElBQUksS0FBSyxRQUFRLEdBQUc7QUFDNUIsY0FBSSxNQUFNLFNBQVM7QUFBQSxRQUNwQixPQUNLO0FBQ0osY0FBSSxNQUFNLFNBQVM7QUFDbkIsY0FBSSxNQUFNLFVBQVU7QUFBQSxRQUNyQjtBQUFBLE1BQ0Q7QUFDQSxXQUFLLGlCQUFpQixLQUFLLGFBQWEsZ0JBQWdCO0FBQUEsSUFDekQsQ0FDRCxDQUNEO0FBRUEsU0FBSyxTQUNKLFVBQ0MsV0FDQSxZQUNBLGNBQ0EsQ0FBQyxVQUFzQjtBQTlZM0I7QUErWUssVUFBSSxDQUFDLEtBQUssU0FBUztBQUFZO0FBQy9CLFlBQU0sWUFBWSxJQUFJLFVBQVUsY0FBYztBQUM5QyxVQUFJLFVBQVUsS0FBSyxTQUFTLFNBQVM7QUFBRztBQUN4QyxZQUFNLFlBQXFCLFlBQUssSUFBSSxVQUFVLG9CQUFvQiw2QkFBWSxNQUFuRCxtQkFBc0QsY0FBYTtBQUM5RixVQUFJO0FBQVc7QUFDZixZQUFNLE1BQU0sTUFBTTtBQUNsQixVQUFJLE1BQU0sY0FBYztBQUN4QixVQUFJLE1BQU0sU0FBUztBQUNuQixVQUFJLE1BQU0sVUFBVTtBQUFBLElBQ3JCLENBQ0QsQ0FDRDtBQUFBLEVBQ0Q7QUFBQSxFQUVBLEFBQU0sZUFBZTtBQUFBO0FBQ3BCLFdBQUssV0FBVyxPQUFPLE9BQ3RCLENBQUMsR0FDRCxrQkFDQSxNQUFNLEtBQUssU0FBUyxDQUNyQjtBQUFBLElBQ0Q7QUFBQTtBQUFBLEVBRUEsQUFBTSxlQUFlO0FBQUE7QUFDcEIsWUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsSUFDbEM7QUFBQTtBQUFBLEVBQ0EscUJBQXFCLE1BQVksWUFBcUIsZ0JBQWdCO0FBQ3JFLFNBQUssU0FDSixVQUNDLFdBQ0EsV0FDQSxLQUNBLENBQUMsTUFBcUI7QUFDckIsVUFBSSxFQUFFLFFBQVEsVUFBVTtBQUN2QixVQUFFLGVBQWU7QUFDakIsVUFBRSxnQkFBZ0I7QUFDbEIsYUFBSyxLQUFLO0FBQUEsTUFDWDtBQUFBLElBQ0QsQ0FDRCxDQUNEO0FBQUEsRUFDRDtBQUFBLEVBZ0dBLFFBQVEsT0FBbUI7QUF2aEI1QjtBQXdoQkUsVUFBTSxTQUFTLG9CQUFvQixLQUFLO0FBQ3hDLFVBQU0sZ0JBQWdCLE9BQU87QUFDN0IsUUFBSSxPQUFPLE1BQU07QUFBbUI7QUFFcEMsVUFBTSxZQUFZLElBQUksVUFBVSxjQUFjO0FBQzlDLFVBQU0sV0FBVyxVQUFVLEtBQUssU0FBUyxTQUFTO0FBQ2xELFVBQU0sc0JBQXNCLENBQUMsT0FBTyxVQUFVLFNBQVMsT0FBTyxPQUFPO0FBRXJFLFVBQU0sT0FBTyxJQUFJLHNCQUFLO0FBRXRCLFFBQUksQ0FBQyxvQkFBb0IsU0FBUyxhQUFhO0FBQUc7QUFJbEQsVUFBTSxVQUFtQixPQUFPLFFBQVEsT0FBTyxLQUFLO0FBQ3BELFVBQU0sWUFBcUIsT0FBTyxRQUFRLFVBQVUsS0FBSztBQUN6RCxVQUFNLFlBQXFCLFlBQUssSUFBSSxVQUFVLG9CQUFvQiw2QkFBWSxNQUFuRCxtQkFBc0QsY0FBYTtBQUM5RixVQUFNLGVBQXdCLE9BQU8sVUFBVSxTQUFTLHlCQUF5QjtBQUVqRixRQUFJLGNBQWMsT0FBTyxhQUFhLEtBQUs7QUFFM0MsUUFBSSxlQUFlLFlBQVksV0FBVyxNQUFNO0FBQUc7QUFFbkQsUUFBSSxVQUFVO0FBRWIsVUFBSSxhQUFPLGtCQUFQLG1CQUFzQixVQUFVLFNBQVM7QUFBd0I7QUFDckUsVUFBSSxZQUFZLGFBQU8sa0JBQVAsbUJBQXNCLGFBQWE7QUFHbkQ7QUFBQSxJQUNEO0FBRUEsUUFBSSxjQUFjO0FBQ2pCLG9CQUFjLE9BQU8sYUFBYSxZQUFZO0FBQzlDLFVBQUksaUJBQWlCO0FBQ3JCLFVBQUksZUFBZSxTQUFTLEdBQUcsR0FBRztBQUNqQyxZQUFJLFdBQVcsZUFBZSxNQUFNLEdBQUc7QUFDdkMseUJBQWlCLFNBQVMsU0FBUyxTQUFTO0FBQUEsTUFDN0MsV0FBVyxlQUFlLFNBQVMsSUFBSSxHQUFHO0FBQ3pDLFlBQUksV0FBVyxlQUFlLE1BQU0sSUFBSTtBQUN4Qyx5QkFBaUIsU0FBUyxTQUFTLFNBQVM7QUFBQSxNQUM3QztBQUNBLHVCQUFpQixlQUFlLFNBQVMsS0FBSyxJQUM3QyxlQUFlLFVBQVUsR0FBRyxlQUFlLFNBQVMsQ0FBQyxJQUNyRDtBQUNELG9CQUFjO0FBQUEsSUFDZixPQUNLO0FBQ0osb0JBQWMsYUFBTyxrQkFBUCxtQkFBc0IsYUFBYTtBQUVqRCxvQkFBYyxZQUFZLFFBQVEsZUFBZSxFQUFFO0FBQ25ELFVBQUksWUFBWSxZQUFZLE1BQU0sU0FBUztBQUMzQyxvQkFBYyxZQUFZLFVBQVUsS0FBSztBQUN6QyxVQUFJLGlCQUFpQixTQUFTO0FBQVc7QUFBQSxJQUMxQztBQUVBLFFBQUksV0FBVztBQUNkLFVBQUksb0JBQW9CLFNBQVMsYUFBYSxHQUFHO0FBRWhELGFBQUssMkJBQTJCLE1BQU0sYUFBYSxTQUFTO0FBQUEsTUFDN0Q7QUFBQSxJQUNELE9BQ0s7QUFDSixZQUFNLFNBQVMsV0FBSyxJQUFJLFVBQVUsb0JBQW9CLDZCQUFZLE1BQW5ELG1CQUFzRDtBQUVyRSxZQUFNLGFBQWEsT0FBTztBQUMxQixZQUFNLGFBQWEsV0FBVyxTQUFTLE1BQU07QUFVN0MsVUFBSSxjQUFjLFdBQVcsTUFBTSxJQUFJLE9BQU8sVUFBVTtBQUN4RCxZQUFNLHdFQUF3RTtBQUM5RSxZQUFNLFlBQVksTUFBTSxZQUFZLFFBQVEsYUFBYSxZQUFZLElBQUk7QUFZekUsVUFBSSxvQkFBb0IsU0FBUyxhQUFhLEdBQUc7QUFDaEQsYUFBSywwQkFBMEIsTUFBTSxhQUFhLFdBQVcsZUFBZSxZQUFZLFNBQVMsU0FBUztBQUFBLE1BQzNHO0FBQUEsSUFDRDtBQUVBLFNBQUsscUJBQXFCLElBQUk7QUFFOUIsUUFBSSxTQUFTO0FBQ2IsUUFBSSxlQUFlO0FBQ25CLGFBQVMsUUFBUSxZQUFZLFVBQVUsZUFBZTtBQUV0RCxRQUFJLFdBQVcsQ0FBQyxXQUFXO0FBQzFCLFdBQUssZUFBZSxFQUFFLEdBQUcsTUFBTSxPQUFPLEdBQUcsTUFBTSxRQUFRLE9BQU8sQ0FBQztBQUFBLElBQ2hFLE9BQ0s7QUFDSixXQUFLLGVBQWUsRUFBRSxHQUFHLE1BQU0sT0FBTyxHQUFHLE1BQU0sTUFBTSxDQUFDO0FBQUEsSUFDdkQ7QUFDQSxTQUFLLElBQUksVUFBVSxRQUFRLDBCQUEwQixJQUFJO0FBQUEsRUFDMUQ7QUFFRDtBQUVBLDRCQUE0QixZQUEwQixRQUE2QyxZQUFvQixXQUFtQixVQUFrQixXQUFtQixTQUFrQixXQUEwQjtBQUMxTixRQUFNLFNBQVMsV0FBVztBQUUxQixRQUFNLGFBQWEsT0FBTztBQUMxQixNQUFJLGNBQWMsV0FBVyxNQUFNLElBQUksT0FBTyxVQUFVO0FBS3hELE1BQUksQ0FBQyxhQUFhLENBQUMsU0FBUztBQUMzQixRQUFJLFVBQVUsMEJBQTBCLFlBQVksTUFBTSxXQUFXLFVBQVUsT0FBTztBQUN0RixRQUFJLFFBQVEsVUFBVSxHQUFHO0FBQ3hCLGlCQUFXLFNBQVM7QUFBQSxRQUNuQixTQUFTO0FBQUEsVUFDUixNQUFNLFlBQVksT0FBTyxRQUFRLEdBQUc7QUFBQSxVQUNwQyxJQUFJLFlBQVksT0FBTyxRQUFRLEdBQUc7QUFBQSxVQUNsQyxRQUFRLFFBQVEsR0FBRztBQUFBLFFBQ3BCO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFLRixXQUNTLFFBQVEsVUFBVSxHQUFHO0FBQUEsSUFFOUIsT0FDSztBQUNKLFVBQUksd0JBQU8sOERBQThEO0FBQUEsSUFDMUU7QUFDQTtBQUFBLEVBQ0Q7QUFNQSxNQUFJLFdBQTBCO0FBQUEsSUFDN0IsU0FBUztBQUFBLElBQ1QsV0FBVztBQUFBLEVBQ1o7QUFFQSxNQUFJLE9BQU8sVUFBVSxVQUFVO0FBQy9CLFFBQU0sUUFBUSxJQUFJO0FBR2xCLFFBQU0sWUFBWSxTQUFTO0FBQzNCLE1BQUksb0JBQW9CLFlBQVk7QUFDcEMsTUFBSSxrQkFBdUMsQ0FBQztBQUM1QyxNQUFJLGdCQUEwQixDQUFDO0FBQy9CLFdBQVMsSUFBSSxtQkFBbUIsS0FBSyxPQUFPLFVBQVUsR0FBRyxLQUFLO0FBQzdELFFBQUksT0FBTyxXQUFXLE1BQU0sSUFBSSxLQUFLLENBQUM7QUFJdEMsUUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLElBQUk7QUFBRztBQUNoQyxRQUFJLFVBQVUsMEJBQTBCLEtBQUssTUFBTSxXQUFXLFVBQVUsT0FBTztBQUMvRSxvQkFBZ0IsS0FBSyxHQUFHLE9BQU87QUFDL0Isa0JBQWMsS0FBSyxHQUFHLElBQUksTUFBTSxRQUFRLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUFBLEVBQ3hEO0FBRUEsV0FBUyxJQUFJLG9CQUFvQixHQUFHLEtBQUssR0FBRyxLQUFLO0FBQ2hELFFBQUksT0FBTyxXQUFXLE1BQU0sSUFBSSxLQUFLLENBQUM7QUFDdEMsUUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLElBQUk7QUFBRztBQUNoQyxRQUFJLFVBQVUsMEJBQTBCLEtBQUssTUFBTSxXQUFXLFVBQVUsT0FBTztBQUMvRSxvQkFBZ0IsS0FBSyxHQUFHLE9BQU87QUFDL0Isa0JBQWMsS0FBSyxHQUFHLElBQUksTUFBTSxRQUFRLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUFBLEVBQ3hEO0FBTUEsTUFBSSxnQkFBZ0IsVUFBVSxHQUFHO0FBQ2hDLFFBQUksZUFBYyxXQUFXLE1BQU0sSUFBSSxLQUFLLGNBQWMsRUFBRTtBQUM1RCxRQUFJLFFBQVEsU0FBUztBQUNwQixVQUFJLFdBQVcsYUFBWTtBQUMzQixVQUFJLGdCQUFnQixTQUFTLFVBQVUsR0FBRyxnQkFBZ0IsR0FBRyxPQUFPLElBQ25FLGdCQUFnQixHQUFHLFdBQ25CLFNBQVMsVUFBVSxnQkFBZ0IsR0FBRyxLQUFLO0FBQzVDLGlCQUFXLFNBQVM7QUFBQSxRQUNuQixTQUFTO0FBQUEsVUFDUixNQUFNLGFBQVk7QUFBQSxVQUNsQixJQUFJLGFBQVksT0FBTyxTQUFTO0FBQUEsVUFDaEMsUUFBUTtBQUFBLFFBQ1Q7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNGLE9BQU87QUFDTixpQkFBVyxTQUFTO0FBQUEsUUFDbkIsU0FBUztBQUFBLFVBQ1IsTUFBTSxhQUFZLE9BQU8sZ0JBQWdCLEdBQUc7QUFBQSxVQUM1QyxJQUFJLGFBQVksT0FBTyxnQkFBZ0IsR0FBRztBQUFBLFVBQzFDLFFBQVEsZ0JBQWdCLEdBQUc7QUFBQSxRQUM1QjtBQUFBLE1BQ0QsQ0FBQztBQUFBLElBQ0Y7QUFBQSxFQUNELFdBQ1MsZ0JBQWdCLFVBQVUsR0FBRztBQUNyQyxRQUFJLHdCQUFPLHNDQUFzQyw2QkFBNkI7QUFBQSxFQUMvRSxPQUNLO0FBQ0osUUFBSSx3QkFBTyxvQ0FBb0MsNkJBQTZCO0FBQUEsRUFDN0U7QUFDQTtBQUNEO0FBR0EsNEJBQTRCLFlBQTBCLFFBQTZDLFlBQW9CLFVBQWtCLFdBQW1CLFNBQWtCLFdBQTBCO0FBQ3ZNLFFBQU0sU0FBUyxXQUFXO0FBRTFCLFFBQU0sYUFBYSxPQUFPO0FBQzFCLE1BQUksY0FBYyxXQUFXLE1BQU0sSUFBSSxPQUFPLFVBQVU7QUFFeEQsUUFBTSxPQUFPLE9BQU8sYUFBYSxLQUFLO0FBQ3RDLFFBQU0sVUFBVSxPQUFPLGFBQWEsS0FBSztBQUV6QyxNQUFJLENBQUMsYUFBYSxDQUFDLFNBQVM7QUFDM0IsUUFBSSxVQUFVLDBCQUEwQixZQUFZLE1BQU0sTUFBTSxTQUFTLFVBQVUsT0FBTztBQUMxRixRQUFJLFFBQVEsVUFBVSxHQUFHO0FBQ3hCLGlCQUFXLFNBQVM7QUFBQSxRQUNuQixTQUFTO0FBQUEsVUFDUixNQUFNLFlBQVksT0FBTyxRQUFRLEdBQUc7QUFBQSxVQUNwQyxJQUFJLFlBQVksT0FBTyxRQUFRLEdBQUc7QUFBQSxVQUNsQyxRQUFRLFFBQVEsR0FBRztBQUFBLFFBQ3BCO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRixXQUNTLFFBQVEsVUFBVSxHQUFHO0FBQUEsSUFFOUIsT0FDSztBQUNKLFVBQUksd0JBQU8sOERBQThEO0FBQUEsSUFDMUU7QUFDQTtBQUFBLEVBQ0Q7QUFNQSxNQUFJLFdBQTBCO0FBQUEsSUFDN0IsU0FBUztBQUFBLElBQ1QsV0FBVztBQUFBLEVBQ1o7QUFFQSxNQUFJLE9BQU8sVUFBVSxVQUFVO0FBQy9CLFFBQU0sUUFBUSxJQUFJO0FBRWxCLFFBQU0sWUFBWSxTQUFTO0FBQzNCLE1BQUksb0JBQW9CLFlBQVk7QUFDcEMsTUFBSSxrQkFBdUMsQ0FBQztBQUM1QyxNQUFJLGdCQUEwQixDQUFDO0FBQy9CLFdBQVMsSUFBSSxtQkFBbUIsS0FBSyxPQUFPLFVBQVUsR0FBRyxLQUFLO0FBQzdELFFBQUksT0FBTyxXQUFXLE1BQU0sSUFBSSxLQUFLLENBQUM7QUFDdEMsUUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLElBQUk7QUFBRztBQUNoQyxRQUFJLFVBQVUsMEJBQTBCLEtBQUssTUFBTSxNQUFNLFNBQVMsVUFBVSxPQUFPO0FBQ25GLG9CQUFnQixLQUFLLEdBQUcsT0FBTztBQUMvQixrQkFBYyxLQUFLLEdBQUcsSUFBSSxNQUFNLFFBQVEsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQUEsRUFDeEQ7QUFFQSxXQUFTLElBQUksb0JBQW9CLEdBQUcsS0FBSyxHQUFHLEtBQUs7QUFDaEQsUUFBSSxPQUFPLFdBQVcsTUFBTSxJQUFJLEtBQUssQ0FBQztBQUN0QyxRQUFJLENBQUMsVUFBVSxLQUFLLEtBQUssSUFBSTtBQUFHO0FBQ2hDLFFBQUksVUFBVSwwQkFBMEIsS0FBSyxNQUFNLE1BQU0sU0FBUyxVQUFVLE9BQU87QUFDbkYsb0JBQWdCLEtBQUssR0FBRyxPQUFPO0FBQy9CLGtCQUFjLEtBQUssR0FBRyxJQUFJLE1BQU0sUUFBUSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFBQSxFQUN4RDtBQUVBLFFBQU0sZUFBZTtBQUNyQixRQUFNLGFBQWE7QUFFbkIsTUFBSSxnQkFBZ0IsVUFBVSxHQUFHO0FBQ2hDLFFBQUksZUFBYyxXQUFXLE1BQU0sSUFBSSxLQUFLLGNBQWMsRUFBRTtBQUM1RCxRQUFJLFFBQVEsU0FBUztBQUNwQixVQUFJLFdBQVcsYUFBWTtBQUMzQixVQUFJLGdCQUFnQixTQUFTLFVBQVUsR0FBRyxnQkFBZ0IsR0FBRyxPQUFPLElBQ25FLGdCQUFnQixHQUFHLFdBQ25CLFNBQVMsVUFBVSxnQkFBZ0IsR0FBRyxLQUFLO0FBQzVDLGlCQUFXLFNBQVM7QUFBQSxRQUNuQixTQUFTO0FBQUEsVUFDUixNQUFNLGFBQVk7QUFBQSxVQUNsQixJQUFJLGFBQVksT0FBTyxTQUFTO0FBQUEsVUFDaEMsUUFBUTtBQUFBLFFBQ1Q7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNGLE9BQU87QUFDTixpQkFBVyxTQUFTO0FBQUEsUUFDbkIsU0FBUztBQUFBLFVBQ1IsTUFBTSxhQUFZLE9BQU8sZ0JBQWdCLEdBQUc7QUFBQSxVQUM1QyxJQUFJLGFBQVksT0FBTyxnQkFBZ0IsR0FBRztBQUFBLFVBQzFDLFFBQVEsZ0JBQWdCLEdBQUc7QUFBQSxRQUM1QjtBQUFBLE1BQ0QsQ0FBQztBQUFBLElBQ0Y7QUFBQSxFQUNELFdBQ1MsZ0JBQWdCLFVBQVUsR0FBRztBQUNyQyxRQUFJLHdCQUFPLHNDQUFzQyw2QkFBNkI7QUFBQSxFQUMvRSxPQUNLO0FBQ0osUUFBSSx3QkFBTyxvQ0FBb0MsNkJBQTZCO0FBQUEsRUFDN0U7QUFDQTtBQUVEO0FBR0EsbUNBQW1DLFdBQW1CLGFBQXFCLFdBQW1CLFNBQXVDO0FBQ3BJLE1BQUksY0FBYztBQUNsQixNQUFJLFlBQVk7QUFDaEIsUUFBTSxxQkFBcUIsWUFBWSxRQUFRLE1BQU0sS0FBSztBQUMxRCxNQUFJLENBQUMsVUFBVSxTQUFTLFdBQVcsS0FBSyxDQUFDLFVBQVUsU0FBUyxrQkFBa0I7QUFBRyxXQUFPLENBQUM7QUFHekYsTUFBSSxTQUE4QixDQUFDO0FBRW5DLFNBQU8sTUFBTTtBQUNaLFFBQUksYUFBYSxZQUFZLEtBQUssU0FBUztBQUMzQyxRQUFJLENBQUM7QUFBWTtBQUNqQixVQUFNLGVBQWUsV0FBVztBQUVoQyxRQUFJLGFBQWEsU0FBUyxXQUFXLEdBQUc7QUFDdkMsVUFBSSxjQUFjLFVBQVUsYUFBYSxRQUFRLFNBQVMsR0FBRyxJQUFJO0FBQ2pFLFVBQUksYUFBYSxZQUFZLE1BQU0scUJBQXFCO0FBQ3hELFVBQUksWUFBWSxhQUFhLFdBQVcsS0FBSztBQUU3QyxVQUFJLFlBQVksYUFBYSxNQUFNLHVCQUF1QjtBQUMxRCxVQUFJLFdBQVcsWUFBWSxVQUFVLEtBQUs7QUFDMUMsVUFBSSxnQkFBZ0IsU0FBUyxNQUFNLEdBQUc7QUFDdEMsVUFBSSxtQkFBbUI7QUFDdkIsVUFBSSxlQUFlO0FBQ25CLGVBQVMsT0FBTyxlQUFlO0FBQzlCLFlBQUksQ0FBQyxRQUFRLEtBQUssR0FBRyxLQUFLLENBQUMsUUFBUSxLQUFLLEdBQUcsR0FBRztBQUM3Qyw2QkFBbUIsbUJBQW1CLE1BQU07QUFBQSxRQUM3QztBQUFBLE1BQ0Q7QUFDQSxxQkFBZSxhQUFhLElBQUksR0FBRyxvQkFBb0IsY0FBYztBQUNyRSxxQkFBZSxVQUFVLGFBQWEsUUFBUSxPQUFPLEtBQUssSUFBSTtBQUM5RCxVQUFJLGNBQWMsYUFBYSxNQUFNLFlBQVksbUJBQW1CLE1BQU0sY0FBYztBQUV4RixhQUFPLEtBQUs7QUFBQSxRQUNYLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVMsV0FBVztBQUFBLFFBQ3BCLE9BQU8sV0FBVyxRQUFRLGFBQWE7QUFBQSxNQUN4QyxDQUFDO0FBQUEsSUFDRjtBQUFBLEVBQ0Q7QUFFQSxTQUFPLE1BQU07QUFDWixRQUFJLFFBQVEsVUFBVSxLQUFLLFNBQVM7QUFDcEMsUUFBSSxDQUFDO0FBQU87QUFDWixVQUFNLGVBQWUsTUFBTTtBQUMzQixRQUFJLGFBQWEsU0FBUyxrQkFBa0IsR0FBRztBQUU5QyxVQUFJLGlCQUFpQixhQUFhLE1BQU0sVUFBVTtBQUNsRCxVQUFJLFdBQVcsZUFBZSxHQUFHLFVBQVUsR0FBRyxlQUFlLEdBQUcsU0FBUyxDQUFDO0FBQzFFLFVBQUksV0FBVyxTQUFTLFFBQVEsbUJBQW1CLEVBQUU7QUFDckQsVUFBSSxTQUFTO0FBQ1osbUJBQVcsU0FBUyxRQUFRLHFCQUFxQixFQUFFO0FBQUEsTUFDcEQ7QUFDQSxVQUFJLFlBQVksYUFBYSxVQUFVLGVBQWUsR0FBRyxTQUFTLEdBQUcsYUFBYSxTQUFTLENBQUM7QUFDNUYsVUFBSSxZQUFZLFVBQVUsS0FBSyxjQUFjLGNBQWMsZUFBZSxLQUFLLFlBQVksY0FBYztBQUN6RyxVQUFJLFFBQVEsS0FBSyxRQUFRLEdBQUc7QUFDM0Isb0JBQVksS0FBSyxjQUFjO0FBQUEsTUFDaEM7QUFJQSxhQUFPLEtBQUs7QUFBQSxRQUNYLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVMsTUFBTTtBQUFBLFFBQ2YsT0FBTyxNQUFNLFFBQVEsYUFBYTtBQUFBLE1BQ25DLENBQUM7QUFBQSxJQUNGO0FBQUEsRUFDRDtBQUNBLFFBQU0sZUFBZSxTQUFTO0FBQzlCLFFBQU0sZ0JBQWdCLE1BQU07QUFDNUIsU0FBTztBQUNSO0FBR0EsbUNBQW1DLFdBQW1CLE1BQWMsVUFBa0IsV0FBbUIsU0FBdUM7QUFDL0ksTUFBSSxTQUE4QixDQUFDO0FBQ25DLE1BQUksWUFBWTtBQUNoQixNQUFJLENBQUMsVUFBVSxTQUFTLElBQUksS0FBSyxDQUFDLFVBQVUsU0FBUyxRQUFRO0FBQUcsV0FBTyxDQUFDO0FBQ3hFLE1BQUksa0JBQWtCLFVBQ3JCLEtBQUssY0FBYyxjQUFjLFVBQ2pDLEtBQUssWUFBWSxjQUFjO0FBQ2hDLE1BQUksUUFBUSxLQUFLLFFBQVEsS0FBSyxRQUFRLEtBQUssUUFBUSxHQUFHO0FBQ3JELHNCQUFrQixLQUFLLGNBQWM7QUFBQSxFQUN0QztBQUNBLFNBQU8sTUFBTTtBQUNaLFFBQUksUUFBUSxVQUFVLEtBQUssU0FBUztBQUNwQyxRQUFJLENBQUM7QUFBTztBQUNaLFFBQUksZUFBZSxNQUFNO0FBQ3pCLFFBQUksYUFBYSxTQUFTLElBQUksS0FBSyxhQUFhLFNBQVMsUUFBUSxHQUFHO0FBSW5FLGFBQU8sS0FBSztBQUFBLFFBQ1gsVUFBVTtBQUFBLFFBQ1YsVUFBVTtBQUFBLFFBQ1YsU0FBUyxNQUFNO0FBQUEsUUFDZixPQUFPLE1BQU0sUUFBUSxhQUFhO0FBQUEsTUFDbkMsQ0FBQztBQUFBLElBQ0Y7QUFBQSxFQUNEO0FBQ0EsUUFBTSxlQUFlLFNBQVM7QUFDOUIsUUFBTSxnQkFBZ0IsTUFBTTtBQUM1QixTQUFPO0FBQ1I7IiwKICAibmFtZXMiOiBbXQp9Cg==
