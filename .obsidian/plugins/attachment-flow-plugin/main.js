/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AttachFlowPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/options/deleleAllAttachsInTheNote.ts
var import_obsidian4 = require("obsidian");

// src/util.ts
var import_obsidian = require("obsidian");
var import_child_process = require("child_process");
var import_fs = require("fs");
var import_obsidian2 = require("obsidian");
var DEBUG = false;
var SUCCESS_NOTICE_TIMEOUT = 1800;
var print = (message, ...optionalParams) => {
  if (DEBUG) {
    console.log(message, ...optionalParams);
  }
};
function setDebug(value) {
  DEBUG = value;
}
var checkReferenceInfo = (target_file, currentMd) => {
  const resolvedLinks = app.metadataCache.resolvedLinks;
  let CurMDPath;
  let result = {
    state: 0,
    mdPath: []
  };
  let refNum = 0;
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if (currentMd.path === mdFile) {
      CurMDPath = currentMd.path;
      result.mdPath.unshift(CurMDPath);
    }
    for (const [filePath, nr] of Object.entries(links)) {
      if ((target_file == null ? void 0 : target_file.path) === filePath) {
        refNum++;
        if (nr > 1) {
          result.state = 2 /* MORE */;
          result.mdPath.push(mdFile);
          return result;
        }
        result.mdPath.push(mdFile);
      }
    }
  }
  if (refNum > 1) {
    result.state = 1 /* MUTIPLE */;
  } else {
    result.state = 0 /* ONCE */;
  }
  return result;
};
var getFileByBaseName = (currentMd, FileBaseName) => {
  const resolvedLinks = app.metadataCache.resolvedLinks;
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if (currentMd.path === mdFile) {
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath.includes(FileBaseName)) {
          try {
            const AttachFile = app.vault.getAbstractFileByPath(filePath);
            if (AttachFile instanceof import_obsidian.TFile) {
              return AttachFile;
            }
          } catch (error) {
            new import_obsidian.Notice(` cannot get the image file`);
            console.error(error);
          }
        }
      }
    }
  }
};
var PureClearAttachment = (file, target_type, plugin) => __async(void 0, null, function* () {
  const deleteOption = plugin.settings.deleteOption;
  const delFileFolder = onlyOneFileExists(file);
  const fileFolder = getFileParentFolder(file);
  let name = target_type == "img" ? "Image" : "File";
  try {
    if (deleteOption === ".trash") {
      yield app.vault.trash(file, false);
      new import_obsidian.Notice(name + " moved to Obsidian Trash !", SUCCESS_NOTICE_TIMEOUT);
      if (delFileFolder) {
        yield app.vault.trash(fileFolder, false);
        new import_obsidian.Notice("Attachment folder have been deleted!", 3e3);
      }
    } else if (deleteOption === "system-trash") {
      yield app.vault.trash(file, true);
      new import_obsidian.Notice(name + " moved to System Trash !", SUCCESS_NOTICE_TIMEOUT);
      if (delFileFolder) {
        yield app.vault.trash(fileFolder, true);
        new import_obsidian.Notice("Attachment folder have been deleted!", 3e3);
      }
    } else if (deleteOption === "permanent") {
      yield app.vault.delete(file);
      new import_obsidian.Notice(name + " deleted Permanently !", SUCCESS_NOTICE_TIMEOUT);
      if (delFileFolder) {
        yield app.vault.delete(fileFolder, true);
        new import_obsidian.Notice("Attachment folder have been deleted!", 3e3);
      }
    }
  } catch (error) {
    console.error(error);
    new import_obsidian.Notice("Faild to delelte the " + name + "!", SUCCESS_NOTICE_TIMEOUT);
  }
});
var handlerDelFileNew = (FileBaseName, currentMd, plugin, target_type, target_pos, in_table, in_callout) => {
  let logs;
  let modal;
  const target_file = getFileByBaseName(currentMd, FileBaseName);
  const refInfo = checkReferenceInfo(target_file, currentMd);
  let state = refInfo.state;
  switch (state) {
    case 0:
      deleteCurTargetLink(FileBaseName, plugin, target_type, target_pos, in_table, in_callout);
      PureClearAttachment(target_file, target_type, plugin);
      break;
    case 1:
    case 2:
      deleteCurTargetLink(FileBaseName, plugin, target_type, target_pos, in_table, in_callout);
      logs = refInfo.mdPath;
      new import_obsidian.Notice("As other references of current file exist, just deleted the current reference link without deleting the actual file.", 3500);
    default:
      break;
  }
};
var deleteCurTargetLink = (file_base_name, plugin, target_type, target_pos, in_table, in_callout) => {
  file_base_name = file_base_name.startsWith("/") ? file_base_name.substring(1) : file_base_name;
  const activeView = plugin.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
  const editor = activeView.editor;
  const editorView = editor.cm;
  let target_line = editorView.state.doc.lineAt(target_pos);
  let line_text = target_line.text;
  if (!in_table && !in_callout) {
    let finds = findLinkInLine(file_base_name, line_text);
    if (finds.length == 0) {
      new import_obsidian.Notice("Fail to find the link-text, please delete it manually!", 0);
      return;
    } else if (finds.length != 1) {
      new import_obsidian.Notice("Find multiple same Link in current line, please delete it manually!", 0);
      return;
    } else {
      editor.replaceRange("", { line: target_line.number - 1, ch: finds[0][0] }, { line: target_line.number - 1, ch: finds[0][1] });
      return;
    }
  }
  let startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  let mode = in_table ? "table" : "callout";
  let finds_lines = [];
  let finds_all = [];
  for (let i = target_line.number; i <= editor.lineCount(); i++) {
    let line_text2 = editor.getLine(i - 1);
    if (!startReg[mode].test(line_text2))
      break;
    print(`line_${i}_text:`, line_text2);
    let finds = findLinkInLine(file_base_name, line_text2);
    if (finds.length > 0) {
      finds_lines.push(...new Array(finds.length).fill(i));
      finds_all.push(...finds);
    }
  }
  for (let i = target_line.number - 1; i >= 1; i--) {
    let line_text2 = editor.getLine(i - 1);
    if (!startReg[mode].test(line_text2))
      break;
    print(`line_${i}_text:`, line_text2);
    let finds = findLinkInLine(file_base_name, line_text2);
    if (finds.length > 0) {
      finds_lines.push(...new Array(finds.length).fill(i));
      finds_all.push(...finds);
    }
  }
  if (finds_all.length == 0) {
    new import_obsidian.Notice(`Fail to find the link-text (for links in ${mode}), please delete it manually!`, 0);
    return;
  } else if (finds_all.length != 1) {
    new import_obsidian.Notice(`Find multiple same Link in current ${mode}, please delete it manually!`, 0);
    return;
  } else {
    editor.replaceRange("", { line: finds_lines[0] - 1, ch: finds_all[0][0] }, { line: finds_lines[0] - 1, ch: finds_all[0][1] });
  }
  editor.focus();
};
var handlerCopyFile = (FileBaseName, currentMd, plugin) => __async(void 0, null, function* () {
  const file = getFileByBaseName(currentMd, FileBaseName);
  const basePath = file.vault.adapter.basePath;
  const file_ab_path = basePath + "/" + file.path;
  try {
    copyFileToClipboardCMD(file_ab_path);
    new import_obsidian.Notice("Copied to clipboard !", SUCCESS_NOTICE_TIMEOUT);
  } catch (error) {
    console.error(error);
    new import_obsidian.Notice("Faild to copy the file !", SUCCESS_NOTICE_TIMEOUT);
  }
});
var getFileParentFolder = (file) => {
  if (file instanceof import_obsidian.TFile) {
    if (file.parent instanceof import_obsidian.TFolder) {
      return file.parent;
    }
  }
  return;
};
var onlyOneFileExists = (file) => {
  const fileFolder = getFileParentFolder(file);
  return fileFolder.children.length === 1;
};
function copyFileToClipboardCMD(filePath) {
  if (!(0, import_fs.existsSync)(filePath)) {
    console.error(`File ${filePath} does not exist`);
    return;
  }
  const callback = (error, stdout, stderr) => {
    if (error) {
      new import_obsidian.Notice(`Error executing command: ${error.message}`, SUCCESS_NOTICE_TIMEOUT);
      console.error(`Error executing command: ${error.message}`);
      return;
    }
  };
  if (process.platform === "darwin") {
    (0, import_child_process.execSync)(`open -R "${filePath}"`);
    (0, import_child_process.execSync)(`osascript -e 'tell application "System Events" to keystroke "c" using command down'`);
    (0, import_child_process.execSync)(`osascript -e 'tell application "System Events" to keystroke "w" using command down'`);
    (0, import_child_process.execSync)(`open -a "Obsidian.app"`);
  } else if (process.platform === "linux") {
  } else if (process.platform === "win32") {
    (0, import_child_process.exec)(`powershell -command "Set-Clipboard -Path '${filePath}'"`, callback);
  }
}
var findLinkInLine = (file_name, line_text) => {
  const file_name_mdlink = file_name.replace(/ /g, "%20");
  let regWikiLink = /\!\[\[[^\[\]]*?\]\]/g;
  let regMdLink = /\!\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  print("target_name (WIKI/MD):", file_name, file_name_mdlink);
  let search_result = [];
  if (line_text.includes(file_name)) {
    while (true) {
      let match = regWikiLink.exec(line_text);
      if (!match)
        break;
      let matched_link = match[0];
      print("matched_link:", matched_link);
      print("matched_link.includes(file_name)", matched_link.includes(file_name));
      if (matched_link.includes(file_name)) {
        search_result.push([match.index, match.index + matched_link.length]);
      }
    }
  }
  if (line_text.includes(file_name_mdlink)) {
    while (true) {
      let match = regMdLink.exec(line_text);
      if (!match)
        break;
      let matched_link = match[0];
      print("matched_link:", matched_link);
      print("matched_link.includes(file_name_mdlink)", matched_link.includes(file_name_mdlink));
      if (matched_link.includes(file_name_mdlink)) {
        search_result.push([match.index, match.index + matched_link.length]);
      }
    }
  }
  return search_result;
};
var handlerRenameFile = (FileBaseName, currentMd, plugin) => {
  const target_file = getFileByBaseName(currentMd, FileBaseName);
  let path = target_file.path;
  let name = target_file.name;
  let target_folder = path.substring(0, path.length - name.length);
  let file_type = name.split(".").pop();
  new RenameModal(plugin.app, target_folder, name.substring(0, name.length - file_type.length - 1), file_type, (result) => {
    if (!result)
      return;
    if (result == path)
      return;
    app.vault.adapter.exists(result).then((exists) => {
      if (exists) {
        new import_obsidian.Notice(`Fail to rename for there alreay exist file ${result}`);
      } else {
        plugin.app.fileManager.renameFile(target_file, `${result}`);
      }
    });
  }).open();
};
var RenameModal = class extends import_obsidian2.Modal {
  constructor(app2, folder, name, filetype, onSubmit) {
    super(app2);
    this.onSubmit = onSubmit;
    this.folder = folder;
    this.name = name;
    this.filetype = filetype;
  }
  onOpen() {
    const { contentEl } = this;
    let setting = new import_obsidian2.Setting(contentEl).setName("Rename:").addText((text) => text.setValue(this.name).onChange((value) => {
      this.result = `${this.folder}${value}.${this.filetype}`;
    }));
    setTimeout(() => {
      let inputBox = setting.settingEl.querySelector('input[type="text"]');
      if (inputBox && inputBox.parentElement) {
        let folder_indicator = document.createElement("label");
        folder_indicator.innerText = `${this.folder}`;
        folder_indicator.style.marginRight = "4px";
        inputBox.parentElement.insertBefore(folder_indicator, inputBox);
        let file_type_indicator = document.createElement("label");
        file_type_indicator.innerText = `.${this.filetype}`;
        file_type_indicator.style.marginLeft = "4px";
        inputBox.after(file_type_indicator);
        let parentEl = setting.settingEl.parentElement;
        if (parentEl) {
          parentEl.style.display = "flex";
          parentEl.style.justifyContent = "center";
        }
        let inputElem = inputBox;
        inputElem.select();
      } else {
        console.error("\u65E0\u6CD5\u627E\u5230\u6587\u672C\u8F93\u5165\u6846");
      }
    }, 0);
    this.scope.register([], "Enter", (evt) => {
      if (evt.isComposing) {
        return;
      }
      this.close();
      this.onSubmit(this.result);
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/deleteFile.ts
var import_obsidian3 = require("obsidian");
var SUCCESS_NOTICE_TIMEOUT2 = 1800;
var deleteFile = (file, plugin) => __async(void 0, null, function* () {
  const deleteOption = plugin.settings.deleteOption;
  try {
    if (deleteOption === ".trash") {
      yield app.vault.trash(file, false);
    } else if (deleteOption === "system-trash") {
      yield app.vault.trash(file, true);
    } else if (deleteOption === "permanent") {
      yield app.vault.delete(file);
    }
  } catch (error) {
    console.error(error);
    new import_obsidian3.Notice("Faild to delete the file/folder !", SUCCESS_NOTICE_TIMEOUT2);
  }
});

// src/options/deleleAllAttachsInTheNote.ts
var deleteAllAttachs = (plugin) => __async(void 0, null, function* () {
  const activeMd = app.workspace.getActiveFile();
  const resolvedLinks = app.metadataCache.resolvedLinks;
  const attachsPaths = [];
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if ((activeMd == null ? void 0 : activeMd.path) === mdFile) {
      let fileCount = 0;
      let flag = false;
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath.match(/.*\.md$/m))
          continue;
        if (isReferencedByOtherNotes(filePath, activeMd))
          continue;
        attachsPaths.push(filePath);
        try {
          const AttachFile = app.vault.getAbstractFileByPath(filePath);
          if (AttachFile instanceof import_obsidian4.TFile) {
            deleteFile(AttachFile, plugin);
          }
          const parentFolder = getFileParentFolder(AttachFile);
          if (!flag) {
            fileCount = parentFolder.children.length;
            flag = !flag;
          }
          fileCount = fileCount - 1;
          if (!fileCount) {
            yield deleteFile(parentFolder, plugin);
            new import_obsidian4.Notice("All attachments and its parent folder deleted!", 3e3);
          }
        } catch (error) {
          console.warn(error);
        }
      }
    }
  }
});
var isReferencedByOtherNotes = (attachPath, currentMd) => {
  const resolvedLinks = app.metadataCache.resolvedLinks;
  let flag = false;
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if (mdFile !== currentMd.path) {
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath === attachPath) {
          flag = true;
        }
      }
    }
  }
  return flag;
};
var getRefencedLinkCount = () => {
  const activeMd = app.workspace.getActiveFile();
  const resolvedLinks = app.metadataCache.resolvedLinks;
  const attachsPaths = [];
  for (const [mdFile, links] of Object.entries(resolvedLinks)) {
    if ((activeMd == null ? void 0 : activeMd.path) === mdFile) {
      for (const [filePath, nr] of Object.entries(links)) {
        if (filePath.match(/.*\.md$/m))
          continue;
        if (isReferencedByOtherNotes(filePath, activeMd))
          continue;
        attachsPaths.push(filePath);
      }
    }
  }
  return attachsPaths.length;
};

// src/config/addCommand-config.ts
var addCommand = (myPlugin) => {
  myPlugin.addCommand({
    id: "clear-all-attachments-in-current-file",
    name: "clear all attachments in current file",
    callback: () => __async(void 0, null, function* () {
      deleteAllAttachs(myPlugin);
    })
  });
};

// src/settings.ts
var import_obsidian5 = require("obsidian");
var DEFAULT_SETTINGS = {
  deleteOption: ".trash",
  logsModal: true,
  dragResize: true,
  clickView: false,
  debug: false
};
var AttachFlowSettingsTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "AttachFlow plugin Settings" });
    new import_obsidian5.Setting(containerEl).setName("Deleted Attachment Destination").setDesc("Select where you want Attachments to be moved once they are deleted").addDropdown((dropdown) => {
      dropdown.addOption("permanent", "Delete Permanently");
      dropdown.addOption(".trash", "Move to Obsidian Trash");
      dropdown.addOption("system-trash", "Move to System Trash");
      dropdown.setValue(this.plugin.settings.deleteOption);
      dropdown.onChange((option) => {
        this.plugin.settings.deleteOption = option;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian5.Setting(containerEl).setName("Drag To Resize Images").setDesc("\u62D6\u62FD\u8C03\u6574\u56FE\u7247\u5927\u5C0F").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.dragResize).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.dragResize = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian5.Setting(containerEl).setName("Click to View Images").setDesc("\u70B9\u51FB\u56FE\u7247\u53F3\u534A\u533A\u57DF\u67E5\u770B\u5927\u56FE").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.clickView).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.clickView = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian5.Setting(containerEl).setName("Print Debug Information").setDesc("\u63A7\u5236\u53F0\u8F93\u51FA\u8C03\u8BD5\u4FE1\u606F").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.debug).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.debug = value;
        setDebug(value);
        yield this.plugin.saveSettings();
      }));
    });
  }
};

// src/utils/handlerEvent.ts
var getMouseEventTarget = (event) => {
  event.preventDefault();
  const target = event.target;
  return target;
};

// src/modals/deletionPrompt.ts
var import_obsidian6 = require("obsidian");
var DeleteAllLogsModal = class extends import_obsidian6.Modal {
  constructor(note, myPlugin) {
    super(app);
    this.note = note;
    this.myPlugin = myPlugin;
  }
  getLog() {
    const referenceMessage = `Are you sure you want to delete "${this.note.basename}.md"?

It will be moved to your ${this.myPlugin.settings.deleteOption}.`;
    return referenceMessage;
  }
  showLogs() {
    const logs = this.contentEl.createEl("div");
    logs.addClass("attachment-flow-log");
    logs.setText(this.getLog());
  }
  onOpen() {
    const { contentEl } = this;
    const myModal = this;
    const headerWrapper = contentEl.createEl("div");
    headerWrapper.addClass("attachment-flow-center-wrapper");
    this.showLogs();
    const referencedMessageWrapper = contentEl.createEl("span");
    referencedMessageWrapper.style.color = "red";
    const referencedMessage = `There are(is) currently  [${getRefencedLinkCount()}]  non-multi-referenced link(s) pointing to this note.`;
    referencedMessageWrapper.append(referencedMessage);
    const buttonWrapper = this.contentEl.createEl("div");
    buttonWrapper.addClass("attachment-flow-center-wrapper");
    const headerEl = headerWrapper.createEl("h1", {
      text: "Delete the file and its all attachments - logs "
    });
    headerEl.addClass("modal-title");
    this.showConfirmButton(buttonWrapper, myModal);
    this.showCancelBtn(buttonWrapper, myModal);
  }
  showCancelBtn(buttonWrapper, myModal) {
    const closeButton = buttonWrapper.createEl("button", {
      text: "Cancel"
    });
    closeButton.setAttribute("aria-label", "Cancel the operation");
    closeButton.addEventListener("click", () => {
      myModal.close();
    });
  }
  showConfirmButton(buttonWrapper, myModal) {
    const removeLinkButton = buttonWrapper.createEl("button", {
      text: "Confirm"
    });
    removeLinkButton.setAttribute("aria-label", "Continue to delete current file and its all non-multi-referenced attachments");
    removeLinkButton.addClass("mod-warning");
    removeLinkButton.addEventListener("click", () => __async(this, null, function* () {
      deleteFile(this.note, this.myPlugin);
      deleteAllAttachs(this.myPlugin);
      myModal.close();
    }));
  }
};

// src/helpers.ts
function onElement(el, event, selector, listener, options) {
  el.on(event, selector, listener, options);
  return () => el.off(event, selector, listener, options);
}

// src/main.ts
var AttachFlowPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.addMenuExtendedSourceMode = (menu, FileBaseName, currentMd, target_type, target_pos, inTable, inCallout) => {
      this.addMenuExtendedPreviewMode(menu, FileBaseName, currentMd);
      menu.addItem((item) => item.setIcon("pencil").setTitle("Rename").onClick(() => __async(this, null, function* () {
        try {
          print("test rename");
          handlerRenameFile(FileBaseName, currentMd, this);
        } catch (e) {
          new import_obsidian7.Notice("Error, could not rename the file!");
        }
      })));
      menu.addItem((item) => item.setIcon("trash-2").setTitle("Clear file and associated link").onClick(() => __async(this, null, function* () {
        try {
          handlerDelFileNew(FileBaseName, currentMd, this, target_type, target_pos, inTable, inCallout);
        } catch (e) {
          new import_obsidian7.Notice("Error, could not clear the file!");
        }
      })));
    };
    this.addMenuExtendedPreviewMode = (menu, FileBaseName, currentMd) => {
      const file = getFileByBaseName(currentMd, FileBaseName);
      if (process.platform != "linux") {
        menu.addItem((item) => item.setIcon("copy").setTitle("Copy file to clipboard").onClick(() => __async(this, null, function* () {
          try {
            handlerCopyFile(FileBaseName, currentMd, this);
          } catch (e) {
            new import_obsidian7.Notice("Error, could not copy the file!");
          }
        })));
      }
      menu.addItem((item) => item.setIcon("arrow-up-right").setTitle("Open in default app").onClick(() => this.app.openWithDefaultApp(file.path)));
      menu.addItem((item) => item.setIcon("arrow-up-right").setTitle(import_obsidian7.Platform.isMacOS ? "Reveal in finder" : "Show in system explorer").onClick(() => {
        this.app.showInFolder(file.path);
      }));
      menu.addItem((item) => item.setIcon("folder").setTitle("Reveal file in navigation").onClick(() => {
        const abstractFilePath = this.app.vault.getAbstractFileByPath(file.path);
        this.app.internalPlugins.getEnabledPluginById("file-explorer").revealInFolder(abstractFilePath);
      }));
    };
  }
  onload() {
    return __async(this, null, function* () {
      console.log("AttachFlow plugin loaded...");
      this.edgeSize = 20;
      this.addSettingTab(new AttachFlowSettingsTab(this.app, this));
      yield this.loadSettings();
      this.registerDocument(document);
      app.workspace.on("window-open", (workspaceWindow, window) => {
        this.registerDocument(window.document);
      });
      this.registerEvent(this.app.workspace.on("file-menu", (menu, file) => {
        if (file instanceof import_obsidian7.TFile) {
          if (!file.path.endsWith(".md"))
            return;
          const addMenuItem = (item) => {
            item.setTitle("Delete file and its attachments").setIcon("trash-2").setSection("danger");
            item.onClick(() => __async(this, null, function* () {
              const modal = new DeleteAllLogsModal(file, this);
              modal.open();
            }));
          };
          menu.addItem(addMenuItem);
        }
      }));
      addCommand(this);
      this.registerDomEvent(document, "click", (evt) => {
        if (!this.settings.clickView)
          return;
        const target = evt.target;
        if (target.tagName === "IMG") {
          const rect = target.getBoundingClientRect();
          const imageCenter = rect.left + rect.width / 2;
          if (evt.clientX > imageCenter && !document.getElementById("af-zoomed-image")) {
            const mask = document.createElement("div");
            mask.id = "af-mask";
            mask.style.position = "fixed";
            mask.style.top = "0";
            mask.style.left = "0";
            mask.style.width = "100%";
            mask.style.height = "100%";
            mask.style.background = "rgba(0, 0, 0, 0.5)";
            mask.style.zIndex = "9998";
            document.body.appendChild(mask);
            const zoomedImage = document.createElement("img");
            zoomedImage.id = "af-zoomed-image";
            zoomedImage.src = evt.target.src;
            const realImage = new Image();
            realImage.onload = function() {
              zoomedImage.style.width = `${realImage.naturalWidth}px`;
              zoomedImage.style.height = `${realImage.naturalHeight}px`;
            };
            realImage.src = evt.target.src;
            zoomedImage.style.position = "fixed";
            zoomedImage.style.zIndex = "9999";
            zoomedImage.style.top = "50%";
            zoomedImage.style.left = "50%";
            zoomedImage.style.transform = "translate(-50%, -50%)";
            document.body.appendChild(zoomedImage);
            const originalWidth = zoomedImage.offsetWidth;
            const originalHeight = zoomedImage.offsetHeight;
            const scaleDiv = document.createElement("div");
            scaleDiv.id = "af-scale-div";
            scaleDiv.style.position = "fixed";
            scaleDiv.style.zIndex = "10000";
            scaleDiv.style.bottom = "0";
            scaleDiv.style.left = "50%";
            scaleDiv.style.transform = "translateX(-50%)";
            scaleDiv.style.color = "#fff";
            scaleDiv.style.fontSize = "20px";
            scaleDiv.style.background = "rgba(0, 0, 0, 0.5)";
            scaleDiv.style.padding = "5px";
            scaleDiv.innerText = "100%";
            document.body.appendChild(scaleDiv);
            zoomedImage.addEventListener("wheel", function(e) {
              e.preventDefault();
              const scale = e.deltaY > 0 ? 0.95 : 1.05;
              const width = zoomedImage.offsetWidth;
              const height = zoomedImage.offsetHeight;
              const newWidth = width * scale;
              const newHeight = height * scale;
              zoomedImage.style.width = `${newWidth}px`;
              zoomedImage.style.height = `${newHeight}px`;
              const scalePercent = newWidth / originalWidth * 100;
              scaleDiv.innerText = `${scalePercent.toFixed(1)}%`;
            });
            zoomedImage.addEventListener("contextmenu", function(e) {
              e.preventDefault();
              zoomedImage.style.width = `${originalWidth}px`;
              zoomedImage.style.height = `${originalHeight}px`;
              scaleDiv.innerText = `100%`;
            });
          }
        } else {
          this.removeZoomedImage();
        }
      });
      this.registerDomEvent(document, "keydown", (evt) => {
        if (evt.key === "Escape") {
          this.removeZoomedImage();
        }
      });
      setDebug(this.settings.debug);
    });
  }
  onunload() {
    console.log("AttachFlow plugin unloaded...");
  }
  removeZoomedImage() {
    if (document.getElementById("af-zoomed-image")) {
      const zoomedImage = document.getElementById("af-zoomed-image");
      if (zoomedImage)
        document.body.removeChild(zoomedImage);
      const scaleDiv = document.getElementById("af-scale-div");
      if (scaleDiv)
        document.body.removeChild(scaleDiv);
      const mask = document.getElementById("af-mask");
      if (mask)
        document.body.removeChild(mask);
    }
  }
  registerDocument(document2) {
    this.register(onElement(document2, "contextmenu", "img, iframe, video, div.file-embed-title, audio", this.onClick.bind(this)));
    this.register(onElement(document2, "mousedown", "img, video", (event) => {
      var _a, _b;
      if (!this.settings.dragResize)
        return;
      const currentMd = app.workspace.getActiveFile();
      if (currentMd.name.endsWith(".canvas"))
        return;
      const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
      if (inPreview)
        return;
      if (event.button === 0) {
        event.preventDefault();
      }
      const img = event.target;
      if (img.id == "af-zoomed-image")
        return;
      const editor = (_b = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _b.editor;
      const editorView = editor.cm;
      const target_pos = editorView.posAtDOM(img);
      let target_line = editorView.state.doc.lineAt(target_pos);
      const inTable = img.closest("table") != null;
      const inCallout = img.closest(".callout") != null;
      const isExcalidraw = img.classList.contains("excalidraw-embedded-img");
      print("InTable", inTable);
      print("Target Element", img);
      let preventClickEvent = function(event2) {
        event2.preventDefault();
        event2.stopPropagation();
      };
      const rect = img.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;
      const edgeSize = this.edgeSize;
      if (x < edgeSize || y < edgeSize || x > rect.width - edgeSize || y > rect.height - edgeSize) {
        const startX = event.clientX;
        const startY = event.clientY;
        const startWidth = img.clientWidth;
        const startHeight = img.clientHeight;
        let lastUpdateX = startX;
        let lastUpdateY = startY;
        const updateThreshold = 5;
        const onMouseMove = (event2) => {
          var _a2;
          img.addEventListener("click", preventClickEvent);
          const currentX = event2.clientX;
          let newWidth = startWidth + (currentX - startX);
          const aspectRatio = startWidth / startHeight;
          newWidth = Math.max(newWidth, 50);
          let newHeight = newWidth / aspectRatio;
          newWidth = Math.round(newWidth);
          newHeight = Math.round(newHeight);
          if (img instanceof HTMLImageElement) {
            img.style.border = "solid";
            img.style.borderWidth = "2px";
            img.style.borderColor = "blue";
            img.style.boxSizing = "border-box";
            img.style.width = `${newWidth}px`;
          } else if (img instanceof HTMLVideoElement) {
            img.style.border = "solid";
            img.style.borderWidth = "2px";
            img.style.borderColor = "blue";
            img.style.boxSizing = "border-box";
            if (img.parentElement) {
              const containerWidth = img.parentElement.clientWidth;
              const newWidthPercentage = newWidth / containerWidth * 100;
              img.style.width = `${newWidthPercentage}%`;
            }
          }
          if (Math.abs(event2.clientX - lastUpdateX) > updateThreshold) {
            const activeView = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
            if (activeView) {
              print("update new Width", newWidth);
              let imageName = img.getAttribute("src");
              if (imageName == null ? void 0 : imageName.startsWith("http")) {
                updateExternalLink(activeView, img, target_pos, newWidth, newHeight, inTable, inCallout);
              } else if (isExcalidraw) {
                let target_name = img.getAttribute("filesource");
                let draw_base_name = target_name;
                if (draw_base_name.includes("/")) {
                  let temp_arr = draw_base_name.split("/");
                  draw_base_name = temp_arr[temp_arr.length - 1];
                } else if (draw_base_name.includes("\\")) {
                  let temp_arr = draw_base_name.split("\\");
                  draw_base_name = temp_arr[temp_arr.length - 1];
                }
                draw_base_name = draw_base_name.endsWith(".md") ? draw_base_name.substring(0, draw_base_name.length - 3) : draw_base_name;
                print(target_name);
                print("excalidraw file:", draw_base_name);
                img.style.maxWidth = "none";
                updateInternalLink(activeView, img, target_pos, draw_base_name, newWidth, newHeight, inTable, inCallout);
              } else {
                imageName = (_a2 = img.parentElement) == null ? void 0 : _a2.getAttribute("src");
                updateInternalLink(activeView, img, target_pos, imageName, newWidth, newHeight, inTable, inCallout);
              }
            }
            lastUpdateX = event2.clientX;
            lastUpdateY = event2.clientY;
          }
        };
        const allowClickEvent = () => {
          img.removeEventListener("click", preventClickEvent);
        };
        const onMouseUp = (event2) => {
          setTimeout(allowClickEvent, 100);
          event2.preventDefault();
          img.style.borderStyle = "none";
          img.style.outline = "none";
          img.style.cursor = "default";
          document2.removeEventListener("mousemove", onMouseMove);
          document2.removeEventListener("mouseup", onMouseUp);
        };
        document2.addEventListener("mousemove", onMouseMove);
        document2.addEventListener("mouseup", onMouseUp);
      }
    }));
    this.register(onElement(document2, "mouseover", "img, video", (event) => {
      var _a;
      const currentMd = app.workspace.getActiveFile();
      if (currentMd.name.endsWith(".canvas"))
        return;
      const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
      if (inPreview)
        return;
      const img = event.target;
      const rect = img.getBoundingClientRect();
      const edgeSize = this.edgeSize;
      if (img.id == "af-zoomed-image")
        return;
      const isExcalidraw = img.classList.contains("excalidraw-embedded-img");
      let lastMove = 0;
      const mouseOverHandler = (event2) => {
        if (!this.settings.dragResize)
          return;
        const now = Date.now();
        if (now - lastMove < 100)
          return;
        lastMove = now;
        const x = event2.clientX - rect.left;
        const y = event2.clientY - rect.top;
        if (x >= rect.width - edgeSize || x <= edgeSize || (y >= rect.height - edgeSize || y <= edgeSize)) {
          if (this.settings.dragResize) {
            img.style.cursor = "nwse-resize";
            img.style.outline = "solid";
            img.style.outlineWidth = "6px";
            img.style.outlineColor = "#dfb0f283";
          }
        } else if (x > rect.width / 2 && this.settings.clickView) {
          img.style.cursor = "zoom-in";
        } else {
          img.style.cursor = "default";
          img.style.outline = "none";
        }
      };
      this.registerDomEvent(img, "mousemove", mouseOverHandler);
    }));
    this.register(onElement(document2, "mouseout", "img, video", (event) => {
      var _a;
      if (!this.settings.dragResize)
        return;
      const currentMd = app.workspace.getActiveFile();
      if (currentMd.name.endsWith(".canvas"))
        return;
      const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
      if (inPreview)
        return;
      const img = event.target;
      img.style.borderStyle = "none";
      img.style.cursor = "default";
      img.style.outline = "none";
    }));
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  registerEscapeButton(menu, document2 = activeDocument) {
    menu.register(onElement(document2, "keydown", "*", (e) => {
      if (e.key === "Escape") {
        e.preventDefault();
        e.stopPropagation();
        menu.hide();
      }
    }));
  }
  onClick(event) {
    var _a, _b, _c, _d, _e;
    const target = getMouseEventTarget(event);
    const curTargetType = target.localName;
    if (target.id == "af-zoomed-image")
      return;
    const currentMd = app.workspace.getActiveFile();
    const inCanvas = currentMd.name.endsWith(".canvas");
    const SupportedTargetType = ["img", "iframe", "video", "div", "audio"];
    const menu = new import_obsidian7.Menu();
    if (!SupportedTargetType.includes(curTargetType))
      return;
    const inTable = target.closest("table") != null;
    const inCallout = target.closest(".callout") != null;
    const inPreview = ((_a = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
    const isExcalidraw = target.classList.contains("excalidraw-embedded-img");
    let target_name = target.getAttribute("src");
    if (target_name && target_name.startsWith("http"))
      return;
    if (inCanvas) {
      if ((_b = target.parentElement) == null ? void 0 : _b.classList.contains("canvas-node-content"))
        return;
      let file_name = (_c = target.parentElement) == null ? void 0 : _c.getAttribute("src");
      return;
    }
    if (isExcalidraw) {
      target_name = target.getAttribute("filesource");
      let file_base_name = target_name;
      if (file_base_name.includes("/")) {
        let temp_arr = file_base_name.split("/");
        file_base_name = temp_arr[temp_arr.length - 1];
      } else if (file_base_name.includes("\\")) {
        let temp_arr = file_base_name.split("\\");
        file_base_name = temp_arr[temp_arr.length - 1];
      }
      file_base_name = file_base_name.endsWith(".md") ? file_base_name.substring(0, file_base_name.length - 3) : file_base_name;
      target_name = file_base_name;
    } else {
      target_name = (_d = target.parentElement) == null ? void 0 : _d.getAttribute("src");
      target_name = target_name.replace(/^(\.\.\/)+/g, "");
      let pdf_match = target_name.match(/.*\.pdf/);
      target_name = pdf_match ? pdf_match[0] : target_name;
      if (curTargetType == "img" && pdf_match)
        return;
    }
    if (inPreview) {
      if (SupportedTargetType.includes(curTargetType)) {
        this.addMenuExtendedPreviewMode(menu, target_name, currentMd);
      }
    } else {
      const editor = (_e = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView)) == null ? void 0 : _e.editor;
      const editorView = editor.cm;
      const target_pos = editorView.posAtDOM(target);
      let target_line = editorView.state.doc.lineAt(target_pos);
      print("target line information: line-content, line-number(1-based), target.ch");
      print(target_line.text, target_line.number, target_pos - target_line.from);
      if (SupportedTargetType.includes(curTargetType)) {
        this.addMenuExtendedSourceMode(menu, target_name, currentMd, curTargetType, target_pos, inTable, inCallout);
      }
    }
    this.registerEscapeButton(menu);
    let offset = -163;
    let linux_offset = -138;
    offset = process.platform == "linux" ? linux_offset : offset;
    if (inTable && !inPreview) {
      menu.showAtPosition({ x: event.pageX, y: event.pageY + offset });
    } else {
      menu.showAtPosition({ x: event.pageX, y: event.pageY });
    }
    this.app.workspace.trigger("AttachFlow:contextmenu", menu);
  }
};
function updateInternalLink(activeView, target, target_pos, imageName, newWidth, newHeight, inTable, inCallout) {
  const editor = activeView.editor;
  const editorView = editor.cm;
  let target_line = editorView.state.doc.lineAt(target_pos);
  if (!inCallout && !inTable) {
    let matched = matchLineWithInternalLink(target_line.text, imageName, newWidth, inTable);
    if (matched.length == 1) {
      editorView.dispatch({
        changes: {
          from: target_line.from + matched[0].from_ch,
          to: target_line.from + matched[0].to_ch,
          insert: matched[0].new_link
        }
      });
    } else if (matched.length == 0) {
    } else {
      new import_obsidian7.Notice("Find multiple same image-link in line, please zoom manually!");
    }
    return;
  }
  let startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  let mode = inTable ? "table" : "callout";
  print("mode", mode);
  const start_reg = startReg[mode];
  let start_line_number = target_line.number;
  let matched_results = [];
  let matched_lines = [];
  for (let i = start_line_number; i <= editor.lineCount(); i++) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithInternalLink(line.text, imageName, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  for (let i = start_line_number - 1; i >= 1; i--) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithInternalLink(line.text, imageName, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  if (matched_results.length == 1) {
    let target_line2 = editorView.state.doc.line(matched_lines[0]);
    if (mode == "table") {
      let old_text = target_line2.text;
      let new_line_text = old_text.substring(0, matched_results[0].from_ch) + matched_results[0].new_link + old_text.substring(matched_results[0].to_ch);
      editorView.dispatch({
        changes: {
          from: target_line2.from,
          to: target_line2.from + old_text.length,
          insert: new_line_text
        }
      });
    } else {
      editorView.dispatch({
        changes: {
          from: target_line2.from + matched_results[0].from_ch,
          to: target_line2.from + matched_results[0].to_ch,
          insert: matched_results[0].new_link
        }
      });
    }
  } else if (matched_results.length == 0) {
    new import_obsidian7.Notice(`Fail to find current image-link in ${mode}, please zoom manually!`);
  } else {
    new import_obsidian7.Notice(`Find multiple same image-link in ${mode}, please zoom manually!`);
  }
  return;
}
function updateExternalLink(activeView, target, target_pos, newWidth, newHeight, inTable, inCallout) {
  const editor = activeView.editor;
  const editorView = editor.cm;
  let target_line = editorView.state.doc.lineAt(target_pos);
  const link = target.getAttribute("src");
  const altText = target.getAttribute("alt");
  if (!inCallout && !inTable) {
    let matched = matchLineWithExternalLink(target_line.text, link, altText, newWidth, inTable);
    if (matched.length == 1) {
      editorView.dispatch({
        changes: {
          from: target_line.from + matched[0].from_ch,
          to: target_line.from + matched[0].to_ch,
          insert: matched[0].new_link
        }
      });
    } else if (matched.length == 0) {
    } else {
      new import_obsidian7.Notice("Find multiple same image-link in line, please zoom manually!");
    }
    return;
  }
  let startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  let mode = inTable ? "table" : "callout";
  print("mode", mode);
  const start_reg = startReg[mode];
  let start_line_number = target_line.number;
  let matched_results = [];
  let matched_lines = [];
  for (let i = start_line_number; i <= editor.lineCount(); i++) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithExternalLink(line.text, link, altText, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  for (let i = start_line_number - 1; i >= 1; i--) {
    let line = editorView.state.doc.line(i);
    if (!start_reg.test(line.text))
      break;
    let matched = matchLineWithExternalLink(line.text, link, altText, newWidth, inTable);
    matched_results.push(...matched);
    matched_lines.push(...new Array(matched.length).fill(i));
  }
  print(matched_results);
  print(matched_lines);
  if (matched_results.length == 1) {
    let target_line2 = editorView.state.doc.line(matched_lines[0]);
    if (mode == "table") {
      let old_text = target_line2.text;
      let new_line_text = old_text.substring(0, matched_results[0].from_ch) + matched_results[0].new_link + old_text.substring(matched_results[0].to_ch);
      editorView.dispatch({
        changes: {
          from: target_line2.from,
          to: target_line2.from + old_text.length,
          insert: new_line_text
        }
      });
    } else {
      editorView.dispatch({
        changes: {
          from: target_line2.from + matched_results[0].from_ch,
          to: target_line2.from + matched_results[0].to_ch,
          insert: matched_results[0].new_link
        }
      });
    }
  } else if (matched_results.length == 0) {
    new import_obsidian7.Notice(`Fail to find current image-link in ${mode}, please zoom manually!`);
  } else {
    new import_obsidian7.Notice(`Find multiple same image-link in ${mode}, please zoom manually!`);
  }
  return;
}
function matchLineWithInternalLink(line_text, target_name, new_width, intable) {
  let regWikiLink = /\!\[\[[^\[\]]*?\]\]/g;
  let regMdLink = /\!\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  const target_name_mdlink = target_name.replace(/ /g, "%20");
  if (!line_text.includes(target_name) && !line_text.includes(target_name_mdlink))
    return [];
  let result = [];
  while (true) {
    let wiki_match = regWikiLink.exec(line_text);
    if (!wiki_match)
      break;
    const matched_link = wiki_match[0];
    if (matched_link.includes(target_name)) {
      let normal_link = intable ? matched_link.replace(/\\\|/g, "|") : matched_link;
      let link_match = normal_link.match(/!\[\[(.*?)(\||\]\])/);
      let link_text = link_match ? link_match[1] : "";
      let alt_match = matched_link.match(/!\[\[.*?(\|(.*?))\]\]/);
      let alt_text = alt_match ? alt_match[1] : "";
      let alt_text_list = alt_text.split("|");
      let alt_text_wo_size = "";
      let new_alt_text = "";
      for (let alt of alt_text_list) {
        if (!/^\d+$/.test(alt) && !/^\s*$/.test(alt)) {
          alt_text_wo_size = alt_text_wo_size + "|" + alt;
        }
      }
      new_alt_text = new_width != 0 ? `${alt_text_wo_size}|${new_width}` : alt_text_wo_size;
      new_alt_text = intable ? new_alt_text.replace(/\|/g, "\\|") : new_alt_text;
      let newWikiLink = link_match ? `![[${link_text}${new_alt_text}]]` : `![[${target_name}${new_alt_text}]]`;
      result.push({
        old_link: matched_link,
        new_link: newWikiLink,
        from_ch: wiki_match.index,
        to_ch: wiki_match.index + matched_link.length
      });
    }
  }
  while (true) {
    let match = regMdLink.exec(line_text);
    if (!match)
      break;
    const matched_link = match[0];
    if (matched_link.includes(target_name_mdlink)) {
      let alt_text_match = matched_link.match(/\[.*?\]/g);
      let alt_text = alt_text_match[0].substring(1, alt_text_match[0].length - 1);
      let pure_alt = alt_text.replace(/\|\d+(\|\d+)?$/g, "");
      if (intable) {
        pure_alt = alt_text.replace(/\\\|\d+(\|\d+)?$/g, "");
      }
      let link_text = matched_link.substring(alt_text_match[0].length + 2, matched_link.length - 1);
      let newMDLink = intable ? `![${pure_alt}\\|${new_width}](${link_text})` : `![${pure_alt}|${new_width}](${link_text})`;
      if (/^\d*$/.test(alt_text)) {
        newMDLink = `![${new_width}](${link_text})`;
      }
      result.push({
        old_link: matched_link,
        new_link: newMDLink,
        from_ch: match.index,
        to_ch: match.index + matched_link.length
      });
    }
  }
  print("Line Text: ", line_text);
  print("MatchedInfo:", result);
  return result;
}
function matchLineWithExternalLink(line_text, link, alt_text, new_width, intable) {
  let result = [];
  let regMdLink = /\!\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  if (!line_text.includes(link) || !line_text.includes(alt_text))
    return [];
  let newExternalLink = intable ? `![${alt_text}\\|${new_width}](${link})` : `![${alt_text}|${new_width}](${link})`;
  if (/^\d*$/.test(alt_text) || /^\s*$/.test(alt_text)) {
    newExternalLink = `![${new_width}](${link})`;
  }
  while (true) {
    let match = regMdLink.exec(line_text);
    if (!match)
      break;
    let matched_link = match[0];
    if (matched_link.includes(link) && matched_link.includes(alt_text)) {
      result.push({
        old_link: matched_link,
        new_link: newExternalLink,
        from_ch: match.index,
        to_ch: match.index + matched_link.length
      });
    }
  }
  print("Line Text: ", line_text);
  print("MatchedInfo:", result);
  return result;
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL29wdGlvbnMvZGVsZWxlQWxsQXR0YWNoc0luVGhlTm90ZS50cyIsICJzcmMvdXRpbC50cyIsICJzcmMvdXRpbHMvZGVsZXRlRmlsZS50cyIsICJzcmMvY29uZmlnL2FkZENvbW1hbmQtY29uZmlnLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvdXRpbHMvaGFuZGxlckV2ZW50LnRzIiwgInNyYy9tb2RhbHMvZGVsZXRpb25Qcm9tcHQudHMiLCAic3JjL2hlbHBlcnMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IE1lbnUsIE1lbnVJdGVtLCBOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIE1hcmtkb3duVmlldywgUGxhdGZvcm0gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGFkZENvbW1hbmQgfSBmcm9tIFwiLi9jb25maWcvYWRkQ29tbWFuZC1jb25maWdcIjtcbmltcG9ydCB7IEF0dGFjaEZsb3dTZXR0aW5nc1RhYiB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBBdHRhY2hGbG93U2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuaW1wb3J0ICogYXMgVXRpbCBmcm9tIFwiLi91dGlsXCI7XG5pbXBvcnQgeyBwcmludCwgc2V0RGVidWcgfSBmcm9tICcuL3V0aWwnXG5pbXBvcnQgeyBnZXRNb3VzZUV2ZW50VGFyZ2V0IH0gZnJvbSBcIi4vdXRpbHMvaGFuZGxlckV2ZW50XCI7XG5pbXBvcnQgeyBEZWxldGVBbGxMb2dzTW9kYWwgfSBmcm9tIFwiLi9tb2RhbHMvZGVsZXRpb25Qcm9tcHRcIjtcbmltcG9ydCB7IEVkaXRvclZpZXcsIGtleW1hcCwgVmlld1VwZGF0ZSB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHtcblx0RWxlY3Ryb25XaW5kb3csIEZpbGVTeXN0ZW1BZGFwdGVyV2l0aEludGVybmFsQXBpLFxuXHRsb2FkSW1hZ2VCbG9iLCBBcHBXaXRoRGVza3RvcEludGVybmFsQXBpLCBFZGl0b3JJbnRlcm5hbEFwaSwgb25FbGVtZW50XG59IGZyb20gXCIuL2hlbHBlcnNcIlxuaW1wb3J0IHsgcGxhdGZvcm0gfSBmcm9tIFwib3NcIjtcbmltcG9ydCB7IG9mZiB9IGZyb20gXCJwcm9jZXNzXCI7XG5cbmludGVyZmFjZSBNYXRjaGVkTGlua0luTGluZSB7XG5cdG9sZF9saW5rOiBzdHJpbmcsXG5cdG5ld19saW5rOiBzdHJpbmcsXG5cdGZyb21fY2g6IG51bWJlcixcblx0dG9fY2g6IG51bWJlclxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdHRhY2hGbG93UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IEF0dGFjaEZsb3dTZXR0aW5ncztcblx0ZWRnZVNpemU6IG51bWJlcjtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJBdHRhY2hGbG93IHBsdWdpbiBsb2FkZWQuLi5cIik7XG5cdFx0dGhpcy5lZGdlU2l6ZSA9IDIwO1xuXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBBdHRhY2hGbG93U2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5yZWdpc3RlckRvY3VtZW50KGRvY3VtZW50KTtcblx0XHRhcHAud29ya3NwYWNlLm9uKFwid2luZG93LW9wZW5cIiwgKHdvcmtzcGFjZVdpbmRvdywgd2luZG93KSA9PiB7XG5cdFx0XHR0aGlzLnJlZ2lzdGVyRG9jdW1lbnQod2luZG93LmRvY3VtZW50KTtcblx0XHR9KTtcblx0XHQvLyBhZGQgY29udGV4dG1lbnUgb24gZmlsZSBjb250ZXh0XG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1tZW51XCIsIChtZW51LCBmaWxlKSA9PiB7XG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0XHRpZiAoIWZpbGUucGF0aC5lbmRzV2l0aChcIi5tZFwiKSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGFkZE1lbnVJdGVtID0gKGl0ZW06IE1lbnVJdGVtKSA9PiB7XG5cdFx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKFwiRGVsZXRlIGZpbGUgYW5kIGl0cyBhdHRhY2htZW50c1wiKVxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbihcInRyYXNoLTJcIilcblx0XHRcdFx0XHRcdFx0LnNldFNlY3Rpb24oXCJkYW5nZXJcIik7XG5cdFx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBEZWxldGVBbGxMb2dzTW9kYWwoZmlsZSwgdGhpcyk7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0bWVudS5hZGRJdGVtKGFkZE1lbnVJdGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpO1xuXHRcdC8vIHJlZ2lzdGVyIGFsbCBjb21tYW5kcyBpbiBhZGRDb21tYW5kIGZ1bmN0aW9uXG5cdFx0YWRkQ29tbWFuZCh0aGlzKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmNsaWNrVmlldykgcmV0dXJuO1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0lNRycpIHtcblx0XHRcdFx0Ly8gXHU4QkExXHU3Qjk3XHU1NkZFXHU1MENGXHU3Njg0XHU1REU2XHU4RkI5XHU3NTRDXHU3Njg0XHU0RjREXHU3RjZFXHU1M0NBXHU0RTJEXHU1RkMzXHU3Njg0XHU0RjREXHU3RjZFXG5cdFx0XHRcdGNvbnN0IHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRcdGNvbnN0IGltYWdlQ2VudGVyID0gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDI7XG5cdFx0XHRcdGlmIChldnQuY2xpZW50WCA+IGltYWdlQ2VudGVyICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWYtem9vbWVkLWltYWdlJykpIHtcblx0XHRcdFx0XHQvLyBldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRjb25zdCBtYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdFx0bWFzay5pZCA9ICdhZi1tYXNrJztcblx0XHRcdFx0XHRtYXNrLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcblx0XHRcdFx0XHRtYXNrLnN0eWxlLnRvcCA9ICcwJztcblx0XHRcdFx0XHRtYXNrLnN0eWxlLmxlZnQgPSAnMCc7XG5cdFx0XHRcdFx0bWFzay5zdHlsZS53aWR0aCA9ICcxMDAlJztcblx0XHRcdFx0XHRtYXNrLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcblx0XHRcdFx0XHRtYXNrLnN0eWxlLmJhY2tncm91bmQgPSAncmdiYSgwLCAwLCAwLCAwLjUpJzsgIC8vIFx1NTM0QVx1OTAwRlx1NjYwRVx1OUVEMVx1ODI3Mlx1ODBDQ1x1NjY2RlxuXHRcdFx0XHRcdG1hc2suc3R5bGUuekluZGV4ID0gJzk5OTgnOyAgLy8gXHU0RjdGXHU5MDZFXHU3RjY5XHU0RjREXHU0RThFXHU1MTc2XHU0RUQ2XHU1MTg1XHU1QkI5XHU0RTRCXHU0RTBCXHVGRjBDXHU0RjQ2XHU1NzI4XHU1OTI3XHU1NkZFXHU0RTRCXHU0RTBBXG5cdFx0XHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtYXNrKTtcblxuXHRcdFx0XHRcdGNvbnN0IHpvb21lZEltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cdFx0XHRcdFx0em9vbWVkSW1hZ2UuaWQgPSAnYWYtem9vbWVkLWltYWdlJztcblx0XHRcdFx0XHR6b29tZWRJbWFnZS5zcmMgPSAoZXZ0LnRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zcmM7XG5cdFx0XHRcdFx0Y29uc3QgcmVhbEltYWdlID0gbmV3IEltYWdlKCk7XG5cdFx0XHRcdFx0cmVhbEltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHpvb21lZEltYWdlLnN0eWxlLndpZHRoID0gYCR7cmVhbEltYWdlLm5hdHVyYWxXaWR0aH1weGA7XG5cdFx0XHRcdFx0XHR6b29tZWRJbWFnZS5zdHlsZS5oZWlnaHQgPSBgJHtyZWFsSW1hZ2UubmF0dXJhbEhlaWdodH1weGA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlYWxJbWFnZS5zcmMgPSAoZXZ0LnRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zcmM7XG5cdFx0XHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuXHRcdFx0XHRcdHpvb21lZEltYWdlLnN0eWxlLnpJbmRleCA9ICc5OTk5Jztcblx0XHRcdFx0XHR6b29tZWRJbWFnZS5zdHlsZS50b3AgPSAnNTAlJztcblx0XHRcdFx0XHR6b29tZWRJbWFnZS5zdHlsZS5sZWZ0ID0gJzUwJSc7XG5cdFx0XHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKSc7XG5cdFx0XHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh6b29tZWRJbWFnZSk7XG5cdFx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxXaWR0aCA9IHpvb21lZEltYWdlLm9mZnNldFdpZHRoO1xuXHRcdFx0XHRcdGNvbnN0IG9yaWdpbmFsSGVpZ2h0ID0gem9vbWVkSW1hZ2Uub2Zmc2V0SGVpZ2h0O1xuXG5cdFx0XHRcdFx0Y29uc3Qgc2NhbGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0XHRzY2FsZURpdi5pZCA9ICdhZi1zY2FsZS1kaXYnO1xuXHRcdFx0XHRcdHNjYWxlRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcblx0XHRcdFx0XHRzY2FsZURpdi5zdHlsZS56SW5kZXggPSAnMTAwMDAnOyAgLy8gXHU3ODZFXHU0RkREXHU1QjgzXHU1NzI4IHpvb21lZEltYWdlIFx1NzY4NFx1NEUwQVx1NjVCOVxuXHRcdFx0XHRcdHNjYWxlRGl2LnN0eWxlLmJvdHRvbSA9ICcwJztcblx0XHRcdFx0XHRzY2FsZURpdi5zdHlsZS5sZWZ0ID0gJzUwJSc7XG5cdFx0XHRcdFx0c2NhbGVEaXYuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoLTUwJSknO1xuXHRcdFx0XHRcdHNjYWxlRGl2LnN0eWxlLmNvbG9yID0gJyNmZmYnO1xuXHRcdFx0XHRcdHNjYWxlRGl2LnN0eWxlLmZvbnRTaXplID0gJzIwcHgnO1xuXHRcdFx0XHRcdHNjYWxlRGl2LnN0eWxlLmJhY2tncm91bmQgPSAncmdiYSgwLCAwLCAwLCAwLjUpJzsgIC8vIFx1NTM0QVx1OTAwRlx1NjYwRVx1ODBDQ1x1NjY2Rlx1NEY3Rlx1NTE3Nlx1NTcyOFx1NTQwNFx1NzlDRFx1NTZGRVx1NTBDRlx1NEUwQVx1OTBGRFx1NkUwNVx1NjY3MFx1NTNFRlx1ODlDMVxuXHRcdFx0XHRcdHNjYWxlRGl2LnN0eWxlLnBhZGRpbmcgPSAnNXB4Jztcblx0XHRcdFx0XHRzY2FsZURpdi5pbm5lclRleHQgPSAnMTAwJSc7ICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTRFM0EgMTAwJVxuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NhbGVEaXYpO1xuXG5cdFx0XHRcdFx0em9vbWVkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0Ly8gXHU4QkExXHU3Qjk3XHU3RjI5XHU2NTNFXHU2QkQ0XHU0RjhCXHVGRjBDXHU4RkQ5XHU5MUNDXHU2MjExXHU0RUVDXHU4QkJFXHU1QjlBXHU0RTNBXHU2QkNGXHU2QjIxXHU2RURBXHU1MkE4XHU2NUY2XHU2NTNFXHU1OTI3XHU2MjE2XHU3RjI5XHU1QzBGNSVcblx0XHRcdFx0XHRcdGNvbnN0IHNjYWxlID0gZS5kZWx0YVkgPiAwID8gMC45NSA6IDEuMDU7XG5cdFx0XHRcdFx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTc2ODRcdTVCQkRcdTVFQTZcdTU0OENcdTlBRDhcdTVFQTZcblx0XHRcdFx0XHRcdGNvbnN0IHdpZHRoID0gem9vbWVkSW1hZ2Uub2Zmc2V0V2lkdGg7XG5cdFx0XHRcdFx0XHRjb25zdCBoZWlnaHQgPSB6b29tZWRJbWFnZS5vZmZzZXRIZWlnaHQ7XG5cdFx0XHRcdFx0XHQvLyBcdThCQTFcdTdCOTdcdTY1QjBcdTc2ODRcdTVCQkRcdTVFQTZcdTU0OENcdTlBRDhcdTVFQTZcblx0XHRcdFx0XHRcdGNvbnN0IG5ld1dpZHRoID0gd2lkdGggKiBzY2FsZTtcblx0XHRcdFx0XHRcdGNvbnN0IG5ld0hlaWdodCA9IGhlaWdodCAqIHNjYWxlO1xuXHRcdFx0XHRcdFx0Ly8gXHU4QkJFXHU3RjZFXHU2NUIwXHU3Njg0XHU1QkJEXHU1RUE2XHU1NDhDXHU5QUQ4XHU1RUE2XG5cdFx0XHRcdFx0XHR6b29tZWRJbWFnZS5zdHlsZS53aWR0aCA9IGAke25ld1dpZHRofXB4YDtcblx0XHRcdFx0XHRcdHpvb21lZEltYWdlLnN0eWxlLmhlaWdodCA9IGAke25ld0hlaWdodH1weGA7XG5cblx0XHRcdFx0XHRcdC8vIFx1NjZGNFx1NjVCMFx1N0YyOVx1NjUzRVx1NzY3RVx1NTIwNlx1NkJENFx1NzY4NFx1NjYzRVx1NzkzQVxuXHRcdFx0XHRcdFx0Y29uc3Qgc2NhbGVQZXJjZW50ID0gKG5ld1dpZHRoIC8gb3JpZ2luYWxXaWR0aCkgKiAxMDA7XG5cdFx0XHRcdFx0XHRzY2FsZURpdi5pbm5lclRleHQgPSBgJHtzY2FsZVBlcmNlbnQudG9GaXhlZCgxKX0lYDtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdHpvb21lZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTsgIC8vIFx1OTYzQlx1NkI2Mlx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1NjYzRVx1NzkzQVxuXG5cdFx0XHRcdFx0XHQvLyBcdTYwNjJcdTU5MERcdTUzOUZcdTY3NjVcdTc2ODRcdTVDM0FcdTVCRjhcblx0XHRcdFx0XHRcdHpvb21lZEltYWdlLnN0eWxlLndpZHRoID0gYCR7b3JpZ2luYWxXaWR0aH1weGA7XG5cdFx0XHRcdFx0XHR6b29tZWRJbWFnZS5zdHlsZS5oZWlnaHQgPSBgJHtvcmlnaW5hbEhlaWdodH1weGA7XG5cdFx0XHRcdFx0XHRzY2FsZURpdi5pbm5lclRleHQgPSBgMTAwJWA7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucmVtb3ZlWm9vbWVkSW1hZ2UoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleWRvd24nLCAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcblx0XHRcdFx0dGhpcy5yZW1vdmVab29tZWRJbWFnZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0c2V0RGVidWcodGhpcy5zZXR0aW5ncy5kZWJ1Zyk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHRjb25zb2xlLmxvZyhcIkF0dGFjaEZsb3cgcGx1Z2luIHVubG9hZGVkLi4uXCIpO1xuXHR9XG5cblx0cmVtb3ZlWm9vbWVkSW1hZ2UoKSB7XG5cdFx0aWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZi16b29tZWQtaW1hZ2UnKSkge1xuXHRcdFx0Y29uc3Qgem9vbWVkSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWYtem9vbWVkLWltYWdlJyk7XG5cdFx0XHRpZiAoem9vbWVkSW1hZ2UpIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoem9vbWVkSW1hZ2UpO1xuXHRcdFx0Y29uc3Qgc2NhbGVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWYtc2NhbGUtZGl2Jyk7XG5cdFx0XHRpZiAoc2NhbGVEaXYpIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NhbGVEaXYpO1xuXHRcdFx0Y29uc3QgbWFzayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZi1tYXNrJyk7XG5cdFx0XHRpZiAobWFzaykgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtYXNrKTtcblx0XHR9XG5cdH1cblxuXHRyZWdpc3RlckRvY3VtZW50KGRvY3VtZW50OiBEb2N1bWVudCkge1xuXHRcdHRoaXMucmVnaXN0ZXIoXG5cdFx0XHRvbkVsZW1lbnQoXG5cdFx0XHRcdGRvY3VtZW50LFxuXHRcdFx0XHRcImNvbnRleHRtZW51XCIgYXMga2V5b2YgSFRNTEVsZW1lbnRFdmVudE1hcCxcblx0XHRcdFx0XCJpbWcsIGlmcmFtZSwgdmlkZW8sIGRpdi5maWxlLWVtYmVkLXRpdGxlLCBhdWRpb1wiLFxuXHRcdFx0XHR0aGlzLm9uQ2xpY2suYmluZCh0aGlzKVxuXHRcdFx0KVxuXHRcdCk7XG5cblx0XHQvLyBcdTRFRTVcdTRFMEJcdTRFMDlcdTRFMkFcdTRFOEJcdTRFRjZcdTY2MkZcdTRFM0FcdTRFODZcdTVCOUVcdTczQjBcdTYyRDZcdTYyRkRcdTY1MzlcdTUzRDhcdTU2RkVcdTcyNDdcdTU5MjdcdTVDMEZcdTc2ODRcdTUyOUZcdTgwRkRcdUZGMENcdTRGRUVcdTY1MzlcdTgxRUEgaHR0cHM6Ly9naXRodWIuY29tL3hSeXVsL29ic2lkaWFuLWltYWdlLWNvbnZlcnRlclxuXHRcdC8vIFx1OTY0NFx1NEUwQVx1NTE3NiBNSVQgTGljZW5zZVxuXHRcdC8vIE1JVCBMaWNlbnNlXG5cdFx0Ly8gQ29weXJpZ2h0IChjKSAyMDIzIHhSeXVsXG5cdFx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuXHRcdC8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcblx0XHQvLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG5cdFx0Ly8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuXHRcdC8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuXHRcdC8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblx0XHQvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcblx0XHQvLyBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5cdFx0Ly8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuXHRcdC8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuXHRcdC8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuXHRcdC8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcblx0XHQvLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuXHRcdC8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG5cdFx0Ly8gU09GVFdBUkUuXG5cblx0XHR0aGlzLnJlZ2lzdGVyKFxuXHRcdFx0b25FbGVtZW50KFxuXHRcdFx0XHRkb2N1bWVudCxcblx0XHRcdFx0XCJtb3VzZWRvd25cIixcblx0XHRcdFx0XCJpbWcsIHZpZGVvXCIsXG5cdFx0XHRcdChldmVudDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5kcmFnUmVzaXplKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudE1kID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkgYXMgVEZpbGU7XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRNZC5uYW1lLmVuZHNXaXRoKCcuY2FudmFzJykpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBpblByZXZpZXc6IGJvb2xlYW4gPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5nZXRNb2RlKCkgPT0gXCJwcmV2aWV3XCI7XG5cdFx0XHRcdFx0aWYgKGluUHJldmlldykgcmV0dXJuO1xuXG5cdFx0XHRcdFx0aWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgaW1nID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbWFnZUVsZW1lbnQgfCBIVE1MVmlkZW9FbGVtZW50O1xuXHRcdFx0XHRcdGlmIChpbWcuaWQgPT0gJ2FmLXpvb21lZC1pbWFnZScpIHJldHVybjtcblxuXHRcdFx0XHRcdGNvbnN0IGVkaXRvciA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmVkaXRvcjtcblx0XHRcdFx0XHQvLyAgQHRzLWV4cGVjdC1lcnJvciwgbm90IHR5cGVkXG5cdFx0XHRcdFx0Y29uc3QgZWRpdG9yVmlldyA9IGVkaXRvci5jbSBhcyBFZGl0b3JWaWV3O1xuXHRcdFx0XHRcdGNvbnN0IHRhcmdldF9wb3MgPSBlZGl0b3JWaWV3LnBvc0F0RE9NKGltZyk7XG5cdFx0XHRcdFx0bGV0IHRhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZUF0KHRhcmdldF9wb3MpO1xuXG5cdFx0XHRcdFx0Y29uc3QgaW5UYWJsZTogYm9vbGVhbiA9IGltZy5jbG9zZXN0KCd0YWJsZScpICE9IG51bGw7XG5cdFx0XHRcdFx0Y29uc3QgaW5DYWxsb3V0OiBib29sZWFuID0gaW1nLmNsb3Nlc3QoJy5jYWxsb3V0JykgIT0gbnVsbDtcblx0XHRcdFx0XHRjb25zdCBpc0V4Y2FsaWRyYXcgPSBpbWcuY2xhc3NMaXN0LmNvbnRhaW5zKCdleGNhbGlkcmF3LWVtYmVkZGVkLWltZycpO1xuXHRcdFx0XHRcdHByaW50KCdJblRhYmxlJywgaW5UYWJsZSlcblx0XHRcdFx0XHRwcmludCgnVGFyZ2V0IEVsZW1lbnQnLCBpbWcpXG5cblx0XHRcdFx0XHQvLyBwcmludChcImltZy5wYXJlbnRcIiwgaW1nLnBhcmVudEVsZW1lbnQ/aW1nLnBhcmVudEVsZW1lbnQ6J05VTEwnKVxuXG5cdFx0XHRcdFx0Ly8gXHU1QjlBXHU0RTQ5XHU0RThCXHU0RUY2XHU1OTA0XHU3NDA2XHU1MUZEXHU2NTcwXG5cdFx0XHRcdFx0bGV0IHByZXZlbnRDbGlja0V2ZW50ID0gZnVuY3Rpb24oZXZlbnQ6IE1vdXNlRXZlbnQpIHtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0Y29uc3QgcmVjdCA9IGltZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRcdFx0XHRjb25zdCB4ID0gZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdDtcblx0XHRcdFx0XHRjb25zdCB5ID0gZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wO1xuXHRcdFx0XHRcdGNvbnN0IGVkZ2VTaXplID0gdGhpcy5lZGdlU2l6ZTsgLy8gc2l6ZSBvZiB0aGUgZWRnZSBpbiBwaXhlbHNcblx0XHRcdFx0XHRpZiAoeCA8IGVkZ2VTaXplIHx8IHkgPCBlZGdlU2l6ZSB8fCB4ID4gcmVjdC53aWR0aCAtIGVkZ2VTaXplIHx8IHkgPiByZWN0LmhlaWdodCAtIGVkZ2VTaXplKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzdGFydFggPSBldmVudC5jbGllbnRYO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RhcnRZID0gZXZlbnQuY2xpZW50WTtcblx0XHRcdFx0XHRcdGNvbnN0IHN0YXJ0V2lkdGggPSBpbWcuY2xpZW50V2lkdGg7XG5cdFx0XHRcdFx0XHRjb25zdCBzdGFydEhlaWdodCA9IGltZy5jbGllbnRIZWlnaHQ7XG5cdFx0XHRcdFx0XHRsZXQgbGFzdFVwZGF0ZVggPSBzdGFydFg7XG5cdFx0XHRcdFx0XHRsZXQgbGFzdFVwZGF0ZVkgPSBzdGFydFk7XG5cdFx0XHRcdFx0XHRjb25zdCB1cGRhdGVUaHJlc2hvbGQgPSA1OyAvLyBUaGUgbW91c2UgbXVzdCBtb3ZlIGF0IGxlYXN0IDUgcGl4ZWxzIGJlZm9yZSBhbiB1cGRhdGVcblxuXHRcdFx0XHRcdFx0Y29uc3Qgb25Nb3VzZU1vdmUgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdFx0Ly8gdGhpcy5BbGxvd1pvb20gPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0aW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJldmVudENsaWNrRXZlbnQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBjdXJyZW50WCA9IGV2ZW50LmNsaWVudFg7XG5cdFx0XHRcdFx0XHRcdGxldCBuZXdXaWR0aCA9IHN0YXJ0V2lkdGggKyAoY3VycmVudFggLSBzdGFydFgpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBhc3BlY3RSYXRpbyA9IHN0YXJ0V2lkdGggLyBzdGFydEhlaWdodDtcblxuXHRcdFx0XHRcdFx0XHQvLyBFbnN1cmUgdGhlIGltYWdlIGRvZXNuJ3QgZ2V0IHRvbyBzbWFsbFxuXHRcdFx0XHRcdFx0XHRuZXdXaWR0aCA9IE1hdGgubWF4KG5ld1dpZHRoLCA1MCk7XG5cblx0XHRcdFx0XHRcdFx0bGV0IG5ld0hlaWdodCA9IG5ld1dpZHRoIC8gYXNwZWN0UmF0aW87XG5cdFx0XHRcdFx0XHRcdC8vIFJvdW5kIHRoZSB2YWx1ZXMgdG8gdGhlIG5lYXJlc3Qgd2hvbGUgbnVtYmVyXG5cdFx0XHRcdFx0XHRcdG5ld1dpZHRoID0gTWF0aC5yb3VuZChuZXdXaWR0aCk7XG5cdFx0XHRcdFx0XHRcdG5ld0hlaWdodCA9IE1hdGgucm91bmQobmV3SGVpZ2h0KTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBcHBseSB0aGUgbmV3IGRpbWVuc2lvbnMgdG8gdGhlIGltYWdlIG9yIHZpZGVvXG5cdFx0XHRcdFx0XHRcdGlmIChpbWcgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJvcmRlciA9ICdzb2xpZCc7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJvcmRlcldpZHRoID0gJzJweCc7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJvcmRlckNvbG9yID0gJ2JsdWUnO1xuXHRcdFx0XHRcdFx0XHRcdGltZy5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLndpZHRoID0gYCR7bmV3V2lkdGh9cHhgO1xuXHRcdFx0XHRcdFx0XHRcdC8vIGltZy5zdHlsZS5oZWlnaHQgPSBgJHtuZXdIZWlnaHR9cHhgO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGltZyBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUuYm9yZGVyID0gJ3NvbGlkJztcblx0XHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUuYm9yZGVyV2lkdGggPSAnMnB4Jztcblx0XHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUuYm9yZGVyQ29sb3IgPSAnYmx1ZSc7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94Jztcblx0XHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBpbWcucGFyZW50RWxlbWVudCBpcyBub3QgbnVsbCBiZWZvcmUgdHJ5aW5nIHRvIGFjY2VzcyBpdHMgY2xpZW50V2lkdGggcHJvcGVydHlcblx0XHRcdFx0XHRcdFx0XHRpZiAoaW1nLnBhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRhaW5lcldpZHRoID0gaW1nLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXdXaWR0aFBlcmNlbnRhZ2UgPSAobmV3V2lkdGggLyBjb250YWluZXJXaWR0aCkgKiAxMDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUud2lkdGggPSBgJHtuZXdXaWR0aFBlcmNlbnRhZ2V9JWA7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIG1vdXNlIGhhcyBtb3ZlZCBtb3JlIHRoYW4gdGhlIHVwZGF0ZSB0aHJlc2hvbGRcblx0XHRcdFx0XHRcdFx0aWYgKE1hdGguYWJzKGV2ZW50LmNsaWVudFggLSBsYXN0VXBkYXRlWCkgPiB1cGRhdGVUaHJlc2hvbGQpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoYWN0aXZlVmlldykge1xuXHRcdFx0XHRcdFx0XHRcdFx0cHJpbnQoXCJ1cGRhdGUgbmV3IFdpZHRoXCIsIG5ld1dpZHRoKTtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCBpbWFnZU5hbWUgPSBpbWcuZ2V0QXR0cmlidXRlKCdzcmMnKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpbWFnZU5hbWU/LnN0YXJ0c1dpdGgoJ2h0dHAnKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVFeHRlcm5hbExpbmsoYWN0aXZlVmlldywgaW1nLCB0YXJnZXRfcG9zLCBuZXdXaWR0aCwgbmV3SGVpZ2h0LCBpblRhYmxlLCBpbkNhbGxvdXQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoaXNFeGNhbGlkcmF3KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCB0YXJnZXRfbmFtZSA9IGltZy5nZXRBdHRyaWJ1dGUoJ2ZpbGVzb3VyY2UnKSBhcyBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCBkcmF3X2Jhc2VfbmFtZSA9IHRhcmdldF9uYW1lXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChkcmF3X2Jhc2VfbmFtZS5pbmNsdWRlcygnLycpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IHRlbXBfYXJyID0gZHJhd19iYXNlX25hbWUuc3BsaXQoJy8nKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkcmF3X2Jhc2VfbmFtZSA9IHRlbXBfYXJyW3RlbXBfYXJyLmxlbmd0aCAtIDFdXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZHJhd19iYXNlX25hbWUuaW5jbHVkZXMoJ1xcXFwnKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxldCB0ZW1wX2FyciA9IGRyYXdfYmFzZV9uYW1lLnNwbGl0KCdcXFxcJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZHJhd19iYXNlX25hbWUgPSB0ZW1wX2Fyclt0ZW1wX2Fyci5sZW5ndGggLSAxXVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRyYXdfYmFzZV9uYW1lID0gZHJhd19iYXNlX25hbWUuZW5kc1dpdGgoJy5tZCcpID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkcmF3X2Jhc2VfbmFtZS5zdWJzdHJpbmcoMCwgZHJhd19iYXNlX25hbWUubGVuZ3RoIC0gMykgOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRyYXdfYmFzZV9uYW1lO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwcmludCh0YXJnZXRfbmFtZSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0cHJpbnQoJ2V4Y2FsaWRyYXcgZmlsZTonLCBkcmF3X2Jhc2VfbmFtZSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLm1heFdpZHRoID0gJ25vbmUnO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVJbnRlcm5hbExpbmsoYWN0aXZlVmlldywgaW1nLCB0YXJnZXRfcG9zLCBkcmF3X2Jhc2VfbmFtZSwgbmV3V2lkdGgsIG5ld0hlaWdodCwgaW5UYWJsZSwgaW5DYWxsb3V0KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpbWFnZU5hbWUgPSBpbWcucGFyZW50RWxlbWVudD8uZ2V0QXR0cmlidXRlKCdzcmMnKSBhcyBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHVwZGF0ZUludGVybmFsTGluayhhY3RpdmVWaWV3LCBpbWcsIHRhcmdldF9wb3MsIGltYWdlTmFtZSwgbmV3V2lkdGgsIG5ld0hlaWdodCwgaW5UYWJsZSwgaW5DYWxsb3V0KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIGxhc3QgdXBkYXRlIGNvb3JkaW5hdGVzXG5cdFx0XHRcdFx0XHRcdFx0bGFzdFVwZGF0ZVggPSBldmVudC5jbGllbnRYO1xuXHRcdFx0XHRcdFx0XHRcdGxhc3RVcGRhdGVZID0gZXZlbnQuY2xpZW50WTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb25zdCBhbGxvd0NsaWNrRXZlbnQgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGltZy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHByZXZlbnRDbGlja0V2ZW50KTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Y29uc3Qgb25Nb3VzZVVwID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoYWxsb3dDbGlja0V2ZW50LCAxMDApO1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHRcdFx0XHRcdGltZy5zdHlsZS5ib3JkZXJTdHlsZSA9ICdub25lJ1xuXHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUub3V0bGluZSA9ICdub25lJztcblx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0Jztcblx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbk1vdXNlTW92ZSk7XG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG9uTW91c2VVcCk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbk1vdXNlTW92ZSk7XG5cdFx0XHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvbk1vdXNlVXApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0KVxuXHRcdClcblx0XHR0aGlzLnJlZ2lzdGVyKFxuXHRcdFx0b25FbGVtZW50KFxuXHRcdFx0XHRkb2N1bWVudCxcblx0XHRcdFx0XCJtb3VzZW92ZXJcIixcblx0XHRcdFx0XCJpbWcsIHZpZGVvXCIsXG5cdFx0XHRcdChldmVudDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRNZCA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpIGFzIFRGaWxlO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50TWQubmFtZS5lbmRzV2l0aCgnLmNhbnZhcycpKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3QgaW5QcmV2aWV3OiBib29sZWFuID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZ2V0TW9kZSgpID09IFwicHJldmlld1wiO1xuXHRcdFx0XHRcdGlmIChpblByZXZpZXcpIHJldHVybjtcblxuXHRcdFx0XHRcdGNvbnN0IGltZyA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTFZpZGVvRWxlbWVudDtcblx0XHRcdFx0XHRjb25zdCByZWN0ID0gaW1nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyAvLyBDYWNoZSB0aGlzXG5cdFx0XHRcdFx0Y29uc3QgZWRnZVNpemUgPSB0aGlzLmVkZ2VTaXplOyAvLyBzaXplIG9mIHRoZSBlZGdlIGluIHBpeGVsc1xuXG5cdFx0XHRcdFx0aWYgKGltZy5pZCA9PSAnYWYtem9vbWVkLWltYWdlJykgcmV0dXJuO1xuXG5cdFx0XHRcdFx0Y29uc3QgaXNFeGNhbGlkcmF3ID0gaW1nLmNsYXNzTGlzdC5jb250YWlucygnZXhjYWxpZHJhdy1lbWJlZGRlZC1pbWcnKTtcblxuXHRcdFx0XHRcdC8vIFRocm90dGxlIG1vdXNlbW92ZSBldmVudHNcblx0XHRcdFx0XHRsZXQgbGFzdE1vdmUgPSAwO1xuXHRcdFx0XHRcdGNvbnN0IG1vdXNlT3ZlckhhbmRsZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5kcmFnUmVzaXplKSByZXR1cm47XG5cdFx0XHRcdFx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdFx0XHRcdFx0aWYgKG5vdyAtIGxhc3RNb3ZlIDwgMTAwKSByZXR1cm47IC8vIE9ubHkgZXhlY3V0ZSBvbmNlIGV2ZXJ5IDEwMG1zXG5cdFx0XHRcdFx0XHRsYXN0TW92ZSA9IG5vdztcblxuXHRcdFx0XHRcdFx0Y29uc3QgeCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XG5cdFx0XHRcdFx0XHRjb25zdCB5ID0gZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wO1xuXG5cdFx0XHRcdFx0XHRpZiAoKHggPj0gcmVjdC53aWR0aCAtIGVkZ2VTaXplIHx8IHggPD0gZWRnZVNpemUpIHx8ICh5ID49IHJlY3QuaGVpZ2h0IC0gZWRnZVNpemUgfHwgeSA8PSBlZGdlU2l6ZSkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZHJhZ1Jlc2l6ZSl7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLmN1cnNvciA9ICdud3NlLXJlc2l6ZSc7XG5cdFx0XHRcdFx0XHRcdFx0aW1nLnN0eWxlLm91dGxpbmUgPSAnc29saWQnO1xuXHRcdFx0XHRcdFx0XHRcdGltZy5zdHlsZS5vdXRsaW5lV2lkdGggPSAnNnB4Jztcblx0XHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUub3V0bGluZUNvbG9yID0gJyNkZmIwZjI4Myc7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKHggPiByZWN0LndpZHRoIC8gMiAmJiB0aGlzLnNldHRpbmdzLmNsaWNrVmlldykge1xuXHRcdFx0XHRcdFx0XHRpbWcuc3R5bGUuY3Vyc29yID0gJ3pvb20taW4nO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGltZy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG5cdFx0XHRcdFx0XHRcdGltZy5zdHlsZS5vdXRsaW5lID0gJ25vbmUnO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGltZywgJ21vdXNlbW92ZScsIG1vdXNlT3ZlckhhbmRsZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHQpXG5cdFx0KTtcblxuXHRcdHRoaXMucmVnaXN0ZXIoXG5cdFx0XHRvbkVsZW1lbnQoXG5cdFx0XHRcdGRvY3VtZW50LFxuXHRcdFx0XHRcIm1vdXNlb3V0XCIsXG5cdFx0XHRcdFwiaW1nLCB2aWRlb1wiLFxuXHRcdFx0XHQoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZHJhZ1Jlc2l6ZSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRNZCA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpIGFzIFRGaWxlO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50TWQubmFtZS5lbmRzV2l0aCgnLmNhbnZhcycpKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3QgaW5QcmV2aWV3OiBib29sZWFuID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZ2V0TW9kZSgpID09IFwicHJldmlld1wiO1xuXHRcdFx0XHRcdGlmIChpblByZXZpZXcpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBpbWcgPSBldmVudC50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudCB8IEhUTUxWaWRlb0VsZW1lbnQ7XG5cdFx0XHRcdFx0aW1nLnN0eWxlLmJvcmRlclN0eWxlID0gJ25vbmUnO1xuXHRcdFx0XHRcdGltZy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG5cdFx0XHRcdFx0aW1nLnN0eWxlLm91dGxpbmUgPSAnbm9uZSc7XG5cdFx0XHRcdH1cblx0XHRcdClcblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKFxuXHRcdFx0e30sXG5cdFx0XHRERUZBVUxUX1NFVFRJTkdTLFxuXHRcdFx0YXdhaXQgdGhpcy5sb2FkRGF0YSgpXG5cdFx0KTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cdHJlZ2lzdGVyRXNjYXBlQnV0dG9uKG1lbnU6IE1lbnUsIGRvY3VtZW50OiBEb2N1bWVudCA9IGFjdGl2ZURvY3VtZW50KSB7XG5cdFx0bWVudS5yZWdpc3Rlcihcblx0XHRcdG9uRWxlbWVudChcblx0XHRcdFx0ZG9jdW1lbnQsXG5cdFx0XHRcdFwia2V5ZG93blwiIGFzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXAsXG5cdFx0XHRcdFwiKlwiLFxuXHRcdFx0XHQoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdG1lbnUuaGlkZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0KVxuXHRcdCk7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBcdThCQkVcdTdGNkVcdTgzRENcdTUzNTVcdTYzMDlcdTk0QUVcdUZGMENcdTVFNzZcdThCQkVcdTdGNkVcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcblx0ICpcblx0ICogQHBhcmFtIG1lbnVcblx0ICogQHBhcmFtIEZpbGVCYXNlTmFtZVxuXHQgKiBAcGFyYW0gY3VycmVudE1kXG5cdCAqL1xuXHRhZGRNZW51RXh0ZW5kZWRTb3VyY2VNb2RlID0gKG1lbnU6IE1lbnUsIEZpbGVCYXNlTmFtZTogc3RyaW5nLCBjdXJyZW50TWQ6IFRGaWxlLCB0YXJnZXRfdHlwZTogc3RyaW5nLCB0YXJnZXRfcG9zOiBudW1iZXIsIGluVGFibGU6IGJvb2xlYW4sIGluQ2FsbG91dDogYm9vbGVhbikgPT4ge1xuXHRcdHRoaXMuYWRkTWVudUV4dGVuZGVkUHJldmlld01vZGUobWVudSwgRmlsZUJhc2VOYW1lLCBjdXJyZW50TWQpO1xuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XG5cdFx0XHRpdGVtXG5cdFx0XHRcdC5zZXRJY29uKFwicGVuY2lsXCIpXG5cdFx0XHRcdC5zZXRUaXRsZShcIlJlbmFtZVwiKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdHByaW50KFwidGVzdCByZW5hbWVcIilcblx0XHRcdFx0XHRcdFV0aWwuaGFuZGxlclJlbmFtZUZpbGUoRmlsZUJhc2VOYW1lLCBjdXJyZW50TWQsIHRoaXMpO1xuXHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkVycm9yLCBjb3VsZCBub3QgcmVuYW1lIHRoZSBmaWxlIVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0KVxuXG5cdFx0bWVudS5hZGRJdGVtKChpdGVtOiBNZW51SXRlbSkgPT5cblx0XHRcdGl0ZW1cblx0XHRcdFx0LnNldEljb24oXCJ0cmFzaC0yXCIpXG5cdFx0XHRcdC5zZXRUaXRsZShcIkNsZWFyIGZpbGUgYW5kIGFzc29jaWF0ZWQgbGlua1wiKVxuXHRcdFx0XHQvLyAuc2V0U2VjdGlvbihcImF0dGFjaC1mbG93XCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Ly8gVXRpbC5oYW5kbGVyRGVsRmlsZShGaWxlQmFzZU5hbWUsIGN1cnJlbnRNZCwgdGhpcyk7XG5cdFx0XHRcdFx0XHRVdGlsLmhhbmRsZXJEZWxGaWxlTmV3KEZpbGVCYXNlTmFtZSwgY3VycmVudE1kLCB0aGlzLCB0YXJnZXRfdHlwZSwgdGFyZ2V0X3BvcywgaW5UYWJsZSwgaW5DYWxsb3V0KTtcblx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJFcnJvciwgY291bGQgbm90IGNsZWFyIHRoZSBmaWxlIVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0KTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBcdThCQkVcdTdGNkVcdTgzRENcdTUzNTVcdTYzMDlcdTk0QUVcdUZGMENcdTVFNzZcdThCQkVcdTdGNkVcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcblx0ICpcblx0ICogQHBhcmFtIG1lbnVcblx0ICogQHBhcmFtIEZpbGVCYXNlTmFtZVxuXHQgKiBAcGFyYW0gY3VycmVudE1kXG5cdCAqL1xuXHRhZGRNZW51RXh0ZW5kZWRQcmV2aWV3TW9kZSA9IChtZW51OiBNZW51LCBGaWxlQmFzZU5hbWU6IHN0cmluZywgY3VycmVudE1kOiBURmlsZSkgPT4ge1xuXHRcdGNvbnN0IGZpbGUgPSBVdGlsLmdldEZpbGVCeUJhc2VOYW1lKGN1cnJlbnRNZCwgRmlsZUJhc2VOYW1lKSBhcyBURmlsZTtcblx0XHQvLyBjb25zdCBiYXNlUGF0aCA9IChmaWxlLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5iYXNlUGF0aDtcblx0XHQvLyBjb25zdCByZWxhdGl2ZUZpbGVQYXRoID0gZmlsZS5wYXRoO1xuXHRcdGlmIChwcm9jZXNzLnBsYXRmb3JtICE9ICdsaW51eCcpIHtcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XG5cdFx0XHRcdGl0ZW1cblx0XHRcdFx0XHQuc2V0SWNvbihcImNvcHlcIilcblx0XHRcdFx0XHQuc2V0VGl0bGUoXCJDb3B5IGZpbGUgdG8gY2xpcGJvYXJkXCIpXG5cdFx0XHRcdFx0Ly8gLnNldENoZWNrZWQodHJ1ZSlcblx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRVdGlsLmhhbmRsZXJDb3B5RmlsZShGaWxlQmFzZU5hbWUsIGN1cnJlbnRNZCwgdGhpcyk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkVycm9yLCBjb3VsZCBub3QgY29weSB0aGUgZmlsZSFcIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0bWVudS5hZGRJdGVtKChpdGVtOiBNZW51SXRlbSkgPT4gaXRlbVxuXHRcdFx0LnNldEljb24oXCJhcnJvdy11cC1yaWdodFwiKVxuXHRcdFx0LnNldFRpdGxlKFwiT3BlbiBpbiBkZWZhdWx0IGFwcFwiKVxuXHRcdFx0Lm9uQ2xpY2soKCkgPT4gKHRoaXMuYXBwIGFzIEFwcFdpdGhEZXNrdG9wSW50ZXJuYWxBcGkpLm9wZW5XaXRoRGVmYXVsdEFwcChmaWxlLnBhdGgpKVxuXHRcdCk7XG5cdFx0bWVudS5hZGRJdGVtKChpdGVtOiBNZW51SXRlbSkgPT4gaXRlbVxuXHRcdFx0LnNldEljb24oXCJhcnJvdy11cC1yaWdodFwiKVxuXHRcdFx0LnNldFRpdGxlKFBsYXRmb3JtLmlzTWFjT1MgPyBcIlJldmVhbCBpbiBmaW5kZXJcIiA6IFwiU2hvdyBpbiBzeXN0ZW0gZXhwbG9yZXJcIilcblx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0KHRoaXMuYXBwIGFzIEFwcFdpdGhEZXNrdG9wSW50ZXJuYWxBcGkpLnNob3dJbkZvbGRlcihmaWxlLnBhdGgpO1xuXHRcdFx0fSlcblx0XHQpO1xuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+IGl0ZW1cblx0XHRcdC5zZXRJY29uKFwiZm9sZGVyXCIpXG5cdFx0XHQuc2V0VGl0bGUoXCJSZXZlYWwgZmlsZSBpbiBuYXZpZ2F0aW9uXCIpXG5cdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFic3RyYWN0RmlsZVBhdGggPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZS5wYXRoKTtcblx0XHRcdFx0KHRoaXMuYXBwIGFzIGFueSkuaW50ZXJuYWxQbHVnaW5zLmdldEVuYWJsZWRQbHVnaW5CeUlkKFwiZmlsZS1leHBsb3JlclwiKS5yZXZlYWxJbkZvbGRlcihhYnN0cmFjdEZpbGVQYXRoKTtcblx0XHRcdH0pXG5cdFx0KTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBcdTlGMjBcdTY4MDdcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcdTRFOEJcdTRFRjZcblx0ICovXG5cdG9uQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcblx0XHRjb25zdCB0YXJnZXQgPSBnZXRNb3VzZUV2ZW50VGFyZ2V0KGV2ZW50KTtcblx0XHRjb25zdCBjdXJUYXJnZXRUeXBlID0gdGFyZ2V0LmxvY2FsTmFtZTtcblx0XHRpZiAodGFyZ2V0LmlkID09ICdhZi16b29tZWQtaW1hZ2UnKSByZXR1cm47XG5cblx0XHRjb25zdCBjdXJyZW50TWQgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSBhcyBURmlsZTtcblx0XHRjb25zdCBpbkNhbnZhcyA9IGN1cnJlbnRNZC5uYW1lLmVuZHNXaXRoKCcuY2FudmFzJyk7XG5cdFx0Y29uc3QgU3VwcG9ydGVkVGFyZ2V0VHlwZSA9IFtcImltZ1wiLCBcImlmcmFtZVwiLCBcInZpZGVvXCIsIFwiZGl2XCIsIFwiYXVkaW9cIl07XG5cblx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuXHRcdGlmICghU3VwcG9ydGVkVGFyZ2V0VHlwZS5pbmNsdWRlcyhjdXJUYXJnZXRUeXBlKSkgcmV0dXJuO1xuXG5cdFx0Ly8gXHU1MjI0XHU2NUFEXHU1RjUzXHU1MjREXHU3MEI5XHU1MUZCXHU3Njg0XHU1NzMwXHU2NUI5XHU2NjJGXHU1NDI2XHU0RTNBXHU4ODY4XHU2ODNDXG5cdFx0Ly8gY29uc3QgaW5UYWJsZTpib29sZWFuID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ/LnBhcmVudEVsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnY2xhc3MnKT09J3RhYmxlLWNlbGwtd3JhcHBlcic7XG5cdFx0Y29uc3QgaW5UYWJsZTogYm9vbGVhbiA9IHRhcmdldC5jbG9zZXN0KCd0YWJsZScpICE9IG51bGw7XG5cdFx0Y29uc3QgaW5DYWxsb3V0OiBib29sZWFuID0gdGFyZ2V0LmNsb3Nlc3QoJy5jYWxsb3V0JykgIT0gbnVsbDtcblx0XHRjb25zdCBpblByZXZpZXc6IGJvb2xlYW4gPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5nZXRNb2RlKCkgPT0gXCJwcmV2aWV3XCI7XG5cdFx0Y29uc3QgaXNFeGNhbGlkcmF3OiBib29sZWFuID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZXhjYWxpZHJhdy1lbWJlZGRlZC1pbWcnKTtcblxuXHRcdGxldCB0YXJnZXRfbmFtZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgYXMgc3RyaW5nO1xuXHRcdC8vIFx1NUJGOVx1NEU4RSBDYWxsb3V0IFx1NTQ4QyBUYWJsZSBcdTRFMkRcdTc2ODRcdTdGNTFcdTdFRENcdTU2RkVcdTcyNDdcdUZGMENcdTZDQTFcdTY3MDlcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcblx0XHRpZiAodGFyZ2V0X25hbWUgJiYgdGFyZ2V0X25hbWUuc3RhcnRzV2l0aCgnaHR0cCcpKSByZXR1cm47XG5cblx0XHRpZiAoaW5DYW52YXMpIHtcblx0XHRcdC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NTZGRVx1NTBDRlx1ODI4Mlx1NzBCOVx1RkYwQ1x1OEZENFx1NTZERVxuXHRcdFx0aWYgKHRhcmdldC5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoJ2NhbnZhcy1ub2RlLWNvbnRlbnQnKSkgcmV0dXJuO1xuXHRcdFx0bGV0IGZpbGVfbmFtZSA9IHRhcmdldC5wYXJlbnRFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xuXHRcdFx0Ly8gcHJpbnQoXCJUYXJnZXQgTmFtZTpcIiwgZmlsZV9uYW1lKTtcblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChpc0V4Y2FsaWRyYXcpIHtcblx0XHRcdHRhcmdldF9uYW1lID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZmlsZXNvdXJjZScpIGFzIHN0cmluZztcblx0XHRcdGxldCBmaWxlX2Jhc2VfbmFtZSA9IHRhcmdldF9uYW1lXG5cdFx0XHRpZiAoZmlsZV9iYXNlX25hbWUuaW5jbHVkZXMoJy8nKSkge1xuXHRcdFx0XHRsZXQgdGVtcF9hcnIgPSBmaWxlX2Jhc2VfbmFtZS5zcGxpdCgnLycpO1xuXHRcdFx0XHRmaWxlX2Jhc2VfbmFtZSA9IHRlbXBfYXJyW3RlbXBfYXJyLmxlbmd0aCAtIDFdXG5cdFx0XHR9IGVsc2UgaWYgKGZpbGVfYmFzZV9uYW1lLmluY2x1ZGVzKCdcXFxcJykpIHtcblx0XHRcdFx0bGV0IHRlbXBfYXJyID0gZmlsZV9iYXNlX25hbWUuc3BsaXQoJ1xcXFwnKTtcblx0XHRcdFx0ZmlsZV9iYXNlX25hbWUgPSB0ZW1wX2Fyclt0ZW1wX2Fyci5sZW5ndGggLSAxXVxuXHRcdFx0fVxuXHRcdFx0ZmlsZV9iYXNlX25hbWUgPSBmaWxlX2Jhc2VfbmFtZS5lbmRzV2l0aCgnLm1kJykgP1xuXHRcdFx0XHRmaWxlX2Jhc2VfbmFtZS5zdWJzdHJpbmcoMCwgZmlsZV9iYXNlX25hbWUubGVuZ3RoIC0gMykgOlxuXHRcdFx0XHRmaWxlX2Jhc2VfbmFtZTtcblx0XHRcdHRhcmdldF9uYW1lID0gZmlsZV9iYXNlX25hbWU7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dGFyZ2V0X25hbWUgPSB0YXJnZXQucGFyZW50RWxlbWVudD8uZ2V0QXR0cmlidXRlKFwic3JjXCIpIGFzIHN0cmluZztcblx0XHRcdC8vIFx1NTIyMFx1OTY2NCB0YXJnZXRfbmFtZSBcdTUzRUZcdTgwRkRcdTUyNERcdTdGMDBcdTc2ODRcdTU5MUFcdTRFMkEgJy4uLydcdUZGMENcdTY1MkZcdTYzMDFcdTk0RkVcdTYzQTVcdThERUZcdTVGODRcdTRFM0FcdTVGNTNcdTUyNERcdTdCMTRcdThCQjBcdTc2ODRcdTc2RjhcdTVCRjlcdThERUZcdTVGODRcblx0XHRcdHRhcmdldF9uYW1lID0gdGFyZ2V0X25hbWUucmVwbGFjZSgvXihcXC5cXC5cXC8pKy9nLCAnJyk7XG5cdFx0XHRsZXQgcGRmX21hdGNoID0gdGFyZ2V0X25hbWUubWF0Y2goLy4qXFwucGRmLyk7XG5cdFx0XHR0YXJnZXRfbmFtZSA9IHBkZl9tYXRjaCA/IHBkZl9tYXRjaFswXSA6IHRhcmdldF9uYW1lO1xuXHRcdFx0aWYgKGN1clRhcmdldFR5cGUgPT0gJ2ltZycgJiYgcGRmX21hdGNoKSByZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKGluUHJldmlldykge1xuXHRcdFx0aWYgKFN1cHBvcnRlZFRhcmdldFR5cGUuaW5jbHVkZXMoY3VyVGFyZ2V0VHlwZSkpIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJGaWxlQmFzZU5hbWVcIiwgRmlsZUJhc2VOYW1lKTtcblx0XHRcdFx0dGhpcy5hZGRNZW51RXh0ZW5kZWRQcmV2aWV3TW9kZShtZW51LCB0YXJnZXRfbmFtZSwgY3VycmVudE1kKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zdCBlZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3I7XG5cdFx0XHQvLyAgQHRzLWV4cGVjdC1lcnJvciwgbm90IHR5cGVkXG5cdFx0XHRjb25zdCBlZGl0b3JWaWV3ID0gZWRpdG9yLmNtIGFzIEVkaXRvclZpZXc7XG5cdFx0XHRjb25zdCB0YXJnZXRfcG9zID0gZWRpdG9yVmlldy5wb3NBdERPTSh0YXJnZXQpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2coJ3RhcmdldCcsIHRhcmdldClcblx0XHRcdC8vIGNvbnNvbGUubG9nKCd0YXJnZXQucGFyZW50RWxlbWVudCcsIHRhcmdldC5wYXJlbnRFbGVtZW50KVxuXHRcdFx0Ly8gY29uc3QgcHJldl9wb3MgPSBlZGl0b3JWaWV3LnBvc0F0RE9NKHRhcmdldC5wYXJlbnRFbGVtZW50Py5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50KTtcblx0XHRcdC8vIGNvbnN0IG5leHRfcG9zID0gZWRpdG9yVmlldy5wb3NBdERPTSh0YXJnZXQucGFyZW50RWxlbWVudD8ubmV4dEVsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50KTtcblx0XHRcdC8vIGxldCBwcmV2X3RhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZUF0KHByZXZfcG9zKTtcblx0XHRcdC8vIGxldCBuZXh0X3RhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZUF0KG5leHRfcG9zKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdwcmV2IHRhcmdldCBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKHByZXZfdGFyZ2V0X2xpbmUudGV4dCwgcHJldl90YXJnZXRfbGluZS5udW1iZXIsIHByZXZfcG9zLXByZXZfdGFyZ2V0X2xpbmUuZnJvbSlcblxuXHRcdFx0bGV0IHRhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZUF0KHRhcmdldF9wb3MpO1xuXHRcdFx0cHJpbnQoJ3RhcmdldCBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKTtcblx0XHRcdHByaW50KHRhcmdldF9saW5lLnRleHQsIHRhcmdldF9saW5lLm51bWJlciwgdGFyZ2V0X3BvcyAtIHRhcmdldF9saW5lLmZyb20pO1xuXG5cdFx0XHQvLyAtLS0tLS0tLS0tIEVkaXRvckludGVybmFsQXBpLnBvc0F0TW91c2UgXHU0RTBEXHU2NjJGXHU1Rjg4XHU1MUM2XHU3ODZFXHVGRjBDXHU0RTBEXHU3N0U1XHU5MDUzXHU0RTNBXHU0RUMwXHU0RTQ4XHVGRjBDXHU4ODRDXHU1M0Y3XHU1NDhDY2hcdTkwRkRcdTRFMERcdTUxQzZcdTc4NkUgLS0tLS0tLS0tLVxuXHRcdFx0Ly8gY29uc3QgZWRpdG9yMiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmVkaXRvciBhcyBFZGl0b3JJbnRlcm5hbEFwaTtcblx0XHRcdC8vIGNvbnN0IHBvc2l0aW9uID0gZWRpdG9yMi5wb3NBdE1vdXNlKGV2ZW50KTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdJbnRlckFQSVBvcyBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKVxuXHRcdFx0Ly8gY29uc29sZS5sb2coZWRpdG9yPy5nZXRMaW5lKHBvc2l0aW9uLmxpbmUpLCBwb3NpdGlvbi5saW5lKzEsIHBvc2l0aW9uLmNoKVxuXHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHRcdC8vIGNvbnNvbGUubG9nKCduZXh0IHRhcmdldCBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKG5leHRfdGFyZ2V0X2xpbmUudGV4dCwgbmV4dF90YXJnZXRfbGluZS5udW1iZXIsIG5leHRfcG9zLW5leHRfdGFyZ2V0X2xpbmUuZnJvbSlcblxuXHRcdFx0aWYgKFN1cHBvcnRlZFRhcmdldFR5cGUuaW5jbHVkZXMoY3VyVGFyZ2V0VHlwZSkpIHtcblx0XHRcdFx0dGhpcy5hZGRNZW51RXh0ZW5kZWRTb3VyY2VNb2RlKG1lbnUsIHRhcmdldF9uYW1lLCBjdXJyZW50TWQsIGN1clRhcmdldFR5cGUsIHRhcmdldF9wb3MsIGluVGFibGUsIGluQ2FsbG91dCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5yZWdpc3RlckVzY2FwZUJ1dHRvbihtZW51KTtcblxuXHRcdGxldCBvZmZzZXQgPSAtMTYzO1xuXHRcdGxldCBsaW51eF9vZmZzZXQgPSAtMTM4O1xuXHRcdG9mZnNldCA9IHByb2Nlc3MucGxhdGZvcm0gPT0gJ2xpbnV4JyA/IGxpbnV4X29mZnNldCA6IG9mZnNldDtcblxuXHRcdGlmIChpblRhYmxlICYmICFpblByZXZpZXcpIHtcblx0XHRcdG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgKyBvZmZzZXQgfSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0bWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9KTtcblx0XHR9XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoXCJBdHRhY2hGbG93OmNvbnRleHRtZW51XCIsIG1lbnUpO1xuXHR9XG5cbn1cblxuZnVuY3Rpb24gdXBkYXRlSW50ZXJuYWxMaW5rKGFjdGl2ZVZpZXc6IE1hcmtkb3duVmlldywgdGFyZ2V0OiBIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTFZpZGVvRWxlbWVudCwgdGFyZ2V0X3BvczogbnVtYmVyLCBpbWFnZU5hbWU6IHN0cmluZywgbmV3V2lkdGg6IG51bWJlciwgbmV3SGVpZ2h0OiBudW1iZXIsIGluVGFibGU6IGJvb2xlYW4sIGluQ2FsbG91dDogYm9vbGVhbik6IHZvaWQge1xuXHRjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcblx0Ly8gIEB0cy1leHBlY3QtZXJyb3IsIG5vdCB0eXBlZFxuXHRjb25zdCBlZGl0b3JWaWV3ID0gZWRpdG9yLmNtIGFzIEVkaXRvclZpZXc7XG5cdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0YXJnZXRfcG9zKTtcblx0Ly8gcHJpbnQoJ3RhcmdldCBsaW5lIGluZm9ybWF0aW9uOiBsaW5lLWNvbnRlbnQsIGxpbmUtbnVtYmVyKDEtYmFzZWQpLCB0YXJnZXQuY2gnKTtcblx0Ly8gcHJpbnQodGFyZ2V0X2xpbmUudGV4dCwgdGFyZ2V0X2xpbmUubnVtYmVyLCB0YXJnZXRfcG9zIC0gdGFyZ2V0X2xpbmUuZnJvbSk7XG5cblxuXHRpZiAoIWluQ2FsbG91dCAmJiAhaW5UYWJsZSkge1xuXHRcdGxldCBtYXRjaGVkID0gbWF0Y2hMaW5lV2l0aEludGVybmFsTGluayh0YXJnZXRfbGluZS50ZXh0LCBpbWFnZU5hbWUsIG5ld1dpZHRoLCBpblRhYmxlKTtcblx0XHRpZiAobWF0Y2hlZC5sZW5ndGggPT0gMSkge1xuXHRcdFx0ZWRpdG9yVmlldy5kaXNwYXRjaCh7XG5cdFx0XHRcdGNoYW5nZXM6IHtcblx0XHRcdFx0XHRmcm9tOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZFswXS5mcm9tX2NoLFxuXHRcdFx0XHRcdHRvOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZFswXS50b19jaCxcblx0XHRcdFx0XHRpbnNlcnQ6IG1hdGNoZWRbMF0ubmV3X2xpbmtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvLyBlZGl0b3IucmVwbGFjZVJhbmdlKG1hdGNoZWRbMF0ubmV3X2xpbmssIFxuXHRcdFx0Ly8gXHR7bGluZTp0YXJnZXRfbGluZS5udW1iZXItMSwgY2g6bWF0Y2hlZFswXS5mcm9tX2NofSwgXG5cdFx0XHQvLyBcdHtsaW5lOnRhcmdldF9saW5lLm51bWJlci0xLCBjaDptYXRjaGVkWzBdLnRvX2NofVxuXHRcdFx0Ly8gXHQpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChtYXRjaGVkLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHQvLyBuZXcgTm90aWNlKCdGYWlsIHRvIGZpbmQgY3VycmVudCBpbWFnZS1saW5rLCBwbGVhc2Ugem9vbSBtYW51YWxseSEnKVxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdG5ldyBOb3RpY2UoJ0ZpbmQgbXVsdGlwbGUgc2FtZSBpbWFnZS1saW5rIGluIGxpbmUsIHBsZWFzZSB6b29tIG1hbnVhbGx5IScpXG5cdFx0fVxuXHRcdHJldHVybjtcblx0fVxuXG5cdHR5cGUgUmVnRGljdGlvbmFyeSA9IHtcblx0XHRba2V5OiBzdHJpbmddOiBSZWdFeHA7XG5cdH07XG5cblx0bGV0IHN0YXJ0UmVnOiBSZWdEaWN0aW9uYXJ5ID0ge1xuXHRcdCd0YWJsZSc6IC9eXFxzKlxcfC8sXG5cdFx0J2NhbGxvdXQnOiAvXj4vLFxuXHR9O1xuXG5cdGxldCBtb2RlID0gaW5UYWJsZSA/ICd0YWJsZScgOiAnY2FsbG91dCc7XG5cdHByaW50KCdtb2RlJywgbW9kZSlcblx0Ly8gcHJpbnQoXCJpbWFnZU5hbWVcIiwgaW1hZ2VOYW1lKVxuXG5cdGNvbnN0IHN0YXJ0X3JlZyA9IHN0YXJ0UmVnW21vZGVdO1xuXHRsZXQgc3RhcnRfbGluZV9udW1iZXIgPSB0YXJnZXRfbGluZS5udW1iZXI7XG5cdGxldCBtYXRjaGVkX3Jlc3VsdHM6IE1hdGNoZWRMaW5rSW5MaW5lW10gPSBbXTtcblx0bGV0IG1hdGNoZWRfbGluZXM6IG51bWJlcltdID0gW107ICAvLzEtYmFzZWRcblx0Zm9yIChsZXQgaSA9IHN0YXJ0X2xpbmVfbnVtYmVyOyBpIDw9IGVkaXRvci5saW5lQ291bnQoKTsgaSsrKSB7XG5cdFx0bGV0IGxpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lKGkpO1xuXHRcdC8vIGNvbnNvbGUubG9nKCdsaW5lLnRleHQnLCBsaW5lLnRleHQpXG5cdFx0Ly8gY29uc29sZS5sb2coJ3N0YXJ0X3JlZycsIHN0YXJ0X3JlZylcblx0XHQvLyBjb25zb2xlLmxvZygnc3RhcnRfcmVnLnRlc3QobGluZS50ZXh0KScsIHN0YXJ0X3JlZy50ZXN0KGxpbmUudGV4dCkpXG5cdFx0aWYgKCFzdGFydF9yZWcudGVzdChsaW5lLnRleHQpKSBicmVhaztcblx0XHRsZXQgbWF0Y2hlZCA9IG1hdGNoTGluZVdpdGhJbnRlcm5hbExpbmsobGluZS50ZXh0LCBpbWFnZU5hbWUsIG5ld1dpZHRoLCBpblRhYmxlKTtcblx0XHRtYXRjaGVkX3Jlc3VsdHMucHVzaCguLi5tYXRjaGVkKTtcblx0XHRtYXRjaGVkX2xpbmVzLnB1c2goLi4ubmV3IEFycmF5KG1hdGNoZWQubGVuZ3RoKS5maWxsKGkpKTtcblx0fVxuXG5cdGZvciAobGV0IGkgPSBzdGFydF9saW5lX251bWJlciAtIDE7IGkgPj0gMTsgaS0tKSB7XG5cdFx0bGV0IGxpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lKGkpO1xuXHRcdGlmICghc3RhcnRfcmVnLnRlc3QobGluZS50ZXh0KSkgYnJlYWs7XG5cdFx0bGV0IG1hdGNoZWQgPSBtYXRjaExpbmVXaXRoSW50ZXJuYWxMaW5rKGxpbmUudGV4dCwgaW1hZ2VOYW1lLCBuZXdXaWR0aCwgaW5UYWJsZSk7XG5cdFx0bWF0Y2hlZF9yZXN1bHRzLnB1c2goLi4ubWF0Y2hlZCk7XG5cdFx0bWF0Y2hlZF9saW5lcy5wdXNoKC4uLm5ldyBBcnJheShtYXRjaGVkLmxlbmd0aCkuZmlsbChpKSk7XG5cdH1cblxuXHQvLyBwcmludChcIk1hdGNoZWQgSW5mb3JtYXRpb25cIilcblx0Ly8gcHJpbnQobWF0Y2hlZF9yZXN1bHRzKVxuXHQvLyBwcmludChtYXRjaGVkX2xpbmVzKVxuXG5cdGlmIChtYXRjaGVkX3Jlc3VsdHMubGVuZ3RoID09IDEpIHtcblx0XHRsZXQgdGFyZ2V0X2xpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lKG1hdGNoZWRfbGluZXNbMF0pO1xuXHRcdGlmIChtb2RlID09ICd0YWJsZScpIHtcblx0XHRcdGxldCBvbGRfdGV4dCA9IHRhcmdldF9saW5lLnRleHQ7XG5cdFx0XHRsZXQgbmV3X2xpbmVfdGV4dCA9IG9sZF90ZXh0LnN1YnN0cmluZygwLCBtYXRjaGVkX3Jlc3VsdHNbMF0uZnJvbV9jaCkgK1xuXHRcdFx0XHRtYXRjaGVkX3Jlc3VsdHNbMF0ubmV3X2xpbmsgK1xuXHRcdFx0XHRvbGRfdGV4dC5zdWJzdHJpbmcobWF0Y2hlZF9yZXN1bHRzWzBdLnRvX2NoKTtcblx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goe1xuXHRcdFx0XHRjaGFuZ2VzOiB7XG5cdFx0XHRcdFx0ZnJvbTogdGFyZ2V0X2xpbmUuZnJvbSxcblx0XHRcdFx0XHR0bzogdGFyZ2V0X2xpbmUuZnJvbSArIG9sZF90ZXh0Lmxlbmd0aCxcblx0XHRcdFx0XHRpbnNlcnQ6IG5ld19saW5lX3RleHRcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goe1xuXHRcdFx0XHRjaGFuZ2VzOiB7XG5cdFx0XHRcdFx0ZnJvbTogdGFyZ2V0X2xpbmUuZnJvbSArIG1hdGNoZWRfcmVzdWx0c1swXS5mcm9tX2NoLFxuXHRcdFx0XHRcdHRvOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZF9yZXN1bHRzWzBdLnRvX2NoLFxuXHRcdFx0XHRcdGluc2VydDogbWF0Y2hlZF9yZXN1bHRzWzBdLm5ld19saW5rXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRlbHNlIGlmIChtYXRjaGVkX3Jlc3VsdHMubGVuZ3RoID09IDApIHtcblx0XHRuZXcgTm90aWNlKGBGYWlsIHRvIGZpbmQgY3VycmVudCBpbWFnZS1saW5rIGluICR7bW9kZX0sIHBsZWFzZSB6b29tIG1hbnVhbGx5IWApXG5cdH1cblx0ZWxzZSB7XG5cdFx0bmV3IE5vdGljZShgRmluZCBtdWx0aXBsZSBzYW1lIGltYWdlLWxpbmsgaW4gJHttb2RlfSwgcGxlYXNlIHpvb20gbWFudWFsbHkhYClcblx0fVxuXHRyZXR1cm47XG59XG5cblxuZnVuY3Rpb24gdXBkYXRlRXh0ZXJuYWxMaW5rKGFjdGl2ZVZpZXc6IE1hcmtkb3duVmlldywgdGFyZ2V0OiBIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTFZpZGVvRWxlbWVudCwgdGFyZ2V0X3BvczogbnVtYmVyLCBuZXdXaWR0aDogbnVtYmVyLCBuZXdIZWlnaHQ6IG51bWJlciwgaW5UYWJsZTogYm9vbGVhbiwgaW5DYWxsb3V0OiBib29sZWFuKTogdm9pZCB7XG5cdGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuXHQvLyAgQHRzLWV4cGVjdC1lcnJvciwgbm90IHR5cGVkXG5cdGNvbnN0IGVkaXRvclZpZXcgPSBlZGl0b3IuY20gYXMgRWRpdG9yVmlldztcblx0bGV0IHRhcmdldF9saW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZUF0KHRhcmdldF9wb3MpO1xuXG5cdGNvbnN0IGxpbmsgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdzcmMnKSBhcyBzdHJpbmc7XG5cdGNvbnN0IGFsdFRleHQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiYWx0XCIpIGFzIHN0cmluZztcblxuXHRpZiAoIWluQ2FsbG91dCAmJiAhaW5UYWJsZSkge1xuXHRcdGxldCBtYXRjaGVkID0gbWF0Y2hMaW5lV2l0aEV4dGVybmFsTGluayh0YXJnZXRfbGluZS50ZXh0LCBsaW5rLCBhbHRUZXh0LCBuZXdXaWR0aCwgaW5UYWJsZSk7XG5cdFx0aWYgKG1hdGNoZWQubGVuZ3RoID09IDEpIHtcblx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goe1xuXHRcdFx0XHRjaGFuZ2VzOiB7XG5cdFx0XHRcdFx0ZnJvbTogdGFyZ2V0X2xpbmUuZnJvbSArIG1hdGNoZWRbMF0uZnJvbV9jaCxcblx0XHRcdFx0XHR0bzogdGFyZ2V0X2xpbmUuZnJvbSArIG1hdGNoZWRbMF0udG9fY2gsXG5cdFx0XHRcdFx0aW5zZXJ0OiBtYXRjaGVkWzBdLm5ld19saW5rXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRlbHNlIGlmIChtYXRjaGVkLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHQvLyBuZXcgTm90aWNlKCdGYWlsIHRvIGZpbmQgY3VycmVudCBpbWFnZS1saW5rLCBwbGVhc2Ugem9vbSBtYW51YWxseSEnKVxuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdG5ldyBOb3RpY2UoJ0ZpbmQgbXVsdGlwbGUgc2FtZSBpbWFnZS1saW5rIGluIGxpbmUsIHBsZWFzZSB6b29tIG1hbnVhbGx5IScpXG5cdFx0fVxuXHRcdHJldHVybjtcblx0fVxuXG5cdHR5cGUgUmVnRGljdGlvbmFyeSA9IHtcblx0XHRba2V5OiBzdHJpbmddOiBSZWdFeHA7XG5cdH07XG5cblx0bGV0IHN0YXJ0UmVnOiBSZWdEaWN0aW9uYXJ5ID0ge1xuXHRcdCd0YWJsZSc6IC9eXFxzKlxcfC8sXG5cdFx0J2NhbGxvdXQnOiAvXj4vLFxuXHR9O1xuXG5cdGxldCBtb2RlID0gaW5UYWJsZSA/ICd0YWJsZScgOiAnY2FsbG91dCc7XG5cdHByaW50KCdtb2RlJywgbW9kZSlcblxuXHRjb25zdCBzdGFydF9yZWcgPSBzdGFydFJlZ1ttb2RlXTtcblx0bGV0IHN0YXJ0X2xpbmVfbnVtYmVyID0gdGFyZ2V0X2xpbmUubnVtYmVyO1xuXHRsZXQgbWF0Y2hlZF9yZXN1bHRzOiBNYXRjaGVkTGlua0luTGluZVtdID0gW107XG5cdGxldCBtYXRjaGVkX2xpbmVzOiBudW1iZXJbXSA9IFtdOyAgLy8xLWJhc2VkXG5cdGZvciAobGV0IGkgPSBzdGFydF9saW5lX251bWJlcjsgaSA8PSBlZGl0b3IubGluZUNvdW50KCk7IGkrKykge1xuXHRcdGxldCBsaW5lID0gZWRpdG9yVmlldy5zdGF0ZS5kb2MubGluZShpKTtcblx0XHRpZiAoIXN0YXJ0X3JlZy50ZXN0KGxpbmUudGV4dCkpIGJyZWFrO1xuXHRcdGxldCBtYXRjaGVkID0gbWF0Y2hMaW5lV2l0aEV4dGVybmFsTGluayhsaW5lLnRleHQsIGxpbmssIGFsdFRleHQsIG5ld1dpZHRoLCBpblRhYmxlKTtcblx0XHRtYXRjaGVkX3Jlc3VsdHMucHVzaCguLi5tYXRjaGVkKTtcblx0XHRtYXRjaGVkX2xpbmVzLnB1c2goLi4ubmV3IEFycmF5KG1hdGNoZWQubGVuZ3RoKS5maWxsKGkpKTtcblx0fVxuXG5cdGZvciAobGV0IGkgPSBzdGFydF9saW5lX251bWJlciAtIDE7IGkgPj0gMTsgaS0tKSB7XG5cdFx0bGV0IGxpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lKGkpO1xuXHRcdGlmICghc3RhcnRfcmVnLnRlc3QobGluZS50ZXh0KSkgYnJlYWs7XG5cdFx0bGV0IG1hdGNoZWQgPSBtYXRjaExpbmVXaXRoRXh0ZXJuYWxMaW5rKGxpbmUudGV4dCwgbGluaywgYWx0VGV4dCwgbmV3V2lkdGgsIGluVGFibGUpO1xuXHRcdG1hdGNoZWRfcmVzdWx0cy5wdXNoKC4uLm1hdGNoZWQpO1xuXHRcdG1hdGNoZWRfbGluZXMucHVzaCguLi5uZXcgQXJyYXkobWF0Y2hlZC5sZW5ndGgpLmZpbGwoaSkpO1xuXHR9XG5cblx0cHJpbnQobWF0Y2hlZF9yZXN1bHRzKVxuXHRwcmludChtYXRjaGVkX2xpbmVzKVxuXG5cdGlmIChtYXRjaGVkX3Jlc3VsdHMubGVuZ3RoID09IDEpIHtcblx0XHRsZXQgdGFyZ2V0X2xpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lKG1hdGNoZWRfbGluZXNbMF0pO1xuXHRcdGlmIChtb2RlID09ICd0YWJsZScpIHtcblx0XHRcdGxldCBvbGRfdGV4dCA9IHRhcmdldF9saW5lLnRleHQ7XG5cdFx0XHRsZXQgbmV3X2xpbmVfdGV4dCA9IG9sZF90ZXh0LnN1YnN0cmluZygwLCBtYXRjaGVkX3Jlc3VsdHNbMF0uZnJvbV9jaCkgK1xuXHRcdFx0XHRtYXRjaGVkX3Jlc3VsdHNbMF0ubmV3X2xpbmsgK1xuXHRcdFx0XHRvbGRfdGV4dC5zdWJzdHJpbmcobWF0Y2hlZF9yZXN1bHRzWzBdLnRvX2NoKTtcblx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goe1xuXHRcdFx0XHRjaGFuZ2VzOiB7XG5cdFx0XHRcdFx0ZnJvbTogdGFyZ2V0X2xpbmUuZnJvbSxcblx0XHRcdFx0XHR0bzogdGFyZ2V0X2xpbmUuZnJvbSArIG9sZF90ZXh0Lmxlbmd0aCxcblx0XHRcdFx0XHRpbnNlcnQ6IG5ld19saW5lX3RleHRcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVkaXRvclZpZXcuZGlzcGF0Y2goe1xuXHRcdFx0XHRjaGFuZ2VzOiB7XG5cdFx0XHRcdFx0ZnJvbTogdGFyZ2V0X2xpbmUuZnJvbSArIG1hdGNoZWRfcmVzdWx0c1swXS5mcm9tX2NoLFxuXHRcdFx0XHRcdHRvOiB0YXJnZXRfbGluZS5mcm9tICsgbWF0Y2hlZF9yZXN1bHRzWzBdLnRvX2NoLFxuXHRcdFx0XHRcdGluc2VydDogbWF0Y2hlZF9yZXN1bHRzWzBdLm5ld19saW5rXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRlbHNlIGlmIChtYXRjaGVkX3Jlc3VsdHMubGVuZ3RoID09IDApIHtcblx0XHRuZXcgTm90aWNlKGBGYWlsIHRvIGZpbmQgY3VycmVudCBpbWFnZS1saW5rIGluICR7bW9kZX0sIHBsZWFzZSB6b29tIG1hbnVhbGx5IWApXG5cdH1cblx0ZWxzZSB7XG5cdFx0bmV3IE5vdGljZShgRmluZCBtdWx0aXBsZSBzYW1lIGltYWdlLWxpbmsgaW4gJHttb2RlfSwgcGxlYXNlIHpvb20gbWFudWFsbHkhYClcblx0fVxuXHRyZXR1cm47XG5cbn1cblxuXG5mdW5jdGlvbiBtYXRjaExpbmVXaXRoSW50ZXJuYWxMaW5rKGxpbmVfdGV4dDogc3RyaW5nLCB0YXJnZXRfbmFtZTogc3RyaW5nLCBuZXdfd2lkdGg6IG51bWJlciwgaW50YWJsZTogYm9vbGVhbik6IE1hdGNoZWRMaW5rSW5MaW5lW10ge1xuXHRsZXQgcmVnV2lraUxpbmsgPSAvXFwhXFxbXFxbW15cXFtcXF1dKj9cXF1cXF0vZztcblx0bGV0IHJlZ01kTGluayA9IC9cXCFcXFtbXlxcW1xcXV0qP1xcXVxcKFteXFxzXFwpXFwoXFxbXFxdXFx7XFx9J10qXFwpL2c7XG5cdGNvbnN0IHRhcmdldF9uYW1lX21kbGluayA9IHRhcmdldF9uYW1lLnJlcGxhY2UoLyAvZywgJyUyMCcpO1xuXHRpZiAoIWxpbmVfdGV4dC5pbmNsdWRlcyh0YXJnZXRfbmFtZSkgJiYgIWxpbmVfdGV4dC5pbmNsdWRlcyh0YXJnZXRfbmFtZV9tZGxpbmspKSByZXR1cm4gW107XG5cblx0Ly8gcHJpbnQobGluZV90ZXh0KVxuXHRsZXQgcmVzdWx0OiBNYXRjaGVkTGlua0luTGluZVtdID0gW107XG5cdC8vIGNvbnN0IG5ld1dpa2lMaW5rID0gaW50YWJsZSA/IGAhW1ske3RhcmdldF9uYW1lfVxcXFx8JHtuZXdfd2lkdGh9XV1gOmAhW1ske3RhcmdldF9uYW1lfXwke25ld193aWR0aH1dXWA7XG5cdHdoaWxlICh0cnVlKSB7XG5cdFx0bGV0IHdpa2lfbWF0Y2ggPSByZWdXaWtpTGluay5leGVjKGxpbmVfdGV4dCk7XG5cdFx0aWYgKCF3aWtpX21hdGNoKSBicmVhaztcblx0XHRjb25zdCBtYXRjaGVkX2xpbmsgPSB3aWtpX21hdGNoWzBdO1xuXHRcdC8vIHByaW50KCdtYXRjaGVkX2xpbms6JywgbWF0Y2hlZF9saW5rKVxuXHRcdGlmIChtYXRjaGVkX2xpbmsuaW5jbHVkZXModGFyZ2V0X25hbWUpKSB7XG5cdFx0XHRsZXQgbm9ybWFsX2xpbmsgPSBpbnRhYmxlID8gbWF0Y2hlZF9saW5rLnJlcGxhY2UoL1xcXFxcXHwvZywgJ3wnKSA6IG1hdGNoZWRfbGluaztcblx0XHRcdGxldCBsaW5rX21hdGNoID0gbm9ybWFsX2xpbmsubWF0Y2goLyFcXFtcXFsoLio/KShcXHx8XFxdXFxdKS8pO1xuXHRcdFx0bGV0IGxpbmtfdGV4dCA9IGxpbmtfbWF0Y2ggPyBsaW5rX21hdGNoWzFdIDogJyc7XG5cblx0XHRcdGxldCBhbHRfbWF0Y2ggPSBtYXRjaGVkX2xpbmsubWF0Y2goLyFcXFtcXFsuKj8oXFx8KC4qPykpXFxdXFxdLyk7XG5cdFx0XHRsZXQgYWx0X3RleHQgPSBhbHRfbWF0Y2ggPyBhbHRfbWF0Y2hbMV0gOiAnJztcblx0XHRcdGxldCBhbHRfdGV4dF9saXN0ID0gYWx0X3RleHQuc3BsaXQoJ3wnKTtcblx0XHRcdGxldCBhbHRfdGV4dF93b19zaXplID0gJyc7XG5cdFx0XHRsZXQgbmV3X2FsdF90ZXh0ID0gJydcblx0XHRcdGZvciAobGV0IGFsdCBvZiBhbHRfdGV4dF9saXN0KSB7XG5cdFx0XHRcdGlmICghL15cXGQrJC8udGVzdChhbHQpICYmICEvXlxccyokLy50ZXN0KGFsdCkpIHtcblx0XHRcdFx0XHRhbHRfdGV4dF93b19zaXplID0gYWx0X3RleHRfd29fc2l6ZSArICd8JyArIGFsdDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bmV3X2FsdF90ZXh0ID0gbmV3X3dpZHRoICE9IDAgPyBgJHthbHRfdGV4dF93b19zaXplfXwke25ld193aWR0aH1gIDogYWx0X3RleHRfd29fc2l6ZTtcblx0XHRcdG5ld19hbHRfdGV4dCA9IGludGFibGUgPyBuZXdfYWx0X3RleHQucmVwbGFjZSgvXFx8L2csICdcXFxcfCcpIDogbmV3X2FsdF90ZXh0O1xuXHRcdFx0bGV0IG5ld1dpa2lMaW5rID0gbGlua19tYXRjaCA/IGAhW1ske2xpbmtfdGV4dH0ke25ld19hbHRfdGV4dH1dXWAgOiBgIVtbJHt0YXJnZXRfbmFtZX0ke25ld19hbHRfdGV4dH1dXWA7XG5cblx0XHRcdHJlc3VsdC5wdXNoKHtcblx0XHRcdFx0b2xkX2xpbms6IG1hdGNoZWRfbGluayxcblx0XHRcdFx0bmV3X2xpbms6IG5ld1dpa2lMaW5rLFxuXHRcdFx0XHRmcm9tX2NoOiB3aWtpX21hdGNoLmluZGV4LFxuXHRcdFx0XHR0b19jaDogd2lraV9tYXRjaC5pbmRleCArIG1hdGNoZWRfbGluay5sZW5ndGhcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHdoaWxlICh0cnVlKSB7XG5cdFx0bGV0IG1hdGNoID0gcmVnTWRMaW5rLmV4ZWMobGluZV90ZXh0KTtcblx0XHRpZiAoIW1hdGNoKSBicmVhaztcblx0XHRjb25zdCBtYXRjaGVkX2xpbmsgPSBtYXRjaFswXTtcblx0XHRpZiAobWF0Y2hlZF9saW5rLmluY2x1ZGVzKHRhcmdldF9uYW1lX21kbGluaykpIHtcblx0XHRcdC8vIFx1NjI3RVx1NTIzMCBtYXRjaGVkX2xpbmsgXHU0RTJEXHU3Njg0IGFsdFRleHRcblx0XHRcdGxldCBhbHRfdGV4dF9tYXRjaCA9IG1hdGNoZWRfbGluay5tYXRjaCgvXFxbLio/XFxdL2cpIGFzIHN0cmluZ1tdO1xuXHRcdFx0bGV0IGFsdF90ZXh0ID0gYWx0X3RleHRfbWF0Y2hbMF0uc3Vic3RyaW5nKDEsIGFsdF90ZXh0X21hdGNoWzBdLmxlbmd0aCAtIDEpO1xuXHRcdFx0bGV0IHB1cmVfYWx0ID0gYWx0X3RleHQucmVwbGFjZSgvXFx8XFxkKyhcXHxcXGQrKT8kL2csICcnKTtcblx0XHRcdGlmIChpbnRhYmxlKSB7XG5cdFx0XHRcdHB1cmVfYWx0ID0gYWx0X3RleHQucmVwbGFjZSgvXFxcXFxcfFxcZCsoXFx8XFxkKyk/JC9nLCAnJylcblx0XHRcdH1cblx0XHRcdGxldCBsaW5rX3RleHQgPSBtYXRjaGVkX2xpbmsuc3Vic3RyaW5nKGFsdF90ZXh0X21hdGNoWzBdLmxlbmd0aCArIDIsIG1hdGNoZWRfbGluay5sZW5ndGggLSAxKVxuXHRcdFx0bGV0IG5ld01ETGluayA9IGludGFibGUgPyBgIVske3B1cmVfYWx0fVxcXFx8JHtuZXdfd2lkdGh9XSgke2xpbmtfdGV4dH0pYCA6IGAhWyR7cHVyZV9hbHR9fCR7bmV3X3dpZHRofV0oJHtsaW5rX3RleHR9KWA7XG5cdFx0XHRpZiAoL15cXGQqJC8udGVzdChhbHRfdGV4dCkpIHtcblx0XHRcdFx0bmV3TURMaW5rID0gYCFbJHtuZXdfd2lkdGh9XSgke2xpbmtfdGV4dH0pYDtcblx0XHRcdH1cblx0XHRcdC8vIGxldCBuZXdMaW5lVGV4dCA9IGxpbmVfdGV4dC5zdWJzdHJpbmcoMCwgbWF0Y2guaW5kZXgpICsgXG5cdFx0XHQvLyBcdFx0XHRcdFx0bmV3TURMaW5rICsgXG5cdFx0XHQvLyBcdFx0XHRcdFx0bGluZV90ZXh0LnN1YnN0cmluZyhtYXRjaC5pbmRleCttYXRjaGVkX2xpbmsubGVuZ3RoKTtcblx0XHRcdHJlc3VsdC5wdXNoKHtcblx0XHRcdFx0b2xkX2xpbms6IG1hdGNoZWRfbGluayxcblx0XHRcdFx0bmV3X2xpbms6IG5ld01ETGluayxcblx0XHRcdFx0ZnJvbV9jaDogbWF0Y2guaW5kZXgsXG5cdFx0XHRcdHRvX2NoOiBtYXRjaC5pbmRleCArIG1hdGNoZWRfbGluay5sZW5ndGhcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRwcmludChcIkxpbmUgVGV4dDogXCIsIGxpbmVfdGV4dClcblx0cHJpbnQoXCJNYXRjaGVkSW5mbzpcIiwgcmVzdWx0KTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuXG5mdW5jdGlvbiBtYXRjaExpbmVXaXRoRXh0ZXJuYWxMaW5rKGxpbmVfdGV4dDogc3RyaW5nLCBsaW5rOiBzdHJpbmcsIGFsdF90ZXh0OiBzdHJpbmcsIG5ld193aWR0aDogbnVtYmVyLCBpbnRhYmxlOiBib29sZWFuKTogTWF0Y2hlZExpbmtJbkxpbmVbXSB7XG5cdGxldCByZXN1bHQ6IE1hdGNoZWRMaW5rSW5MaW5lW10gPSBbXVxuXHRsZXQgcmVnTWRMaW5rID0gL1xcIVxcW1teXFxbXFxdXSo/XFxdXFwoW15cXHNcXClcXChcXFtcXF1cXHtcXH0nXSpcXCkvZztcblx0aWYgKCFsaW5lX3RleHQuaW5jbHVkZXMobGluaykgfHwgIWxpbmVfdGV4dC5pbmNsdWRlcyhhbHRfdGV4dCkpIHJldHVybiBbXTtcblx0bGV0IG5ld0V4dGVybmFsTGluayA9IGludGFibGUgP1xuXHRcdGAhWyR7YWx0X3RleHR9XFxcXHwke25ld193aWR0aH1dKCR7bGlua30pYCA6XG5cdFx0YCFbJHthbHRfdGV4dH18JHtuZXdfd2lkdGh9XSgke2xpbmt9KWA7XG5cdGlmICgvXlxcZCokLy50ZXN0KGFsdF90ZXh0KSB8fCAvXlxccyokLy50ZXN0KGFsdF90ZXh0KSkge1xuXHRcdG5ld0V4dGVybmFsTGluayA9IGAhWyR7bmV3X3dpZHRofV0oJHtsaW5rfSlgO1xuXHR9XG5cdHdoaWxlICh0cnVlKSB7XG5cdFx0bGV0IG1hdGNoID0gcmVnTWRMaW5rLmV4ZWMobGluZV90ZXh0KTtcblx0XHRpZiAoIW1hdGNoKSBicmVhaztcblx0XHRsZXQgbWF0Y2hlZF9saW5rID0gbWF0Y2hbMF07XG5cdFx0aWYgKG1hdGNoZWRfbGluay5pbmNsdWRlcyhsaW5rKSAmJiBtYXRjaGVkX2xpbmsuaW5jbHVkZXMoYWx0X3RleHQpKSB7XG5cdFx0XHQvLyBsZXQgbmV3TGluZVRleHQgPSBsaW5lX3RleHQuc3Vic3RyaW5nKDAsIG1hdGNoLmluZGV4KSArIFxuXHRcdFx0Ly8gXHRcdFx0XHRcdG5ld0V4dGVybmFsTGluayArIFxuXHRcdFx0Ly8gXHRcdFx0XHRcdGxpbmVfdGV4dC5zdWJzdHJpbmcobWF0Y2guaW5kZXgrbWF0Y2hlZF9saW5rLmxlbmd0aCk7XG5cdFx0XHRyZXN1bHQucHVzaCh7XG5cdFx0XHRcdG9sZF9saW5rOiBtYXRjaGVkX2xpbmssXG5cdFx0XHRcdG5ld19saW5rOiBuZXdFeHRlcm5hbExpbmssXG5cdFx0XHRcdGZyb21fY2g6IG1hdGNoLmluZGV4LFxuXHRcdFx0XHR0b19jaDogbWF0Y2guaW5kZXggKyBtYXRjaGVkX2xpbmsubGVuZ3RoXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0cHJpbnQoXCJMaW5lIFRleHQ6IFwiLCBsaW5lX3RleHQpXG5cdHByaW50KFwiTWF0Y2hlZEluZm86XCIsIHJlc3VsdCk7XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbiIsICJpbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBnZXRGaWxlUGFyZW50Rm9sZGVyIH0gZnJvbSBcInNyYy91dGlsXCI7XG5pbXBvcnQgeyBkZWxldGVGaWxlIH0gZnJvbSBcInNyYy91dGlscy9kZWxldGVGaWxlXCI7XG5pbXBvcnQgQXR0YWNoRmxvd1BsdWdpbiBmcm9tIFwiLi4vLi4vc3JjL21haW5cIjtcbi8qKlxuICogZGVsQWxsQXR0YWNoc0J5Q29tbWFuZFxuICpcbiAqIDEuIGdldCBjdXJyZW50IGZpbGVcbiAqIDIuIGdldCBURmlsZSBvZiB0aGUgYXR0YWNobWVudCByZWZlcmVuY2VkIGJ5IGZpbGVcbiAqL1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUFsbEF0dGFjaHMgPSBhc3luYyAocGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luKSA9PiB7XG5cdC8vIDEuIGdldCBjdXJyZW50IGZpbGVcblx0Y29uc3QgYWN0aXZlTWQ6IFRGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkgYXMgVEZpbGU7XG5cdGNvbnN0IHJlc29sdmVkTGlua3MgPSBhcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xuXHRjb25zdCBhdHRhY2hzUGF0aHM6IHN0cmluZ1tdID0gW107XG5cdGZvciAoY29uc3QgW21kRmlsZSwgbGlua3NdIG9mIE9iamVjdC5lbnRyaWVzKHJlc29sdmVkTGlua3MpKSB7XG5cdFx0aWYgKGFjdGl2ZU1kPy5wYXRoID09PSBtZEZpbGUpIHtcblx0XHRcdGxldCBmaWxlQ291bnQgPSAwO1xuXHRcdFx0bGV0IGZsYWcgPSBmYWxzZTtcblx0XHRcdGZvciAoY29uc3QgW2ZpbGVQYXRoLCBucl0gb2YgT2JqZWN0LmVudHJpZXMobGlua3MpKSB7XG5cdFx0XHRcdC8vIElmIHRoZSBmaWxlUGF0aCBlbmRzIHdpdGggJy5tZCcgLHdoaWNoIGluZGljYXRlcyB0aGUgZmlsZSBpcyBtYXJrZG93biBmaWxlLCBhbmQgZG8gbm90IGRlbGV0ZSBpdFxuXHRcdFx0XHRpZiAoZmlsZVBhdGgubWF0Y2goLy4qXFwubWQkL20pKSBjb250aW51ZTtcblx0XHRcdFx0Ly8gaWYgdGhlIGF0dGFjaG1lbnQgaW4gdGhlIG5vdGUgaGFzIGJlZW4gcmVmZXJlbmNlZCBieSBvdGhlciBub3RlcyAgc2ltdWx0YW5lb3VzbHkgc2tpcCBpdC5cblx0XHRcdFx0aWYgKGlzUmVmZXJlbmNlZEJ5T3RoZXJOb3RlcyhmaWxlUGF0aCwgYWN0aXZlTWQpKSBjb250aW51ZTtcblx0XHRcdFx0YXR0YWNoc1BhdGhzLnB1c2goZmlsZVBhdGgpO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIDIuIGdldCBURmlsZSBvZiB0aGUgYXR0YWNobWVudCByZWZlcmVuY2VkIGJ5IGZpbGVcblx0XHRcdFx0XHRjb25zdCBBdHRhY2hGaWxlOiBURmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXG5cdFx0XHRcdFx0XHRmaWxlUGF0aFxuXHRcdFx0XHRcdCkgYXMgVEZpbGU7XG5cdFx0XHRcdFx0aWYgKEF0dGFjaEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlRmlsZShBdHRhY2hGaWxlLCBwbHVnaW4pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBwYXJlbnRGb2xkZXIgPSBnZXRGaWxlUGFyZW50Rm9sZGVyKFxuXHRcdFx0XHRcdFx0QXR0YWNoRmlsZVxuXHRcdFx0XHRcdCkgYXMgVEZvbGRlcjtcblx0XHRcdFx0XHRpZiAoIWZsYWcpIHtcblx0XHRcdFx0XHRcdGZpbGVDb3VudCA9IHBhcmVudEZvbGRlci5jaGlsZHJlbi5sZW5ndGg7XG5cdFx0XHRcdFx0XHRmbGFnID0gIWZsYWc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGZpbGVDb3VudCA9IGZpbGVDb3VudCAtIDE7XG5cdFx0XHRcdFx0aWYgKCFmaWxlQ291bnQpIHtcblx0XHRcdFx0XHRcdGF3YWl0IGRlbGV0ZUZpbGUocGFyZW50Rm9sZGVyLCBwbHVnaW4pO1xuXHRcdFx0XHRcdFx0Ly8gYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShwYXJlbnRGb2xkZXIsIHRydWUpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcblx0XHRcdFx0XHRcdFx0XCJBbGwgYXR0YWNobWVudHMgYW5kIGl0cyBwYXJlbnQgZm9sZGVyIGRlbGV0ZWQhXCIsXG5cdFx0XHRcdFx0XHRcdDMwMDBcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0Ly8gcmVtb3ZlQWxsVW51c2VkUmVmZXJlbmNlTGlua3MoYWN0aXZlTWQsIGF0dGFjaHNQYXRocyk7XG59O1xuLyoqXG4gKlxuICogQHBhcmFtIGF0dGFjaFBhdGhcbiAqIEBwYXJhbSBjdXJyZW50TWRcbiAqIEByZXR1cm5zXG4gKi9cbmNvbnN0IGlzUmVmZXJlbmNlZEJ5T3RoZXJOb3RlcyA9IChcblx0YXR0YWNoUGF0aDogc3RyaW5nLFxuXHRjdXJyZW50TWQ6IFRGaWxlXG4pOiBib29sZWFuID0+IHtcblx0Y29uc3QgcmVzb2x2ZWRMaW5rcyA9IGFwcC5tZXRhZGF0YUNhY2hlLnJlc29sdmVkTGlua3M7XG5cdGxldCBmbGFnOiBib29sZWFuID0gZmFsc2U7XG5cblx0Zm9yIChjb25zdCBbbWRGaWxlLCBsaW5rc10gb2YgT2JqZWN0LmVudHJpZXMocmVzb2x2ZWRMaW5rcykpIHtcblx0XHRpZiAobWRGaWxlICE9PSBjdXJyZW50TWQucGF0aCkge1xuXHRcdFx0Zm9yIChjb25zdCBbZmlsZVBhdGgsIG5yXSBvZiBPYmplY3QuZW50cmllcyhsaW5rcykpIHtcblx0XHRcdFx0aWYgKGZpbGVQYXRoID09PSBhdHRhY2hQYXRoKSB7XG5cdFx0XHRcdFx0ZmxhZyA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIGZsYWc7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbGwgcmVmZXJlbmNlIGxpbmtzXG4gKlxuICogQHBhcmFtIGltYWdlUGF0aHMgIHBhdGggIGxpc3QgIG9mIHRoZSBjdXJyZW50IGRlbGV0ZWQgaW1hZ2Ugd2l0aG91dCBzdWJwYXRoLGZvcm1hdCBhcyAgbmFtZS5leHRlbnNpb25cbiAqIEBwYXJhbSBtZEZpbGUgIHRoZSBtYXJrZG93biBmaWxlIGNvbnRhaW5pbmcgdGhlIGRlbGV0ZWQgaW1hZ2VcbiAqL1xuZXhwb3J0IGNvbnN0IHJlbW92ZUFsbFVudXNlZFJlZmVyZW5jZUxpbmtzID0gYXN5bmMgKFxuXHRhY3RpdmVNZDogVEZpbGUsXG5cdGF0dGFjaHNQYXRoczogc3RyaW5nW11cbikgPT4ge1xuXHQvLyAxLmdldCBwYXRoIGxpc3Qgb2YgYWxsIHVudXNlZCBhdHRhY2htZW50c1xuXHRjb25zdCBvcmlnaW5Db250ZW50cyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGFjdGl2ZU1kKTtcblx0Y29uc3QgbGluZXMgPSBvcmlnaW5Db250ZW50cy5zcGxpdChcIlxcblwiKTtcblx0Y29uc3QgbmV3Q29udGVudHM6IHN0cmluZ1tdID0gW107XG5cdGxldCBpc05vdFRhcmdldExpbmU6IGJvb2xlYW4gPSB0cnVlO1xuXG5cdC8vIDIuIGNsZWFyIGFsbCB1bnVzZWQgYXR0YWNobWVudHMgbGlua3MgaW4gdGhlIG5vdGVcblx0Ly8gRXNjYXBlIC4gdG8gXFwuIGZvciByZWd1bGFyIGV4cHJlc2lvblxuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRmb3IgKGNvbnN0IGluZGV4IGluIGF0dGFjaHNQYXRocykge1xuXHRcdFx0Y29uc3QgcmVnTWRSZWZMaW5rID0gbmV3IFJlZ0V4cChcblx0XHRcdFx0XCIhXFxcXFsoLiopP1xcXFxdXFxcXCgoKC4qXFxcXC8pKyk/XCIgKyBhdHRhY2hzUGF0aHNbaW5kZXhdICsgXCJcXFxcKVwiLFxuXHRcdFx0XHRcImdtXCJcblx0XHRcdCk7XG5cdFx0XHRjb25zdCByZWdXaWtpUmVmTGluazIgPSBuZXcgUmVnRXhwKFxuXHRcdFx0XHRcIiFcXFxcW1xcXFxbLio/XCIgKyBhdHRhY2hzUGF0aHNbaW5kZXhdICsgXCIoXFxcXHxcXFxcZCopP1xcXFxdXFxcXF1cIixcblx0XHRcdFx0XCJnbVwiXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3QgZGVjb2RlTGluZSA9IGRlY29kZVVSSShsaW5lKTtcblx0XHRcdGNvbnN0IGlzSW5jbHVkZUltYWdlID0gZGVjb2RlTGluZS5pbmNsdWRlcyhhdHRhY2hzUGF0aHNbaW5kZXhdKTtcblx0XHRcdGNvbnN0IGlzTWFya2Rvd25TdHlsZSA9IGRlY29kZUxpbmUubWF0Y2gocmVnTWRSZWZMaW5rKSAhPSBudWxsO1xuXHRcdFx0Y29uc3QgaXNXaWtpU3R5bGUgPSBkZWNvZGVMaW5lLm1hdGNoKHJlZ1dpa2lSZWZMaW5rMikgIT0gbnVsbDtcblx0XHRcdGlmIChpc0luY2x1ZGVJbWFnZSAmJiBpc01hcmtkb3duU3R5bGUpIHtcblx0XHRcdFx0aXNOb3RUYXJnZXRMaW5lID0gZmFsc2U7XG5cdFx0XHRcdG5ld0NvbnRlbnRzLnB1c2goZGVjb2RlTGluZS5yZXBsYWNlKHJlZ01kUmVmTGluaywgXCJcIikpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH0gZWxzZSBpZiAoaXNJbmNsdWRlSW1hZ2UgJiYgaXNXaWtpU3R5bGUpIHtcblx0XHRcdFx0aXNOb3RUYXJnZXRMaW5lID0gZmFsc2U7XG5cdFx0XHRcdG5ld0NvbnRlbnRzLnB1c2goZGVjb2RlTGluZS5yZXBsYWNlKHJlZ1dpa2lSZWZMaW5rMiwgXCJcIikpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoaXNOb3RUYXJnZXRMaW5lKSBuZXdDb250ZW50cy5wdXNoKGxpbmUpO1xuXHR9XG5cdGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGFjdGl2ZU1kLnBhdGgsIG5ld0NvbnRlbnRzLmpvaW4oXCJcXG5cIikpO1xufTtcbmV4cG9ydCBjb25zdCBnZXRSZWZlbmNlZExpbmtDb3VudCA9ICgpOiBudW1iZXIgPT4ge1xuXHRjb25zdCBhY3RpdmVNZDogVEZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSBhcyBURmlsZTtcblx0Y29uc3QgcmVzb2x2ZWRMaW5rcyA9IGFwcC5tZXRhZGF0YUNhY2hlLnJlc29sdmVkTGlua3M7XG5cdGNvbnN0IGF0dGFjaHNQYXRoczogc3RyaW5nW10gPSBbXTtcblx0Zm9yIChjb25zdCBbbWRGaWxlLCBsaW5rc10gb2YgT2JqZWN0LmVudHJpZXMocmVzb2x2ZWRMaW5rcykpIHtcblx0XHRpZiAoYWN0aXZlTWQ/LnBhdGggPT09IG1kRmlsZSkge1xuXHRcdFx0Zm9yIChjb25zdCBbZmlsZVBhdGgsIG5yXSBvZiBPYmplY3QuZW50cmllcyhsaW5rcykpIHtcblx0XHRcdFx0aWYgKGZpbGVQYXRoLm1hdGNoKC8uKlxcLm1kJC9tKSkgY29udGludWU7XG5cdFx0XHRcdGlmIChpc1JlZmVyZW5jZWRCeU90aGVyTm90ZXMoZmlsZVBhdGgsIGFjdGl2ZU1kKSkgY29udGludWU7XG5cdFx0XHRcdGF0dGFjaHNQYXRocy5wdXNoKGZpbGVQYXRoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIGF0dGFjaHNQYXRocy5sZW5ndGg7XG59O1xuIiwgImltcG9ydCBBdHRhY2hGbG93UGx1Z2luIGZyb20gXCJzcmMvbWFpblwiO1xuaW1wb3J0IHsgVEZpbGUsIE5vdGljZSwgVEZvbGRlciwgTWFya2Rvd25WaWV3LCBFZGl0b3J9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgaW1hZ2VSZWZlcmVuY2VkU3RhdGUgfSBmcm9tIFwiLi9lbnVtL2ltYWdlUmVmZXJlbmNlZFN0YXRlXCI7XG5pbXBvcnQgeyByZXN1bHREZXRlcm1pbmVJbWFnZURlbGV0aW9uIGFzIGRlbGV0aW9uUmVzdWx0IH0gZnJvbSBcIi4vaW50ZXJmYWNlL3Jlc3VsdERldGVybWluZUltYWdlRGVsZXRpb25cIjtcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCB7IGV4ZWMsIGV4ZWNTeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgeyBleGlzdHNTeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHtcblx0RWxlY3Ryb25XaW5kb3csIEZpbGVTeXN0ZW1BZGFwdGVyV2l0aEludGVybmFsQXBpLFxuXHRsb2FkSW1hZ2VCbG9iLCBBcHBXaXRoRGVza3RvcEludGVybmFsQXBpLCBFZGl0b3JJbnRlcm5hbEFwaVxuICB9IGZyb20gXCIuL2hlbHBlcnNcIlxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgbGV0IERFQlVHOmJvb2xlYW4gPSBmYWxzZTtcbmNvbnN0IFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQgPSAxODAwO1xuXG5leHBvcnQgY29uc3QgcHJpbnQ9KG1lc3NhZ2U/OiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSkgPT57XG4gICAgaWYgKERFQlVHKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWJ1Zyh2YWx1ZTogYm9vbGVhbikge1xuICAgIERFQlVHID0gdmFsdWU7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB0YXJnZXRfZmlsZSBcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdTc2RUVcdTY4MDdcdTY1ODdcdTRFRjZcbiAqIEBwYXJhbSBjdXJyZW50TWRcdFx1NUY1M1x1NTI0RFx1NjI0MFx1NTcyOFx1NzY4NCBtYXJrZG93biBcdTY1ODdcdTRFRjZcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBjb25zdCBjaGVja1JlZmVyZW5jZUluZm8gPSAoXG5cdHRhcmdldF9maWxlOiBURmlsZSxcblx0Y3VycmVudE1kOiBURmlsZVxuKTogeyBzdGF0ZTogbnVtYmVyOyBtZFBhdGg6IHN0cmluZ1tdIH0gPT4ge1xuXG5cdGNvbnN0IHJlc29sdmVkTGlua3MgPSBhcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xuXHRsZXQgQ3VyTURQYXRoOiBzdHJpbmc7XG5cdC8vIC8vIHJlY29yZCB0aGUgc3RhdGUgb2YgaW1hZ2UgcmVmZXJlbmNlZCBhbmQgYWxsIHBhdGhzIG9mIG1hcmtkb3duIHJlZmVyZW5jaW5nIHRvIHRoZSBpbWFnZVxuXHRsZXQgcmVzdWx0OiBkZWxldGlvblJlc3VsdCA9IHtcblx0XHRzdGF0ZTogMCxcblx0XHRtZFBhdGg6IFtdLFxuXHR9O1xuXHRsZXQgcmVmTnVtID0gMDsgLy8gcmVjb3JkIHRoZSBudW1iZXIgb2Ygbm90ZSByZWZlcmVuY2luZyB0byB0aGUgaW1hZ2UuXG5cdGZvciAoY29uc3QgW21kRmlsZSwgbGlua3NdIG9mIE9iamVjdC5lbnRyaWVzKHJlc29sdmVkTGlua3MpKSB7XG5cdFx0aWYgKGN1cnJlbnRNZC5wYXRoID09PSBtZEZpbGUpIHtcblx0XHRcdEN1ck1EUGF0aCA9IGN1cnJlbnRNZC5wYXRoO1xuXHRcdFx0cmVzdWx0Lm1kUGF0aC51bnNoaWZ0KEN1ck1EUGF0aCk7XG5cdFx0fVxuXHRcdGZvciAoY29uc3QgW2ZpbGVQYXRoLCBucl0gb2YgT2JqZWN0LmVudHJpZXMobGlua3MpKSB7XG5cdFx0XHRpZiAodGFyZ2V0X2ZpbGU/LnBhdGggPT09IGZpbGVQYXRoKSB7XG5cdFx0XHRcdHJlZk51bSsrO1xuXHRcdFx0XHQvLyBpZiB0aGUgZGVsZXRlZCB0YXJnZXQgaW1hZ2UgcmVmZXJlbmNlZCBieSBjdXJyZW50IG5vdGUgbW9yZSB0aGFuIG9uY2Vcblx0XHRcdFx0aWYgKG5yID4gMSkge1xuXHRcdFx0XHRcdHJlc3VsdC5zdGF0ZSA9IGltYWdlUmVmZXJlbmNlZFN0YXRlLk1PUkU7XG5cdFx0XHRcdFx0cmVzdWx0Lm1kUGF0aC5wdXNoKG1kRmlsZSk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXN1bHQubWRQYXRoLnB1c2gobWRGaWxlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKHJlZk51bSA+IDEpIHtcblx0XHRyZXN1bHQuc3RhdGUgPSBpbWFnZVJlZmVyZW5jZWRTdGF0ZS5NVVRJUExFO1xuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdC5zdGF0ZSA9IGltYWdlUmVmZXJlbmNlZFN0YXRlLk9OQ0U7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cblxuLyoqXG4gKiBcdFx1OTAxQVx1OEZDN1x1NUY1M1x1NTI0RG1kXHU2NTg3XHU0RUY2XHU1NDhDXHU1NkZFXHU3MjQ3XHU1NDBEIFx1ODNCN1x1NTNENiBcdTU2RkVcdTcyNDdcdTY1ODdcdTRFRjZcdTVCRjlcdThDNjEgICBcdUZGMENcdTdDN0JcdTU3OEJcdTRFM0FURmlsZVxuICogXG5cdEBwYXJhbSBjdXJyZW50TWQgIFx1NUY1M1x1NTI0RFx1OTcwMFx1ODk4MVx1ODhBQlx1NTIyMFx1OTY2NFx1NzY4NGN1ck1kXHU2MjQwXHU1NzI4XHU3Njg0bWFya2Rvd25cdTY1ODdcdTRFRjZcblx0QHBhcmFtIEZpbGVCYXNlTmFtZSAgXHU1RjUzXHU1MjREXHU5NzAwXHU4OTgxXHU4OEFCXHU1MjIwXHU5NjY0XHU3Njg0Y3VyTWRcdTU0MEQgbmFtZS5leHRlbnNpb25cbiAqICBAcmV0dXJucyAgQXR0YWNoRmlsZVxuICovXG5leHBvcnQgY29uc3QgZ2V0RmlsZUJ5QmFzZU5hbWUgPSAoXG5cdGN1cnJlbnRNZDogVEZpbGUsXG5cdEZpbGVCYXNlTmFtZTogc3RyaW5nXG4pOiBURmlsZSB8IHVuZGVmaW5lZCA9PiB7XG5cdGNvbnN0IHJlc29sdmVkTGlua3MgPSBhcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xuXHRmb3IgKGNvbnN0IFttZEZpbGUsIGxpbmtzXSBvZiBPYmplY3QuZW50cmllcyhyZXNvbHZlZExpbmtzKSkge1xuXHRcdGlmIChjdXJyZW50TWQucGF0aCA9PT0gbWRGaWxlKSB7XG5cdFx0XHRmb3IgKGNvbnN0IFtmaWxlUGF0aCwgbnJdIG9mIE9iamVjdC5lbnRyaWVzKGxpbmtzKSkge1xuXHRcdFx0XHQvLyBwcmludCgnZmlsZVBhdGgnLCBmaWxlUGF0aClcblx0XHRcdFx0Ly8gcHJpbnQoRmlsZUJhc2VOYW1lKVxuXHRcdFx0XHRpZiAoZmlsZVBhdGguaW5jbHVkZXMoRmlsZUJhc2VOYW1lKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCBBdHRhY2hGaWxlOiBURmlsZSA9XG5cdFx0XHRcdFx0XHRcdGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpIGFzIFRGaWxlO1xuXHRcdFx0XHRcdFx0aWYgKEF0dGFjaEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gQXR0YWNoRmlsZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgIGNhbm5vdCBnZXQgdGhlIGltYWdlIGZpbGVgKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLyoqXG4gKiBcdTUyMjBcdTk2NjRcdTYzMDdcdTVCOUFcdTk2NDRcdTRFRjZcdTY1ODdcdTRFRjZcbiAqXG4gKiBAcGFyYW0gZmlsZSAgXHU2MzA3XHU1QjlBXHU3Njg0XHU5NjQ0XHU0RUY2XHU2NTg3XHU0RUY2XG4gKiBAcGFyYW0gcGx1Z2luIFx1NUY1M1x1NTI0RFx1NjNEMlx1NEVGNlxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGNvbnN0IFB1cmVDbGVhckF0dGFjaG1lbnQgPSBhc3luYyAoXG5cdGZpbGU6IFRGaWxlLFxuXHR0YXJnZXRfdHlwZTogc3RyaW5nLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW5cbikgPT4ge1xuXHRjb25zdCBkZWxldGVPcHRpb24gPSBwbHVnaW4uc2V0dGluZ3MuZGVsZXRlT3B0aW9uO1xuXHRjb25zdCBkZWxGaWxlRm9sZGVyID0gb25seU9uZUZpbGVFeGlzdHMoZmlsZSk7XG5cdGNvbnN0IGZpbGVGb2xkZXIgPSBnZXRGaWxlUGFyZW50Rm9sZGVyKGZpbGUpIGFzIFRGb2xkZXI7XG5cdGxldCBuYW1lID0gdGFyZ2V0X3R5cGU9PSdpbWcnID8gJ0ltYWdlJyA6ICdGaWxlJztcblx0dHJ5IHtcblx0XHRpZiAoZGVsZXRlT3B0aW9uID09PSBcIi50cmFzaFwiKSB7XG5cdFx0XHRhd2FpdCBhcHAudmF1bHQudHJhc2goZmlsZSwgZmFsc2UpO1xuXHRcdFx0bmV3IE5vdGljZShcblx0XHRcdFx0bmFtZSArIFwiIG1vdmVkIHRvIE9ic2lkaWFuIFRyYXNoICFcIixcblx0XHRcdFx0U1VDQ0VTU19OT1RJQ0VfVElNRU9VVFxuXHRcdFx0KTtcblx0XHRcdGlmIChkZWxGaWxlRm9sZGVyKSB7XG5cdFx0XHRcdGF3YWl0IGFwcC52YXVsdC50cmFzaChmaWxlRm9sZGVyLCBmYWxzZSk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJBdHRhY2htZW50IGZvbGRlciBoYXZlIGJlZW4gZGVsZXRlZCFcIiwgMzAwMCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChkZWxldGVPcHRpb24gPT09IFwic3lzdGVtLXRyYXNoXCIpIHtcblx0XHRcdGF3YWl0IGFwcC52YXVsdC50cmFzaChmaWxlLCB0cnVlKTtcblx0XHRcdG5ldyBOb3RpY2UobmFtZSArIFwiIG1vdmVkIHRvIFN5c3RlbSBUcmFzaCAhXCIsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHRcdFx0aWYgKGRlbEZpbGVGb2xkZXIpIHtcblx0XHRcdFx0YXdhaXQgYXBwLnZhdWx0LnRyYXNoKGZpbGVGb2xkZXIsIHRydWUpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQXR0YWNobWVudCBmb2xkZXIgaGF2ZSBiZWVuIGRlbGV0ZWQhXCIsIDMwMDApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoZGVsZXRlT3B0aW9uID09PSBcInBlcm1hbmVudFwiKSB7XG5cdFx0XHRhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGZpbGUpO1xuXHRcdFx0bmV3IE5vdGljZShuYW1lICsgXCIgZGVsZXRlZCBQZXJtYW5lbnRseSAhXCIsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHRcdFx0aWYgKGRlbEZpbGVGb2xkZXIpIHtcblx0XHRcdFx0YXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShmaWxlRm9sZGVyLCB0cnVlKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkF0dGFjaG1lbnQgZm9sZGVyIGhhdmUgYmVlbiBkZWxldGVkIVwiLCAzMDAwKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0bmV3IE5vdGljZShcIkZhaWxkIHRvIGRlbGVsdGUgdGhlIFwiICsgbmFtZSArIFwiIVwiLCBTVUNDRVNTX05PVElDRV9USU1FT1VUKTtcblx0fVxufTtcblxuXG5leHBvcnQgY29uc3QgaGFuZGxlckRlbEZpbGVOZXcgPSAoXG5cdEZpbGVCYXNlTmFtZTogc3RyaW5nLFxuXHRjdXJyZW50TWQ6IFRGaWxlLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW4sXG5cdHRhcmdldF90eXBlOiBzdHJpbmcsXG5cdHRhcmdldF9wb3M6IG51bWJlcixcblx0aW5fdGFibGU6IGJvb2xlYW4sXG5cdGluX2NhbGxvdXQ6IGJvb2xlYW5cbikgPT4ge1xuXHRsZXQgbG9nczogc3RyaW5nW107XG5cdGxldCBtb2RhbDtcblx0Y29uc3QgdGFyZ2V0X2ZpbGUgPSBnZXRGaWxlQnlCYXNlTmFtZShjdXJyZW50TWQsIEZpbGVCYXNlTmFtZSkgYXMgVEZpbGU7XG5cdGNvbnN0IHJlZkluZm8gPSBjaGVja1JlZmVyZW5jZUluZm8odGFyZ2V0X2ZpbGUsIGN1cnJlbnRNZCk7XG5cdGxldCBzdGF0ZSA9IHJlZkluZm8uc3RhdGU7XG5cdHN3aXRjaCAoc3RhdGUpIHtcblx0XHRjYXNlIDA6XG5cdFx0XHQvLyBjbGVhciBhdHRhY2htZW50IGRpcmVjdGx5XG5cdFx0XHRkZWxldGVDdXJUYXJnZXRMaW5rKEZpbGVCYXNlTmFtZSwgcGx1Z2luLCB0YXJnZXRfdHlwZSwgdGFyZ2V0X3BvcywgaW5fdGFibGUsIGluX2NhbGxvdXQpO1xuXHRcdFx0UHVyZUNsZWFyQXR0YWNobWVudCh0YXJnZXRfZmlsZSwgdGFyZ2V0X3R5cGUsIHBsdWdpbik7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIDE6XG5cdFx0Y2FzZSAyOlxuXHRcdFx0ZGVsZXRlQ3VyVGFyZ2V0TGluayhGaWxlQmFzZU5hbWUsIHBsdWdpbiwgdGFyZ2V0X3R5cGUsIHRhcmdldF9wb3MsIGluX3RhYmxlLCBpbl9jYWxsb3V0KTtcblx0XHRcdC8vIHJlZmVyZW5jZWQgYnkgZWl0aG9yIG9ubHkgbm90ZSBvciBvdGhlciBtdXRpcGxlIG5vdGVzIG1vcmUgdGhhbiBvbmNlXG5cdFx0XHRsb2dzID0gcmVmSW5mby5tZFBhdGggYXMgc3RyaW5nW107XG5cdFx0XHQvLyBcdTc1MzFcdTRFOEVcdTY3MDlcdTUyMkJcdTc2ODRcdTVGMTVcdTc1MjhcdUZGMENcdTYyNDBcdTRFRTVcdTUzRUFcdTUyMjBcdTk2NjRcdTVGNTNcdTUyNERcdTc2ODRcdTVGMTVcdTc1MjhcdTk0RkVcdTYzQTVcdTgwMENcdTRFMERcdTUyMjBcdTk2NjRcdTY1ODdcdTRFRjZcblx0XHRcdG5ldyBOb3RpY2UoXCJBcyBvdGhlciByZWZlcmVuY2VzIG9mIGN1cnJlbnQgZmlsZSBleGlzdCwgXCIgKyBcblx0XHRcdFx0XCJqdXN0IGRlbGV0ZWQgdGhlIGN1cnJlbnQgcmVmZXJlbmNlIGxpbmsgd2l0aG91dCBkZWxldGluZyB0aGUgYWN0dWFsIGZpbGUuXCIsIFxuXHRcdFx0XHQzNTAwKTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0YnJlYWs7XG5cdH1cbn1cblxuLy8gXHU1OTgyXHU2NzlDXHU2NjJGIHR5cGUgXHU2NjJGIFwiaW1nXCJcdUZGMENcdTVDMzFcdTUxQzZcdTc4NkVcdTUyMjBcdTk2NjRcdTU2RkVcdTcyNDdcdTVGMTVcdTc1MjhcdTk0RkVcdTYzQTVcdTc2ODRcdTkwRThcdTUyMDZcdUZGMENcdTU5ODJcdTY3OUNcdTY2MkZcdTUxNzZcdTRFRDZcdTdDN0JcdTU3OEJcdUZGMENcdTc2RjRcdTYzQTVcdTUyMjBcdTk2NjRcdTY1NzRcdTg4NENcbi8vIHRhcmdldF9saW5lIFx1RkYwODEtYmFzZWRcdUZGMDkgXHU1NDhDIHRhcmdldF9jaCBcdTY2MkZcdTYzMDdcdTc5M0FcdTk2NDRcdTRFRjZcdTYyNDBcdTU3MjhcdTc2ODRcdTRGNERcdTdGNkVcbmV4cG9ydCBjb25zdCBkZWxldGVDdXJUYXJnZXRMaW5rID0gKFxuXHRmaWxlX2Jhc2VfbmFtZTogc3RyaW5nLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW4sXG5cdHRhcmdldF90eXBlOiBzdHJpbmcsXG5cdHRhcmdldF9wb3M6IG51bWJlcixcblx0aW5fdGFibGU6IGJvb2xlYW4sXG5cdGluX2NhbGxvdXQ6IGJvb2xlYW5cbikgPT4ge1xuXHRmaWxlX2Jhc2VfbmFtZSA9IGZpbGVfYmFzZV9uYW1lLnN0YXJ0c1dpdGgoJy8nKSA/IGZpbGVfYmFzZV9uYW1lLnN1YnN0cmluZygxKTpmaWxlX2Jhc2VfbmFtZTtcblx0Y29uc3QgYWN0aXZlVmlldyA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KSBhcyBNYXJrZG93blZpZXc7XG5cdGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuXHQvLyAgQHRzLWV4cGVjdC1lcnJvciwgbm90IHR5cGVkXG5cdGNvbnN0IGVkaXRvclZpZXcgPSBlZGl0b3IuY20gYXMgRWRpdG9yVmlldztcblxuXHRsZXQgdGFyZ2V0X2xpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lQXQodGFyZ2V0X3Bvcyk7XG5cdGxldCBsaW5lX3RleHQgPSB0YXJnZXRfbGluZS50ZXh0O1xuXG5cdGlmICghaW5fdGFibGUgJiYgIWluX2NhbGxvdXQpe1xuXHRcdGxldCBmaW5kcyA9IGZpbmRMaW5rSW5MaW5lKGZpbGVfYmFzZV9uYW1lLCBsaW5lX3RleHQpO1xuXHRcdGlmIChmaW5kcy5sZW5ndGggPT0gMCl7XG5cdFx0XHRuZXcgTm90aWNlKFwiRmFpbCB0byBmaW5kIHRoZSBsaW5rLXRleHQsIHBsZWFzZSBkZWxldGUgaXQgbWFudWFsbHkhXCIsIDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRlbHNlIGlmKGZpbmRzLmxlbmd0aCAhPSAxKXtcblx0XHRcdG5ldyBOb3RpY2UoXCJGaW5kIG11bHRpcGxlIHNhbWUgTGluayBpbiBjdXJyZW50IGxpbmUsIHBsZWFzZSBkZWxldGUgaXQgbWFudWFsbHkhXCIsIDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRlbHNle1xuXHRcdFx0Ly8gZWRpdG9yVmlldy5kaXNwYXRjaCh7Y2hhbmdlczoge2Zyb206IHRhcmdldF9saW5lLmZyb20gKyBmaW5kc1swXVswXSwgdG86IHRhcmdldF9saW5lLmZyb20gKyBmaW5kc1swXVsxXSwgaW5zZXJ0OiAnJ319KTtcblx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoJycsIHtsaW5lOiB0YXJnZXRfbGluZS5udW1iZXItMSwgY2g6IGZpbmRzWzBdWzBdfSwge2xpbmU6IHRhcmdldF9saW5lLm51bWJlci0xLCBjaDogZmluZHNbMF1bMV19KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHR0eXBlIFJlZ0RpY3Rpb25hcnkgPSB7XG5cdFx0W2tleTogc3RyaW5nXTogUmVnRXhwO1xuXHR9O1xuXHRcblx0bGV0IHN0YXJ0UmVnOiBSZWdEaWN0aW9uYXJ5ID0ge1xuXHRcdCd0YWJsZSc6IC9eXFxzKlxcfC8sXG5cdFx0J2NhbGxvdXQnOiAvXj4vLFxuXHR9O1xuXG5cdGxldCBtb2RlID0gaW5fdGFibGUgPyAndGFibGUnIDogJ2NhbGxvdXQnO1xuXHRsZXQgZmluZHNfbGluZXM6IG51bWJlcltdID0gW107XG5cdGxldCBmaW5kc19hbGw6IFtmcm9tOm51bWJlciwgdG86bnVtYmVyXVtdID0gW107XG5cdGZvciAobGV0IGk9dGFyZ2V0X2xpbmUubnVtYmVyOyBpPD1lZGl0b3IubGluZUNvdW50KCk7IGkrKyl7XG5cdFx0bGV0IGxpbmVfdGV4dCA9IGVkaXRvci5nZXRMaW5lKGktMSk7XG5cdFx0aWYgKCFzdGFydFJlZ1ttb2RlXS50ZXN0KGxpbmVfdGV4dCkpIGJyZWFrO1xuXHRcdHByaW50KGBsaW5lXyR7aX1fdGV4dDpgLCBsaW5lX3RleHQpXG5cdFx0bGV0IGZpbmRzID0gZmluZExpbmtJbkxpbmUoZmlsZV9iYXNlX25hbWUsIGxpbmVfdGV4dCk7XG5cdFx0aWYgKGZpbmRzLmxlbmd0aCA+IDApe1xuXHRcdFx0ZmluZHNfbGluZXMucHVzaCguLi5uZXcgQXJyYXkoZmluZHMubGVuZ3RoKS5maWxsKGkpKTtcblx0XHRcdGZpbmRzX2FsbC5wdXNoKC4uLmZpbmRzKTtcblx0XHR9XG5cdH1cblxuXHRmb3IgKGxldCBpPXRhcmdldF9saW5lLm51bWJlci0xOyBpPj0xOyBpLS0pe1xuXHRcdGxldCBsaW5lX3RleHQgPSBlZGl0b3IuZ2V0TGluZShpLTEpO1xuXHRcdGlmICghc3RhcnRSZWdbbW9kZV0udGVzdChsaW5lX3RleHQpKSBicmVhaztcblx0XHRwcmludChgbGluZV8ke2l9X3RleHQ6YCwgbGluZV90ZXh0KVxuXHRcdGxldCBmaW5kcyA9IGZpbmRMaW5rSW5MaW5lKGZpbGVfYmFzZV9uYW1lLCBsaW5lX3RleHQpO1xuXHRcdGlmIChmaW5kcy5sZW5ndGggPiAwKXtcblx0XHRcdGZpbmRzX2xpbmVzLnB1c2goLi4ubmV3IEFycmF5KGZpbmRzLmxlbmd0aCkuZmlsbChpKSk7XG5cdFx0XHRmaW5kc19hbGwucHVzaCguLi5maW5kcyk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKGZpbmRzX2FsbC5sZW5ndGggPT0gMCl7XG5cdFx0bmV3IE5vdGljZShgRmFpbCB0byBmaW5kIHRoZSBsaW5rLXRleHQgKGZvciBsaW5rcyBpbiAke21vZGV9KSwgcGxlYXNlIGRlbGV0ZSBpdCBtYW51YWxseSFgLCAwKTtcblx0XHRyZXR1cm47XG5cdH1cblx0ZWxzZSBpZihmaW5kc19hbGwubGVuZ3RoICE9IDEpe1xuXHRcdG5ldyBOb3RpY2UoYEZpbmQgbXVsdGlwbGUgc2FtZSBMaW5rIGluIGN1cnJlbnQgJHttb2RlfSwgcGxlYXNlIGRlbGV0ZSBpdCBtYW51YWxseSFgLCAwKTtcblx0XHRyZXR1cm47XG5cdH1cblx0ZWxzZXtcblx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKCcnLCB7bGluZTogZmluZHNfbGluZXNbMF0tMSwgY2g6IGZpbmRzX2FsbFswXVswXX0sIHtsaW5lOiBmaW5kc19saW5lc1swXS0xLCBjaDogZmluZHNfYWxsWzBdWzFdfSk7XG5cdH1cblxuXHRlZGl0b3IuZm9jdXMoKTtcbn1cblxuLy8gY29weSBpbWcgZmlsZSB0byBjbGlwYm9hcmRcbmV4cG9ydCBjb25zdCBoYW5kbGVyQ29weUZpbGUgPSBhc3luYyAoXG5cdEZpbGVCYXNlTmFtZTogc3RyaW5nLFxuXHRjdXJyZW50TWQ6IFRGaWxlLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW5cbikgPT4ge1xuXHRjb25zdCBmaWxlID0gZ2V0RmlsZUJ5QmFzZU5hbWUoY3VycmVudE1kLCBGaWxlQmFzZU5hbWUpIGFzIFRGaWxlO1xuXHRjb25zdCBiYXNlUGF0aCA9IChmaWxlLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5iYXNlUGF0aFxuXHRjb25zdCBmaWxlX2FiX3BhdGggPSBiYXNlUGF0aCArICcvJyArIGZpbGUucGF0aFxuXG5cdHRyeXtcblx0XHRjb3B5RmlsZVRvQ2xpcGJvYXJkQ01EKGZpbGVfYWJfcGF0aCk7XG5cdFx0bmV3IE5vdGljZShcIkNvcGllZCB0byBjbGlwYm9hcmQgIVwiLCBTVUNDRVNTX05PVElDRV9USU1FT1VUKTtcblx0fVxuXHRjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRuZXcgTm90aWNlKFwiRmFpbGQgdG8gY29weSB0aGUgZmlsZSAhXCIsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHR9XG5cblx0Ly8gY29weSBmaWxlIHRvIGNsaXBib2FyZFxuXHQvLyB0cnkge1xuXHRcdC8vIGNvbnNvbGUubG9nKGZpbGVfYWJfcGF0aClcblxuXHRcdC8vIFx1NTE0OFx1NjdFNVx1NzcwQlx1NTI2QVx1OEQzNFx1Njc3Rlx1NTE4NVx1NUJCOVxuXHRcdC8vIGNvbnN0IGNsaXBib2FyZEl0ZW1zID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkKCk7XG5cdFx0Ly8gY29uc29sZS5sb2coY2xpcGJvYXJkSXRlbXNbMF0pXG5cdFx0Ly8gbGV0IHRwID0gY2xpcGJvYXJkSXRlbXNbMF0udHlwZXNbMF1cblx0XHQvLyBjb25zb2xlLmxvZyh0cCwgY2xpcGJvYXJkSXRlbXNbMF0uZ2V0VHlwZSh0cCkpXG5cblx0XHQvLyBcdTU5MERcdTUyMzZcdTU2RkVcdTcyNDdcdUZGMENcdTRGNDZcdTY2MkZcdTUzRUFcdTgwRkRcdTRFRTVQTkdcdTVGNjJcdTVGMEZcdTdDOThcdThEMzRcdUZGMENcdTUzNzNcdTRGN0ZcdTU5MERcdTUyMzZcdTc2ODRcdTY2MkZHSUZcdTYyMTZcdTgwMDVKUEdcblx0XHQvLyBjb25zdCBpbWFnZSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlX2FiX3BhdGgpO1xuXHRcdC8vIGxldCBmaWxlX3R5cGU6IHN0cmluZyA9ICdpbWFnZS9wbmcnO1xuXHRcdC8vIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbaW1hZ2VdLCB7IHR5cGU6IGZpbGVfdHlwZSB9KTtcblx0XHQvLyBjb25zdCBpdGVtID0gbmV3IENsaXBib2FyZEl0ZW0oeyBbZmlsZV90eXBlXTogYmxvYiB9KTtcblx0XHQvLyBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKFtpdGVtXSk7XG5cblx0Ly8gXHRjb3B5RmlsZVRvQ2xpcGJvYXJkQ01EKGZpbGVfYWJfcGF0aCk7XG5cblx0Ly8gXHRuZXcgTm90aWNlKFwiQ29waWVkIHRvIGNsaXBib2FyZCAhXCIsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHQvLyB9XG5cdC8vIGNhdGNoIChlcnJvcikge1xuXHQvLyBcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHQvLyBcdG5ldyBOb3RpY2UoXCJGYWlsZCB0byBjb3B5IHRoZSBmaWxlICFcIiwgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCk7XG5cdC8vIH1cbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGZpbGUgdGFyZ2V0IGRlbGV0ZWQgZmlsZVxuICogQHJldHVybnMgcGFyZW50IGZvbGRlciBvciB1bmRlZmllbmRcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEZpbGVQYXJlbnRGb2xkZXIgPSAoZmlsZTogVEZpbGUpOiBURm9sZGVyIHwgdW5kZWZpbmVkID0+IHtcblx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdGlmIChmaWxlLnBhcmVudCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdHJldHVybiBmaWxlLnBhcmVudDtcblx0XHR9XG5cdH1cblx0cmV0dXJuO1xufTtcbi8qKlxuICpcbiAqIEBwYXJhbSBmaWxlXG4gKiBAcmV0dXJuc1xuICovXG5jb25zdCBvbmx5T25lRmlsZUV4aXN0cyA9IChmaWxlOiBURmlsZSk6IGJvb2xlYW4gPT4ge1xuXHRjb25zdCBmaWxlRm9sZGVyID0gZ2V0RmlsZVBhcmVudEZvbGRlcihmaWxlKSBhcyBURm9sZGVyO1xuXHRyZXR1cm4gZmlsZUZvbGRlci5jaGlsZHJlbi5sZW5ndGggPT09IDE7XG59O1xuXG5cbi8vIFx1OEMwM1x1NzUyOFx1N0NGQlx1N0VERlx1NTQ3RFx1NEVFNFx1NTkwRFx1NTIzNlx1NjU4N1x1NEVGNlx1NTIzMFx1N0NGQlx1N0VERlx1NTI2QVx1OEQzNFx1Njc3RlxuZnVuY3Rpb24gY29weUZpbGVUb0NsaXBib2FyZENNRChmaWxlUGF0aDogc3RyaW5nKSB7XG5cblx0aWYgKCFleGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGaWxlICR7ZmlsZVBhdGh9IGRvZXMgbm90IGV4aXN0YCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjYWxsYmFjayA9IChlcnJvcjogRXJyb3IgfCBudWxsLCBzdGRvdXQ6IHN0cmluZywgc3RkZXJyOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvciBleGVjdXRpbmcgY29tbWFuZDogJHtlcnJvci5tZXNzYWdlfWAsIFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQpO1xuXHRcdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgZXhlY3V0aW5nIGNvbW1hbmQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcblx0XHRcdHJldHVybjtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ2RhcndpbicpIHtcblx0XHQvLyBcdTg5RTNcdTUxQjNcdTY1QjlcdTY4NDgxOiBcdTRGMUFcdThDMDNcdTUxRkFGaW5kZXJcdUZGMENcdTRFQTdcdTc1MUZcdTc3QUNcdTk1RjRcdTc2ODRcdTdBOTdcdTUzRTNcdUZGMENcdTRGNDZcdTY2MkZcdThCRTVcdTU5MERcdTUyMzZcdTY0Q0RcdTRGNUNcdTVCOENcdTUxNjhcdTY2MkZcdTdDRkJcdTdFREZcdTdFQTdcdTUyMkJcdTc2ODRcdUZGMENcdTZDQTFcdTY3MDlcdTRFRkJcdTRGNTVcdTk2NTBcdTUyMzZcblx0XHRleGVjU3luYyhgb3BlbiAtUiBcIiR7ZmlsZVBhdGh9XCJgKTtcbiAgICAgICAgZXhlY1N5bmMoYG9zYXNjcmlwdCAtZSAndGVsbCBhcHBsaWNhdGlvbiBcIlN5c3RlbSBFdmVudHNcIiB0byBrZXlzdHJva2UgXCJjXCIgdXNpbmcgY29tbWFuZCBkb3duJ2ApO1xuICAgICAgICBleGVjU3luYyhgb3Nhc2NyaXB0IC1lICd0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiIHRvIGtleXN0cm9rZSBcIndcIiB1c2luZyBjb21tYW5kIGRvd24nYCk7XG5cdFx0ZXhlY1N5bmMoYG9wZW4gLWEgXCJPYnNpZGlhbi5hcHBcImApO1xuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIFx1NkQ0Qlx1OEJENVx1NTIwN1x1NjM2Mlx1OEY5M1x1NTE2NVx1NkNENVx1NjVCOVx1Njg0ODogXHU2QTIxXHU2MkRGU2hpZnRcdTk1MkVcdTYzMDlcdTRFMEJcdUZGMENcdTRGNDZcdTY2MkZcdTU5MzFcdThEMjVcdTRFODZcblx0XHQvLyBleGVjU3luYyhgb3Nhc2NyaXB0IC1lICd0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiIHRvIGtleSBkb3duIHNoaWZ0J2ApO1xuXHRcdC8vIGV4ZWNTeW5jKGBvc2FzY3JpcHQgLWUgJ2RlbGF5IDAuMDUnYCk7XG5cdFx0Ly8gZXhlY1N5bmMoYG9zYXNjcmlwdCAtZSAndGVsbCBhcHBsaWNhdGlvbiBcIlN5c3RlbSBFdmVudHNcIiB0byBrZXkgdXAgc2hpZnQnYCk7XG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIFx1NTNFNlx1NEUwMFx1NzlDRFx1ODlFM1x1NTFCM1x1NjVCOVx1Njg0OFx1RkYwQ1x1NEUwRFx1NEYxQVx1OEMwM1x1NTFGQUZpbmRlclx1RkYwQ1x1NEY0Nlx1NjYyRlx1NTkwRFx1NTIzNlx1NzY4NFx1NjU4N1x1NEVGNlx1NjVFMFx1NkNENVx1N0M5OFx1OEQzNFx1NTIzMHdvcmRcdTYyMTZcdTgwMDVcdTVGQUVcdTRGRTFcdTRFMkRcblx0XHQvLyBjb25zdCBhcHBsZVNjcmlwdCA9IGBcblx0XHQvLyBcdG9uIHJ1biBhcmdzXG5cdFx0Ly8gXHRcdHNldCB0aGUgY2xpcGJvYXJkIHRvIFBPU0lYIGZpbGUgKGZpcnN0IGl0ZW0gb2YgYXJncylcblx0XHQvLyBcdGVuZFxuXHRcdC8vIFx0YDtcblx0XHQvLyBleGVjKGBvc2FzY3JpcHQgLWUgJyR7YXBwbGVTY3JpcHR9JyBcIiR7ZmlsZVBhdGh9XCJgLCBjYWxsYmFjayk7XG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLnBsYXRmb3JtID09PSAnbGludXgnKSB7XG5cdFx0Ly8gXHU3NkVFXHU1MjREXHU2NUI5XHU2ODQ4XG5cdFx0Ly8geGNsaXAgLXNlbGVjdGlvbiBjbGlwYm9hcmQgLXQgJChmaWxlIC0tbWltZS10eXBlIC1iIC9wYXRoL3RvL3lvdXIvZmlsZSkgLWkgL3BhdGgvdG8veW91ci9maWxlXG4gICAgICAgIC8vIGV4ZWMoYHhjbGlwIC1zZWxlY3Rpb24gYyA8ICR7ZmlsZVBhdGh9YCwgY2FsbGJhY2spO1xuXHRcdC8vIGV4ZWMoYHhjbGlwIC1zZWxlY3Rpb24gY2xpcGJvYXJkIC10ICQoZmlsZSAtLW1pbWUtdHlwZSAtYiBcIiR7ZmlsZVBhdGh9XCIpIC1pIFwiJHtmaWxlUGF0aH1cImAsIGNhbGxiYWNrKTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicpIHtcbiAgICAgICAgZXhlYyhgcG93ZXJzaGVsbCAtY29tbWFuZCBcIlNldC1DbGlwYm9hcmQgLVBhdGggJyR7ZmlsZVBhdGh9J1wiYCwgY2FsbGJhY2spO1xuICAgIH1cbn1cblxuY29uc3QgZmluZExpbmtJbkxpbmUgPSAoZmlsZV9uYW1lOiBzdHJpbmcsIGxpbmVfdGV4dDogc3RyaW5nKSA9Pntcblx0Y29uc3QgZmlsZV9uYW1lX21kbGluayA9IGZpbGVfbmFtZS5yZXBsYWNlKC8gL2csICclMjAnKTtcblx0bGV0IHJlZ1dpa2lMaW5rID0gL1xcIVxcW1xcW1teXFxbXFxdXSo/XFxdXFxdL2c7XG4gICAgbGV0IHJlZ01kTGluayA9IC9cXCFcXFtbXlxcW1xcXV0qP1xcXVxcKFteXFxzXFwpXFwoXFxbXFxdXFx7XFx9J10qXFwpL2c7XG5cdHByaW50KCd0YXJnZXRfbmFtZSAoV0lLSS9NRCk6JywgZmlsZV9uYW1lLCBmaWxlX25hbWVfbWRsaW5rKVxuXG5cdC8vIGNvbnNvbGUubG9nKCdzZWFyY2ggaW4gbGluZV90ZXh0OicsIGxpbmVfdGV4dClcblx0bGV0IHNlYXJjaF9yZXN1bHQ6IFtmcm9tOm51bWJlciwgdG86bnVtYmVyXVtdID0gW11cblx0aWYgKGxpbmVfdGV4dC5pbmNsdWRlcyhmaWxlX25hbWUpKXtcblx0XHR3aGlsZSh0cnVlKXtcblx0XHRcdGxldCBtYXRjaCA9IHJlZ1dpa2lMaW5rLmV4ZWMobGluZV90ZXh0KTtcblx0XHRcdGlmKCFtYXRjaCkgYnJlYWs7XG5cdFx0XHRsZXQgbWF0Y2hlZF9saW5rID0gbWF0Y2hbMF07XG5cdFx0XHRwcmludCgnbWF0Y2hlZF9saW5rOicsIG1hdGNoZWRfbGluaylcblx0XHRcdHByaW50KCdtYXRjaGVkX2xpbmsuaW5jbHVkZXMoZmlsZV9uYW1lKScsIG1hdGNoZWRfbGluay5pbmNsdWRlcyhmaWxlX25hbWUpKVxuXHRcdFx0aWYgKG1hdGNoZWRfbGluay5pbmNsdWRlcyhmaWxlX25hbWUpKXtcblx0XHRcdFx0c2VhcmNoX3Jlc3VsdC5wdXNoKFttYXRjaC5pbmRleCwgbWF0Y2guaW5kZXgrbWF0Y2hlZF9saW5rLmxlbmd0aF0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmIChsaW5lX3RleHQuaW5jbHVkZXMoZmlsZV9uYW1lX21kbGluaykpe1xuXHRcdHdoaWxlKHRydWUpe1xuXHRcdFx0bGV0IG1hdGNoID0gcmVnTWRMaW5rLmV4ZWMobGluZV90ZXh0KTtcblx0XHRcdGlmKCFtYXRjaCkgYnJlYWs7XG5cdFx0XHRsZXQgbWF0Y2hlZF9saW5rID0gbWF0Y2hbMF07XG5cdFx0XHRwcmludCgnbWF0Y2hlZF9saW5rOicsIG1hdGNoZWRfbGluaylcblx0XHRcdHByaW50KCdtYXRjaGVkX2xpbmsuaW5jbHVkZXMoZmlsZV9uYW1lX21kbGluayknLCBtYXRjaGVkX2xpbmsuaW5jbHVkZXMoZmlsZV9uYW1lX21kbGluaykpXG5cdFx0XHRpZiAobWF0Y2hlZF9saW5rLmluY2x1ZGVzKGZpbGVfbmFtZV9tZGxpbmspKXtcblx0XHRcdFx0c2VhcmNoX3Jlc3VsdC5wdXNoKFttYXRjaC5pbmRleCwgbWF0Y2guaW5kZXgrbWF0Y2hlZF9saW5rLmxlbmd0aF0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gc2VhcmNoX3Jlc3VsdDtcbn1cblxuXG5leHBvcnQgY29uc3QgaGFuZGxlclJlbmFtZUZpbGUgPSAoXG5cdEZpbGVCYXNlTmFtZTogc3RyaW5nLFxuXHRjdXJyZW50TWQ6IFRGaWxlLFxuXHRwbHVnaW46IEF0dGFjaEZsb3dQbHVnaW5cbikgPT4ge1xuXHRjb25zdCB0YXJnZXRfZmlsZSA9IGdldEZpbGVCeUJhc2VOYW1lKGN1cnJlbnRNZCwgRmlsZUJhc2VOYW1lKSBhcyBURmlsZTtcblx0bGV0IHBhdGggPSB0YXJnZXRfZmlsZS5wYXRoO1xuXHRsZXQgbmFtZSA9IHRhcmdldF9maWxlLm5hbWU7XG5cdGxldCB0YXJnZXRfZm9sZGVyID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sZW5ndGgtbmFtZS5sZW5ndGgpO1xuXHRsZXQgZmlsZV90eXBlID0gbmFtZS5zcGxpdCgnLicpLnBvcCgpIGFzIHN0cmluZztcblx0bmV3IFJlbmFtZU1vZGFsKHBsdWdpbi5hcHAsIFxuXHRcdHRhcmdldF9mb2xkZXIsIFxuXHRcdG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUubGVuZ3RoLWZpbGVfdHlwZS5sZW5ndGgtMSksIFxuXHRcdGZpbGVfdHlwZSwgXG5cdFx0KHJlc3VsdCkgPT4ge1xuXHRcdGlmICghcmVzdWx0KSByZXR1cm47XG5cdFx0aWYocmVzdWx0PT1wYXRoKSByZXR1cm47XG5cdFx0YXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHJlc3VsdClcblx0XHQudGhlbigoZXhpc3RzKSA9PiB7XG5cdFx0XHRpZihleGlzdHMpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRmFpbCB0byByZW5hbWUgZm9yIHRoZXJlIGFscmVheSBleGlzdCBmaWxlICR7cmVzdWx0fWApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cGx1Z2luLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKHRhcmdldF9maWxlLCBgJHtyZXN1bHR9YCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pLm9wZW4oKTtcbn1cblxuXG5cbmV4cG9ydCBjbGFzcyBSZW5hbWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cmVzdWx0OiBzdHJpbmc7XG5cdGZvbGRlcjogc3RyaW5nO1xuXHRuYW1lOiBzdHJpbmc7XG5cdGZpbGV0eXBlOiBzdHJpbmc7XG5cdG9uU3VibWl0OiAocmVzdWx0OiBzdHJpbmcpID0+IHZvaWQ7XG4gIFxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZm9sZGVyOnN0cmluZywgbmFtZTpzdHJpbmcsIGZpbGV0eXBlOnN0cmluZywgb25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZCkge1xuXHQgIHN1cGVyKGFwcCk7XG5cdCAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHQgIHRoaXMuZm9sZGVyID0gZm9sZGVyO1xuXHQgIHRoaXMubmFtZSA9IG5hbWU7XG5cdCAgdGhpcy5maWxldHlwZSA9IGZpbGV0eXBlO1xuXHR9XG4gIFxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0bGV0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIlJlbmFtZTpcIilcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5uYW1lKVxuXHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5yZXN1bHQgPSBgJHt0aGlzLmZvbGRlcn0ke3ZhbHVlfS4ke3RoaXMuZmlsZXR5cGV9YDtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHQvLyBcdTRGN0YgRE9NIFx1NjcwOVx1OERCM1x1NTkxRlx1NzY4NFx1NjVGNlx1OTVGNFx1NkUzMlx1NjdEM1x1ODg2OFx1NTM1NVx1NTE0M1x1N0QyMFxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0bGV0IGlucHV0Qm94ID0gc2V0dGluZy5zZXR0aW5nRWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInRleHRcIl0nKTtcblx0XHRcdGlmIChpbnB1dEJveCAmJiBpbnB1dEJveC5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdGxldCBmb2xkZXJfaW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcblx0XHRcdFx0Zm9sZGVyX2luZGljYXRvci5pbm5lclRleHQgPSBgJHt0aGlzLmZvbGRlcn1gO1xuXHRcdFx0XHRmb2xkZXJfaW5kaWNhdG9yLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzRweCc7ICAvLyBcdTUzRUZcdTRFRTVcdTY4MzlcdTYzNkVcdTk3MDBcdTg5ODFcdThDMDNcdTY1NzRcdTk1RjRcdThERERcblx0XHRcdFx0aW5wdXRCb3gucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZm9sZGVyX2luZGljYXRvciwgaW5wdXRCb3gpO1xuXG5cdFx0XHRcdGxldCBmaWxlX3R5cGVfaW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcblx0XHRcdFx0ZmlsZV90eXBlX2luZGljYXRvci5pbm5lclRleHQgPSBgLiR7dGhpcy5maWxldHlwZX1gO1xuXHRcdFx0XHRmaWxlX3R5cGVfaW5kaWNhdG9yLnN0eWxlLm1hcmdpbkxlZnQgPSAnNHB4JzsgIC8vIFx1NTNFRlx1NEVFNVx1NjgzOVx1NjM2RVx1OTcwMFx1ODk4MVx1OEMwM1x1NjU3NFx1OTVGNFx1OERERFxuXHRcdFx0XHRpbnB1dEJveC5hZnRlcihmaWxlX3R5cGVfaW5kaWNhdG9yKTtcblxuXHRcdFx0XHQvLyBcdTgzQjdcdTUzRDZcdThCQkVcdTdGNkVcdTc1NENcdTk3NjJcdTc2ODRcdTRFMEFcdTdFQTdcdTUxNDNcdTdEMjAgXG5cdFx0XHRcdGxldCBwYXJlbnRFbCA9IHNldHRpbmcuc2V0dGluZ0VsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdGlmIChwYXJlbnRFbCkge1xuXHRcdFx0XHRcdC8vIFx1NEY3Rlx1NTE3Nlx1NUI1MFx1NTE0M1x1N0QyMFx1NUM0NVx1NEUyRFx1NjYzRVx1NzkzQVxuXHRcdFx0XHRcdHBhcmVudEVsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0XHRcdFx0cGFyZW50RWwuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJztcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBcdThGNkNcdTYzNjJpbnB1dEJveFx1N0M3Qlx1NTc4Qlx1NUU3Nlx1OTAwOVx1NjJFOVx1OEY5M1x1NTE2NVx1Njg0Nlx1NzY4NFx1NjU4N1x1NjcyQ1xuXHRcdFx0XHRsZXQgaW5wdXRFbGVtID0gaW5wdXRCb3ggYXMgSFRNTElucHV0RWxlbWVudDtcblx0XHRcdFx0aW5wdXRFbGVtLnNlbGVjdCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIlx1NjVFMFx1NkNENVx1NjI3RVx1NTIzMFx1NjU4N1x1NjcyQ1x1OEY5M1x1NTE2NVx1Njg0NlwiKTtcblx0XHRcdH1cblx0XHR9LCAwKTtcblxuXHRcdC8vIEVudGVyIHRvIHN1Ym1pdFxuXHRcdHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sIFwiRW50ZXJcIiwgKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2dC5pc0NvbXBvc2luZykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHR0aGlzLm9uU3VibWl0KHRoaXMucmVzdWx0KTtcblx0XHR9KTtcblx0fVxuICBcblx0b25DbG9zZSgpIHtcblx0ICBsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdCAgY29udGVudEVsLmVtcHR5KCk7XG5cdH1cbiAgfSIsICJpbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgQXR0YWNoRmxvd1BsdWdpbiBmcm9tIFwic3JjL21haW5cIjtcbmNvbnN0IFNVQ0NFU1NfTk9USUNFX1RJTUVPVVQgPSAxODAwO1xuLyoqXG4gKiBEZWxldGUgYXR0YWNobWVudFxuICogQHBhcmFtIGZpbGVcbiAqL1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUZpbGUgPSBhc3luYyAoXG5cdGZpbGU6IFRGaWxlIHwgVEZvbGRlcixcblx0cGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luXG4pID0+IHtcblx0Y29uc3QgZGVsZXRlT3B0aW9uID0gcGx1Z2luLnNldHRpbmdzLmRlbGV0ZU9wdGlvbjtcblx0dHJ5IHtcblx0XHRpZiAoZGVsZXRlT3B0aW9uID09PSBcIi50cmFzaFwiKSB7XG5cdFx0XHRhd2FpdCBhcHAudmF1bHQudHJhc2goZmlsZSwgZmFsc2UpO1xuXHRcdH0gZWxzZSBpZiAoZGVsZXRlT3B0aW9uID09PSBcInN5c3RlbS10cmFzaFwiKSB7XG5cdFx0XHRhd2FpdCBhcHAudmF1bHQudHJhc2goZmlsZSwgdHJ1ZSk7XG5cdFx0fSBlbHNlIGlmIChkZWxldGVPcHRpb24gPT09IFwicGVybWFuZW50XCIpIHtcblx0XHRcdGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZmlsZSk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdG5ldyBOb3RpY2UoXCJGYWlsZCB0byBkZWxldGUgdGhlIGZpbGUvZm9sZGVyICFcIiwgU1VDQ0VTU19OT1RJQ0VfVElNRU9VVCk7XG5cdH1cbn07XG4vKipcbiAqIERlbGV0ZSBub3RlXG4gKiBAcGFyYW0gZmlsZVxuICovXG4vKiBleHBvcnQgY29uc3QgZGVsZXRlTm90ZSA9IChmaWxlOiBURmlsZSkgPT4ge1xuXHQvLyBAdHMtaWdub3JlXG5cdGFwcC5maWxlTWFuYWdlci5wcm9tcHRGb3JEZWxldGlvbihmaWxlKTtcbn07ICovXG4iLCAiaW1wb3J0IEF0dGFjaEZsb3dQbHVnaW4gZnJvbSBcInNyYy9tYWluXCI7XG5pbXBvcnQgeyBkZWxldGVBbGxBdHRhY2hzIH0gZnJvbSBcInNyYy9vcHRpb25zL2RlbGVsZUFsbEF0dGFjaHNJblRoZU5vdGVcIjtcblxuZXhwb3J0IGNvbnN0IGFkZENvbW1hbmQgPSAobXlQbHVnaW46IEF0dGFjaEZsb3dQbHVnaW4pID0+IHtcblx0bXlQbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwiY2xlYXItYWxsLWF0dGFjaG1lbnRzLWluLWN1cnJlbnQtZmlsZVwiLFxuXHRcdG5hbWU6IFwiY2xlYXIgYWxsIGF0dGFjaG1lbnRzIGluIGN1cnJlbnQgZmlsZVwiLFxuXHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRkZWxldGVBbGxBdHRhY2hzKG15UGx1Z2luKTtcblx0XHR9LFxuXHR9KTtcbn07XG4iLCAiaW1wb3J0IEF0dGFjaEZsb3dQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHNldERlYnVnIH0gZnJvbSAnLi91dGlsJztcblxuXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXR0YWNoRmxvd1NldHRpbmdzIHtcbiAgICBkZWxldGVPcHRpb246IHN0cmluZztcbiAgICBsb2dzTW9kYWw6IGJvb2xlYW47XG4gICAgZHJhZ1Jlc2l6ZTogYm9vbGVhbjtcbiAgICBjbGlja1ZpZXc6IGJvb2xlYW47XG4gICAgZGVidWc6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBBdHRhY2hGbG93U2V0dGluZ3MgPSB7XG4gICAgZGVsZXRlT3B0aW9uOiAnLnRyYXNoJyxcbiAgICBsb2dzTW9kYWw6IHRydWUsXG4gICAgZHJhZ1Jlc2l6ZTogdHJ1ZSxcbiAgICBjbGlja1ZpZXc6IGZhbHNlLFxuICAgIGRlYnVnOiBmYWxzZSxcbn07XG5cblxuZXhwb3J0IGNsYXNzIEF0dGFjaEZsb3dTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXG4gICAgcGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luO1xuXG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBBdHRhY2hGbG93UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdBdHRhY2hGbG93IHBsdWdpbiBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVsZXRlZCBBdHRhY2htZW50IERlc3RpbmF0aW9uJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZWxlY3Qgd2hlcmUgeW91IHdhbnQgQXR0YWNobWVudHMgdG8gYmUgbW92ZWQgb25jZSB0aGV5IGFyZSBkZWxldGVkJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ3Blcm1hbmVudCcsICdEZWxldGUgUGVybWFuZW50bHknKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJy50cmFzaCcsICdNb3ZlIHRvIE9ic2lkaWFuIFRyYXNoJyk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdzeXN0ZW0tdHJhc2gnLCAnTW92ZSB0byBTeXN0ZW0gVHJhc2gnKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVPcHRpb24pO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlT3B0aW9uID0gb3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJEcmFnIFRvIFJlc2l6ZSBJbWFnZXNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiXHU2MkQ2XHU2MkZEXHU4QzAzXHU2NTc0XHU1NkZFXHU3MjQ3XHU1OTI3XHU1QzBGXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHJhZ1Jlc2l6ZSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHJhZ1Jlc2l6ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkNsaWNrIHRvIFZpZXcgSW1hZ2VzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlx1NzBCOVx1NTFGQlx1NTZGRVx1NzI0N1x1NTNGM1x1NTM0QVx1NTMzQVx1NTdERlx1NjdFNVx1NzcwQlx1NTkyN1x1NTZGRVwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNsaWNrVmlldylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpY2tWaWV3ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiUHJpbnQgRGVidWcgSW5mb3JtYXRpb25cIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiXHU2M0E3XHU1MjM2XHU1M0YwXHU4RjkzXHU1MUZBXHU4QzAzXHU4QkQ1XHU0RkUxXHU2MDZGXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWcpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXREZWJ1Zyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XG4iLCAiLyoqXG4gKiBnZXQgbW91c2UgZXZlbnQgdGFyZ2V0XG4gKiBAcGFyYW0gZXZlbnQgXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRNb3VzZUV2ZW50VGFyZ2V0ID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogSFRNTEVsZW1lbnQgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIHJldHVybiB0YXJnZXQ7XG59XG4iLCAiaW1wb3J0IHsgTW9kYWwsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgQXR0YWNoRmxvd1BsdWdpbiBmcm9tIFwic3JjL21haW5cIjtcbmltcG9ydCB7XG5cdGRlbGV0ZUFsbEF0dGFjaHMsXG5cdGdldFJlZmVuY2VkTGlua0NvdW50LFxufSBmcm9tIFwic3JjL29wdGlvbnMvZGVsZWxlQWxsQXR0YWNoc0luVGhlTm90ZVwiO1xuaW1wb3J0IHsgZGVsZXRlRmlsZSB9IGZyb20gXCJzcmMvdXRpbHMvZGVsZXRlRmlsZVwiO1xuXG5leHBvcnQgY2xhc3MgRGVsZXRlQWxsTG9nc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRub3RlOiBURmlsZTtcblx0bXlQbHVnaW46IEF0dGFjaEZsb3dQbHVnaW47XG5cdGNvbnN0cnVjdG9yKG5vdGU6IFRGaWxlLCBteVBsdWdpbjogQXR0YWNoRmxvd1BsdWdpbikge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5ub3RlID0gbm90ZTtcblx0XHR0aGlzLm15UGx1Z2luID0gbXlQbHVnaW47XG5cdH1cblx0Z2V0TG9nKCk6IHN0cmluZyB7XG5cdFx0Y29uc3QgcmVmZXJlbmNlTWVzc2FnZSA9IGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiJHt0aGlzLm5vdGUuYmFzZW5hbWV9Lm1kXCI/XFxuXFxuSXQgd2lsbCBiZSBtb3ZlZCB0byB5b3VyICR7dGhpcy5teVBsdWdpbi5zZXR0aW5ncy5kZWxldGVPcHRpb259LmA7XG5cdFx0cmV0dXJuIHJlZmVyZW5jZU1lc3NhZ2U7XG5cdH1cblx0c2hvd0xvZ3MoKSB7XG5cdFx0Y29uc3QgbG9ncyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIpO1xuXHRcdGxvZ3MuYWRkQ2xhc3MoXCJhdHRhY2htZW50LWZsb3ctbG9nXCIpO1xuXHRcdGxvZ3Muc2V0VGV4dCh0aGlzLmdldExvZygpKTtcblx0fVxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29uc3QgbXlNb2RhbCA9IHRoaXM7XG5cdFx0Y29uc3QgaGVhZGVyV3JhcHBlciA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiKTtcblx0XHRoZWFkZXJXcmFwcGVyLmFkZENsYXNzKFwiYXR0YWNobWVudC1mbG93LWNlbnRlci13cmFwcGVyXCIpO1xuXHRcdHRoaXMuc2hvd0xvZ3MoKTtcblx0XHRjb25zdCByZWZlcmVuY2VkTWVzc2FnZVdyYXBwZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJzcGFuXCIpO1xuXHRcdHJlZmVyZW5jZWRNZXNzYWdlV3JhcHBlci5zdHlsZS5jb2xvciA9IFwicmVkXCI7XG5cdFx0Y29uc3QgcmVmZXJlbmNlZE1lc3NhZ2UgPSBgVGhlcmUgYXJlKGlzKSBjdXJyZW50bHkgIFske2dldFJlZmVuY2VkTGlua0NvdW50KCl9XSAgbm9uLW11bHRpLXJlZmVyZW5jZWQgbGluayhzKSBwb2ludGluZyB0byB0aGlzIG5vdGUuYDtcblx0XHRyZWZlcmVuY2VkTWVzc2FnZVdyYXBwZXIuYXBwZW5kKHJlZmVyZW5jZWRNZXNzYWdlKTtcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRjb25zdCBidXR0b25XcmFwcGVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIikgYXMgSFRNTERpdkVsZW1lbnQ7XG5cdFx0YnV0dG9uV3JhcHBlci5hZGRDbGFzcyhcImF0dGFjaG1lbnQtZmxvdy1jZW50ZXItd3JhcHBlclwiKTtcblx0XHRjb25zdCBoZWFkZXJFbCA9IGhlYWRlcldyYXBwZXIuY3JlYXRlRWwoXCJoMVwiLCB7XG5cdFx0XHR0ZXh0OiBcIkRlbGV0ZSB0aGUgZmlsZSBhbmQgaXRzIGFsbCBhdHRhY2htZW50cyAtIGxvZ3MgXCIsXG5cdFx0fSk7XG5cdFx0aGVhZGVyRWwuYWRkQ2xhc3MoXCJtb2RhbC10aXRsZVwiKTtcblx0XHR0aGlzLnNob3dDb25maXJtQnV0dG9uKGJ1dHRvbldyYXBwZXIsIG15TW9kYWwpO1xuXHRcdHRoaXMuc2hvd0NhbmNlbEJ0bihidXR0b25XcmFwcGVyLCBteU1vZGFsKTtcblx0fVxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdHNob3dDYW5jZWxCdG4oYnV0dG9uV3JhcHBlcjogSFRNTERpdkVsZW1lbnQsIG15TW9kYWw6IE1vZGFsKSB7XG5cdFx0Ly8gLS0tLS0tLS1jbG9zZUJ1dHRvbi0tLS0tLS0tXG5cdFx0Y29uc3QgY2xvc2VCdXR0b24gPSBidXR0b25XcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ2FuY2VsXCIsXG5cdFx0fSk7XG5cdFx0Y2xvc2VCdXR0b24uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIkNhbmNlbCB0aGUgb3BlcmF0aW9uXCIpO1xuXHRcdGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0XHRteU1vZGFsLmNsb3NlKCk7XG5cdFx0fSk7XG5cdH1cblx0c2hvd0NvbmZpcm1CdXR0b24oYnV0dG9uV3JhcHBlcjogSFRNTERpdkVsZW1lbnQsIG15TW9kYWw6IE1vZGFsKSB7XG5cdFx0Y29uc3QgcmVtb3ZlTGlua0J1dHRvbiA9IGJ1dHRvbldyYXBwZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDb25maXJtXCIsXG5cdFx0fSk7XG5cdFx0cmVtb3ZlTGlua0J1dHRvbi5zZXRBdHRyaWJ1dGUoXG5cdFx0XHRcImFyaWEtbGFiZWxcIixcblx0XHRcdFwiQ29udGludWUgdG8gZGVsZXRlIGN1cnJlbnQgZmlsZSBhbmQgaXRzIGFsbCBub24tbXVsdGktcmVmZXJlbmNlZCBhdHRhY2htZW50c1wiXG5cdFx0KTtcblx0XHRyZW1vdmVMaW5rQnV0dG9uLmFkZENsYXNzKFwibW9kLXdhcm5pbmdcIik7XG5cdFx0cmVtb3ZlTGlua0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuXHRcdFx0ZGVsZXRlRmlsZSh0aGlzLm5vdGUsIHRoaXMubXlQbHVnaW4pO1xuXHRcdFx0ZGVsZXRlQWxsQXR0YWNocyh0aGlzLm15UGx1Z2luKTtcblx0XHRcdG15TW9kYWwuY2xvc2UoKTtcblx0XHR9KTtcblx0fVxufVxuIiwgIi8vIFRoaXMgZmlsZSBpcyBjb3BpZWQgZnJvbSByZXBvOiBodHRwczovL2dpdGh1Yi5jb20vTm9tYXJDdWIvb2JzaWRpYW4tY29weS11cmwtaW4tcHJldmlld1xuXG4vLyBNSVQgTGljZW5zZVxuLy8gQ29weXJpZ2h0IChjKSAyMDIyIE5vbWFyQ3ViXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG4vLyBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4vLyBTT0ZUV0FSRS5cblxuaW1wb3J0IHsgQXBwLCBFZGl0b3IsIEVkaXRvclBvc2l0aW9uLCBGaWxlU3lzdGVtQWRhcHRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5jb25zdCBsb2FkSW1hZ2VCbG9iVGltZW91dCA9IDUwMDA7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWxlY3Ryb25XaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIFdFQlZJRVdfU0VSVkVSX1VSTDogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9ySW50ZXJuYWxBcGkgZXh0ZW5kcyBFZGl0b3Ige1xuICAgIHBvc0F0TW91c2UoZXZlbnQ6IE1vdXNlRXZlbnQpOiBFZGl0b3JQb3NpdGlvbjtcbiAgICBnZXRDbGlja2FibGVUb2tlbkF0KHBvc2l0aW9uOiBFZGl0b3JQb3NpdGlvbik6IHtcbiAgICAgICAgdGV4dDogc3RyaW5nXG4gICAgfSB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVN5c3RlbUFkYXB0ZXJXaXRoSW50ZXJuYWxBcGkgZXh0ZW5kcyBGaWxlU3lzdGVtQWRhcHRlciB7XG4gICAgb3BlbihwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwV2l0aERlc2t0b3BJbnRlcm5hbEFwaSBleHRlbmRzIEFwcCB7XG4gICAgb3BlbldpdGhEZWZhdWx0QXBwKHBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gICAgc2hvd0luRm9sZGVyKHBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdGVuZXIge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgKHRoaXM6IERvY3VtZW50LCBldjogRXZlbnQpOiBhbnk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRoVGltZW91dDxUPihtczogbnVtYmVyLCBwcm9taXNlOiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiB7XG4gICAgY29uc3QgdGltZW91dCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgICAgICAgICByZWplY3QoYHRpbWVkIG91dCBhZnRlciAke21zfSBtc2ApXG4gICAgICAgIH0sIG1zKVxuICAgIH0pXG4gICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICAgIHByb21pc2UsXG4gICAgICAgIHRpbWVvdXRcbiAgICBdKSBhcyBQcm9taXNlPFQ+XG59XG5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlXG4vLyBvcHRpb24/OiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9odG1sLXRvLWltYWdlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZEltYWdlQmxvYihpbWdTcmM6IHN0cmluZyk6IFByb21pc2U8QmxvYj4ge1xuICAgIGNvbnN0IGxvYWRJbWFnZUJsb2JDb3JlID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8QmxvYj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltYWdlLmNyb3NzT3JpZ2luID0gXCJhbm9ueW1vdXNcIjtcbiAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSE7XG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgY2FudmFzLnRvQmxvYigoYmxvYjogQmxvYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJsb2IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltYWdlLm9uZXJyb3IgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goaW1hZ2Uuc3JjLCB7IFwibW9kZVwiOiBcIm5vLWNvcnNcIiB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInBvc3NpYmxlIENPUlMgdmlvbGF0aW9uLCBmYWxsaW5nIGJhY2sgdG8gYWxsT3JpZ2lucyBwcm94eVwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dudW5zL2FsbE9yaWdpbnNcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IGxvYWRJbWFnZUJsb2IoYGh0dHBzOi8vYXBpLmFsbG9yaWdpbnMud2luL3Jhdz91cmw9JHtlbmNvZGVVUklDb21wb25lbnQoaW1nU3JjKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShibG9iKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW1hZ2Uuc3JjID0gaW1nU3JjO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiB3aXRoVGltZW91dChsb2FkSW1hZ2VCbG9iVGltZW91dCwgbG9hZEltYWdlQmxvYkNvcmUoKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9uRWxlbWVudChcbiAgICBlbDogRG9jdW1lbnQsXG4gICAgZXZlbnQ6IGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXAsXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcbiAgICBsaXN0ZW5lcjogTGlzdGVuZXIsXG4gICAgb3B0aW9ucz86IHsgY2FwdHVyZT86IGJvb2xlYW47IH1cbikge1xuICAgIGVsLm9uKGV2ZW50LCBzZWxlY3RvciwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiAoKSA9PiBlbC5vZmYoZXZlbnQsIHNlbGVjdG9yLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQThFOzs7QUNBOUUsdUJBQXVDOzs7QUNDdkMsc0JBQTREO0FBSTVELDJCQUErQjtBQUMvQixnQkFBMkI7QUFLM0IsdUJBQW9DO0FBRTdCLElBQUksUUFBZ0I7QUFDM0IsSUFBTSx5QkFBeUI7QUFFeEIsSUFBTSxRQUFNLENBQUMsWUFBa0IsbUJBQXlCO0FBQzNELE1BQUksT0FBTztBQUNQLFlBQVEsSUFBSSxTQUFTLEdBQUcsY0FBYztBQUFBLEVBQzFDO0FBQ0o7QUFFTyxrQkFBa0IsT0FBZ0I7QUFDckMsVUFBUTtBQUNaO0FBUU8sSUFBTSxxQkFBcUIsQ0FDakMsYUFDQSxjQUN5QztBQUV6QyxRQUFNLGdCQUFnQixJQUFJLGNBQWM7QUFDeEMsTUFBSTtBQUVKLE1BQUksU0FBeUI7QUFBQSxJQUM1QixPQUFPO0FBQUEsSUFDUCxRQUFRLENBQUM7QUFBQSxFQUNWO0FBQ0EsTUFBSSxTQUFTO0FBQ2IsYUFBVyxDQUFDLFFBQVEsVUFBVSxPQUFPLFFBQVEsYUFBYSxH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
