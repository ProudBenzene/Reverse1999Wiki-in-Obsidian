```dataviewjs
// 修改标签
const tag = "#金句"
// 获取 Obsidian 中的所有 Markdown 文件
let folderpath="000-箱的构造/箱中memos"
const files = app.vault.getMarkdownFiles().filter(file=>file.path.includes(folderpath))
// 将带有标签的文件筛选出来
const taggedFiles = new Set(files.reduce((acc, file) => {
    const tags = app.metadataCache.getFileCache(file).tags
    if (tags) {
      let filtered = tags.filter(t => t.tag === tag)
      if (filtered) {
        return […acc, file]
      }
    }
    return acc
}, []))

// 创建带有标签的行数组
const arr = Array.from(taggedFiles).map(async(file) => {
  const content = await app.vault.cachedRead(file)
  const lines = content.split("\n").filter(line => line.includes(tag))
  return lines
})

Promise.all(arr).then(values => {
  const lines = values.flat()
  let randomline = lines[Math.floor(Math.random() * lines.length)];
  dv.span(randomline);
})
```